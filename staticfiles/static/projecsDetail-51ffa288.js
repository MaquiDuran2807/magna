import{_ as b,u as h}from"./@tanstack/react-query-devtools-5e1ae0d5.js";import{j as s}from"./@react-pdf/renderer-d806818e.js";import{r as w,b as j}from"./react-a84639bd.js";import{u as x,L as g}from"./react-router-dom-10f375c6.js";import{B as E}from"./banner-0c5d45f9.js";import{b as P}from"./medio-ebaf4cac.js";import{S as N,A as T,b as S,c as _,d as O,P as I}from"./main-d3681136.js";import{g as y,e as M}from"./swiper-dad05047.js";import{m as F}from"./framer-motion-31cb7f15.js";import{Proyectos as $}from"./proyectos-a3290a3b.js";import"./react-dom-47c417a6.js";import"./index.esm-6aca8226.js";import"./react-icons-293a2bbc.js";import"./axios-28bc18a3.js";import"./react-pdf-3633ae72.js";import"./react-floating-whatsapp-31f2a923.js";import"./setionHeader-bf3ddc53.js";import"./Recurso 1-101c8ab1.js";import"./ScreenSize-de094b25.js";function R(d){const{effect:e,swiper:t,on:n,setTranslate:m,setTransition:l,overwriteParams:o,perspective:a,recreateShadows:r,getEffectParams:i}=d;n("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const f=o?o():{};Object.assign(t.params,f),Object.assign(t.originalParams,f)}),n("setTranslate",()=>{t.params.effect===e&&m()}),n("setTransition",(f,p)=>{t.params.effect===e&&l(p)}),n("transitionEnd",()=>{if(t.params.effect===e&&r){if(!i||!i().slideShadows)return;t.slides.forEach(f=>{f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),r()}});let c;n("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(c=!0),requestAnimationFrame(()=>{c&&t.slides&&t.slides.length&&(m(),c=!1)}))})}function D(d,e){const t=y(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function k(d){let{swiper:e,duration:t,transformElements:n,allSlides:m}=d;const{activeIndex:l}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(i=>i.shadowRoot&&i.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let a=!1,r;m?r=n:r=n.filter(i=>{const c=i.classList.contains("swiper-slide-transform")?o(i):i;return e.getSlideIndex(c)===l}),r.forEach(i=>{M(i,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;const c=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(c)})})}}function q(d){let{swiper:e,extendParams:t,on:n}=d;t({fadeEffect:{crossFade:!1}}),R({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:o}=e,a=e.params.fadeEffect;for(let r=0;r<o.length;r+=1){const i=e.slides[r];let f=-i.swiperSlideOffset;e.params.virtualTranslate||(f-=e.translate);let p=0;e.isHorizontal()||(p=f,f=0);const v=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(i.progress),0):1+Math.min(Math.max(i.progress,-1),0),u=D(a,i);u.style.opacity=v,u.style.transform=`translate3d(${f}px, ${p}px, 0px)`}},setTransition:o=>{const a=e.slides.map(r=>y(r));a.forEach(r=>{r.style.transitionDuration=`${o}ms`}),k({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}const A=({images:d})=>s.jsx(N,{spaceBetween:0,slidesPerView:1,autoplay:{delay:8e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},modules:[T,S,_,q],effect:"fade",className:"projectDetailSlider",children:d.map((e,t)=>s.jsx(O,{style:{height:"100%",width:"100%",backgroundColor:"white"},children:s.jsxs(F.div,{initial:{opacity:0,y:50},transition:{duration:.5},animate:{opacity:1,y:0},children:[s.jsx("img",{src:`${e.imagen}`,alt:`proyecto-${e.proyecto} `,className:"img-fluid imagen-proecto"}),s.jsx("div",{children:s.jsx("a",{href:e.references_url?e.references_url:"https://www.Magnaingenieriaytopografia.com",target:"_blank",rel:"noreferrer",children:e.references_name?e.references_name:"Magnaingenieriaytopografia.com"})})]})},t))});const L=w.lazy(()=>b(()=>import("./cardsProjects-ddc7ad79.js"),["static/cardsProjects-ddc7ad79.js","static/@react-pdf/renderer-d806818e.js","static/react-a84639bd.js","static/@tanstack/react-query-devtools-5e1ae0d5.js","static/react-router-dom-10f375c6.js","static/react-dom-47c417a6.js","static/main-d3681136.js","static/swiper-dad05047.js","static/framer-motion-31cb7f15.js","static/medio-ebaf4cac.js","static/axios-28bc18a3.js","static/react-pdf-3633ae72.js","static/react-floating-whatsapp-31f2a923.js","static/react-icons-293a2bbc.js","static/index-9d6abd17.css","static/cardsProjects-b03829ff.css"])),ie=()=>{const d=x();console.log(d,"parametros");const[e,t]=j.useState(),[n,m]=j.useState([]),{projectArg:l}=x();console.log(l,"id");const{data:o}=h({queryKey:["projects"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30}),{data:a}=h({queryKey:["projectsImages"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30});return!o||!a||!l?s.jsx("div",{children:"no hay "}):(w.useEffect(()=>{const r=o.results.find(c=>c.id===parseInt(l))||null,i=a.filter(c=>c.proyecto===parseInt(l));console.log(r,"aqui estoy en project_select",i,"images"),r&&(t(r),m(i))},[o,a,l]),!e||!n?null:s.jsx(s.Fragment,{children:s.jsxs(I,{children:[s.jsx(E,{title:"Proyectos",paragraph:"Proyectos",image:P}),s.jsxs("div",{className:"container-fluid",children:[s.jsxs("div",{className:"row titulo",children:[s.jsx("h2",{className:"col-10",children:e.nombre}),s.jsx(g,{to:"/projects",className:"col-2",children:s.jsx("button",{className:"boton-1 ",children:"ver m치s"})})]}),s.jsxs("div",{className:"row project-detail",children:[s.jsx("div",{className:"col-12 col-md-6 ",children:s.jsx(A,{images:n})}),s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsx("br",{}),s.jsx("br",{}),s.jsx("h3",{children:"Descripci칩n del proyecto"}),s.jsx("p",{children:e.descripcion}),s.jsx("h3",{children:"Ubicaci칩n"}),s.jsxs("p",{children:[e.ciudad.departamento.pais.nombre,", ",e.ciudad.departamento.nombre,", ",e.ciudad.nombre]}),s.jsx("h3",{children:"Servicios prestados"}),e.servicios.map(r=>s.jsxs(s.Fragment,{children:[s.jsx("h5",{children:r.nombre},r.id),s.jsx(g,{to:"/servicios",children:s.jsx("button",{className:"boton-1",children:"ver m치s"})})]}))]},l)]}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12 relacionados",children:s.jsx("h3",{children:"Proyectos relacionados"})})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx(L,{type:e.tipo.id,actualPage:e.id,imagenes:a})})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx($,{})})})]})]})}))};export{ie as default};


//# sourceMappingURL=data:application/json;base64,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WCxlQUFDLE1BQUksV0FBVSxTQUNYLFNBQUNBLEVBQUEsSUFBQVUsRUFBQSxDQUFrQixLQUFNSyxFQUFRLEtBQUssR0FBSSxXQUFZQSxFQUFRLEdBQUksU0FBVVEsRUFBYyxFQUM5RixDQUNKLEdBQ0F2QixFQUFBLElBQUMsTUFBSSxXQUFVLE1BQ1gsU0FBQUEsTUFBQyxNQUFJLFdBQVUsU0FDWCxTQUFBQSxFQUFBLElBQUNnQyxFQUFVLEdBQ2YsR0FDSixHQUNKLEVBQ0osRUFDQSxHQUVSIiwibmFtZXMiOlsiZWZmZWN0SW5pdCIsInBhcmFtcyIsImVmZmVjdCIsInN3aXBlciIsIm9uIiwic2V0VHJhbnNsYXRlIiwic2V0VHJhbnNpdGlvbiIsIm92ZXJ3cml0ZVBhcmFtcyIsInBlcnNwZWN0aXZlIiwicmVjcmVhdGVTaGFkb3dzIiwiZ2V0RWZmZWN0UGFyYW1zIiwib3ZlcndyaXRlUGFyYW1zUmVzdWx0IiwiX3MiLCJkdXJhdGlvbiIsInNsaWRlRWwiLCJzaGFkb3dFbCIsInJlcXVpcmVVcGRhdGVPblZpcnR1YWwiLCJlZmZlY3RUYXJnZXQiLCJlZmZlY3RQYXJhbXMiLCJ0cmFuc2Zvcm1FbCIsImdldFNsaWRlVHJhbnNmb3JtRWwiLCJlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCIsIl9yZWYiLCJ0cmFuc2Zvcm1FbGVtZW50cyIsImFsbFNsaWRlcyIsImFjdGl2ZUluZGV4IiwiZ2V0U2xpZGUiLCJlbCIsImV2ZW50VHJpZ2dlcmVkIiwidHJhbnNpdGlvbkVuZFRhcmdldCIsImVsZW1lbnRUcmFuc2l0aW9uRW5kIiwiZXZ0IiwiRWZmZWN0RmFkZSIsImV4dGVuZFBhcmFtcyIsInNsaWRlcyIsImkiLCJ0eCIsInR5Iiwic2xpZGVPcGFjaXR5IiwidGFyZ2V0RWwiLCJTbGlkZXJQcm9qZWN0RGV0YWlsIiwiaW1hZ2VzIiwianN4IiwiU3dpcGVyIiwiQXV0b3BsYXkiLCJQYWdpbmF0aW9uIiwiTmF2aWdhdGlvbiIsImltYWdlIiwiaW5kZXgiLCJTd2lwZXJTbGlkZSIsImpzeHMiLCJtb3Rpb24iLCJMYXp5Q2FyZHNQcm9qZWN0cyIsImxhenkiLCJQcm9qZWN0RGV0YWlsIiwicGFyYW1ldHJvcyIsInVzZVBhcmFtcyIsInByb2plY3QiLCJzZXRQcm9qZWN0IiwiUmVhY3QiLCJpbWFnZW4iLCJzZXRJbWFnZW4iLCJwcm9qZWN0QXJnIiwicHJvamVjdHMiLCJ1c2VRdWVyeSIsInByb2plY3RJbWFnZXMiLCJ1c2VFZmZlY3QiLCJwcm9qZWN0X3NlbGVjdCIsIkZyYWdtZW50IiwiUGFnZXNMYXlvdXQiLCJCYW5uZXIiLCJpbWFnZW5CYW5uZXIiLCJMaW5rIiwic2VydmljaW8iLCJQcm95ZWN0b3MiXSwic291cmNlcyI6WyIuLi8uLi9ub2RlX21vZHVsZXMvc3dpcGVyL3NoYXJlZC9lZmZlY3QtaW5pdC5tanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvc3dpcGVyL3NoYXJlZC9lZmZlY3QtdGFyZ2V0Lm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9zd2lwZXIvc2hhcmVkL2VmZmVjdC12aXJ0dWFsLXRyYW5zaXRpb24tZW5kLm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9zd2lwZXIvbW9kdWxlcy9lZmZlY3QtZmFkZS5tanMiLCIuLi8uLi9zcmMvY29tcG9uZW50cy9zbGlkZXJQcm9qZWN0RGV0YWlsLnRzeCIsIi4uLy4uL3NyYy9wYWdlcy9wcm9qZWNzRGV0YWlsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBlZmZlY3RJbml0KHBhcmFtcykge1xuICBjb25zdCB7XG4gICAgZWZmZWN0LFxuICAgIHN3aXBlcixcbiAgICBvbixcbiAgICBzZXRUcmFuc2xhdGUsXG4gICAgc2V0VHJhbnNpdGlvbixcbiAgICBvdmVyd3JpdGVQYXJhbXMsXG4gICAgcGVyc3BlY3RpdmUsXG4gICAgcmVjcmVhdGVTaGFkb3dzLFxuICAgIGdldEVmZmVjdFBhcmFtc1xuICB9ID0gcGFyYW1zO1xuICBvbignYmVmb3JlSW5pdCcsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgIHN3aXBlci5jbGFzc05hbWVzLnB1c2goYCR7c3dpcGVyLnBhcmFtcy5jb250YWluZXJNb2RpZmllckNsYXNzfSR7ZWZmZWN0fWApO1xuICAgIGlmIChwZXJzcGVjdGl2ZSAmJiBwZXJzcGVjdGl2ZSgpKSB7XG4gICAgICBzd2lwZXIuY2xhc3NOYW1lcy5wdXNoKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc30zZGApO1xuICAgIH1cbiAgICBjb25zdCBvdmVyd3JpdGVQYXJhbXNSZXN1bHQgPSBvdmVyd3JpdGVQYXJhbXMgPyBvdmVyd3JpdGVQYXJhbXMoKSA6IHt9O1xuICAgIE9iamVjdC5hc3NpZ24oc3dpcGVyLnBhcmFtcywgb3ZlcndyaXRlUGFyYW1zUmVzdWx0KTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5vcmlnaW5hbFBhcmFtcywgb3ZlcndyaXRlUGFyYW1zUmVzdWx0KTtcbiAgfSk7XG4gIG9uKCdzZXRUcmFuc2xhdGUnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuZWZmZWN0ICE9PSBlZmZlY3QpIHJldHVybjtcbiAgICBzZXRUcmFuc2xhdGUoKTtcbiAgfSk7XG4gIG9uKCdzZXRUcmFuc2l0aW9uJywgKF9zLCBkdXJhdGlvbikgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgc2V0VHJhbnNpdGlvbihkdXJhdGlvbik7XG4gIH0pO1xuICBvbigndHJhbnNpdGlvbkVuZCcsICgpID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgIGlmIChyZWNyZWF0ZVNoYWRvd3MpIHtcbiAgICAgIGlmICghZ2V0RWZmZWN0UGFyYW1zIHx8ICFnZXRFZmZlY3RQYXJhbXMoKS5zbGlkZVNoYWRvd3MpIHJldHVybjtcbiAgICAgIC8vIHJlbW92ZSBzaGFkb3dzXG4gICAgICBzd2lwZXIuc2xpZGVzLmZvckVhY2goc2xpZGVFbCA9PiB7XG4gICAgICAgIHNsaWRlRWwucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZS1zaGFkb3ctdG9wLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1yaWdodCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctYm90dG9tLCAuc3dpcGVyLXNsaWRlLXNoYWRvdy1sZWZ0JykuZm9yRWFjaChzaGFkb3dFbCA9PiBzaGFkb3dFbC5yZW1vdmUoKSk7XG4gICAgICB9KTtcbiAgICAgIC8vIGNyZWF0ZSBuZXcgb25lXG4gICAgICByZWNyZWF0ZVNoYWRvd3MoKTtcbiAgICB9XG4gIH0pO1xuICBsZXQgcmVxdWlyZVVwZGF0ZU9uVmlydHVhbDtcbiAgb24oJ3ZpcnR1YWxVcGRhdGUnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuZWZmZWN0ICE9PSBlZmZlY3QpIHJldHVybjtcbiAgICBpZiAoIXN3aXBlci5zbGlkZXMubGVuZ3RoKSB7XG4gICAgICByZXF1aXJlVXBkYXRlT25WaXJ0dWFsID0gdHJ1ZTtcbiAgICB9XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIGlmIChyZXF1aXJlVXBkYXRlT25WaXJ0dWFsICYmIHN3aXBlci5zbGlkZXMgJiYgc3dpcGVyLnNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgc2V0VHJhbnNsYXRlKCk7XG4gICAgICAgIHJlcXVpcmVVcGRhdGVPblZpcnR1YWwgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCB7IGVmZmVjdEluaXQgYXMgZSB9O1xuIiwiaW1wb3J0IHsgbCBhcyBnZXRTbGlkZVRyYW5zZm9ybUVsIH0gZnJvbSAnLi91dGlscy5tanMnO1xuXG5mdW5jdGlvbiBlZmZlY3RUYXJnZXQoZWZmZWN0UGFyYW1zLCBzbGlkZUVsKSB7XG4gIGNvbnN0IHRyYW5zZm9ybUVsID0gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKTtcbiAgaWYgKHRyYW5zZm9ybUVsICE9PSBzbGlkZUVsKSB7XG4gICAgdHJhbnNmb3JtRWwuc3R5bGUuYmFja2ZhY2VWaXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgdHJhbnNmb3JtRWwuc3R5bGVbJy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eSddID0gJ2hpZGRlbic7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybUVsO1xufVxuXG5leHBvcnQgeyBlZmZlY3RUYXJnZXQgYXMgZSB9O1xuIiwiaW1wb3J0IHsgaiBhcyBlbGVtZW50VHJhbnNpdGlvbkVuZCB9IGZyb20gJy4vdXRpbHMubWpzJztcblxuZnVuY3Rpb24gZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQoX3JlZikge1xuICBsZXQge1xuICAgIHN3aXBlcixcbiAgICBkdXJhdGlvbixcbiAgICB0cmFuc2Zvcm1FbGVtZW50cyxcbiAgICBhbGxTbGlkZXNcbiAgfSA9IF9yZWY7XG4gIGNvbnN0IHtcbiAgICBhY3RpdmVJbmRleFxuICB9ID0gc3dpcGVyO1xuICBjb25zdCBnZXRTbGlkZSA9IGVsID0+IHtcbiAgICBpZiAoIWVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIC8vIGFzc3VtZSBzaGFkb3cgcm9vdFxuICAgICAgY29uc3Qgc2xpZGUgPSBzd2lwZXIuc2xpZGVzLmZpbHRlcihzbGlkZUVsID0+IHNsaWRlRWwuc2hhZG93Um9vdCAmJiBzbGlkZUVsLnNoYWRvd1Jvb3QgPT09IGVsLnBhcmVudE5vZGUpWzBdO1xuICAgICAgcmV0dXJuIHNsaWRlO1xuICAgIH1cbiAgICByZXR1cm4gZWwucGFyZW50RWxlbWVudDtcbiAgfTtcbiAgaWYgKHN3aXBlci5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSAmJiBkdXJhdGlvbiAhPT0gMCkge1xuICAgIGxldCBldmVudFRyaWdnZXJlZCA9IGZhbHNlO1xuICAgIGxldCB0cmFuc2l0aW9uRW5kVGFyZ2V0O1xuICAgIGlmIChhbGxTbGlkZXMpIHtcbiAgICAgIHRyYW5zaXRpb25FbmRUYXJnZXQgPSB0cmFuc2Zvcm1FbGVtZW50cztcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNpdGlvbkVuZFRhcmdldCA9IHRyYW5zZm9ybUVsZW1lbnRzLmZpbHRlcih0cmFuc2Zvcm1FbCA9PiB7XG4gICAgICAgIGNvbnN0IGVsID0gdHJhbnNmb3JtRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2lwZXItc2xpZGUtdHJhbnNmb3JtJykgPyBnZXRTbGlkZSh0cmFuc2Zvcm1FbCkgOiB0cmFuc2Zvcm1FbDtcbiAgICAgICAgcmV0dXJuIHN3aXBlci5nZXRTbGlkZUluZGV4KGVsKSA9PT0gYWN0aXZlSW5kZXg7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdHJhbnNpdGlvbkVuZFRhcmdldC5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsZW1lbnRUcmFuc2l0aW9uRW5kKGVsLCAoKSA9PiB7XG4gICAgICAgIGlmIChldmVudFRyaWdnZXJlZCkgcmV0dXJuO1xuICAgICAgICBpZiAoIXN3aXBlciB8fCBzd2lwZXIuZGVzdHJveWVkKSByZXR1cm47XG4gICAgICAgIGV2ZW50VHJpZ2dlcmVkID0gdHJ1ZTtcbiAgICAgICAgc3dpcGVyLmFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBldnQgPSBuZXcgd2luZG93LkN1c3RvbUV2ZW50KCd0cmFuc2l0aW9uZW5kJywge1xuICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgc3dpcGVyLndyYXBwZXJFbC5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgeyBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCBhcyBlIH07XG4iLCJpbXBvcnQgeyBlIGFzIGVmZmVjdEluaXQgfSBmcm9tICcuLi9zaGFyZWQvZWZmZWN0LWluaXQubWpzJztcbmltcG9ydCB7IGUgYXMgZWZmZWN0VGFyZ2V0IH0gZnJvbSAnLi4vc2hhcmVkL2VmZmVjdC10YXJnZXQubWpzJztcbmltcG9ydCB7IGUgYXMgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQgfSBmcm9tICcuLi9zaGFyZWQvZWZmZWN0LXZpcnR1YWwtdHJhbnNpdGlvbi1lbmQubWpzJztcbmltcG9ydCB7IGwgYXMgZ2V0U2xpZGVUcmFuc2Zvcm1FbCB9IGZyb20gJy4uL3NoYXJlZC91dGlscy5tanMnO1xuXG5mdW5jdGlvbiBFZmZlY3RGYWRlKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZXh0ZW5kUGFyYW1zLFxuICAgIG9uXG4gIH0gPSBfcmVmO1xuICBleHRlbmRQYXJhbXMoe1xuICAgIGZhZGVFZmZlY3Q6IHtcbiAgICAgIGNyb3NzRmFkZTogZmFsc2VcbiAgICB9XG4gIH0pO1xuICBjb25zdCBzZXRUcmFuc2xhdGUgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc2xpZGVzXG4gICAgfSA9IHN3aXBlcjtcbiAgICBjb25zdCBwYXJhbXMgPSBzd2lwZXIucGFyYW1zLmZhZGVFZmZlY3Q7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHNsaWRlRWwgPSBzd2lwZXIuc2xpZGVzW2ldO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gc2xpZGVFbC5zd2lwZXJTbGlkZU9mZnNldDtcbiAgICAgIGxldCB0eCA9IC1vZmZzZXQ7XG4gICAgICBpZiAoIXN3aXBlci5wYXJhbXMudmlydHVhbFRyYW5zbGF0ZSkgdHggLT0gc3dpcGVyLnRyYW5zbGF0ZTtcbiAgICAgIGxldCB0eSA9IDA7XG4gICAgICBpZiAoIXN3aXBlci5pc0hvcml6b250YWwoKSkge1xuICAgICAgICB0eSA9IHR4O1xuICAgICAgICB0eCA9IDA7XG4gICAgICB9XG4gICAgICBjb25zdCBzbGlkZU9wYWNpdHkgPSBzd2lwZXIucGFyYW1zLmZhZGVFZmZlY3QuY3Jvc3NGYWRlID8gTWF0aC5tYXgoMSAtIE1hdGguYWJzKHNsaWRlRWwucHJvZ3Jlc3MpLCAwKSA6IDEgKyBNYXRoLm1pbihNYXRoLm1heChzbGlkZUVsLnByb2dyZXNzLCAtMSksIDApO1xuICAgICAgY29uc3QgdGFyZ2V0RWwgPSBlZmZlY3RUYXJnZXQocGFyYW1zLCBzbGlkZUVsKTtcbiAgICAgIHRhcmdldEVsLnN0eWxlLm9wYWNpdHkgPSBzbGlkZU9wYWNpdHk7XG4gICAgICB0YXJnZXRFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0eH1weCwgJHt0eX1weCwgMHB4KWA7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZXRUcmFuc2l0aW9uID0gZHVyYXRpb24gPT4ge1xuICAgIGNvbnN0IHRyYW5zZm9ybUVsZW1lbnRzID0gc3dpcGVyLnNsaWRlcy5tYXAoc2xpZGVFbCA9PiBnZXRTbGlkZVRyYW5zZm9ybUVsKHNsaWRlRWwpKTtcbiAgICB0cmFuc2Zvcm1FbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgIGVsLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGAke2R1cmF0aW9ufW1zYDtcbiAgICB9KTtcbiAgICBlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCh7XG4gICAgICBzd2lwZXIsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHRyYW5zZm9ybUVsZW1lbnRzLFxuICAgICAgYWxsU2xpZGVzOiB0cnVlXG4gICAgfSk7XG4gIH07XG4gIGVmZmVjdEluaXQoe1xuICAgIGVmZmVjdDogJ2ZhZGUnLFxuICAgIHN3aXBlcixcbiAgICBvbixcbiAgICBzZXRUcmFuc2xhdGUsXG4gICAgc2V0VHJhbnNpdGlvbixcbiAgICBvdmVyd3JpdGVQYXJhbXM6ICgpID0+ICh7XG4gICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgdmlydHVhbFRyYW5zbGF0ZTogIXN3aXBlci5wYXJhbXMuY3NzTW9kZVxuICAgIH0pXG4gIH0pO1xufVxuXG5leHBvcnQgeyBFZmZlY3RGYWRlIGFzIGRlZmF1bHQgfTtcbiIsIlxuaW1wb3J0IHsgU3dpcGVyLCBTd2lwZXJTbGlkZSB9IGZyb20gJ3N3aXBlci9yZWFjdCc7XG5pbXBvcnQgeyBtb3Rpb259IGZyb20gJ2ZyYW1lci1tb3Rpb24nXG5pbXBvcnQgeyBQcm95ZWN0SW1hZ2VzTWFnbmF9IGZyb20gJy4uL3R5cGVzL3Byb2plY3RzJztcbmltcG9ydCB7IEF1dG9wbGF5LCBQYWdpbmF0aW9uLCBOYXZpZ2F0aW9uLEVmZmVjdEZhZGUgfSBmcm9tICdzd2lwZXIvbW9kdWxlcyc7XG5pbXBvcnQgJ3N3aXBlci9jc3MnO1xuaW1wb3J0ICdzd2lwZXIvY3NzL2VmZmVjdC1mYWRlJztcblxudHlwZSBTbGlkZXJQcm9qZWN0RGV0YWlsUHJvcHMgPSB7XG4gICAgaW1hZ2VzOiBQcm95ZWN0SW1hZ2VzTWFnbmFbXTtcbn07XG5cbmNvbnN0IFNsaWRlclByb2plY3REZXRhaWwgPSAoXG4gICAgeyBpbWFnZXMgfTogU2xpZGVyUHJvamVjdERldGFpbFByb3BzXG4pID0+IHtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxTd2lwZXJcbiAgICAgICAgICAgIHNwYWNlQmV0d2Vlbj17MH1cbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc9ezF9XG4gICAgICAgICAgICBhdXRvcGxheT17e1xuICAgICAgICAgICAgICAgIGRlbGF5OiA4MDAwLFxuICAgICAgICAgICAgICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXVzZU9uTW91c2VFbnRlcjogdHJ1ZSxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBtb2R1bGVzPXtbQXV0b3BsYXksIFBhZ2luYXRpb24sIE5hdmlnYXRpb24sRWZmZWN0RmFkZV19XG4gICAgICAgICAgICBlZmZlY3Q9J2ZhZGUnXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJwcm9qZWN0RGV0YWlsU2xpZGVyXCJcbiAgICAgICAgPlxuICAgICAgICAgICAge2ltYWdlcy5tYXAoKGltYWdlLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgICAgIDxTd2lwZXJTbGlkZSBrZXk9e2luZGV4fVxuICAgICAgICAgICAgICAgIHN0eWxlPXt7aGVpZ2h0OiAnMTAwJScsIHdpZHRoOiAnMTAwJScsYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IDUwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeTogMCB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17YCR7aW1hZ2UuaW1hZ2VufWB9IGFsdD17YHByb3llY3RvLSR7aW1hZ2UucHJveWVjdG99IGB9IGNsYXNzTmFtZT1cImltZy1mbHVpZCBpbWFnZW4tcHJvZWN0b1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17aW1hZ2UucmVmZXJlbmNlc191cmw/IGltYWdlLnJlZmVyZW5jZXNfdXJsIDogJ2h0dHBzOi8vd3d3Lk1hZ25haW5nZW5pZXJpYXl0b3BvZ3JhZmlhLmNvbSd9IHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vcmVmZXJyZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5yZWZlcmVuY2VzX25hbWU/IGltYWdlLnJlZmVyZW5jZXNfbmFtZSA6ICdNYWduYWluZ2VuaWVyaWF5dG9wb2dyYWZpYS5jb20nXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICAgICAgICAgIDwvU3dpcGVyU2xpZGU+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgPC9Td2lwZXI+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNsaWRlclByb2plY3REZXRhaWw7XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LGxhenkgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBMaW5rLCB1c2VQYXJhbXMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCBCYW5uZXIgZnJvbSAnLi4vY29tcG9uZW50cy9iYW5uZXInO1xuaW1wb3J0IGltYWdlbkJhbm5lciBmcm9tICcuLi9hc3NldHMvaW1nL2Jhbm5lci9wcm9qZWN0cy5wbmcnO1xuaW1wb3J0IHsgUmVzdWx0LFByb3llY3Rvc01hZ25hLFByb3llY3RJbWFnZXNNYWduYSxTZXJ2aWNpbyB9IGZyb20gJy4uL3R5cGVzL3Byb2plY3RzJztcbmltcG9ydCBTbGlkZXJQcm9qZWN0RGV0YWlsIGZyb20gJy4uL2NvbXBvbmVudHMvc2xpZGVyUHJvamVjdERldGFpbCc7XG5pbXBvcnQgUGFnZXNMYXlvdXQgZnJvbSAnLi4vbGF5b3V0cy9wYWdlc0xheW91dHMnO1xuaW1wb3J0IHsgUHJveWVjdG9zIH0gZnJvbSAnLi4vY29tcG9uZW50cy9zZWN0aW9ucy9wcm95ZWN0b3MnO1xuaW1wb3J0ICcuL3N0eWxlcy9wcm9qZWN0c0RldGFpbC5jc3MnXG5jb25zdCBMYXp5Q2FyZHNQcm9qZWN0cyA9IGxhenkoKCkgPT4gaW1wb3J0KCcuLi9jb21wb25lbnRzL2NhcmRzUHJvamVjdHMnKSk7XG5jb25zdCBQcm9qZWN0RGV0YWlsOiBSZWFjdC5GQz0gKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtZXRyb3MgPSB1c2VQYXJhbXMoKTtcbiAgICBjb25zb2xlLmxvZyhwYXJhbWV0cm9zLCAncGFyYW1ldHJvcycpO1xuICAgIGNvbnN0IFtwcm9qZWN0LCBzZXRQcm9qZWN0XSA9IFJlYWN0LnVzZVN0YXRlPFJlc3VsdD4oKTtcbiAgICBjb25zdCBbaW1hZ2VuLCBzZXRJbWFnZW5dID0gUmVhY3QudXNlU3RhdGU8UHJveWVjdEltYWdlc01hZ25hW10+KFtdKTtcbiAgICBjb25zdCB7IHByb2plY3RBcmd9ID0gdXNlUGFyYW1zPHsgcHJvamVjdEFyZzogc3RyaW5nIH0+KCk7XG4gICAgY29uc29sZS5sb2cocHJvamVjdEFyZywgJ2lkJyk7XG4gICAgXG4gICAgY29uc3QgeyBkYXRhOnByb2plY3RzIH0gPSB1c2VRdWVyeTxQcm95ZWN0b3NNYWduYT4oe1xuICAgICAgICBxdWVyeUtleTogWydwcm9qZWN0cyddLFxuICAgICAgICBzdGFsZVRpbWU6IDEwMDAqNjAqMzAscmVmZXRjaE9uV2luZG93Rm9jdXM6IGZhbHNlLHJlZmV0Y2hPbk1vdW50OiBmYWxzZSxyZWZldGNoT25SZWNvbm5lY3Q6IGZhbHNlLHJlZmV0Y2hJbnRlcnZhbDogMTAwMCo2MCozMCxcbiAgICB9KTtcbiAgICBjb25zdCB7IGRhdGE6cHJvamVjdEltYWdlcyB9ID0gdXNlUXVlcnk8UHJveWVjdEltYWdlc01hZ25hW10+KHtcbiAgICAgICAgcXVlcnlLZXk6IFsncHJvamVjdHNJbWFnZXMnXSxcbiAgICAgICAgc3RhbGVUaW1lOiAxMDAwKjYwKjMwLHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxyZWZldGNoT25Nb3VudDogZmFsc2UscmVmZXRjaE9uUmVjb25uZWN0OiBmYWxzZSxyZWZldGNoSW50ZXJ2YWw6IDEwMDAqNjAqMzAsXG4gICAgfSk7XG4gICAgXG5cbiAgICBpZighcHJvamVjdHMgfHwgIXByb2plY3RJbWFnZXMgfHwgIXByb2plY3RBcmcpe1xuICAgICAgICByZXR1cm4gPGRpdj5ubyBoYXkgPC9kaXY+O1xuICAgIH1cbiAgICBcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0X3NlbGVjdDogUmVzdWx0IHwgbnVsbCA9IHByb2plY3RzLnJlc3VsdHMuZmluZCgocHJvamVjdDogUmVzdWx0KSA9PiBwcm9qZWN0LmlkID09PSBwYXJzZUludChwcm9qZWN0QXJnKSkgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgaW1hZ2VzOiBQcm95ZWN0SW1hZ2VzTWFnbmFbXSA9IHByb2plY3RJbWFnZXMuZmlsdGVyKChpbWFnZW46IFByb3llY3RJbWFnZXNNYWduYSkgPT4gaW1hZ2VuLnByb3llY3RvID09PSBwYXJzZUludChwcm9qZWN0QXJnKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3Rfc2VsZWN0LCAnYXF1aSBlc3RveSBlbiBwcm9qZWN0X3NlbGVjdCcsaW1hZ2VzLFwiaW1hZ2VzXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwcm9qZWN0X3NlbGVjdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNldFByb2plY3QocHJvamVjdF9zZWxlY3QpO1xuICAgICAgICBzZXRJbWFnZW4oaW1hZ2VzKTtcbiAgICAgICAgfSwgW3Byb2plY3RzLHByb2plY3RJbWFnZXMscHJvamVjdEFyZ10pO1xuXG4gICAgaWYgKCFwcm9qZWN0IHx8ICFpbWFnZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPD5cbiAgICAgICAgPFBhZ2VzTGF5b3V0PlxuICAgICAgICAgICAgPEJhbm5lciB0aXRsZT1cIlByb3llY3Rvc1wiIHBhcmFncmFwaD0nUHJveWVjdG9zJyBpbWFnZT17aW1hZ2VuQmFubmVyfS8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IHRpdHVsb1wiPlxuICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSdjb2wtMTAnPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Byb2plY3Qubm9tYnJlfVxuICAgICAgICAgICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgICAgICAgICA8TGluayB0bz0nL3Byb2plY3RzJyBjbGFzc05hbWU9J2NvbC0yJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdib3Rvbi0xICc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyIG3DoXNcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IHByb2plY3QtZGV0YWlsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC02IFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNsaWRlclByb2plY3REZXRhaWwgaW1hZ2VzPXtpbWFnZW59Lz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC02XCIga2V5PXtwcm9qZWN0QXJnfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcGNpw7NuIGRlbCBwcm95ZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPntwcm9qZWN0LmRlc2NyaXBjaW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVYmljYWNpw7NuXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb2plY3QuY2l1ZGFkLmRlcGFydGFtZW50by5wYWlzLm5vbWJyZX0sIHtwcm9qZWN0LmNpdWRhZC5kZXBhcnRhbWVudG8ubm9tYnJlfSwge3Byb2plY3QuY2l1ZGFkLm5vbWJyZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNpb3MgcHJlc3RhZG9zXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3Quc2VydmljaW9zLm1hcCgoc2VydmljaW86IFNlcnZpY2lvKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBrZXk9e3NlcnZpY2lvLmlkfT57c2VydmljaW8ubm9tYnJlfTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL3NlcnZpY2lvc2B9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9J2JvdG9uLTEnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlciBtw6FzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTIgcmVsYWNpb25hZG9zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJveWVjdG9zIHJlbGFjaW9uYWRvc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMYXp5Q2FyZHNQcm9qZWN0cyB0eXBlPXtwcm9qZWN0LnRpcG8uaWR9IGFjdHVhbFBhZ2U9e3Byb2plY3QuaWR9IGltYWdlbmVzPXtwcm9qZWN0SW1hZ2VzfS8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UHJveWVjdG9zIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvUGFnZXNMYXlvdXQ+XG4gICAgICAgIDwvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0RGV0YWlsO1xuIl0sImZpbGUiOiJzdGF0aWMvcHJvamVjc0RldGFpbC01MWZmYTI4OC5qcyJ9