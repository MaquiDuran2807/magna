import{s as g,t as y,j as e,S as b,A as P,k as E,l as N,m as _,q as S,e as T,r as u,_ as w,R as j,n as I,i as D,L as x}from"./index.js";import{B as M}from"./banner-c41eb154.js";import{i as O}from"./projects-cc0203f0.js";import{u as L}from"./getProjects-467de614.js";import"./index.esm-552fc115.js";import"./iconBase-24917912.js";import"./index.esm-84b527cb.js";function $(r){const{effect:s,swiper:t,on:c,setTranslate:l,setTransition:d,overwriteParams:o,perspective:a,recreateShadows:n,getEffectParams:i}=r;c("beforeInit",()=>{if(t.params.effect!==s)return;t.classNames.push(`${t.params.containerModifierClass}${s}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const f=o?o():{};Object.assign(t.params,f),Object.assign(t.originalParams,f)}),c("setTranslate",()=>{t.params.effect===s&&l()}),c("setTransition",(f,p)=>{t.params.effect===s&&d(p)}),c("transitionEnd",()=>{if(t.params.effect===s&&n){if(!i||!i().slideShadows)return;t.slides.forEach(f=>{f.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),n()}});let m;c("virtualUpdate",()=>{t.params.effect===s&&(t.slides.length||(m=!0),requestAnimationFrame(()=>{m&&t.slides&&t.slides.length&&(l(),m=!1)}))})}function R(r,s){const t=g(s);return t!==s&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function V(r){let{swiper:s,duration:t,transformElements:c,allSlides:l}=r;const{activeIndex:d}=s,o=a=>a.parentElement?a.parentElement:s.slides.filter(i=>i.shadowRoot&&i.shadowRoot===a.parentNode)[0];if(s.params.virtualTranslate&&t!==0){let a=!1,n;l?n=c:n=c.filter(i=>{const m=i.classList.contains("swiper-slide-transform")?o(i):i;return s.getSlideIndex(m)===d}),n.forEach(i=>{y(i,()=>{if(a||!s||s.destroyed)return;a=!0,s.animating=!1;const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});s.wrapperEl.dispatchEvent(m)})})}}function k(r){let{swiper:s,extendParams:t,on:c}=r;t({fadeEffect:{crossFade:!1}}),$({effect:"fade",swiper:s,on:c,setTranslate:()=>{const{slides:o}=s,a=s.params.fadeEffect;for(let n=0;n<o.length;n+=1){const i=s.slides[n];let f=-i.swiperSlideOffset;s.params.virtualTranslate||(f-=s.translate);let p=0;s.isHorizontal()||(p=f,f=0);const v=s.params.fadeEffect.crossFade?Math.max(1-Math.abs(i.progress),0):1+Math.min(Math.max(i.progress,-1),0),h=R(a,i);h.style.opacity=v,h.style.transform=`translate3d(${f}px, ${p}px, 0px)`}},setTransition:o=>{const a=s.slides.map(n=>g(n));a.forEach(n=>{n.style.transitionDuration=`${o}ms`}),V({swiper:s,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!s.params.cssMode})})}const A=({images:r})=>e.jsx(b,{spaceBetween:0,slidesPerView:1,autoplay:{delay:8e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},modules:[P,E,N,k],effect:"fade",className:"projectDetailSlider",children:r.map((s,t)=>e.jsx(_,{style:{height:"100%",width:"100%",backgroundColor:"white"},children:e.jsxs(S.div,{initial:{opacity:0,y:50},transition:{duration:.5},animate:{opacity:1,y:0},children:[e.jsx("img",{src:`${s.imagen}`,alt:`proyecto-${s.proyecto} `,className:"img-fluid imagen-proecto"}),e.jsx("div",{children:e.jsx("a",{href:s.references_url?s.references_url:"https://www.Magnaingenieriaytopografia.com",target:"_blank",rel:"noreferrer",children:s.references_name?s.references_name:"Magnaingenieriaytopografia.com"})})]})},t))});const F=u.lazy(()=>w(()=>import("./proyectos-bccc346b.js"),["proyectos-bccc346b.js","index.js","index-5a9f3c56.css","setionHeader-b666466c.js","Recurso 1-89d2e2b4.js","ScreenSize-d22b7a5d.js","proyectos-87458a40.css"])),z=u.lazy(()=>w(()=>import("./cardsProjects-4b720cee.js"),["cardsProjects-4b720cee.js","index.js","index-5a9f3c56.css","cardsProjects-577b53fd.css"])),C=()=>{const[r,s]=j.useState(),[t,c]=j.useState([]),{projectArg:l}=I(),{projects:d,projectImages:o}=L();return u.useEffect(()=>{if(!d||!o||!l)return;const a=d.results.find(i=>i.id===parseInt(l)),n=o.filter(i=>i.proyecto===parseInt(l));a&&(s(a),c(n))},[d,o,l]),!r||!t||!d||!o||!l?e.jsx("div",{children:"No hay información disponible"}):e.jsx(e.Fragment,{children:e.jsxs(D,{children:[e.jsx(M,{title:"Proyectos",paragraph:"Proyectos",image:O}),e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"row titulo",children:[e.jsx("h2",{className:"col-10",children:r.nombre}),e.jsx(x,{to:"/projects",className:"col-2",children:e.jsx("button",{className:"boton-1 ",children:"ver más"})})]}),e.jsxs("div",{className:"row project-detail",children:[e.jsx("div",{className:"col-12 col-md-6 ",children:e.jsx(A,{images:t})}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("h3",{children:"Descripción del proyecto"}),e.jsx("p",{children:r.descripcion}),e.jsx("h3",{children:"Ubicación"}),e.jsxs("p",{children:[r.ciudad.departamento.pais.nombre,", ",r.ciudad.departamento.nombre,", ",r.ciudad.nombre]}),e.jsx("h3",{children:"Servicios prestados"}),r.servicios.map(a=>e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:a.nombre},a.id),e.jsx(x,{to:"/servicios",children:e.jsx("button",{className:"boton-1",children:"ver más"})})]}))]},l)]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 relacionados",children:e.jsx("h3",{children:"Proyectos relacionados"})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(z,{type:r.tipo.id,actualPage:r.id,imagenes:o,projects:d})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(F,{})})})]})]})})};function Q(){const{isVisible:r,ref:s}=T("100px");return e.jsx("div",{id:"LazyProjectDetail",ref:s,children:r?e.jsx(C,{}):null})}export{Q as default};


//# sourceMappingURL=data:application/json;base64,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Q0FBRSxVQUFBQyxFQUFXLElBQUFDLENBQUksRUFBSUMsRUFBd0IsT0FBTyxFQUd0RCxPQUFBcEMsRUFBQSxJQUFDLE9BQUksR0FBRyxvQkFBb0IsSUFBQW1DLEVBQ3ZCLFNBQVlELEVBQUFsQyxFQUFBLElBQUNjLEVBQWEsSUFBSyxJQUNwQyxFQUVOIiwibmFtZXMiOlsiZWZmZWN0SW5pdCIsInBhcmFtcyIsImVmZmVjdCIsInN3aXBlciIsIm9uIiwic2V0VHJhbnNsYXRlIiwic2V0VHJhbnNpdGlvbiIsIm92ZXJ3cml0ZVBhcmFtcyIsInBlcnNwZWN0aXZlIiwicmVjcmVhdGVTaGFkb3dzIiwiZ2V0RWZmZWN0UGFyYW1zIiwib3ZlcndyaXRlUGFyYW1zUmVzdWx0IiwiX3MiLCJkdXJhdGlvbiIsInNsaWRlRWwiLCJzaGFkb3dFbCIsInJlcXVpcmVVcGRhdGVPblZpcnR1YWwiLCJlZmZlY3RUYXJnZXQiLCJlZmZlY3RQYXJhbXMiLCJ0cmFuc2Zvcm1FbCIsImdldFNsaWRlVHJhbnNmb3JtRWwiLCJlZmZlY3RWaXJ0dWFsVHJhbnNpdGlvbkVuZCIsIl9yZWYiLCJ0cmFuc2Zvcm1FbGVtZW50cyIsImFsbFNsaWRlcyIsImFjdGl2ZUluZGV4IiwiZ2V0U2xpZGUiLCJlbCIsImV2ZW50VHJpZ2dlcmVkIiwidHJhbnNpdGlvbkVuZFRhcmdldCIsImVsZW1lbnRUcmFuc2l0aW9uRW5kIiwiZXZ0IiwiRWZmZWN0RmFkZSIsImV4dGVuZFBhcmFtcyIsInNsaWRlcyIsImkiLCJ0eCIsInR5Iiwic2xpZGVPcGFjaXR5IiwidGFyZ2V0RWwiLCJTbGlkZXJQcm9qZWN0RGV0YWlsIiwiaW1hZ2VzIiwianN4IiwiU3dpcGVyIiwiQXV0b3BsYXkiLCJQYWdpbmF0aW9uIiwiTmF2aWdhdGlvbiIsImltYWdlIiwiaW5kZXgiLCJTd2lwZXJTbGlkZSIsImpzeHMiLCJtb3Rpb24iLCJQcm95ZWN0b3MiLCJsYXp5IiwiX192aXRlUHJlbG9hZCIsIkxhenlDYXJkc1Byb2plY3RzIiwiUHJvamVjdERldGFpbCIsInByb2plY3QiLCJzZXRQcm9qZWN0IiwiUmVhY3QiLCJpbWFnZW4iLCJzZXRJbWFnZW4iLCJwcm9qZWN0QXJnIiwidXNlUGFyYW1zIiwicHJvamVjdHMiLCJwcm9qZWN0SW1hZ2VzIiwidXNlR2V0UHJvamVjdHMiLCJ1c2VFZmZlY3QiLCJwcm9qZWN0X3NlbGVjdCIsIkZyYWdtZW50IiwiUGFnZXNMYXlvdXQiLCJCYW5uZXIiLCJpbWFnZW5CYW5uZXIiLCJMaW5rIiwic2VydmljaW8iLCJMYXp5UHJvamVjdERldGFpbCIsImlzVmlzaWJsZSIsInJlZiIsInVzZUludGVyc2VjdGlvbk9ic2VydmVyIl0sInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9zaGFyZWQvZWZmZWN0LWluaXQubWpzIiwiLi4vbm9kZV9tb2R1bGVzL3N3aXBlci9zaGFyZWQvZWZmZWN0LXRhcmdldC5tanMiLCIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL3NoYXJlZC9lZmZlY3QtdmlydHVhbC10cmFuc2l0aW9uLWVuZC5tanMiLCIuLi9ub2RlX21vZHVsZXMvc3dpcGVyL21vZHVsZXMvZWZmZWN0LWZhZGUubWpzIiwiLi4vc3JjL2NvbXBvbmVudHMvc2xpZGVyUHJvamVjdERldGFpbC50c3giLCIuLi9zcmMvcGFnZXMvcHJvamVjc0RldGFpbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gZWZmZWN0SW5pdChwYXJhbXMpIHtcbiAgY29uc3Qge1xuICAgIGVmZmVjdCxcbiAgICBzd2lwZXIsXG4gICAgb24sXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIHNldFRyYW5zaXRpb24sXG4gICAgb3ZlcndyaXRlUGFyYW1zLFxuICAgIHBlcnNwZWN0aXZlLFxuICAgIHJlY3JlYXRlU2hhZG93cyxcbiAgICBnZXRFZmZlY3RQYXJhbXNcbiAgfSA9IHBhcmFtcztcbiAgb24oJ2JlZm9yZUluaXQnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuZWZmZWN0ICE9PSBlZmZlY3QpIHJldHVybjtcbiAgICBzd2lwZXIuY2xhc3NOYW1lcy5wdXNoKGAke3N3aXBlci5wYXJhbXMuY29udGFpbmVyTW9kaWZpZXJDbGFzc30ke2VmZmVjdH1gKTtcbiAgICBpZiAocGVyc3BlY3RpdmUgJiYgcGVyc3BlY3RpdmUoKSkge1xuICAgICAgc3dpcGVyLmNsYXNzTmFtZXMucHVzaChgJHtzd2lwZXIucGFyYW1zLmNvbnRhaW5lck1vZGlmaWVyQ2xhc3N9M2RgKTtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcndyaXRlUGFyYW1zUmVzdWx0ID0gb3ZlcndyaXRlUGFyYW1zID8gb3ZlcndyaXRlUGFyYW1zKCkgOiB7fTtcbiAgICBPYmplY3QuYXNzaWduKHN3aXBlci5wYXJhbXMsIG92ZXJ3cml0ZVBhcmFtc1Jlc3VsdCk7XG4gICAgT2JqZWN0LmFzc2lnbihzd2lwZXIub3JpZ2luYWxQYXJhbXMsIG92ZXJ3cml0ZVBhcmFtc1Jlc3VsdCk7XG4gIH0pO1xuICBvbignc2V0VHJhbnNsYXRlJywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgc2V0VHJhbnNsYXRlKCk7XG4gIH0pO1xuICBvbignc2V0VHJhbnNpdGlvbicsIChfcywgZHVyYXRpb24pID0+IHtcbiAgICBpZiAoc3dpcGVyLnBhcmFtcy5lZmZlY3QgIT09IGVmZmVjdCkgcmV0dXJuO1xuICAgIHNldFRyYW5zaXRpb24oZHVyYXRpb24pO1xuICB9KTtcbiAgb24oJ3RyYW5zaXRpb25FbmQnLCAoKSA9PiB7XG4gICAgaWYgKHN3aXBlci5wYXJhbXMuZWZmZWN0ICE9PSBlZmZlY3QpIHJldHVybjtcbiAgICBpZiAocmVjcmVhdGVTaGFkb3dzKSB7XG4gICAgICBpZiAoIWdldEVmZmVjdFBhcmFtcyB8fCAhZ2V0RWZmZWN0UGFyYW1zKCkuc2xpZGVTaGFkb3dzKSByZXR1cm47XG4gICAgICAvLyByZW1vdmUgc2hhZG93c1xuICAgICAgc3dpcGVyLnNsaWRlcy5mb3JFYWNoKHNsaWRlRWwgPT4ge1xuICAgICAgICBzbGlkZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUtc2hhZG93LXRvcCwgLnN3aXBlci1zbGlkZS1zaGFkb3ctcmlnaHQsIC5zd2lwZXItc2xpZGUtc2hhZG93LWJvdHRvbSwgLnN3aXBlci1zbGlkZS1zaGFkb3ctbGVmdCcpLmZvckVhY2goc2hhZG93RWwgPT4gc2hhZG93RWwucmVtb3ZlKCkpO1xuICAgICAgfSk7XG4gICAgICAvLyBjcmVhdGUgbmV3IG9uZVxuICAgICAgcmVjcmVhdGVTaGFkb3dzKCk7XG4gICAgfVxuICB9KTtcbiAgbGV0IHJlcXVpcmVVcGRhdGVPblZpcnR1YWw7XG4gIG9uKCd2aXJ0dWFsVXBkYXRlJywgKCkgPT4ge1xuICAgIGlmIChzd2lwZXIucGFyYW1zLmVmZmVjdCAhPT0gZWZmZWN0KSByZXR1cm47XG4gICAgaWYgKCFzd2lwZXIuc2xpZGVzLmxlbmd0aCkge1xuICAgICAgcmVxdWlyZVVwZGF0ZU9uVmlydHVhbCA9IHRydWU7XG4gICAgfVxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZiAocmVxdWlyZVVwZGF0ZU9uVmlydHVhbCAmJiBzd2lwZXIuc2xpZGVzICYmIHN3aXBlci5zbGlkZXMubGVuZ3RoKSB7XG4gICAgICAgIHNldFRyYW5zbGF0ZSgpO1xuICAgICAgICByZXF1aXJlVXBkYXRlT25WaXJ0dWFsID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgeyBlZmZlY3RJbml0IGFzIGUgfTtcbiIsImltcG9ydCB7IGwgYXMgZ2V0U2xpZGVUcmFuc2Zvcm1FbCB9IGZyb20gJy4vdXRpbHMubWpzJztcblxuZnVuY3Rpb24gZWZmZWN0VGFyZ2V0KGVmZmVjdFBhcmFtcywgc2xpZGVFbCkge1xuICBjb25zdCB0cmFuc2Zvcm1FbCA9IGdldFNsaWRlVHJhbnNmb3JtRWwoc2xpZGVFbCk7XG4gIGlmICh0cmFuc2Zvcm1FbCAhPT0gc2xpZGVFbCkge1xuICAgIHRyYW5zZm9ybUVsLnN0eWxlLmJhY2tmYWNlVmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIHRyYW5zZm9ybUVsLnN0eWxlWyctd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHknXSA9ICdoaWRkZW4nO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1FbDtcbn1cblxuZXhwb3J0IHsgZWZmZWN0VGFyZ2V0IGFzIGUgfTtcbiIsImltcG9ydCB7IGogYXMgZWxlbWVudFRyYW5zaXRpb25FbmQgfSBmcm9tICcuL3V0aWxzLm1qcyc7XG5cbmZ1bmN0aW9uIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kKF9yZWYpIHtcbiAgbGV0IHtcbiAgICBzd2lwZXIsXG4gICAgZHVyYXRpb24sXG4gICAgdHJhbnNmb3JtRWxlbWVudHMsXG4gICAgYWxsU2xpZGVzXG4gIH0gPSBfcmVmO1xuICBjb25zdCB7XG4gICAgYWN0aXZlSW5kZXhcbiAgfSA9IHN3aXBlcjtcbiAgY29uc3QgZ2V0U2xpZGUgPSBlbCA9PiB7XG4gICAgaWYgKCFlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAvLyBhc3N1bWUgc2hhZG93IHJvb3RcbiAgICAgIGNvbnN0IHNsaWRlID0gc3dpcGVyLnNsaWRlcy5maWx0ZXIoc2xpZGVFbCA9PiBzbGlkZUVsLnNoYWRvd1Jvb3QgJiYgc2xpZGVFbC5zaGFkb3dSb290ID09PSBlbC5wYXJlbnROb2RlKVswXTtcbiAgICAgIHJldHVybiBzbGlkZTtcbiAgICB9XG4gICAgcmV0dXJuIGVsLnBhcmVudEVsZW1lbnQ7XG4gIH07XG4gIGlmIChzd2lwZXIucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUgJiYgZHVyYXRpb24gIT09IDApIHtcbiAgICBsZXQgZXZlbnRUcmlnZ2VyZWQgPSBmYWxzZTtcbiAgICBsZXQgdHJhbnNpdGlvbkVuZFRhcmdldDtcbiAgICBpZiAoYWxsU2xpZGVzKSB7XG4gICAgICB0cmFuc2l0aW9uRW5kVGFyZ2V0ID0gdHJhbnNmb3JtRWxlbWVudHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zaXRpb25FbmRUYXJnZXQgPSB0cmFuc2Zvcm1FbGVtZW50cy5maWx0ZXIodHJhbnNmb3JtRWwgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IHRyYW5zZm9ybUVsLmNsYXNzTGlzdC5jb250YWlucygnc3dpcGVyLXNsaWRlLXRyYW5zZm9ybScpID8gZ2V0U2xpZGUodHJhbnNmb3JtRWwpIDogdHJhbnNmb3JtRWw7XG4gICAgICAgIHJldHVybiBzd2lwZXIuZ2V0U2xpZGVJbmRleChlbCkgPT09IGFjdGl2ZUluZGV4O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRyYW5zaXRpb25FbmRUYXJnZXQuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbGVtZW50VHJhbnNpdGlvbkVuZChlbCwgKCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnRUcmlnZ2VyZWQpIHJldHVybjtcbiAgICAgICAgaWYgKCFzd2lwZXIgfHwgc3dpcGVyLmRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICBldmVudFRyaWdnZXJlZCA9IHRydWU7XG4gICAgICAgIHN3aXBlci5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZXZ0ID0gbmV3IHdpbmRvdy5DdXN0b21FdmVudCgndHJhbnNpdGlvbmVuZCcsIHtcbiAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgIGNhbmNlbGFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHN3aXBlci53cmFwcGVyRWwuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQgYXMgZSB9O1xuIiwiaW1wb3J0IHsgZSBhcyBlZmZlY3RJbml0IH0gZnJvbSAnLi4vc2hhcmVkL2VmZmVjdC1pbml0Lm1qcyc7XG5pbXBvcnQgeyBlIGFzIGVmZmVjdFRhcmdldCB9IGZyb20gJy4uL3NoYXJlZC9lZmZlY3QtdGFyZ2V0Lm1qcyc7XG5pbXBvcnQgeyBlIGFzIGVmZmVjdFZpcnR1YWxUcmFuc2l0aW9uRW5kIH0gZnJvbSAnLi4vc2hhcmVkL2VmZmVjdC12aXJ0dWFsLXRyYW5zaXRpb24tZW5kLm1qcyc7XG5pbXBvcnQgeyBsIGFzIGdldFNsaWRlVHJhbnNmb3JtRWwgfSBmcm9tICcuLi9zaGFyZWQvdXRpbHMubWpzJztcblxuZnVuY3Rpb24gRWZmZWN0RmFkZShfcmVmKSB7XG4gIGxldCB7XG4gICAgc3dpcGVyLFxuICAgIGV4dGVuZFBhcmFtcyxcbiAgICBvblxuICB9ID0gX3JlZjtcbiAgZXh0ZW5kUGFyYW1zKHtcbiAgICBmYWRlRWZmZWN0OiB7XG4gICAgICBjcm9zc0ZhZGU6IGZhbHNlXG4gICAgfVxuICB9KTtcbiAgY29uc3Qgc2V0VHJhbnNsYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHNsaWRlc1xuICAgIH0gPSBzd2lwZXI7XG4gICAgY29uc3QgcGFyYW1zID0gc3dpcGVyLnBhcmFtcy5mYWRlRWZmZWN0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBzbGlkZUVsID0gc3dpcGVyLnNsaWRlc1tpXTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IHNsaWRlRWwuc3dpcGVyU2xpZGVPZmZzZXQ7XG4gICAgICBsZXQgdHggPSAtb2Zmc2V0O1xuICAgICAgaWYgKCFzd2lwZXIucGFyYW1zLnZpcnR1YWxUcmFuc2xhdGUpIHR4IC09IHN3aXBlci50cmFuc2xhdGU7XG4gICAgICBsZXQgdHkgPSAwO1xuICAgICAgaWYgKCFzd2lwZXIuaXNIb3Jpem9udGFsKCkpIHtcbiAgICAgICAgdHkgPSB0eDtcbiAgICAgICAgdHggPSAwO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2xpZGVPcGFjaXR5ID0gc3dpcGVyLnBhcmFtcy5mYWRlRWZmZWN0LmNyb3NzRmFkZSA/IE1hdGgubWF4KDEgLSBNYXRoLmFicyhzbGlkZUVsLnByb2dyZXNzKSwgMCkgOiAxICsgTWF0aC5taW4oTWF0aC5tYXgoc2xpZGVFbC5wcm9ncmVzcywgLTEpLCAwKTtcbiAgICAgIGNvbnN0IHRhcmdldEVsID0gZWZmZWN0VGFyZ2V0KHBhcmFtcywgc2xpZGVFbCk7XG4gICAgICB0YXJnZXRFbC5zdHlsZS5vcGFjaXR5ID0gc2xpZGVPcGFjaXR5O1xuICAgICAgdGFyZ2V0RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHh9cHgsICR7dHl9cHgsIDBweClgO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2V0VHJhbnNpdGlvbiA9IGR1cmF0aW9uID0+IHtcbiAgICBjb25zdCB0cmFuc2Zvcm1FbGVtZW50cyA9IHN3aXBlci5zbGlkZXMubWFwKHNsaWRlRWwgPT4gZ2V0U2xpZGVUcmFuc2Zvcm1FbChzbGlkZUVsKSk7XG4gICAgdHJhbnNmb3JtRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBgJHtkdXJhdGlvbn1tc2A7XG4gICAgfSk7XG4gICAgZWZmZWN0VmlydHVhbFRyYW5zaXRpb25FbmQoe1xuICAgICAgc3dpcGVyLFxuICAgICAgZHVyYXRpb24sXG4gICAgICB0cmFuc2Zvcm1FbGVtZW50cyxcbiAgICAgIGFsbFNsaWRlczogdHJ1ZVxuICAgIH0pO1xuICB9O1xuICBlZmZlY3RJbml0KHtcbiAgICBlZmZlY3Q6ICdmYWRlJyxcbiAgICBzd2lwZXIsXG4gICAgb24sXG4gICAgc2V0VHJhbnNsYXRlLFxuICAgIHNldFRyYW5zaXRpb24sXG4gICAgb3ZlcndyaXRlUGFyYW1zOiAoKSA9PiAoe1xuICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgIHZpcnR1YWxUcmFuc2xhdGU6ICFzd2lwZXIucGFyYW1zLmNzc01vZGVcbiAgICB9KVxuICB9KTtcbn1cblxuZXhwb3J0IHsgRWZmZWN0RmFkZSBhcyBkZWZhdWx0IH07XG4iLCJcbmltcG9ydCB7IFN3aXBlciwgU3dpcGVyU2xpZGUgfSBmcm9tICdzd2lwZXIvcmVhY3QnO1xuaW1wb3J0IHsgbW90aW9ufSBmcm9tICdmcmFtZXItbW90aW9uJ1xuaW1wb3J0IHsgUHJveWVjdEltYWdlc01hZ25hfSBmcm9tICcuLi90eXBlcy9wcm9qZWN0cyc7XG5pbXBvcnQgeyBBdXRvcGxheSwgUGFnaW5hdGlvbiwgTmF2aWdhdGlvbixFZmZlY3RGYWRlIH0gZnJvbSAnc3dpcGVyL21vZHVsZXMnO1xuaW1wb3J0ICdzd2lwZXIvY3NzJztcbmltcG9ydCAnc3dpcGVyL2Nzcy9lZmZlY3QtZmFkZSc7XG5cbnR5cGUgU2xpZGVyUHJvamVjdERldGFpbFByb3BzID0ge1xuICAgIGltYWdlczogUHJveWVjdEltYWdlc01hZ25hW107XG59O1xuXG5jb25zdCBTbGlkZXJQcm9qZWN0RGV0YWlsID0gKFxuICAgIHsgaW1hZ2VzIH06IFNsaWRlclByb2plY3REZXRhaWxQcm9wc1xuKSA9PiB7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8U3dpcGVyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW49ezB9XG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3PXsxfVxuICAgICAgICAgICAgYXV0b3BsYXk9e3tcbiAgICAgICAgICAgICAgICBkZWxheTogODAwMCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgcGF1c2VPbk1vdXNlRW50ZXI6IHRydWUsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgbW9kdWxlcz17W0F1dG9wbGF5LCBQYWdpbmF0aW9uLCBOYXZpZ2F0aW9uLEVmZmVjdEZhZGVdfVxuICAgICAgICAgICAgZWZmZWN0PSdmYWRlJ1xuICAgICAgICAgICAgY2xhc3NOYW1lPVwicHJvamVjdERldGFpbFNsaWRlclwiXG4gICAgICAgID5cbiAgICAgICAgICAgIHtpbWFnZXMubWFwKChpbWFnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICA8U3dpcGVyU2xpZGUga2V5PXtpbmRleH1cbiAgICAgICAgICAgICAgICBzdHlsZT17e2hlaWdodDogJzEwMCUnLCB3aWR0aDogJzEwMCUnLGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ319XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwLCB5OiA1MCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC41IH19XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlPXt7IG9wYWNpdHk6IDEsIHk6IDAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e2Ake2ltYWdlLmltYWdlbn1gfSBhbHQ9e2Bwcm95ZWN0by0ke2ltYWdlLnByb3llY3RvfSBgfSBjbGFzc05hbWU9XCJpbWctZmx1aWQgaW1hZ2VuLXByb2VjdG9cIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2ltYWdlLnJlZmVyZW5jZXNfdXJsPyBpbWFnZS5yZWZlcmVuY2VzX3VybCA6ICdodHRwczovL3d3dy5NYWduYWluZ2VuaWVyaWF5dG9wb2dyYWZpYS5jb20nfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub3JlZmVycmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UucmVmZXJlbmNlc19uYW1lPyBpbWFnZS5yZWZlcmVuY2VzX25hbWUgOiAnTWFnbmFpbmdlbmllcmlheXRvcG9ncmFmaWEuY29tJ1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICA8L1N3aXBlclNsaWRlPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgIDwvU3dpcGVyPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTbGlkZXJQcm9qZWN0RGV0YWlsO1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgbGF6eSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IExpbmssIHVzZVBhcmFtcyB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IEJhbm5lciBmcm9tICcuLi9jb21wb25lbnRzL2Jhbm5lcic7XG5pbXBvcnQgaW1hZ2VuQmFubmVyIGZyb20gJy4uL2Fzc2V0cy9pbWcvYmFubmVyL3Byb2plY3RzLndlYnAnO1xuaW1wb3J0IHsgUmVzdWx0LCBQcm95ZWN0SW1hZ2VzTWFnbmEsIFNlcnZpY2lvIH0gZnJvbSAnLi4vdHlwZXMvcHJvamVjdHMnO1xuaW1wb3J0IFNsaWRlclByb2plY3REZXRhaWwgZnJvbSAnLi4vY29tcG9uZW50cy9zbGlkZXJQcm9qZWN0RGV0YWlsJztcbmltcG9ydCBQYWdlc0xheW91dCBmcm9tICcuLi9sYXlvdXRzL3BhZ2VzTGF5b3V0cyc7XG5pbXBvcnQgJy4vc3R5bGVzL3Byb2plY3RzRGV0YWlsLmNzcyc7XG5pbXBvcnQgeyB1c2VHZXRQcm9qZWN0cyB9IGZyb20gJy4uL2hvb2tzL2dldFByb2plY3RzJztcbmltcG9ydCB1c2VJbnRlcnNlY3Rpb25PYnNlcnZlciBmcm9tICcuLi9ob29rcy91c2VMYXp5bG9hZCc7XG5cbmNvbnN0IFByb3llY3RvcyA9IGxhenkoKCkgPT4gaW1wb3J0KCcuLi9jb21wb25lbnRzL3NlY3Rpb25zL3Byb3llY3RvcycpKTtcbmNvbnN0IExhenlDYXJkc1Byb2plY3RzID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4uL2NvbXBvbmVudHMvY2FyZHNQcm9qZWN0cycpKTtcblxuY29uc3QgUHJvamVjdERldGFpbDogUmVhY3QuRkM9ICgpID0+IHtcbiAgICBjb25zdCBbcHJvamVjdCwgc2V0UHJvamVjdF0gPSBSZWFjdC51c2VTdGF0ZTxSZXN1bHQ+KCk7XG4gICAgY29uc3QgW2ltYWdlbiwgc2V0SW1hZ2VuXSA9IFJlYWN0LnVzZVN0YXRlPFByb3llY3RJbWFnZXNNYWduYVtdPihbXSk7XG4gICAgY29uc3QgeyBwcm9qZWN0QXJnIH0gPSB1c2VQYXJhbXM8eyBwcm9qZWN0QXJnOiBzdHJpbmcgfT4oKTtcbiAgICBjb25zdCB7IHByb2plY3RzLCBwcm9qZWN0SW1hZ2VzIH0gPSB1c2VHZXRQcm9qZWN0cygpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFwcm9qZWN0cyB8fCAhcHJvamVjdEltYWdlcyB8fCAhcHJvamVjdEFyZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb2plY3Rfc2VsZWN0OiBSZXN1bHQgfCB1bmRlZmluZWQgPSBwcm9qZWN0cy5yZXN1bHRzLmZpbmQoKHByb2plY3Q6IFJlc3VsdCkgPT4gcHJvamVjdC5pZCA9PT0gcGFyc2VJbnQocHJvamVjdEFyZykpO1xuICAgICAgICBjb25zdCBpbWFnZXM6IFByb3llY3RJbWFnZXNNYWduYVtdID0gcHJvamVjdEltYWdlcy5maWx0ZXIoKGltYWdlbjogUHJveWVjdEltYWdlc01hZ25hKSA9PiBpbWFnZW4ucHJveWVjdG8gPT09IHBhcnNlSW50KHByb2plY3RBcmcpKTtcbiAgICAgICAgaWYgKHByb2plY3Rfc2VsZWN0KSB7XG4gICAgICAgICAgICBzZXRQcm9qZWN0KHByb2plY3Rfc2VsZWN0KTtcbiAgICAgICAgICAgIHNldEltYWdlbihpbWFnZXMpO1xuICAgICAgICB9XG4gICAgfSwgW3Byb2plY3RzLCBwcm9qZWN0SW1hZ2VzLCBwcm9qZWN0QXJnXSk7XG5cbiAgICBpZiAoIXByb2plY3QgfHwgIWltYWdlbiB8fCAhcHJvamVjdHMgfHwgIXByb2plY3RJbWFnZXMgfHwgIXByb2plY3RBcmcpIHtcbiAgICAgICAgcmV0dXJuIDxkaXY+Tm8gaGF5IGluZm9ybWFjacOzbiBkaXNwb25pYmxlPC9kaXY+O1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDw+XG4gICAgICAgIDxQYWdlc0xheW91dD5cbiAgICAgICAgICAgIDxCYW5uZXIgdGl0bGU9XCJQcm95ZWN0b3NcIiBwYXJhZ3JhcGg9J1Byb3llY3RvcycgaW1hZ2U9e2ltYWdlbkJhbm5lcn0vPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyB0aXR1bG9cIj5cbiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0nY29sLTEwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9qZWN0Lm5vbWJyZX1cbiAgICAgICAgICAgICAgICAgICAgPC9oMj5cbiAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89Jy9wcm9qZWN0cycgY2xhc3NOYW1lPSdjb2wtMic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYm90b24tMSAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlciBtw6FzXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBwcm9qZWN0LWRldGFpbFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC0xMiBjb2wtbWQtNiBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTbGlkZXJQcm9qZWN0RGV0YWlsIGltYWdlcz17aW1hZ2VufS8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC0xMiBjb2wtbWQtNlwiIGtleT17cHJvamVjdEFyZ30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlc2NyaXBjacOzbiBkZWwgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57cHJvamVjdC5kZXNjcmlwY2lvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVWJpY2FjacOzblxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9qZWN0LmNpdWRhZC5kZXBhcnRhbWVudG8ucGFpcy5ub21icmV9LCB7cHJvamVjdC5jaXVkYWQuZGVwYXJ0YW1lbnRvLm5vbWJyZX0sIHtwcm9qZWN0LmNpdWRhZC5ub21icmV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VydmljaW9zIHByZXN0YWRvc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0LnNlcnZpY2lvcy5tYXAoKHNlcnZpY2lvOiBTZXJ2aWNpbykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUga2V5PXtzZXJ2aWNpby5pZH0+e3NlcnZpY2lvLm5vbWJyZX08L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGluayB0bz17YC9zZXJ2aWNpb3NgfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdib3Rvbi0xJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXIgbcOhc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIHJlbGFjaW9uYWRvc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb3llY3RvcyByZWxhY2lvbmFkb3NcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGF6eUNhcmRzUHJvamVjdHMgdHlwZT17cHJvamVjdC50aXBvLmlkfSBhY3R1YWxQYWdlPXtwcm9qZWN0LmlkfSBpbWFnZW5lcz17cHJvamVjdEltYWdlc30gcHJvamVjdHM9e3Byb2plY3RzfS8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UHJveWVjdG9zIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvUGFnZXNMYXlvdXQ+XG4gICAgICAgIDwvPlxuICAgICk7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExhenlQcm9qZWN0RGV0YWlsICgpIHtcbiAgICBjb25zdCB7IGlzVmlzaWJsZSwgcmVmIH0gPSB1c2VJbnRlcnNlY3Rpb25PYnNlcnZlcignMTAwcHgnKTtcbiAgXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBpZD1cIkxhenlQcm9qZWN0RGV0YWlsXCIgcmVmPXtyZWZ9PlxuICAgICAgICAgICAge2lzVmlzaWJsZSA/IDxQcm9qZWN0RGV0YWlsLz4gOiBudWxsfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xuICB9Il0sImZpbGUiOiJwcm9qZWNzRGV0YWlsLWRkM2JhOWYxLmpzIn0=