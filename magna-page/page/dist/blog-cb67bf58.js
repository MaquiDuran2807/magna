import{K as N,M as j,z as e,L as x,w as u,R as v,_ as p}from"./GetsIdServices-a2eadd61.js";import{i as f,h as P,b}from"./main.js";import{B as y,S as B,f as M,a as R}from"./sidebarBolgs-d405caca.js";import{a as S}from"./index.esm-0326b631.js";import{u as w}from"./useLazyload-ba07af35.js";import"./floawhatsapp-034e869d.js";import"./footer1-6fa4e3b7.js";import"./index.esm-aae65489.js";import"./iconBase-f5841301.js";import"./index.esm-0aabaae2.js";import"./index.esm-970eed6e.js";var F=class extends N{constructor(s,t){super(s,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(s,t){super.setOptions({...s,behavior:f()},t)}getOptimisticResult(s){return s.behavior=f(),super.getOptimisticResult(s)}fetchNextPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"backward"}}})}createResult(s,t){var n,o,m,i;const{state:a}=s,c=super.createResult(s,t),{isFetching:r,isRefetching:l}=c,d=r&&((o=(n=a.fetchMeta)==null?void 0:n.fetchMore)==null?void 0:o.direction)==="forward",h=r&&((i=(m=a.fetchMeta)==null?void 0:m.fetchMore)==null?void 0:i.direction)==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:P(t,a.data),hasPreviousPage:b(t,a.data),isFetchingNextPage:d,isFetchingPreviousPage:h,isRefetching:l&&!d&&!h}}};function L(s,t){return j(s,F,t)}const O=({blogs:s,search:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[t&&t.length===0&&e.jsx("h3",{children:"No se encontraron resultados"}),t&&t.length>0&&e.jsx("h3",{children:"Resultados de la búsqueda"}),t&&(t==null?void 0:t.map(a=>e.jsx("div",{className:"col-lg-4 col-md-4 col-sm-6 ",children:e.jsx(x,{to:`/blog/${a.id}`,className:"link-blogs",children:e.jsxs("div",{className:"card card-blog mt-3 small-card",children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:a.image,className:"img-fluid small-image",alt:a.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:a.title}),e.jsxs("p",{className:"card-text",children:[a.description.slice(0,200),"..."]})]})]})})},a.id))),t&&t.length>0&&e.jsx("hr",{className:"mt-5"})]}),e.jsx("div",{className:"row",children:s.map(a=>{let c="",r="",l="";return a.important===!1?(c="col-lg-4 col-md-4 col-sm-6",l="small-card",r="small-image"):a.important===!0?(c="col-lg-6 col-md-12 col-sm-12 ",r="big-image",l="big-card"):(c="col-lg-3 col-md-4 col-sm-6",r="small-image",l="small-card"),e.jsx("div",{className:c,children:e.jsx(x,{to:`/blog/${a.id}`,className:"link-blogs",children:e.jsxs("div",{className:`card card-blog mt-3 ${l}`,children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:a.image,className:` img-fluid ${r}`,alt:a.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:a.title}),e.jsxs("p",{className:"card-text",children:[a.description.slice(0,200),"..."]})]})]})})},a.id)})})]}),_=({setFilter:s})=>{const[t,a]=u.useState(""),c=r=>{a(r.target.value),s(r.target.value)};return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:t,onChange:c,placeholder:"Buscar...",className:"blog-search"}),e.jsx(S,{className:"ms-2"})]})},C=v.lazy(()=>p(()=>import("./GetsIdServices-a2eadd61.js").then(s=>s.$),[])),E=()=>{const[s,t]=u.useState(""),[a,c]=u.useState(null),{data:r,isError:l,isLoading:d,fetchNextPage:h,hasNextPage:n,isFetchingNextPage:o}=L({queryKey:["blogs"],queryFn:({pageParam:i=0})=>R(i),initialPageParam:"1",staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchInterval:1e3*60*30,getNextPageParam:i=>{if(i!=null&&i.nextPage)return i.nextPage.split("=")[1]}});if(u.useEffect(()=>{if(!s)return;(async()=>{const g=await M(s);g&&c(g)})()},[s]),l)return e.jsx("div",{children:"Error"});if(d)return e.jsx(C,{});if(!r)return;const m=r.pages.flatMap(i=>(i==null?void 0:i.blogs)??[]);return e.jsx("div",{className:"blog-container pt-3",children:e.jsx(y,{children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"blog-header  text-center",children:e.jsx("h1",{children:"MagnaBlog"})}),e.jsx("div",{className:" text-center",children:e.jsx(_,{setFilter:t})}),e.jsxs("div",{className:"blog-cards ",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 col-12",children:e.jsx(O,{blogs:m,search:a})}),e.jsx("div",{className:"col-md-4 col-12",children:e.jsx(B,{})})]}),e.jsx("button",{onClick:()=>h(),className:"btn btn-primary",type:"button",disabled:!n||o,style:{marginTop:"2rem"},children:o?"Loading more...":n?"Cargar más blogs":"No hay más blogs"})]})]})})})};function W(){const{isVisible:s,ref:t}=w("100px");return e.jsx("div",{id:"LazyBlog",ref:t,children:s?e.jsx(E,{}):null})}export{W as default};


//# sourceMappingURL=data:application/json;base64,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QyxPQUFJLFVBQVUsMkJBQ1gsU0FBQ0EsTUFBQSxNQUFHLHFCQUFTLENBQ2pCLFNBQ0MsTUFBSSxXQUFVLGVBQ1gsU0FBQ0EsRUFBQSxJQUFBa0MsRUFBQSxDQUFXLFVBQUEzQixDQUFzQixHQUN0QyxFQUNBVCxPQUFDLE1BQUksV0FBVSxjQUNYLFVBQUNBLE9BQUEsT0FBSSxVQUFVLE1BQ1gsVUFBQ0UsTUFBQSxPQUFJLFVBQVUsa0JBQ1gsU0FBQUEsTUFBQ0wsR0FBUyxNQUFBQyxFQUFjLE9BQVF3QixFQUFhLENBQ2pELFNBQ0MsTUFBSSxXQUFVLGtCQUNYLFNBQUFwQixNQUFDbUMsR0FBUSxHQUNiLEdBQ0osRUFDQW5DLEVBQUEsSUFBQyxVQUNMLFFBQVMsSUFBTXlCLEVBQWMsRUFDN0IsVUFBVSxrQkFDVixLQUFLLFNBQ0wsU0FBVSxDQUFDbkMsR0FBZU4sRUFDMUIsTUFBTyxDQUFFLFVBQVcsTUFBTyxFQUUxQixTQUFBQSxFQUNLLGtCQUNBTSxFQUNBLG1CQUNBLG1CQUNWLEdBQ0ksR0FDSixFQUNKLENBQ0osRUFFUixFQUdBLFNBQXdCOEMsR0FBWSxDQUNoQyxLQUFNLENBQUUsVUFBQUMsRUFBVyxJQUFBQyxDQUFJLEVBQUlDLEVBQXdCLE9BQU8sRUFHdEQsT0FBQXZDLEVBQUEsSUFBQyxPQUFJLEdBQUcsV0FBVyxJQUFBc0MsRUFDZCxTQUFZRCxFQUFBckMsRUFBQSxJQUFDa0IsRUFBSSxJQUFLLElBQzNCLEVBRU4iLCJuYW1lcyI6WyJJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIiLCJRdWVyeU9ic2VydmVyIiwiY2xpZW50Iiwib3B0aW9ucyIsIm5vdGlmeU9wdGlvbnMiLCJpbmZpbml0ZVF1ZXJ5QmVoYXZpb3IiLCJxdWVyeSIsInN0YXRlIiwicmVzdWx0IiwiaXNGZXRjaGluZyIsImlzUmVmZXRjaGluZyIsImlzRmV0Y2hpbmdOZXh0UGFnZSIsIl9iIiwiX2EiLCJpc0ZldGNoaW5nUHJldmlvdXNQYWdlIiwiX2QiLCJfYyIsImhhc05leHRQYWdlIiwiaGFzUHJldmlvdXNQYWdlIiwidXNlSW5maW5pdGVRdWVyeSIsInF1ZXJ5Q2xpZW50IiwidXNlQmFzZVF1ZXJ5IiwiQmxvZ0xpc3QiLCJibG9ncyIsInNlYXJjaCIsImpzeHMiLCJGcmFnbWVudCIsImpzeCIsImJsb2ciLCJMaW5rIiwic2l6ZUNsYXNzIiwiaW1hZ2VDbGFzcyIsImNhcmRDbGFzcyIsIlNlYXJjaCIsInNldEZpbHRlciIsInNlYXJjaFZhbHVlIiwic2V0U2VhcmNoVmFsdWUiLCJ1c2VTdGF0ZSIsImhhbmRsZVNlYXJjaENoYW5nZSIsImV2ZW50IiwiRmlTZWFyY2giLCJTcGlubmVyIiwiUmVhY3QiLCJfX3ZpdGVQcmVsb2FkIiwibiIsIkJsb2ciLCJmaWx0ZXIiLCJmaWx0ZXJCbG9ncyIsInNldEZpbHRlckJsb2dzdCIsImRhdGEiLCJpc0Vycm9yIiwiaXNMb2FkaW5nIiwiZmV0Y2hOZXh0UGFnZSIsInBhZ2VQYXJhbSIsImZldGNoTmV4dEJsb2dzIiwibGFzdFBhZ2UiLCJ1c2VFZmZlY3QiLCJyZXNwb25zZSIsImZldGNoQmxvZ1NlYXJjaCIsInBhZ2UiLCJCbG9nTGF5b3V0IiwiQmxvZ1NlYXJjaCIsIlNpZGViYXIiLCJMYXp5QmxvZyIsImlzVmlzaWJsZSIsInJlZiIsInVzZUludGVyc2VjdGlvbk9ic2VydmVyIl0sInNvdXJjZXMiOlsiLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9pbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VJbmZpbml0ZVF1ZXJ5LmpzIiwiLi4vc3JjL2NvbXBvbmVudHMvYmxvZ0NhcmRzLnRzeCIsIi4uL3NyYy9jb21wb25lbnRzL3NlYXJjaC50c3giLCIuLi9zcmMvcGFnZXMvYmxvZy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2luZmluaXRlUXVlcnlPYnNlcnZlci50c1xuaW1wb3J0IHsgUXVlcnlPYnNlcnZlciB9IGZyb20gXCIuL3F1ZXJ5T2JzZXJ2ZXIuanNcIjtcbmltcG9ydCB7XG4gIGhhc05leHRQYWdlLFxuICBoYXNQcmV2aW91c1BhZ2UsXG4gIGluZmluaXRlUXVlcnlCZWhhdmlvclxufSBmcm9tIFwiLi9pbmZpbml0ZVF1ZXJ5QmVoYXZpb3IuanNcIjtcbnZhciBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIgPSBjbGFzcyBleHRlbmRzIFF1ZXJ5T2JzZXJ2ZXIge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgY29uc3RydWN0b3IoY2xpZW50LCBvcHRpb25zKSB7XG4gICAgc3VwZXIoY2xpZW50LCBvcHRpb25zKTtcbiAgfVxuICBiaW5kTWV0aG9kcygpIHtcbiAgICBzdXBlci5iaW5kTWV0aG9kcygpO1xuICAgIHRoaXMuZmV0Y2hOZXh0UGFnZSA9IHRoaXMuZmV0Y2hOZXh0UGFnZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hQcmV2aW91c1BhZ2UgPSB0aGlzLmZldGNoUHJldmlvdXNQYWdlLmJpbmQodGhpcyk7XG4gIH1cbiAgc2V0T3B0aW9ucyhvcHRpb25zLCBub3RpZnlPcHRpb25zKSB7XG4gICAgc3VwZXIuc2V0T3B0aW9ucyhcbiAgICAgIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgYmVoYXZpb3I6IGluZmluaXRlUXVlcnlCZWhhdmlvcigpXG4gICAgICB9LFxuICAgICAgbm90aWZ5T3B0aW9uc1xuICAgICk7XG4gIH1cbiAgZ2V0T3B0aW1pc3RpY1Jlc3VsdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5iZWhhdmlvciA9IGluZmluaXRlUXVlcnlCZWhhdmlvcigpO1xuICAgIHJldHVybiBzdXBlci5nZXRPcHRpbWlzdGljUmVzdWx0KG9wdGlvbnMpO1xuICB9XG4gIGZldGNoTmV4dFBhZ2Uob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGZldGNoTW9yZTogeyBkaXJlY3Rpb246IFwiZm9yd2FyZFwiIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmZXRjaFByZXZpb3VzUGFnZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goe1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgZmV0Y2hNb3JlOiB7IGRpcmVjdGlvbjogXCJiYWNrd2FyZFwiIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBjcmVhdGVSZXN1bHQocXVlcnksIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlIH0gPSBxdWVyeTtcbiAgICBjb25zdCByZXN1bHQgPSBzdXBlci5jcmVhdGVSZXN1bHQocXVlcnksIG9wdGlvbnMpO1xuICAgIGNvbnN0IHsgaXNGZXRjaGluZywgaXNSZWZldGNoaW5nIH0gPSByZXN1bHQ7XG4gICAgY29uc3QgaXNGZXRjaGluZ05leHRQYWdlID0gaXNGZXRjaGluZyAmJiBzdGF0ZS5mZXRjaE1ldGE/LmZldGNoTW9yZT8uZGlyZWN0aW9uID09PSBcImZvcndhcmRcIjtcbiAgICBjb25zdCBpc0ZldGNoaW5nUHJldmlvdXNQYWdlID0gaXNGZXRjaGluZyAmJiBzdGF0ZS5mZXRjaE1ldGE/LmZldGNoTW9yZT8uZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlc3VsdCxcbiAgICAgIGZldGNoTmV4dFBhZ2U6IHRoaXMuZmV0Y2hOZXh0UGFnZSxcbiAgICAgIGZldGNoUHJldmlvdXNQYWdlOiB0aGlzLmZldGNoUHJldmlvdXNQYWdlLFxuICAgICAgaGFzTmV4dFBhZ2U6IGhhc05leHRQYWdlKG9wdGlvbnMsIHN0YXRlLmRhdGEpLFxuICAgICAgaGFzUHJldmlvdXNQYWdlOiBoYXNQcmV2aW91c1BhZ2Uob3B0aW9ucywgc3RhdGUuZGF0YSksXG4gICAgICBpc0ZldGNoaW5nTmV4dFBhZ2UsXG4gICAgICBpc0ZldGNoaW5nUHJldmlvdXNQYWdlLFxuICAgICAgaXNSZWZldGNoaW5nOiBpc1JlZmV0Y2hpbmcgJiYgIWlzRmV0Y2hpbmdOZXh0UGFnZSAmJiAhaXNGZXRjaGluZ1ByZXZpb3VzUGFnZVxuICAgIH07XG4gIH1cbn07XG5leHBvcnQge1xuICBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIuanMubWFwIiwiXCJ1c2UgY2xpZW50XCI7XG5cbi8vIHNyYy91c2VJbmZpbml0ZVF1ZXJ5LnRzXG5pbXBvcnQgeyBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIgfSBmcm9tIFwiQHRhbnN0YWNrL3F1ZXJ5LWNvcmVcIjtcbmltcG9ydCB7IHVzZUJhc2VRdWVyeSB9IGZyb20gXCIuL3VzZUJhc2VRdWVyeS5qc1wiO1xuZnVuY3Rpb24gdXNlSW5maW5pdGVRdWVyeShvcHRpb25zLCBxdWVyeUNsaWVudCkge1xuICByZXR1cm4gdXNlQmFzZVF1ZXJ5KFxuICAgIG9wdGlvbnMsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgIEluZmluaXRlUXVlcnlPYnNlcnZlcixcbiAgICBxdWVyeUNsaWVudFxuICApO1xufVxuZXhwb3J0IHtcbiAgdXNlSW5maW5pdGVRdWVyeVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUluZmluaXRlUXVlcnkuanMubWFwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSAnLi4vdHlwZXMvYmxvZyc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuXHJcblxyXG5pbnRlcmZhY2UgQmxvZ0xpc3RQcm9wcyB7XHJcbiAgICBibG9nczogUmVzdWx0W107XHJcbiAgICBzZWFyY2g/OiBSZXN1bHRbXSB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IEJsb2dMaXN0OiBSZWFjdC5GQzxCbG9nTGlzdFByb3BzPiA9ICh7IGJsb2dzLHNlYXJjaCAgfSkgPT4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XHJcbiAgICAgICAgICAgIHtzZWFyY2ggJiYgc2VhcmNoLmxlbmd0aCA9PT0gMCAmJiA8aDM+Tm8gc2UgZW5jb250cmFyb24gcmVzdWx0YWRvczwvaDM+fVxyXG4gICAgICAgICAgICB7c2VhcmNoICYmIHNlYXJjaC5sZW5ndGggPiAwICYmIDxoMz5SZXN1bHRhZG9zIGRlIGxhIGLDunNxdWVkYTwvaDM+fVxyXG4gICAgICAgICAgICB7c2VhcmNoICYmXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g/Lm1hcCgoYmxvZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtibG9nLmlkfSBjbGFzc05hbWU9XCJjb2wtbGctNCBjb2wtbWQtNCBjb2wtc20tNiBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvYmxvZy8ke2Jsb2cuaWR9YH0gY2xhc3NOYW1lPSdsaW5rLWJsb2dzJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQgY2FyZC1ibG9nIG10LTMgc21hbGwtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW1nLXRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e2Jsb2cuaW1hZ2V9IGNsYXNzTmFtZT1cImltZy1mbHVpZCBzbWFsbC1pbWFnZVwiIGFsdD17YmxvZy50aXRsZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwiY2FyZC10aXRsZVwiPntibG9nLnRpdGxlfTwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJjYXJkLXRleHRcIj57YmxvZy5kZXNjcmlwdGlvbi5zbGljZSgwLCAyMDApfS4uLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB7c2VhcmNoICYmIHNlYXJjaC5sZW5ndGggPiAwICYmIFxyXG4gICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtdC01Jy8+fVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cclxuICAgICAgICAgICAge2Jsb2dzLm1hcCgoYmxvZykgPT4ge1xyXG4gICAgbGV0IHNpemVDbGFzcyA9ICcnO1xyXG4gICAgbGV0IGltYWdlQ2xhc3MgPSAnJztcclxuICAgIGxldCBjYXJkQ2xhc3MgPSAnJztcclxuICAgIGlmIChibG9nLmltcG9ydGFudCA9PT0gZmFsc2UpIHtcclxuICAgICAgICBzaXplQ2xhc3MgPSAnY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTYnOyAvLyBQcmltZXJhIHRhcmpldGEgcGVxdWXDsWFcclxuICAgICAgICBjYXJkQ2xhc3MgPSAnc21hbGwtY2FyZCc7XHJcbiAgICAgICAgaW1hZ2VDbGFzcyA9ICdzbWFsbC1pbWFnZSc7XHJcbiAgICB9IGVsc2UgaWYgKGJsb2cuaW1wb3J0YW50ID09PSB0cnVlKSB7XHJcbiAgICAgICAgc2l6ZUNsYXNzID0gJ2NvbC1sZy02IGNvbC1tZC0xMiBjb2wtc20tMTIgJzsgLy8gU2VndW5kYSB0YXJqZXRhIDMgdmVjZXMgbcOhcyBncmFuZGVcclxuICAgICAgICBpbWFnZUNsYXNzID0gJ2JpZy1pbWFnZSc7XHJcbiAgICAgICAgY2FyZENsYXNzID0gJ2JpZy1jYXJkJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2l6ZUNsYXNzID0gJ2NvbC1sZy0zIGNvbC1tZC00IGNvbC1zbS02JzsgLy8gUmVzdG8gZGUgdGFyamV0YXMgcGVxdWXDsWFzXHJcbiAgICAgICAgaW1hZ2VDbGFzcyA9ICdzbWFsbC1pbWFnZSc7XHJcbiAgICAgICAgY2FyZENsYXNzID0gJ3NtYWxsLWNhcmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGtleT17YmxvZy5pZH0gY2xhc3NOYW1lPXtzaXplQ2xhc3N9PlxyXG4gICAgICAgICAgICA8TGluayB0bz17YC9ibG9nLyR7YmxvZy5pZH1gfSBjbGFzc05hbWU9J2xpbmstYmxvZ3MnPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BjYXJkIGNhcmQtYmxvZyBtdC0zICR7Y2FyZENsYXNzfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1pbWctdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtibG9nLmltYWdlfSBjbGFzc05hbWU9e2AgaW1nLWZsdWlkICR7aW1hZ2VDbGFzc31gfSBhbHQ9e2Jsb2cudGl0bGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj57YmxvZy50aXRsZX08L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJjYXJkLXRleHRcIj57YmxvZy5kZXNjcmlwdGlvbi5zbGljZSgwLCAyMDApfS4uLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59KX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gICAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJsb2dMaXN0OyIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZpU2VhcmNoIH0gZnJvbSAncmVhY3QtaWNvbnMvZmknO1xuXG50eXBlIFNlYXJjaFByb3BzID0ge1xuICAgIHNldEZpbHRlcjogKGZpbHRlcjogc3RyaW5nKSA9PiB2b2lkO1xufTtcblxuY29uc3QgU2VhcmNoOiBSZWFjdC5GQzxTZWFyY2hQcm9wcz4gPSAoeyBzZXRGaWx0ZXIgfSkgPT4ge1xuICAgIGNvbnN0IFtzZWFyY2hWYWx1ZSwgc2V0U2VhcmNoVmFsdWVdID0gdXNlU3RhdGUoJycpO1xuXG4gICAgY29uc3QgaGFuZGxlU2VhcmNoQ2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICBzZXRTZWFyY2hWYWx1ZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICBzZXRGaWx0ZXIoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVmFsdWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNlYXJjaENoYW5nZX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJ1c2Nhci4uLlwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdibG9nLXNlYXJjaCdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmlTZWFyY2ggY2xhc3NOYW1lPVwibXMtMlwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTZWFyY2g7IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUluZmluaXRlUXVlcnkgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuY29uc3QgU3Bpbm5lciA9IFJlYWN0LmxhenkoKCkgPT4gaW1wb3J0KCcuLi9jb21wb25lbnRzL3NwaW5uZXInKSk7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tICcuLi90eXBlcy9ibG9nJztcbmltcG9ydCB7IGZldGNoTmV4dEJsb2dzLGZldGNoQmxvZ1NlYXJjaCB9IGZyb20gJy4uL2FwaS9ibG9nJztcbmltcG9ydCBcIi4uL3BhZ2VzL3N0eWxlcy9ibG9ncy5jc3NcIlxuaW1wb3J0IEJsb2dMYXlvdXQgZnJvbSAnLi4vbGF5b3V0cy9ibG9nTGF5b3V0JztcbmltcG9ydCBCbG9nTGlzdCBmcm9tICcuLi9jb21wb25lbnRzL2Jsb2dDYXJkcyc7XG5pbXBvcnQgU2lkZWJhciBmcm9tICcuLi9jb21wb25lbnRzL3NpZGViYXJCb2xncyc7XG5pbXBvcnQgQmxvZ1NlYXJjaCBmcm9tICcuLi9jb21wb25lbnRzL3NlYXJjaCc7XG5pbXBvcnQgdXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgZnJvbSAnLi4vaG9va3MvdXNlTGF6eWxvYWQnO1xuXG5cbmNvbnN0IEJsb2cgPSAgKCkgPT4ge1xuICAgIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgICBjb25zdCBbZmlsdGVyQmxvZ3MsIHNldEZpbHRlckJsb2dzdF0gPSB1c2VTdGF0ZTxSZXN1bHRbXSB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IHsgZGF0YSwgaXNFcnJvciwgaXNMb2FkaW5nLCBmZXRjaE5leHRQYWdlLGhhc05leHRQYWdlLGlzRmV0Y2hpbmdOZXh0UGFnZSB9ID0gdXNlSW5maW5pdGVRdWVyeShcbiAgICAgICAge1xuICAgICAgICAgIHF1ZXJ5S2V5OiBbJ2Jsb2dzJ10sXG4gICAgICAgICAgcXVlcnlGbjogKHsgcGFnZVBhcmFtID0gMCB9KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmV0Y2hOZXh0QmxvZ3MocGFnZVBhcmFtKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluaXRpYWxQYWdlUGFyYW06ICcxJyxcbiAgICAgICAgICBzdGFsZVRpbWU6IDEwMDAqNjAqMzAscmVmZXRjaE9uV2luZG93Rm9jdXM6IGZhbHNlLHJlZmV0Y2hJbnRlcnZhbDogMTAwMCo2MCozMCxcbiAgICAgICAgICBnZXROZXh0UGFnZVBhcmFtOiAobGFzdFBhZ2UpID0+IHtcbiAgICAgICAgICAgIGlmIChsYXN0UGFnZT8ubmV4dFBhZ2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3RQYWdlLm5leHRQYWdlLnNwbGl0KCc9JylbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghZmlsdGVyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hCbG9nU2VhcmNoKGZpbHRlcik7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlKSByZXR1cm47XG4gICAgICAgICAgICBzZXRGaWx0ZXJCbG9nc3QocmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgICBmZXRjaERhdGEoKTtcbiAgICB9LCBbZmlsdGVyXSk7XG5cbiAgICBpZiAoaXNFcnJvcikge1xuICAgICAgICByZXR1cm4gPGRpdj5FcnJvcjwvZGl2PjtcbiAgICB9XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgICByZXR1cm4gPFNwaW5uZXIgLz47XG4gICAgfVxuICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYmxvZ3M6IFJlc3VsdFtdID0gZGF0YS5wYWdlcy5mbGF0TWFwKChwYWdlKSA9PiBwYWdlPy5ibG9ncyA/PyBbXSk7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Jsb2ctY29udGFpbmVyIHB0LTMnPlxuICAgICAgICAgICAgPEJsb2dMYXlvdXQ+IFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyLWZsdWlkXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmxvZy1oZWFkZXIgIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+TWFnbmFCbG9nPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QmxvZ1NlYXJjaCBzZXRGaWx0ZXI9e3NldEZpbHRlcn0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmxvZy1jYXJkcyBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbGctOCBjb2wtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJsb2dMaXN0IGJsb2dzPXtibG9nc30gc2VhcmNoPXtmaWx0ZXJCbG9nc30gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC00IGNvbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2lkZWJhciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZldGNoTmV4dFBhZ2UoKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1wcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshaGFzTmV4dFBhZ2UgfHwgaXNGZXRjaGluZ05leHRQYWdlfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6ICcycmVtJyB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2lzRmV0Y2hpbmdOZXh0UGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnTG9hZGluZyBtb3JlLi4uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBoYXNOZXh0UGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnQ2FyZ2FyIG3DoXMgYmxvZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICdObyBoYXkgbcOhcyBibG9ncyd9XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9CbG9nTGF5b3V0PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMYXp5QmxvZyAoKSB7XG4gICAgY29uc3QgeyBpc1Zpc2libGUsIHJlZiB9ID0gdXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoJzEwMHB4Jyk7XG4gIFxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgaWQ9XCJMYXp5QmxvZ1wiIHJlZj17cmVmfT5cbiAgICAgICAgICAgIHtpc1Zpc2libGUgPyA8QmxvZy8+IDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG5cbiAgICBcbiJdLCJmaWxlIjoiYmxvZy1jYjY3YmY1OC5qcyJ9