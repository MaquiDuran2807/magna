var Zi=Object.defineProperty;var ts=(pt,d,st)=>d in pt?Zi(pt,d,{enumerable:!0,configurable:!0,writable:!0,value:st}):pt[d]=st;var ee=(pt,d,st)=>(ts(pt,typeof d!="symbol"?d+"":d,st),st),Ne=(pt,d,st)=>{if(!d.has(pt))throw TypeError("Cannot "+st)};var t=(pt,d,st)=>(Ne(pt,d,"read from private field"),st?st.call(pt):d.get(pt)),I=(pt,d,st)=>{if(d.has(pt))throw TypeError("Cannot add the same private member more than once");d instanceof WeakSet?d.add(pt):d.set(pt,st)},Z=(pt,d,st,h)=>(Ne(pt,d,"write to private field"),h?h.call(pt,st):d.set(pt,st),st);var ge=(pt,d,st,h)=>({set _(T){Z(pt,d,T,st)},get _(){return t(pt,d,h)}}),H=(pt,d,st)=>(Ne(pt,d,"access private method"),st);import{g as getDefaultExportFromCjs,j as jsxRuntimeExports,S as Swiper,A as Autoplay,b as Pagination,N as Navigation,c as SwiperSlide,d as getAugmentedNamespace,r as reactExports,f as fetchBrochure,_ as __vitePreload,e as useParams,h as imagenServicios,u as useQuery,k as imagenTopografia,l as imagenIngenieria,m as imagenMedioAmbiente,P as PagesLayout,n as motion}from"./index-dae76508.js";import{A as AiOutlineDoubleRight,a as AiFillCaretDown}from"./index.esm-503ba510.js";import{B as Banner}from"./banner-74d705e0.js";import{u as useScreenSize}from"./ScreenSize-fc639d3a.js";import{A as AnimatePresence}from"./index-1a519972.js";import"./index.esm-109ac67f.js";function _mergeNamespaces(pt,d){for(var st=0;st<d.length;st++){const h=d[st];if(typeof h!="string"&&!Array.isArray(h)){for(const T in h)if(T!=="default"&&!(T in pt)){const nt=Object.getOwnPropertyDescriptor(h,T);nt&&Object.defineProperty(pt,T,nt.get?nt:{enumerable:!0,get:()=>h[T]})}}}return Object.freeze(Object.defineProperty(pt,Symbol.toStringTag,{value:"Module"}))}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),sliderService="",SliderServices=({subServicios:pt})=>(console.log("se reinicio el slider"),jsxRuntimeExports.jsx(Swiper,{spaceBetween:30,slidesPerView:1,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:!0,modules:[Autoplay,Pagination,Navigation],children:pt==null?void 0:pt.map((d,st)=>jsxRuntimeExports.jsx(SwiperSlide,{children:jsxRuntimeExports.jsxs("div",{className:`slide ${d.nombre}`,children:[jsxRuntimeExports.jsx("img",{src:d.imagen,alt:d.nombre,className:"img-fluid img-subservicio"}),jsxRuntimeExports.jsx("h3",{children:d.nombre})]})},st))}));function commonjsRequire(pt){throw new Error('Could not dynamically require "'+pt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(d,st){module.exports=d.pdfjsLib=st()})(globalThis,()=>(()=>{var __webpack_modules__=[,(pt,d)=>{var qt;Object.defineProperty(d,"__esModule",{value:!0}),d.VerbosityLevel=d.Util=d.UnknownErrorException=d.UnexpectedResponseException=d.TextRenderingMode=d.RenderingIntentFlag=d.PromiseCapability=d.PermissionFlag=d.PasswordResponses=d.PasswordException=d.PageActionEventType=d.OPS=d.MissingPDFException=d.MAX_IMAGE_SIZE_TO_CACHE=d.LINE_FACTOR=d.LINE_DESCENT_FACTOR=d.InvalidPDFException=d.ImageKind=d.IDENTITY_MATRIX=d.FormatError=d.FeatureTest=d.FONT_IDENTITY_MATRIX=d.DocumentActionEventType=d.CMapCompressionType=d.BaseException=d.BASELINE_FACTOR=d.AnnotationType=d.AnnotationReplyType=d.AnnotationPrefix=d.AnnotationMode=d.AnnotationFlag=d.AnnotationFieldFlag=d.AnnotationEditorType=d.AnnotationEditorPrefix=d.AnnotationEditorParamsType=d.AnnotationBorderStyleType=d.AnnotationActionEventType=d.AbortException=void 0,d.assert=lt,d.bytesToString=N,d.createValidAbsoluteUrl=xt,d.getModificationDate=wt,d.getUuid=$t,d.getVerbosityLevel=$,d.info=it,d.isArrayBuffer=ht,d.isArrayEqual=Et,d.isNodeJS=void 0,d.normalizeUnicode=Xt,d.objectFromMap=ct,d.objectSize=rt,d.setVerbosityLevel=x,d.shadow=Pt,d.string32=Q,d.stringToBytes=tt,d.stringToPDFString=ut,d.stringToUTF8String=K,d.unreachable=W,d.utf8StringToString=J,d.warn=at;const st=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");d.isNodeJS=st;const h=[1,0,0,1,0,0];d.IDENTITY_MATRIX=h;const T=[.001,0,0,.001,0,0];d.FONT_IDENTITY_MATRIX=T;const nt=1e7;d.MAX_IMAGE_SIZE_TO_CACHE=nt;const z=1.35;d.LINE_FACTOR=z;const ft=.35;d.LINE_DESCENT_FACTOR=ft;const j=ft/z;d.BASELINE_FACTOR=j;const R={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};d.RenderingIntentFlag=R;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};d.AnnotationMode=f;const L="pdfjs_internal_editor_";d.AnnotationEditorPrefix=L;const O={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};d.AnnotationEditorType=O;const P={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};d.AnnotationEditorParamsType=P;const v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};d.PermissionFlag=v;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};d.TextRenderingMode=y;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};d.ImageKind=u;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};d.AnnotationType=_;const E={GROUP:"Group",REPLY:"R"};d.AnnotationReplyType=E;const w={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};d.AnnotationFlag=w;const m={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};d.AnnotationFieldFlag=m;const r={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};d.AnnotationBorderStyleType=r;const l={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};d.AnnotationActionEventType=l;const k={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};d.DocumentActionEventType=k;const g={O:"PageOpen",C:"PageClose"};d.PageActionEventType=g;const a={ERRORS:0,WARNINGS:1,INFOS:5};d.VerbosityLevel=a;const C={NONE:0,BINARY:1};d.CMapCompressionType=C;const b={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};d.OPS=b;const B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};d.PasswordResponses=B;let X=a.WARNINGS;function x(ot){Number.isInteger(ot)&&(X=ot)}function $(){return X}function it(ot){X>=a.INFOS&&console.log(`Info: ${ot}`)}function at(ot){X>=a.WARNINGS&&console.log(`Warning: ${ot}`)}function W(ot){throw new Error(ot)}function lt(ot,Y){ot||W(Y)}function gt(ot){switch(ot==null?void 0:ot.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xt(ot,Y=null,G=null){if(!ot)return null;try{if(G&&typeof ot=="string"){if(G.addDefaultProtocol&&ot.startsWith("www.")){const At=ot.match(/\./g);(At==null?void 0:At.length)>=2&&(ot=`http://${ot}`)}if(G.tryConvertEncoding)try{ot=K(ot)}catch{}}const bt=Y?new URL(ot,Y):new URL(ot);if(gt(bt))return bt}catch{}return null}function Pt(ot,Y,G,bt=!1){return Object.defineProperty(ot,Y,{value:G,enumerable:!bt,configurable:!0,writable:!1}),G}const S=function(){function Y(G,bt){this.constructor===Y&&W("Cannot initialize BaseException."),this.message=G,this.name=bt}return Y.prototype=new Error,Y.constructor=Y,Y}();d.BaseException=S;class i extends S{constructor(Y,G){super(Y,"PasswordException"),this.code=G}}d.PasswordException=i;class n extends S{constructor(Y,G){super(Y,"UnknownErrorException"),this.details=G}}d.UnknownErrorException=n;class s extends S{constructor(Y){super(Y,"InvalidPDFException")}}d.InvalidPDFException=s;class o extends S{constructor(Y){super(Y,"MissingPDFException")}}d.MissingPDFException=o;class c extends S{constructor(Y,G){super(Y,"UnexpectedResponseException"),this.status=G}}d.UnexpectedResponseException=c;class A extends S{constructor(Y){super(Y,"FormatError")}}d.FormatError=A;class F extends S{constructor(Y){super(Y,"AbortException")}}d.AbortException=F;function N(ot){(typeof ot!="object"||(ot==null?void 0:ot.length)===void 0)&&W("Invalid argument for bytesToString");const Y=ot.length,G=8192;if(Y<G)return String.fromCharCode.apply(null,ot);const bt=[];for(let At=0;At<Y;At+=G){const te=Math.min(At+G,Y),Zt=ot.subarray(At,te);bt.push(String.fromCharCode.apply(null,Zt))}return bt.join("")}function tt(ot){typeof ot!="string"&&W("Invalid argument for stringToBytes");const Y=ot.length,G=new Uint8Array(Y);for(let bt=0;bt<Y;++bt)G[bt]=ot.charCodeAt(bt)&255;return G}function Q(ot){return String.fromCharCode(ot>>24&255,ot>>16&255,ot>>8&255,ot&255)}function rt(ot){return Object.keys(ot).length}function ct(ot){const Y=Object.create(null);for(const[G,bt]of ot)Y[G]=bt;return Y}function yt(){const ot=new Uint8Array(4);return ot[0]=1,new Uint32Array(ot.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class Rt{static get isLittleEndian(){return Pt(this,"isLittleEndian",yt())}static get isEvalSupported(){return Pt(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Pt(this,"platform",{isWin:!1,isMac:!1}):Pt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Y,G;return Pt(this,"isCSSRoundSupported",(G=(Y=globalThis.CSS)==null?void 0:Y.supports)==null?void 0:G.call(Y,"width: round(1.5px, 1px)"))}}d.FeatureTest=Rt;const jt=[...Array(256).keys()].map(ot=>ot.toString(16).padStart(2,"0"));class St{static makeHexColor(Y,G,bt){return`#${jt[Y]}${jt[G]}${jt[bt]}`}static scaleMinMax(Y,G){let bt;Y[0]?(Y[0]<0&&(bt=G[0],G[0]=G[1],G[1]=bt),G[0]*=Y[0],G[1]*=Y[0],Y[3]<0&&(bt=G[2],G[2]=G[3],G[3]=bt),G[2]*=Y[3],G[3]*=Y[3]):(bt=G[0],G[0]=G[2],G[2]=bt,bt=G[1],G[1]=G[3],G[3]=bt,Y[1]<0&&(bt=G[2],G[2]=G[3],G[3]=bt),G[2]*=Y[1],G[3]*=Y[1],Y[2]<0&&(bt=G[0],G[0]=G[1],G[1]=bt),G[0]*=Y[2],G[1]*=Y[2]),G[0]+=Y[4],G[1]+=Y[4],G[2]+=Y[5],G[3]+=Y[5]}static transform(Y,G){return[Y[0]*G[0]+Y[2]*G[1],Y[1]*G[0]+Y[3]*G[1],Y[0]*G[2]+Y[2]*G[3],Y[1]*G[2]+Y[3]*G[3],Y[0]*G[4]+Y[2]*G[5]+Y[4],Y[1]*G[4]+Y[3]*G[5]+Y[5]]}static applyTransform(Y,G){const bt=Y[0]*G[0]+Y[1]*G[2]+G[4],At=Y[0]*G[1]+Y[1]*G[3]+G[5];return[bt,At]}static applyInverseTransform(Y,G){const bt=G[0]*G[3]-G[1]*G[2],At=(Y[0]*G[3]-Y[1]*G[2]+G[2]*G[5]-G[4]*G[3])/bt,te=(-Y[0]*G[1]+Y[1]*G[0]+G[4]*G[1]-G[5]*G[0])/bt;return[At,te]}static getAxialAlignedBoundingBox(Y,G){const bt=this.applyTransform(Y,G),At=this.applyTransform(Y.slice(2,4),G),te=this.applyTransform([Y[0],Y[3]],G),Zt=this.applyTransform([Y[2],Y[1]],G);return[Math.min(bt[0],At[0],te[0],Zt[0]),Math.min(bt[1],At[1],te[1],Zt[1]),Math.max(bt[0],At[0],te[0],Zt[0]),Math.max(bt[1],At[1],te[1],Zt[1])]}static inverseTransform(Y){const G=Y[0]*Y[3]-Y[1]*Y[2];return[Y[3]/G,-Y[1]/G,-Y[2]/G,Y[0]/G,(Y[2]*Y[5]-Y[4]*Y[3])/G,(Y[4]*Y[1]-Y[5]*Y[0])/G]}static singularValueDecompose2dScale(Y){const G=[Y[0],Y[2],Y[1],Y[3]],bt=Y[0]*G[0]+Y[1]*G[2],At=Y[0]*G[1]+Y[1]*G[3],te=Y[2]*G[0]+Y[3]*G[2],Zt=Y[2]*G[1]+Y[3]*G[3],q=(bt+Zt)/2,vt=Math.sqrt((bt+Zt)**2-4*(bt*Zt-te*At))/2,Lt=q+vt||1,Ct=q-vt||1;return[Math.sqrt(Lt),Math.sqrt(Ct)]}static normalizeRect(Y){const G=Y.slice(0);return Y[0]>Y[2]&&(G[0]=Y[2],G[2]=Y[0]),Y[1]>Y[3]&&(G[1]=Y[3],G[3]=Y[1]),G}static intersect(Y,G){const bt=Math.max(Math.min(Y[0],Y[2]),Math.min(G[0],G[2])),At=Math.min(Math.max(Y[0],Y[2]),Math.max(G[0],G[2]));if(bt>At)return null;const te=Math.max(Math.min(Y[1],Y[3]),Math.min(G[1],G[3])),Zt=Math.min(Math.max(Y[1],Y[3]),Math.max(G[1],G[3]));return te>Zt?null:[bt,te,At,Zt]}static bezierBoundingBox(Y,G,bt,At,te,Zt,q,vt){const Lt=[],Ct=[[],[]];let Ot,Nt,Jt,_t,Yt,It,M,e;for(let V=0;V<2;++V){if(V===0?(Nt=6*Y-12*bt+6*te,Ot=-3*Y+9*bt-9*te+3*q,Jt=3*bt-3*Y):(Nt=6*G-12*At+6*Zt,Ot=-3*G+9*At-9*Zt+3*vt,Jt=3*At-3*G),Math.abs(Ot)<1e-12){if(Math.abs(Nt)<1e-12)continue;_t=-Jt/Nt,0<_t&&_t<1&&Lt.push(_t);continue}M=Nt*Nt-4*Jt*Ot,e=Math.sqrt(M),!(M<0)&&(Yt=(-Nt+e)/(2*Ot),0<Yt&&Yt<1&&Lt.push(Yt),It=(-Nt-e)/(2*Ot),0<It&&It<1&&Lt.push(It))}let p=Lt.length,D;const U=p;for(;p--;)_t=Lt[p],D=1-_t,Ct[0][p]=D*D*D*Y+3*D*D*_t*bt+3*D*_t*_t*te+_t*_t*_t*q,Ct[1][p]=D*D*D*G+3*D*D*_t*At+3*D*_t*_t*Zt+_t*_t*_t*vt;return Ct[0][U]=Y,Ct[1][U]=G,Ct[0][U+1]=q,Ct[1][U+1]=vt,Ct[0].length=Ct[1].length=U+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}d.Util=St;const Dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ut(ot){if(ot[0]>="ï"){let G;if(ot[0]==="þ"&&ot[1]==="ÿ"?G="utf-16be":ot[0]==="ÿ"&&ot[1]==="þ"?G="utf-16le":ot[0]==="ï"&&ot[1]==="»"&&ot[2]==="¿"&&(G="utf-8"),G)try{const bt=new TextDecoder(G,{fatal:!0}),At=tt(ot);return bt.decode(At)}catch(bt){at(`stringToPDFString: "${bt}".`)}}const Y=[];for(let G=0,bt=ot.length;G<bt;G++){const At=Dt[ot.charCodeAt(G)];Y.push(At?String.fromCharCode(At):ot.charAt(G))}return Y.join("")}function K(ot){return decodeURIComponent(escape(ot))}function J(ot){return unescape(encodeURIComponent(ot))}function ht(ot){return typeof ot=="object"&&(ot==null?void 0:ot.byteLength)!==void 0}function Et(ot,Y){if(ot.length!==Y.length)return!1;for(let G=0,bt=ot.length;G<bt;G++)if(ot[G]!==Y[G])return!1;return!0}function wt(ot=new Date){return[ot.getUTCFullYear().toString(),(ot.getUTCMonth()+1).toString().padStart(2,"0"),ot.getUTCDate().toString().padStart(2,"0"),ot.getUTCHours().toString().padStart(2,"0"),ot.getUTCMinutes().toString().padStart(2,"0"),ot.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){I(this,qt,!1);this.promise=new Promise((Y,G)=>{this.resolve=bt=>{Z(this,qt,!0),Y(bt)},this.reject=bt=>{Z(this,qt,!0),G(bt)}})}get settled(){return t(this,qt)}}qt=new WeakMap,d.PromiseCapability=Ut;let zt=null,Wt=null;function Xt(ot){return zt||(zt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wt=new Map([["ﬅ","ſt"]])),ot.replaceAll(zt,(Y,G,bt)=>G?G.normalize("NFKC"):Wt.get(bt))}function $t(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ot=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ot);else for(let Y=0;Y<32;Y++)ot[Y]=Math.floor(Math.random()*255);return N(ot)}const Ht="pdfjs_internal_id_";d.AnnotationPrefix=Ht},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var pt,st,h,T,he,z,Ee,j,R,f,L,O,P,v,y,u,xe,E,w,je,r,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(g){if(typeof g=="string"||g instanceof URL?g={url:g}:(0,_util.isArrayBuffer)(g)&&(g={data:g}),typeof g!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!g.url&&!g.data&&!g.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const a=new PDFDocumentLoadingTask,{docId:C}=a,b=g.url?getUrlProp(g.url):null,B=g.data?getDataProp(g.data):null,X=g.httpHeaders||null,x=g.withCredentials===!0,$=g.password??null,it=g.range instanceof PDFDataRangeTransport?g.range:null,at=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let W=g.worker instanceof PDFWorker?g.worker:null;const lt=g.verbosity,gt=typeof g.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(g.docBaseUrl)?g.docBaseUrl:null,xt=typeof g.cMapUrl=="string"?g.cMapUrl:null,Pt=g.cMapPacked!==!1,S=g.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof g.standardFontDataUrl=="string"?g.standardFontDataUrl:null,n=g.StandardFontDataFactory||DefaultStandardFontDataFactory,s=g.stopAtErrors!==!0,o=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,c=g.isEvalSupported!==!1,A=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!_util.isNodeJS,F=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,N=typeof g.disableFontFace=="boolean"?g.disableFontFace:_util.isNodeJS,tt=g.fontExtraProperties===!0,Q=g.enableXfa===!0,rt=g.ownerDocument||globalThis.document,ct=g.disableRange===!0,yt=g.disableStream===!0,dt=g.disableAutoFetch===!0,Rt=g.pdfBug===!0,jt=it?it.length:g.length??NaN,St=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!_util.isNodeJS&&!N,Dt=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:S===_display_utils.DOMCMapReaderFactory&&n===_display_utils.DOMStandardFontDataFactory&&xt&&i&&(0,_display_utils.isValidFetchUrl)(xt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),ut=g.canvasFactory||new DefaultCanvasFactory({ownerDocument:rt}),K=g.filterFactory||new DefaultFilterFactory({docId:C,ownerDocument:rt}),J=null;(0,_util.setVerbosityLevel)(lt);const ht={canvasFactory:ut,filterFactory:K};if(Dt||(ht.cMapReaderFactory=new S({baseUrl:xt,isCompressed:Pt}),ht.standardFontDataFactory=new n({baseUrl:i})),!W){const Ut={verbosity:lt,port:_worker_options.GlobalWorkerOptions.workerPort};W=Ut.port?PDFWorker.fromPort(Ut):new PDFWorker(Ut),a._worker=W}const Et={docId:C,apiVersion:"3.11.174",data:B,password:$,disableAutoFetch:dt,rangeChunkSize:at,length:jt,docBaseUrl:gt,enableXfa:Q,evaluatorOptions:{maxImageSize:o,disableFontFace:N,ignoreErrors:s,isEvalSupported:c,isOffscreenCanvasSupported:A,canvasMaxAreaInBytes:F,fontExtraProperties:tt,useSystemFonts:St,cMapUrl:Dt?xt:null,standardFontDataUrl:Dt?i:null}},wt={ignoreErrors:s,isEvalSupported:c,disableFontFace:N,fontExtraProperties:tt,enableXfa:Q,ownerDocument:rt,disableAutoFetch:dt,pdfBug:Rt,styleElement:J};return W.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const Ut=_fetchDocument(W,Et),zt=new Promise(function(Wt){let Xt;it?Xt=new _transport_stream.PDFDataTransportStream({length:jt,initialData:it.initialData,progressiveDone:it.progressiveDone,contentDispositionFilename:it.contentDispositionFilename,disableRange:ct,disableStream:yt},it):B||(Xt=(Ht=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ht):(0,_display_utils.isValidFetchUrl)(Ht.url)?new _displayFetch_stream.PDFFetchStream(Ht):new _displayNetwork.PDFNetworkStream(Ht))({url:b,length:jt,httpHeaders:X,withCredentials:x,rangeChunkSize:at,disableRange:ct,disableStream:yt})),Wt(Xt)});return Promise.all([Ut,zt]).then(function([Wt,Xt]){if(a.destroyed)throw new Error("Loading aborted");const $t=new _message_handler.MessageHandler(C,Wt,W.port),Ht=new WorkerTransport($t,a,Xt,wt,ht);a._transport=Ht,$t.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(g,a){if(g.destroyed)throw new Error("Worker was destroyed");const C=await g.messageHandler.sendWithPromise("GetDocRequest",a,a.data?[a.data.buffer]:null);if(g.destroyed)throw new Error("Worker was destroyed");return C}function getUrlProp(g){if(g instanceof URL)return g.href;try{return new URL(g,window.location).href}catch{if(_util.isNodeJS&&typeof g=="string")return g}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(g){if(_util.isNodeJS&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return(0,_util.stringToBytes)(g);if(typeof g=="object"&&!isNaN(g==null?void 0:g.length)||(0,_util.isArrayBuffer)(g))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const d=class d{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ge(d,pt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var a,C,b;this.destroyed=!0;try{(a=this._worker)!=null&&a.port&&(this._worker._pendingDestroy=!0),await((C=this._transport)==null?void 0:C.destroy())}catch(B){throw(b=this._worker)!=null&&b.port&&delete this._worker._pendingDestroy,B}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};pt=new WeakMap,I(d,pt,0);let PDFDocumentLoadingTask=d;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,C,b=!1,B=null){this.length=a,this.initialData=C,this.progressiveDone=b,this.contentDispositionFilename=B,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,C){for(const b of this._rangeListeners)b(a,C)}onDataProgress(a,C){this._readyCapability.promise.then(()=>{for(const b of this._progressListeners)b(a,C)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const C of this._progressiveReadListeners)C(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,C){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,C){this._pdfInfo=a,this._transport=C,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(b=>{if(!b)return b;const B=[];for(const X in b)B.push(...b[X]);return B}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,C,b,B=!1){I(this,T);I(this,z);I(this,st,null);I(this,h,!1);this._pageIndex=a,this._pageInfo=C,this._transport=b,this._stats=B?new _display_utils.StatTimer:null,this._pdfBug=B,this.commonObjs=b.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:C=this.rotate,offsetX:b=0,offsetY:B=0,dontFlip:X=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:C,offsetX:b,offsetY:B,dontFlip:X})}getAnnotations({intent:a="display"}={}){const C=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,C.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var a;return((a=this._transport._htmlForXfa)==null?void 0:a.children[this._pageIndex])||null}render({canvasContext:a,viewport:C,intent:b="display",annotationMode:B=_util.AnnotationMode.ENABLE,transform:X=null,background:x=null,optionalContentConfigPromise:$=null,annotationCanvasMap:it=null,pageColors:at=null,printAnnotationStorage:W=null}){var n,s;(n=this._stats)==null||n.time("Overall");const lt=this._transport.getRenderingIntent(b,B,W);Z(this,h,!1),H(this,z,Ee).call(this),$||($=this._transport.getOptionalContentConfig());let gt=this._intentStates.get(lt.cacheKey);gt||(gt=Object.create(null),this._intentStates.set(lt.cacheKey,gt)),gt.streamReaderCancelTimeout&&(clearTimeout(gt.streamReaderCancelTimeout),gt.streamReaderCancelTimeout=null);const xt=!!(lt.renderingIntent&_util.RenderingIntentFlag.PRINT);gt.displayReadyCapability||(gt.displayReadyCapability=new _util.PromiseCapability,gt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(lt));const Pt=o=>{var c,A;gt.renderTasks.delete(S),(this._maybeCleanupAfterRender||xt)&&Z(this,h,!0),H(this,T,he).call(this,!xt),o?(S.capability.reject(o),this._abortOperatorList({intentState:gt,reason:o instanceof Error?o:new Error(o)})):S.capability.resolve(),(c=this._stats)==null||c.timeEnd("Rendering"),(A=this._stats)==null||A.timeEnd("Overall")},S=new InternalRenderTask({callback:Pt,params:{canvasContext:a,viewport:C,transform:X,background:x},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:it,operatorList:gt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!xt,pdfBug:this._pdfBug,pageColors:at});(gt.renderTasks||(gt.renderTasks=new Set)).add(S);const i=S.task;return Promise.all([gt.displayReadyCapability.promise,$]).then(([o,c])=>{var A;if(this.destroyed){Pt();return}(A=this._stats)==null||A.time("Rendering"),S.initializeGraphics({transparency:o,optionalContentConfig:c}),S.operatorListChanged()}).catch(Pt),i}getOperatorList({intent:a="display",annotationMode:C=_util.AnnotationMode.ENABLE,printAnnotationStorage:b=null}={}){var it;function B(){x.operatorList.lastChunk&&(x.opListReadCapability.resolve(x.operatorList),x.renderTasks.delete($))}const X=this._transport.getRenderingIntent(a,C,b,!0);let x=this._intentStates.get(X.cacheKey);x||(x=Object.create(null),this._intentStates.set(X.cacheKey,x));let $;return x.opListReadCapability||($=Object.create(null),$.operatorListChanged=B,x.opListReadCapability=new _util.PromiseCapability,(x.renderTasks||(x.renderTasks=new Set)).add($),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(X)),x.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:C=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:a===!0,disableNormalization:C===!0},{highWaterMark:100,size(B){return B.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(b=>_xfa_text.XfaText.textContent(b));const C=this.streamTextContent(a);return new Promise(function(b,B){function X(){x.read().then(function({value:it,done:at}){if(at){b($);return}Object.assign($.styles,it.styles),$.items.push(...it.items),X()},B)}const x=C.getReader(),$={items:[],styles:Object.create(null)};X()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const C of this._intentStates.values())if(this._abortOperatorList({intentState:C,reason:new Error("Page was destroyed."),force:!0}),!C.opListReadCapability)for(const b of C.renderTasks)a.push(b.completed),b.cancel();return this.objs.clear(),Z(this,h,!1),H(this,z,Ee).call(this),Promise.all(a)}cleanup(a=!1){Z(this,h,!0);const C=H(this,T,he).call(this,!1);return a&&C&&this._stats&&(this._stats=new _display_utils.StatTimer),C}_startRenderPage(a,C){var B,X;const b=this._intentStates.get(C);b&&((B=this._stats)==null||B.timeEnd("Page Request"),(X=b.displayReadyCapability)==null||X.resolve(a))}_renderPageChunk(a,C){for(let b=0,B=a.length;b<B;b++)C.operatorList.fnArray.push(a.fnArray[b]),C.operatorList.argsArray.push(a.argsArray[b]);C.operatorList.lastChunk=a.lastChunk,C.operatorList.separateAnnots=a.separateAnnots;for(const b of C.renderTasks)b.operatorListChanged();a.lastChunk&&H(this,T,he).call(this,!0)}_pumpOperatorList({renderingIntent:a,cacheKey:C,annotationStorageSerializable:b}){const{map:B,transfers:X}=b,$=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:C,annotationStorage:B},X).getReader(),it=this._intentStates.get(C);it.streamReader=$;const at=()=>{$.read().then(({value:W,done:lt})=>{if(lt){it.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(W,it),at())},W=>{if(it.streamReader=null,!this._transport.destroyed){if(it.operatorList){it.operatorList.lastChunk=!0;for(const lt of it.renderTasks)lt.operatorListChanged();H(this,T,he).call(this,!0)}if(it.displayReadyCapability)it.displayReadyCapability.reject(W);else if(it.opListReadCapability)it.opListReadCapability.reject(W);else throw W}})};at()}_abortOperatorList({intentState:a,reason:C,force:b=!1}){if(a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!b){if(a.renderTasks.size>0)return;if(C instanceof _display_utils.RenderingCancelledException){let B=RENDERING_CANCELLED_TIMEOUT;C.extraDelay>0&&C.extraDelay<1e3&&(B+=C.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:C,force:!0})},B);return}}if(a.streamReader.cancel(new _util.AbortException(C.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[B,X]of this._intentStates)if(X===a){this._intentStates.delete(B);break}this.cleanup()}}}get stats(){return this._stats}}st=new WeakMap,h=new WeakMap,T=new WeakSet,he=function(a=!1){if(H(this,z,Ee).call(this),!t(this,h)||this.destroyed)return!1;if(a)return Z(this,st,setTimeout(()=>{Z(this,st,null),H(this,T,he).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:C,operatorList:b}of this._intentStates.values())if(C.size>0||!b.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Z(this,h,!1),!0},z=new WeakSet,Ee=function(){t(this,st)&&(clearTimeout(t(this,st)),Z(this,st,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){I(this,j,new Set);I(this,R,Promise.resolve())}postMessage(a,C){const b={data:structuredClone(a,C?{transfer:C}:null)};t(this,R).then(()=>{for(const B of t(this,j))B.call(this,b)})}addEventListener(a,C){t(this,j).add(C)}removeEventListener(a,C){t(this,j).delete(C)}terminate(){t(this,j).clear()}}j=new WeakMap,R=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const g=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;g&&(PDFWorkerUtil.fallbackWorkerSrc=g.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(g,a){let C;try{if(C=new URL(g),!C.origin||C.origin==="null")return!1}catch{return!1}const b=new URL(a,C);return C.origin===b.origin},PDFWorkerUtil.createCDNWrapper=function(g){const a=`importScripts("${g}");`;return URL.createObjectURL(new Blob([a]))}}const _PDFWorker=class _PDFWorker{constructor({name:g=null,port:a=null,verbosity:C=(0,_util.getVerbosityLevel)()}={}){var b;if(this.name=g,this.destroyed=!1,this.verbosity=C,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,a){if((b=t(_PDFWorker,L))!=null&&b.has(a))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,L)||Z(_PDFWorker,L,new WeakMap)).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(g){this._port=g,this._messageHandler=new _message_handler.MessageHandler("main","worker",g),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:g}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,g)||(g=PDFWorkerUtil.createCDNWrapper(new URL(g,window.location).href));const a=new Worker(g),C=new _message_handler.MessageHandler("main","worker",a),b=()=>{a.removeEventListener("error",B),C.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},B=()=>{this._webWorker||b()};a.addEventListener("error",B),C.on("test",x=>{if(a.removeEventListener("error",B),this.destroyed){b();return}x?(this._messageHandler=C,this._port=a,this._webWorker=a,this._readyCapability.resolve(),C.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),C.destroy(),a.terminate())}),C.on("ready",x=>{if(a.removeEventListener("error",B),this.destroyed){b();return}try{X()}catch{this._setupFakeWorker()}});const X=()=>{const x=new Uint8Array;C.send("test",x,[x.buffer])};X();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const C=`fake${PDFWorkerUtil.fakeWorkerId++}`,b=new _message_handler.MessageHandler(C+"_worker",C,a);g.setup(b,a);const B=new _message_handler.MessageHandler(C,C+"_worker",a);this._messageHandler=B,this._readyCapability.resolve(),B.send("configure",{verbosity:this.verbosity})}).catch(g=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${g.message}".`))})}destroy(){var g;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(g=t(_PDFWorker,L))==null||g.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(g){var C;if(!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const a=(C=t(this,L))==null?void 0:C.get(g.port);if(a){if(a._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return a}return new _PDFWorker(g)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};L=new WeakMap,I(_PDFWorker,L,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(a,C,b,B,X){I(this,u);I(this,O,new Map);I(this,P,new Map);I(this,v,new Map);I(this,y,null);this.messageHandler=a,this.loadingTask=C,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:B.ownerDocument,styleElement:B.styleElement}),this._params=B,this.canvasFactory=X.canvasFactory,this.filterFactory=X.filterFactory,this.cMapReaderFactory=X.cMapReaderFactory,this.standardFontDataFactory=X.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=b,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(a,C=_util.AnnotationMode.ENABLE,b=null,B=!1){let X=_util.RenderingIntentFlag.DISPLAY,x=_annotation_storage.SerializableEmpty;switch(a){case"any":X=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":X=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(C){case _util.AnnotationMode.DISABLE:X+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:X+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:X+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,x=(X&_util.RenderingIntentFlag.PRINT&&b instanceof _annotation_storage.PrintAnnotationStorage?b:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${C}`)}return B&&(X+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:X,cacheKey:`${X}_${x.hash}`,annotationStorageSerializable:x}}destroy(){var b;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(b=t(this,y))==null||b.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const B of t(this,P).values())a.push(B._destroy());t(this,P).clear(),t(this,v).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const C=this.messageHandler.sendWithPromise("Terminate",null);return a.push(C),Promise.all(a).then(()=>{var B;this.commonObjs.clear(),this.fontLoader.clear(),t(this,O).clear(),this.filterFactory.destroy(),(B=this._networkStream)==null||B.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:C}=this;a.on("GetReader",(b,B)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=X=>{this._lastProgress={loaded:X.loaded,total:X.total}},B.onPull=()=>{this._fullReader.read().then(function({value:X,done:x}){if(x){B.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{B.error(X)})},B.onCancel=X=>{this._fullReader.cancel(X),B.ready.catch(x=>{if(!this.destroyed)throw x})}}),a.on("ReaderHeadersReady",b=>{const B=new _util.PromiseCapability,X=this._fullReader;return X.headersReady.then(()=>{var x;(!X.isStreamingSupported||!X.isRangeSupported)&&(this._lastProgress&&((x=C.onProgress)==null||x.call(C,this._lastProgress)),X.onProgress=$=>{var it;(it=C.onProgress)==null||it.call(C,{loaded:$.loaded,total:$.total})}),B.resolve({isStreamingSupported:X.isStreamingSupported,isRangeSupported:X.isRangeSupported,contentLength:X.contentLength})},B.reject),B.promise}),a.on("GetRangeReader",(b,B)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const X=this._networkStream.getRangeReader(b.begin,b.end);if(!X){B.close();return}B.onPull=()=>{X.read().then(function({value:x,done:$}){if($){B.close();return}(0,_util.assert)(x instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),B.enqueue(new Uint8Array(x),1,[x])}).catch(x=>{B.error(x)})},B.onCancel=x=>{X.cancel(x),B.ready.catch($=>{if(!this.destroyed)throw $})}}),a.on("GetDoc",({pdfInfo:b})=>{this._numPages=b.numPages,this._htmlForXfa=b.htmlForXfa,delete b.htmlForXfa,C._capability.resolve(new PDFDocumentProxy(b,this))}),a.on("DocException",function(b){let B;switch(b.name){case"PasswordException":B=new _util.PasswordException(b.message,b.code);break;case"InvalidPDFException":B=new _util.InvalidPDFException(b.message);break;case"MissingPDFException":B=new _util.MissingPDFException(b.message);break;case"UnexpectedResponseException":B=new _util.UnexpectedResponseException(b.message,b.status);break;case"UnknownErrorException":B=new _util.UnknownErrorException(b.message,b.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}C._capability.reject(B)}),a.on("PasswordRequest",b=>{if(Z(this,y,new _util.PromiseCapability),C.onPassword){const B=X=>{X instanceof Error?t(this,y).reject(X):t(this,y).resolve({password:X})};try{C.onPassword(B,b.code)}catch(X){t(this,y).reject(X)}}else t(this,y).reject(new _util.PasswordException(b.message,b.code));return t(this,y).promise}),a.on("DataLoaded",b=>{var B;(B=C.onProgress)==null||B.call(C,{loaded:b.length,total:b.length}),this.downloadInfoCapability.resolve(b)}),a.on("StartRenderPage",b=>{if(this.destroyed)return;t(this,P).get(b.pageIndex)._startRenderPage(b.transparency,b.cacheKey)}),a.on("commonobj",([b,B,X])=>{var x;if(!this.destroyed&&!this.commonObjs.has(b))switch(B){case"Font":const $=this._params;if("error"in X){const W=X.error;(0,_util.warn)(`Error during font loading: ${W}`),this.commonObjs.resolve(b,W);break}const it=$.pdfBug&&((x=globalThis.FontInspector)!=null&&x.enabled)?(W,lt)=>globalThis.FontInspector.fontAdded(W,lt):null,at=new _font_loader.FontFaceObject(X,{isEvalSupported:$.isEvalSupported,disableFontFace:$.disableFontFace,ignoreErrors:$.ignoreErrors,inspectFont:it});this.fontLoader.bind(at).catch(W=>a.sendWithPromise("FontFallback",{id:b})).finally(()=>{!$.fontExtraProperties&&at.data&&(at.data=null),this.commonObjs.resolve(b,at)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(b,X);break;default:throw new Error(`Got unknown common object type ${B}`)}}),a.on("obj",([b,B,X,x])=>{var it;if(this.destroyed)return;const $=t(this,P).get(B);if(!$.objs.has(b))switch(X){case"Image":if($.objs.resolve(b,x),x){let at;if(x.bitmap){const{width:W,height:lt}=x;at=W*lt*4}else at=((it=x.data)==null?void 0:it.length)||0;at>_util.MAX_IMAGE_SIZE_TO_CACHE&&($._maybeCleanupAfterRender=!0)}break;case"Pattern":$.objs.resolve(b,x);break;default:throw new Error(`Got unknown object type ${X}`)}}),a.on("DocProgress",b=>{var B;this.destroyed||(B=C.onProgress)==null||B.call(C,{loaded:b.loaded,total:b.total})}),a.on("FetchBuiltInCMap",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(b):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",b=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(b):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var b;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:a,transfers:C}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:((b=this._fullReader)==null?void 0:b.filename)??null},C).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const C=a-1,b=t(this,v).get(C);if(b)return b;const B=this.messageHandler.sendWithPromise("GetPage",{pageIndex:C}).then(X=>{if(this.destroyed)throw new Error("Transport destroyed");const x=new PDFPageProxy(C,X,this,this._params.pdfBug);return t(this,P).set(C,x),x});return t(this,v).set(C,B),B}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,C){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:C})}getFieldObjects(){return H(this,u,xe).call(this,"GetFieldObjects")}hasJSActions(){return H(this,u,xe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return H(this,u,xe).call(this,"GetDocJSActions")}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const a="GetMetadata",C=t(this,O).get(a);if(C)return C;const b=this.messageHandler.sendWithPromise(a,null).then(B=>{var X,x;return{info:B[0],metadata:B[1]?new _metadata.Metadata(B[1]):null,contentDispositionFilename:((X=this._fullReader)==null?void 0:X.filename)??null,contentLength:((x=this._fullReader)==null?void 0:x.contentLength)??null}});return t(this,O).set(a,b),b}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const C of t(this,P).values())if(!C.cleanup())throw new Error(`startCleanup: Page ${C.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),t(this,O).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:a,enableXfa:C}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a,enableXfa:C})}}O=new WeakMap,P=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakSet,xe=function(a,C=null){const b=t(this,O).get(a);if(b)return b;const B=this.messageHandler.sendWithPromise(a,C);return t(this,O).set(a,B),B};class PDFObjects{constructor(){I(this,w);I(this,E,Object.create(null))}get(a,C=null){if(C){const B=H(this,w,je).call(this,a);return B.capability.promise.then(()=>C(B.data)),null}const b=t(this,E)[a];if(!(b!=null&&b.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${a}.`);return b.data}has(a){const C=t(this,E)[a];return(C==null?void 0:C.capability.settled)||!1}resolve(a,C=null){const b=H(this,w,je).call(this,a);b.data=C,b.capability.resolve()}clear(){var a;for(const C in t(this,E)){const{data:b}=t(this,E)[C];(a=b==null?void 0:b.bitmap)==null||a.close()}Z(this,E,Object.create(null))}}E=new WeakMap,w=new WeakSet,je=function(a){var C;return(C=t(this,E))[a]||(C[a]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(a){I(this,r,null);Z(this,r,a),this.onContinue=null}get promise(){return t(this,r).capability.promise}cancel(a=0){t(this,r).cancel(null,a)}get separateAnnots(){const{separateAnnots:a}=t(this,r).operatorList;if(!a)return!1;const{annotationCanvasMap:C}=t(this,r);return a.form||a.canvas&&(C==null?void 0:C.size)>0}}r=new WeakMap,exports.RenderTask=RenderTask;const k=class k{constructor({callback:a,params:C,objs:b,commonObjs:B,annotationCanvasMap:X,operatorList:x,pageIndex:$,canvasFactory:it,filterFactory:at,useRequestAnimationFrame:W=!1,pdfBug:lt=!1,pageColors:gt=null}){this.callback=a,this.params=C,this.objs=b,this.commonObjs=B,this.annotationCanvasMap=X,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=$,this.canvasFactory=it,this.filterFactory=at,this._pdfBug=lt,this.pageColors=gt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=W===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=C.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:C}){var $,it;if(this.cancelled)return;if(this._canvas){if(t(k,l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(k,l).add(this._canvas)}this._pdfBug&&(($=globalThis.StepperManager)!=null&&$.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:b,viewport:B,transform:X,background:x}=this.params;this.gfx=new _canvas.CanvasGraphics(b,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:C},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:X,viewport:B,transparency:a,background:x}),this.operatorListIdx=0,this.graphicsReady=!0,(it=this.graphicsReadyCallback)==null||it.call(this)}cancel(a=null,C=0){var b;this.running=!1,this.cancelled=!0,(b=this.gfx)==null||b.endDrawing(),t(k,l).delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,C))}operatorListChanged(){var a;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(a=this.stepper)==null||a.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(k,l).delete(this._canvas),this.callback())))}};l=new WeakMap,I(k,l,new WeakSet);let InternalRenderTask=k;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(pt,d,st)=>{var R,f,L,Ai,P;Object.defineProperty(d,"__esModule",{value:!0}),d.SerializableEmpty=d.PrintAnnotationStorage=d.AnnotationStorage=void 0;var h=st(1),T=st(4),nt=st(8);const z=Object.freeze({map:null,hash:"",transfers:void 0});d.SerializableEmpty=z;class ft{constructor(){I(this,L);I(this,R,!1);I(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(y,u){const _=t(this,f).get(y);return _===void 0?u:Object.assign(u,_)}getRawValue(y){return t(this,f).get(y)}remove(y){if(t(this,f).delete(y),t(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of t(this,f).values())if(u instanceof T.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(y,u){const _=t(this,f).get(y);let E=!1;if(_!==void 0)for(const[w,m]of Object.entries(u))_[w]!==m&&(E=!0,_[w]=m);else E=!0,t(this,f).set(y,u);E&&H(this,L,Ai).call(this),u instanceof T.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(y){return t(this,f).has(y)}getAll(){return t(this,f).size>0?(0,h.objectFromMap)(t(this,f)):null}setAll(y){for(const[u,_]of Object.entries(y))this.setValue(u,_)}get size(){return t(this,f).size}resetModified(){t(this,R)&&(Z(this,R,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new j(this)}get serializable(){if(t(this,f).size===0)return z;const y=new Map,u=new nt.MurmurHash3_64,_=[],E=Object.create(null);let w=!1;for(const[m,r]of t(this,f)){const l=r instanceof T.AnnotationEditor?r.serialize(!1,E):r;l&&(y.set(m,l),u.update(`${m}:${JSON.stringify(l)}`),w||(w=!!l.bitmap))}if(w)for(const m of y.values())m.bitmap&&_.push(m.bitmap);return y.size>0?{map:y,hash:u.hexdigest(),transfers:_}:z}}R=new WeakMap,f=new WeakMap,L=new WeakSet,Ai=function(){t(this,R)||(Z(this,R,!0),typeof this.onSetModified=="function"&&this.onSetModified())},d.AnnotationStorage=ft;class j extends ft{constructor(u){super();I(this,P,void 0);const{map:_,hash:E,transfers:w}=u.serializable,m=structuredClone(_,w?{transfer:w}:null);Z(this,P,{map:m,hash:E,transfers:w})}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,P)}}P=new WeakMap,d.PrintAnnotationStorage=j},(pt,d,st)=>{var j,R,f,L,O,P,v,y,u,_,E,w,m,r,l,Be,g,Ue,C,We,B,He,x,yi,it,vi,W,Si,gt,ze,Pt,Ei;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditor=void 0;var h=st(5),T=st(1),nt=st(6);const i=class i{constructor(s){I(this,l);I(this,g);I(this,B);I(this,x);I(this,it);I(this,W);I(this,gt);I(this,Pt);I(this,j,"");I(this,R,!1);I(this,f,null);I(this,L,null);I(this,O,null);I(this,P,!1);I(this,v,null);I(this,y,this.focusin.bind(this));I(this,u,this.focusout.bind(this));I(this,_,!1);I(this,E,!1);I(this,w,!1);ee(this,"_initialOptions",Object.create(null));ee(this,"_uiManager",null);ee(this,"_focusEventsAllowed",!0);ee(this,"_l10nPromise",null);I(this,m,!1);I(this,r,i._zIndex++);this.constructor===i&&(0,T.unreachable)("Cannot initialize AnnotationEditor."),this.parent=s.parent,this.id=s.id,this.width=this.height=null,this.pageIndex=s.parent.pageIndex,this.name=s.name,this.div=null,this._uiManager=s.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=s.isCentered,this._structTreeParentId=null;const{rotation:o,rawDims:{pageWidth:c,pageHeight:A,pageX:F,pageY:N}}=this.parent.viewport;this.rotation=o,this.pageRotation=(360+o-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[c,A],this.pageTranslation=[F,N];const[tt,Q]=this.parentDimensions;this.x=s.x/tt,this.y=s.y/Q,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,T.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(s){const o=new ft({id:s.parent.getNextId(),parent:s.parent,uiManager:s._uiManager});o.annotationElementId=s.annotationElementId,o.deleted=!0,o._uiManager.addToAnnotationStorage(o)}static initialize(s,o=null){if(i._l10nPromise||(i._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(A=>[A,s.get(A)]))),o!=null&&o.strings)for(const A of o.strings)i._l10nPromise.set(A,s.get(A));if(i._borderLineWidth!==-1)return;const c=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(c.getPropertyValue("--outline-width"))||0}static updateDefaultParams(s,o){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(s){return!1}static paste(s,o){(0,T.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,m)}set _isDraggable(s){var o;Z(this,m,s),(o=this.div)==null||o.classList.toggle("draggable",s)}center(){const[s,o]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*o/(s*2),this.y+=this.width*s/(o*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*o/(s*2),this.y-=this.width*s/(o*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(s){this._uiManager.addCommands(s)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,r)}setParent(s){s!==null&&(this.pageIndex=s.pageIndex,this.pageDimensions=s.pageDimensions),this.parent=s}focusin(s){this._focusEventsAllowed&&(t(this,_)?Z(this,_,!1):this.parent.setSelected(this))}focusout(s){var c;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const o=s.relatedTarget;o!=null&&o.closest(`#${this.id}`)||(s.preventDefault(),(c=this.parent)!=null&&c.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(s,o,c,A){const[F,N]=this.parentDimensions;[c,A]=this.screenToPageTranslation(c,A),this.x=(s+c)/F,this.y=(o+A)/N,this.fixAndSetPosition()}translate(s,o){H(this,l,Be).call(this,this.parentDimensions,s,o)}translateInPage(s,o){H(this,l,Be).call(this,this.pageDimensions,s,o),this.div.scrollIntoView({block:"nearest"})}drag(s,o){const[c,A]=this.parentDimensions;if(this.x+=s/c,this.y+=o/A,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:rt,y:ct}=this.div.getBoundingClientRect();this.parent.findNewParent(this,rt,ct)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:F,y:N}=this;const[tt,Q]=H(this,g,Ue).call(this);F+=tt,N+=Q,this.div.style.left=`${(100*F).toFixed(2)}%`,this.div.style.top=`${(100*N).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[s,o]=this.pageDimensions;let{x:c,y:A,width:F,height:N}=this;switch(F*=s,N*=o,c*=s,A*=o,this.rotation){case 0:c=Math.max(0,Math.min(s-F,c)),A=Math.max(0,Math.min(o-N,A));break;case 90:c=Math.max(0,Math.min(s-N,c)),A=Math.min(o,Math.max(F,A));break;case 180:c=Math.min(s,Math.max(F,c)),A=Math.min(o,Math.max(N,A));break;case 270:c=Math.min(s,Math.max(N,c)),A=Math.max(0,Math.min(o-F,A));break}this.x=c/=s,this.y=A/=o;const[tt,Q]=H(this,g,Ue).call(this);c+=tt,A+=Q;const{style:rt}=this.div;rt.left=`${(100*c).toFixed(2)}%`,rt.top=`${(100*A).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(s,o){var c;return H(c=i,C,We).call(c,s,o,this.parentRotation)}pageTranslationToScreen(s,o){var c;return H(c=i,C,We).call(c,s,o,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:s,pageDimensions:[o,c]}=this,A=o*s,F=c*s;return T.FeatureTest.isCSSRoundSupported?[Math.round(A),Math.round(F)]:[A,F]}setDims(s,o){var F;const[c,A]=this.parentDimensions;this.div.style.width=`${(100*s/c).toFixed(2)}%`,t(this,P)||(this.div.style.height=`${(100*o/A).toFixed(2)}%`),(F=t(this,f))==null||F.classList.toggle("small",s<i.SMALL_EDITOR_SIZE||o<i.SMALL_EDITOR_SIZE)}fixDims(){const{style:s}=this.div,{height:o,width:c}=s,A=c.endsWith("%"),F=!t(this,P)&&o.endsWith("%");if(A&&F)return;const[N,tt]=this.parentDimensions;A||(s.width=`${(100*parseFloat(c)/N).toFixed(2)}%`),!t(this,P)&&!F&&(s.height=`${(100*parseFloat(o)/tt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,f))return;const s=Z(this,f,document.createElement("button"));s.className="altText";const o=await i._l10nPromise.get("editor_alt_text_button_label");s.textContent=o,s.setAttribute("aria-label",o),s.tabIndex="0",s.addEventListener("contextmenu",nt.noContextMenu),s.addEventListener("pointerdown",c=>c.stopPropagation()),s.addEventListener("click",c=>{c.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),s.addEventListener("keydown",c=>{c.target===s&&c.key==="Enter"&&(c.preventDefault(),this._uiManager.editAltText(this))}),H(this,gt,ze).call(this),this.div.append(s),i.SMALL_EDITOR_SIZE||(i.SMALL_EDITOR_SIZE=Math.min(128,Math.round(s.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,j),decorative:t(this,R)}}set altTextData({altText:s,decorative:o}){t(this,j)===s&&t(this,R)===o||(Z(this,j,s),Z(this,R,o),H(this,gt,ze).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,y)),this.div.addEventListener("focusout",t(this,u));const[s,o]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*o/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/o).toFixed(2)}%`);const[c,A]=this.getInitialTranslation();return this.translate(c,A),(0,h.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(s){const{isMac:o}=T.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&o){s.preventDefault();return}Z(this,_,!0),H(this,Pt,Ei).call(this,s)}moveInDOM(){var s;(s=this.parent)==null||s.moveEditorInDOM(this)}_setParentAndPosition(s,o,c){s.changeParent(this),this.x=o,this.y=c,this.fixAndSetPosition()}getRect(s,o){const c=this.parentScale,[A,F]=this.pageDimensions,[N,tt]=this.pageTranslation,Q=s/c,rt=o/c,ct=this.x*A,yt=this.y*F,dt=this.width*A,Rt=this.height*F;switch(this.rotation){case 0:return[ct+Q+N,F-yt-rt-Rt+tt,ct+Q+dt+N,F-yt-rt+tt];case 90:return[ct+rt+N,F-yt+Q+tt,ct+rt+Rt+N,F-yt+Q+dt+tt];case 180:return[ct-Q-dt+N,F-yt+rt+tt,ct-Q+N,F-yt+rt+Rt+tt];case 270:return[ct-rt-Rt+N,F-yt-Q-dt+tt,ct-rt+N,F-yt-Q+tt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(s,o){const[c,A,F,N]=s,tt=F-c,Q=N-A;switch(this.rotation){case 0:return[c,o-N,tt,Q];case 90:return[c,o-A,Q,tt];case 180:return[F,o-A,tt,Q];case 270:return[F,o-N,Q,tt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Z(this,w,!0)}disableEditMode(){Z(this,w,!1)}isInEditMode(){return t(this,w)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,o;(s=this.div)==null||s.addEventListener("focusin",t(this,y)),(o=this.div)==null||o.addEventListener("focusout",t(this,u))}serialize(s=!1,o=null){(0,T.unreachable)("An editor must be serializable")}static deserialize(s,o,c){const A=new this.prototype.constructor({parent:o,id:o.getNextId(),uiManager:c});A.rotation=s.rotation;const[F,N]=A.pageDimensions,[tt,Q,rt,ct]=A.getRectInCurrentCoords(s.rect,N);return A.x=tt/F,A.y=Q/N,A.width=rt/F,A.height=ct/N,A}remove(){var s;this.div.removeEventListener("focusin",t(this,y)),this.div.removeEventListener("focusout",t(this,u)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(s=t(this,f))==null||s.remove(),Z(this,f,null),Z(this,L,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(H(this,x,yi).call(this),t(this,v).classList.remove("hidden"))}select(){var s;this.makeResizable(),(s=this.div)==null||s.classList.add("selectedEditor")}unselect(){var s,o,c;(s=t(this,v))==null||s.classList.add("hidden"),(o=this.div)==null||o.classList.remove("selectedEditor"),(c=this.div)!=null&&c.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(s,o){}disableEditing(){t(this,f)&&(t(this,f).hidden=!0)}enableEditing(){t(this,f)&&(t(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,E)}set isEditing(s){Z(this,E,s),this.parent&&(s?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(s,o){Z(this,P,!0);const c=s/o,{style:A}=this.div;A.aspectRatio=c,A.height="auto"}static get MIN_SIZE(){return 16}};j=new WeakMap,R=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakMap,_=new WeakMap,E=new WeakMap,w=new WeakMap,m=new WeakMap,r=new WeakMap,l=new WeakSet,Be=function([s,o],c,A){[c,A]=this.screenToPageTranslation(c,A),this.x+=c/s,this.y+=A/o,this.fixAndSetPosition()},g=new WeakSet,Ue=function(){const[s,o]=this.parentDimensions,{_borderLineWidth:c}=i,A=c/s,F=c/o;switch(this.rotation){case 90:return[-A,F];case 180:return[A,F];case 270:return[A,-F];default:return[-A,-F]}},C=new WeakSet,We=function(s,o,c){switch(c){case 90:return[o,-s];case 180:return[-s,-o];case 270:return[-o,s];default:return[s,o]}},B=new WeakSet,He=function(s){switch(s){case 90:{const[o,c]=this.pageDimensions;return[0,-o/c,c/o,0]}case 180:return[-1,0,0,-1];case 270:{const[o,c]=this.pageDimensions;return[0,o/c,-c/o,0]}default:return[1,0,0,1]}},x=new WeakSet,yi=function(){if(t(this,v))return;Z(this,v,document.createElement("div")),t(this,v).classList.add("resizers");const s=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||s.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const o of s){const c=document.createElement("div");t(this,v).append(c),c.classList.add("resizer",o),c.addEventListener("pointerdown",H(this,it,vi).bind(this,o)),c.addEventListener("contextmenu",nt.noContextMenu)}this.div.prepend(t(this,v))},it=new WeakSet,vi=function(s,o){o.preventDefault();const{isMac:c}=T.FeatureTest.platform;if(o.button!==0||o.ctrlKey&&c)return;const A=H(this,W,Si).bind(this,s),F=this._isDraggable;this._isDraggable=!1;const N={passive:!0,capture:!0};window.addEventListener("pointermove",A,N);const tt=this.x,Q=this.y,rt=this.width,ct=this.height,yt=this.parent.div.style.cursor,dt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(o.target).cursor;const Rt=()=>{this._isDraggable=F,window.removeEventListener("pointerup",Rt),window.removeEventListener("blur",Rt),window.removeEventListener("pointermove",A,N),this.parent.div.style.cursor=yt,this.div.style.cursor=dt;const jt=this.x,St=this.y,Dt=this.width,ut=this.height;jt===tt&&St===Q&&Dt===rt&&ut===ct||this.addCommands({cmd:()=>{this.width=Dt,this.height=ut,this.x=jt,this.y=St;const[K,J]=this.parentDimensions;this.setDims(K*Dt,J*ut),this.fixAndSetPosition()},undo:()=>{this.width=rt,this.height=ct,this.x=tt,this.y=Q;const[K,J]=this.parentDimensions;this.setDims(K*rt,J*ct),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Rt),window.addEventListener("blur",Rt)},W=new WeakSet,Si=function(s,o){const[c,A]=this.parentDimensions,F=this.x,N=this.y,tt=this.width,Q=this.height,rt=i.MIN_SIZE/c,ct=i.MIN_SIZE/A,yt=bt=>Math.round(bt*1e4)/1e4,dt=H(this,B,He).call(this,this.rotation),Rt=(bt,At)=>[dt[0]*bt+dt[2]*At,dt[1]*bt+dt[3]*At],jt=H(this,B,He).call(this,360-this.rotation),St=(bt,At)=>[jt[0]*bt+jt[2]*At,jt[1]*bt+jt[3]*At];let Dt,ut,K=!1,J=!1;switch(s){case"topLeft":K=!0,Dt=(bt,At)=>[0,0],ut=(bt,At)=>[bt,At];break;case"topMiddle":Dt=(bt,At)=>[bt/2,0],ut=(bt,At)=>[bt/2,At];break;case"topRight":K=!0,Dt=(bt,At)=>[bt,0],ut=(bt,At)=>[0,At];break;case"middleRight":J=!0,Dt=(bt,At)=>[bt,At/2],ut=(bt,At)=>[0,At/2];break;case"bottomRight":K=!0,Dt=(bt,At)=>[bt,At],ut=(bt,At)=>[0,0];break;case"bottomMiddle":Dt=(bt,At)=>[bt/2,At],ut=(bt,At)=>[bt/2,0];break;case"bottomLeft":K=!0,Dt=(bt,At)=>[0,At],ut=(bt,At)=>[bt,0];break;case"middleLeft":J=!0,Dt=(bt,At)=>[0,At/2],ut=(bt,At)=>[bt,At/2];break}const ht=Dt(tt,Q),Et=ut(tt,Q);let wt=Rt(...Et);const Ut=yt(F+wt[0]),zt=yt(N+wt[1]);let Wt=1,Xt=1,[$t,Ht]=this.screenToPageTranslation(o.movementX,o.movementY);if([$t,Ht]=St($t/c,Ht/A),K){const bt=Math.hypot(tt,Q);Wt=Xt=Math.max(Math.min(Math.hypot(Et[0]-ht[0]-$t,Et[1]-ht[1]-Ht)/bt,1/tt,1/Q),rt/tt,ct/Q)}else J?Wt=Math.max(rt,Math.min(1,Math.abs(Et[0]-ht[0]-$t)))/tt:Xt=Math.max(ct,Math.min(1,Math.abs(Et[1]-ht[1]-Ht)))/Q;const qt=yt(tt*Wt),ot=yt(Q*Xt);wt=Rt(...ut(qt,ot));const Y=Ut-wt[0],G=zt-wt[1];this.width=qt,this.height=ot,this.x=Y,this.y=G,this.setDims(c*qt,A*ot),this.fixAndSetPosition()},gt=new WeakSet,ze=async function(){var c;const s=t(this,f);if(!s)return;if(!t(this,j)&&!t(this,R)){s.classList.remove("done"),(c=t(this,L))==null||c.remove();return}i._l10nPromise.get("editor_alt_text_edit_button_label").then(A=>{s.setAttribute("aria-label",A)});let o=t(this,L);if(!o){Z(this,L,o=document.createElement("span")),o.className="tooltip",o.setAttribute("role","tooltip");const A=o.id=`alt-text-tooltip-${this.id}`;s.setAttribute("aria-describedby",A);const F=100;s.addEventListener("mouseenter",()=>{Z(this,O,setTimeout(()=>{Z(this,O,null),t(this,L).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},F))}),s.addEventListener("mouseleave",()=>{var N;clearTimeout(t(this,O)),Z(this,O,null),(N=t(this,L))==null||N.classList.remove("show")})}s.classList.add("done"),o.innerText=t(this,R)?await i._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,j),o.parentNode||s.append(o)},Pt=new WeakSet,Ei=function(s){if(!this._isDraggable)return;const o=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let c,A;o&&(c={passive:!0,capture:!0},A=N=>{const[tt,Q]=this.screenToPageTranslation(N.movementX,N.movementY);this._uiManager.dragSelectedEditors(tt,Q)},window.addEventListener("pointermove",A,c));const F=()=>{if(window.removeEventListener("pointerup",F),window.removeEventListener("blur",F),o&&window.removeEventListener("pointermove",A,c),Z(this,_,!1),!this._uiManager.endDragSession()){const{isMac:N}=T.FeatureTest.platform;s.ctrlKey&&!N||s.shiftKey||s.metaKey&&N?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",F),window.addEventListener("blur",F)},I(i,C),ee(i,"_borderLineWidth",-1),ee(i,"_colorManager",new h.ColorManager),ee(i,"_zIndex",1),ee(i,"SMALL_EDITOR_SIZE",0);let z=i;d.AnnotationEditor=z;class ft extends z{constructor(s){super(s),this.annotationElementId=s.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(pt,d,st)=>{var P,v,y,u,_,Ge,m,r,l,k,g,xi,b,B,X,x,$,it,at,W,lt,gt,xt,Pt,S,i,n,s,o,c,A,F,N,tt,Q,rt,ct,yt,dt,Rt,jt,St,Dt,ut,K,J,ht,wi,wt,Xe,zt,$e,Xt,we,Ht,Ve,ot,qe,G,re,At,me,Zt,Ci,vt,Ti,Ct,Ye,Nt,be,_t,Ke;Object.defineProperty(d,"__esModule",{value:!0}),d.KeyboardManager=d.CommandManager=d.ColorManager=d.AnnotationEditorUIManager=void 0,d.bindEvents=nt,d.opacityToHex=z;var h=st(1),T=st(6);function nt(M,e,p){for(const D of p)e.addEventListener(D,M[D].bind(M))}function z(M){return Math.round(Math.min(255,Math.max(1,255*M))).toString(16).padStart(2,"0")}class ft{constructor(){I(this,P,0)}getId(){return`${h.AnnotationEditorPrefix}${ge(this,P)._++}`}}P=new WeakMap;const w=class w{constructor(){I(this,_);I(this,v,(0,h.getUuid)());I(this,y,0);I(this,u,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',D=new OffscreenCanvas(1,3).getContext("2d"),U=new Image;U.src=e;const V=U.decode().then(()=>(D.drawImage(U,0,0,1,1,0,0,1,3),new Uint32Array(D.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,h.shadow)(this,"_isSVGFittingCanvas",V)}async getFromFile(e){const{lastModified:p,name:D,size:U,type:V}=e;return H(this,_,Ge).call(this,`${p}_${D}_${U}_${V}`,e)}async getFromUrl(e){return H(this,_,Ge).call(this,e,e)}async getFromId(e){t(this,u)||Z(this,u,new Map);const p=t(this,u).get(e);return p?p.bitmap?(p.refCounter+=1,p):p.file?this.getFromFile(p.file):this.getFromUrl(p.url):null}getSvgUrl(e){const p=t(this,u).get(e);return p!=null&&p.isSvg?p.svgUrl:null}deleteId(e){t(this,u)||Z(this,u,new Map);const p=t(this,u).get(e);p&&(p.refCounter-=1,p.refCounter===0&&(p.bitmap=null))}isValidId(e){return e.startsWith(`image_${t(this,v)}_`)}};v=new WeakMap,y=new WeakMap,u=new WeakMap,_=new WeakSet,Ge=async function(e,p){t(this,u)||Z(this,u,new Map);let D=t(this,u).get(e);if(D===null)return null;if(D!=null&&D.bitmap)return D.refCounter+=1,D;try{D||(D={bitmap:null,id:`image_${t(this,v)}_${ge(this,y)._++}`,refCounter:0,isSvg:!1});let U;if(typeof p=="string"){D.url=p;const V=await fetch(p);if(!V.ok)throw new Error(V.statusText);U=await V.blob()}else U=D.file=p;if(U.type==="image/svg+xml"){const V=w._isSVGFittingCanvas,et=new FileReader,mt=new Image,kt=new Promise((Tt,Gt)=>{mt.onload=()=>{D.bitmap=mt,D.isSvg=!0,Tt()},et.onload=async()=>{const Ft=D.svgUrl=et.result;mt.src=await V?`${Ft}#svgView(preserveAspectRatio(none))`:Ft},mt.onerror=et.onerror=Gt});et.readAsDataURL(U),await kt}else D.bitmap=await createImageBitmap(U);D.refCounter=1}catch(U){console.error(U),D=null}return t(this,u).set(e,D),D&&t(this,u).set(D.id,D),D};let j=w;class R{constructor(e=128){I(this,m,[]);I(this,r,!1);I(this,l,void 0);I(this,k,-1);Z(this,l,e)}add({cmd:e,undo:p,mustExec:D,type:U=NaN,overwriteIfSameType:V=!1,keepUndo:et=!1}){if(D&&e(),t(this,r))return;const mt={cmd:e,undo:p,type:U};if(t(this,k)===-1){t(this,m).length>0&&(t(this,m).length=0),Z(this,k,0),t(this,m).push(mt);return}if(V&&t(this,m)[t(this,k)].type===U){et&&(mt.undo=t(this,m)[t(this,k)].undo),t(this,m)[t(this,k)]=mt;return}const kt=t(this,k)+1;kt===t(this,l)?t(this,m).splice(0,1):(Z(this,k,kt),kt<t(this,m).length&&t(this,m).splice(kt)),t(this,m).push(mt)}undo(){t(this,k)!==-1&&(Z(this,r,!0),t(this,m)[t(this,k)].undo(),Z(this,r,!1),Z(this,k,t(this,k)-1))}redo(){t(this,k)<t(this,m).length-1&&(Z(this,k,t(this,k)+1),Z(this,r,!0),t(this,m)[t(this,k)].cmd(),Z(this,r,!1))}hasSomethingToUndo(){return t(this,k)!==-1}hasSomethingToRedo(){return t(this,k)<t(this,m).length-1}destroy(){Z(this,m,null)}}m=new WeakMap,r=new WeakMap,l=new WeakMap,k=new WeakMap,d.CommandManager=R;class f{constructor(e){I(this,g);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:p}=h.FeatureTest.platform;for(const[D,U,V={}]of e)for(const et of D){const mt=et.startsWith("mac+");p&&mt?(this.callbacks.set(et.slice(4),{callback:U,options:V}),this.allKeys.add(et.split("+").at(-1))):!p&&!mt&&(this.callbacks.set(et,{callback:U,options:V}),this.allKeys.add(et.split("+").at(-1)))}}exec(e,p){if(!this.allKeys.has(p.key))return;const D=this.callbacks.get(H(this,g,xi).call(this,p));if(!D)return;const{callback:U,options:{bubbles:V=!1,args:et=[],checker:mt=null}}=D;mt&&!mt(e,p)||(U.bind(e,...et)(),V||(p.stopPropagation(),p.preventDefault()))}}g=new WeakSet,xi=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const p=this.buffer.join("+");return this.buffer.length=0,p},d.KeyboardManager=f;const C=class C{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,T.getColorValues)(e),(0,h.shadow)(this,"_colors",e)}convert(e){const p=(0,T.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return p;for(const[D,U]of this._colors)if(U.every((V,et)=>V===p[et]))return C._colorsMapping.get(D);return p}getHexCode(e){const p=this._colors.get(e);return p?h.Util.makeHexColor(...p):e}};ee(C,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let L=C;d.ColorManager=L;const It=class It{constructor(e,p,D,U,V,et){I(this,ht);I(this,wt);I(this,zt);I(this,Xt);I(this,Ht);I(this,ot);I(this,G);I(this,At);I(this,Zt);I(this,vt);I(this,Ct);I(this,Nt);I(this,_t);I(this,b,null);I(this,B,new Map);I(this,X,new Map);I(this,x,null);I(this,$,null);I(this,it,new R);I(this,at,0);I(this,W,new Set);I(this,lt,null);I(this,gt,null);I(this,xt,new Set);I(this,Pt,null);I(this,S,new ft);I(this,i,!1);I(this,n,!1);I(this,s,null);I(this,o,h.AnnotationEditorType.NONE);I(this,c,new Set);I(this,A,null);I(this,F,this.blur.bind(this));I(this,N,this.focus.bind(this));I(this,tt,this.copy.bind(this));I(this,Q,this.cut.bind(this));I(this,rt,this.paste.bind(this));I(this,ct,this.keydown.bind(this));I(this,yt,this.onEditingAction.bind(this));I(this,dt,this.onPageChanging.bind(this));I(this,Rt,this.onScaleChanging.bind(this));I(this,jt,this.onRotationChanging.bind(this));I(this,St,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});I(this,Dt,[0,0]);I(this,ut,null);I(this,K,null);I(this,J,null);Z(this,K,e),Z(this,J,p),Z(this,x,D),this._eventBus=U,this._eventBus._on("editingaction",t(this,yt)),this._eventBus._on("pagechanging",t(this,dt)),this._eventBus._on("scalechanging",t(this,Rt)),this._eventBus._on("rotationchanging",t(this,jt)),Z(this,$,V.annotationStorage),Z(this,Pt,V.filterFactory),Z(this,A,et),this.viewParameters={realScale:T.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=It.prototype,p=V=>{const{activeElement:et}=document;return et&&t(V,K).contains(et)&&V.hasSomethingToControl()},D=this.TRANSLATE_SMALL,U=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-D,0],checker:p}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-U,0],checker:p}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[D,0],checker:p}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[U,0],checker:p}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-D],checker:p}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-U],checker:p}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,D],checker:p}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,U],checker:p}]]))}destroy(){H(this,Xt,we).call(this),H(this,wt,Xe).call(this),this._eventBus._off("editingaction",t(this,yt)),this._eventBus._off("pagechanging",t(this,dt)),this._eventBus._off("scalechanging",t(this,Rt)),this._eventBus._off("rotationchanging",t(this,jt));for(const e of t(this,X).values())e.destroy();t(this,X).clear(),t(this,B).clear(),t(this,xt).clear(),Z(this,b,null),t(this,c).clear(),t(this,it).destroy(),t(this,x).destroy()}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",t(this,A)?t(this,Pt).addHCMFilter(t(this,A).foreground,t(this,A).background):"none")}get direction(){return(0,h.shadow)(this,"direction",getComputedStyle(t(this,K)).direction)}editAltText(e){var p;(p=t(this,x))==null||p.editAltText(this,e)}onPageChanging({pageNumber:e}){Z(this,at,e-1)}focusMainContainer(){t(this,K).focus()}findParent(e,p){for(const D of t(this,X).values()){const{x:U,y:V,width:et,height:mt}=D.div.getBoundingClientRect();if(e>=U&&e<=U+et&&p>=V&&p<=V+mt)return D}return null}disableUserSelect(e=!1){t(this,J).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,xt).add(e)}removeShouldRescale(e){t(this,xt).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*T.PixelsPerInch.PDF_TO_CSS_UNITS;for(const p of t(this,xt))p.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,$)&&!t(this,$).has(e.id)&&t(this,$).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const p of t(this,c))if(p.div.contains(e)){Z(this,s,[p,e]),p._focusEventsAllowed=!1;break}}focus(){if(!t(this,s))return;const[e,p]=t(this,s);Z(this,s,null),p.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),p.focus()}addEditListeners(){H(this,zt,$e).call(this),H(this,Ht,Ve).call(this)}removeEditListeners(){H(this,Xt,we).call(this),H(this,ot,qe).call(this)}copy(e){var D;if(e.preventDefault(),(D=t(this,b))==null||D.commitOrRemove(),!this.hasSelection)return;const p=[];for(const U of t(this,c)){const V=U.serialize(!0);V&&p.push(V)}p.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(p))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:p}=e;for(const V of p.items)for(const et of t(this,gt))if(et.isHandlingMimeForPasting(V.type)){et.paste(V,this.currentLayer);return}let D=p.getData("application/pdfjs");if(!D)return;try{D=JSON.parse(D)}catch(V){(0,h.warn)(`paste: "${V.message}".`);return}if(!Array.isArray(D))return;this.unselectAll();const U=this.currentLayer;try{const V=[];for(const kt of D){const Tt=U.deserialize(kt);if(!Tt)return;V.push(Tt)}const et=()=>{for(const kt of V)H(this,Ct,Ye).call(this,kt);H(this,_t,Ke).call(this,V)},mt=()=>{for(const kt of V)kt.remove()};this.addCommands({cmd:et,undo:mt,mustExec:!0})}catch(V){(0,h.warn)(`paste: "${V.message}".`)}}keydown(e){var p;(p=this.getActive())!=null&&p.shouldGetKeyboardEvents()||It._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(H(this,ht,wi).call(this),H(this,zt,$e).call(this),H(this,Ht,Ve).call(this),H(this,G,re).call(this,{isEditing:t(this,o)!==h.AnnotationEditorType.NONE,isEmpty:H(this,Nt,be).call(this),hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:t(this,it).hasSomethingToRedo(),hasSelectedEditor:!1})):(H(this,wt,Xe).call(this),H(this,Xt,we).call(this),H(this,ot,qe).call(this),H(this,G,re).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,gt)){Z(this,gt,e);for(const p of t(this,gt))H(this,At,me).call(this,p.defaultPropertiesToUpdate)}}getId(){return t(this,S).getId()}get currentLayer(){return t(this,X).get(t(this,at))}getLayer(e){return t(this,X).get(e)}get currentPageIndex(){return t(this,at)}addLayer(e){t(this,X).set(e.pageIndex,e),t(this,i)?e.enable():e.disable()}removeLayer(e){t(this,X).delete(e.pageIndex)}updateMode(e,p=null){if(t(this,o)!==e){if(Z(this,o,e),e===h.AnnotationEditorType.NONE){this.setEditingState(!1),H(this,vt,Ti).call(this);return}this.setEditingState(!0),H(this,Zt,Ci).call(this),this.unselectAll();for(const D of t(this,X).values())D.updateMode(e);if(p){for(const D of t(this,B).values())if(D.annotationElementId===p){this.setSelected(D),D.enterInEditMode();break}}}}updateToolbar(e){e!==t(this,o)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,p){if(t(this,gt)){if(e===h.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const D of t(this,c))D.updateParams(e,p);for(const D of t(this,gt))D.updateDefaultParams(e,p)}}enableWaiting(e=!1){if(t(this,n)!==e){Z(this,n,e);for(const p of t(this,X).values())e?p.disableClick():p.enableClick(),p.div.classList.toggle("waiting",e)}}getEditors(e){const p=[];for(const D of t(this,B).values())D.pageIndex===e&&p.push(D);return p}getEditor(e){return t(this,B).get(e)}addEditor(e){t(this,B).set(e.id,e)}removeEditor(e){var p;t(this,B).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,W).has(e.annotationElementId))&&((p=t(this,$))==null||p.remove(e.id))}addDeletedAnnotationElement(e){t(this,W).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,W).has(e)}removeDeletedAnnotationElement(e){t(this,W).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,b)!==e&&(Z(this,b,e),e&&H(this,At,me).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,c).has(e)){t(this,c).delete(e),e.unselect(),H(this,G,re).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,c).add(e),e.select(),H(this,At,me).call(this,e.propertiesToUpdate),H(this,G,re).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const p of t(this,c))p!==e&&p.unselect();t(this,c).clear(),t(this,c).add(e),e.select(),H(this,At,me).call(this,e.propertiesToUpdate),H(this,G,re).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,c).has(e)}unselect(e){e.unselect(),t(this,c).delete(e),H(this,G,re).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,c).size!==0}undo(){t(this,it).undo(),H(this,G,re).call(this,{hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:H(this,Nt,be).call(this)})}redo(){t(this,it).redo(),H(this,G,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,it).hasSomethingToRedo(),isEmpty:H(this,Nt,be).call(this)})}addCommands(e){t(this,it).add(e),H(this,G,re).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:H(this,Nt,be).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,c)],p=()=>{for(const U of e)U.remove()},D=()=>{for(const U of e)H(this,Ct,Ye).call(this,U)};this.addCommands({cmd:p,undo:D,mustExec:!0})}commitOrRemove(){var e;(e=t(this,b))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,b)||this.hasSelection}selectAll(){for(const e of t(this,c))e.commit();H(this,_t,Ke).call(this,t(this,B).values())}unselectAll(){if(t(this,b)){t(this,b).commitOrRemove();return}if(this.hasSelection){for(const e of t(this,c))e.unselect();t(this,c).clear(),H(this,G,re).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,p,D=!1){if(D||this.commitOrRemove(),!this.hasSelection)return;t(this,Dt)[0]+=e,t(this,Dt)[1]+=p;const[U,V]=t(this,Dt),et=[...t(this,c)],mt=1e3;t(this,ut)&&clearTimeout(t(this,ut)),Z(this,ut,setTimeout(()=>{Z(this,ut,null),t(this,Dt)[0]=t(this,Dt)[1]=0,this.addCommands({cmd:()=>{for(const kt of et)t(this,B).has(kt.id)&&kt.translateInPage(U,V)},undo:()=>{for(const kt of et)t(this,B).has(kt.id)&&kt.translateInPage(-U,-V)},mustExec:!1})},mt));for(const kt of et)kt.translateInPage(e,p)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Z(this,lt,new Map);for(const e of t(this,c))t(this,lt).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,lt))return!1;this.disableUserSelect(!1);const e=t(this,lt);Z(this,lt,null);let p=!1;for(const[{x:U,y:V,pageIndex:et},mt]of e)mt.newX=U,mt.newY=V,mt.newPageIndex=et,p||(p=U!==mt.savedX||V!==mt.savedY||et!==mt.savedPageIndex);if(!p)return!1;const D=(U,V,et,mt)=>{if(t(this,B).has(U.id)){const kt=t(this,X).get(mt);kt?U._setParentAndPosition(kt,V,et):(U.pageIndex=mt,U.x=V,U.y=et)}};return this.addCommands({cmd:()=>{for(const[U,{newX:V,newY:et,newPageIndex:mt}]of e)D(U,V,et,mt)},undo:()=>{for(const[U,{savedX:V,savedY:et,savedPageIndex:mt}]of e)D(U,V,et,mt)},mustExec:!0}),!0}dragSelectedEditors(e,p){if(t(this,lt))for(const D of t(this,lt).keys())D.drag(e,p)}rebuild(e){if(e.parent===null){const p=this.getLayer(e.pageIndex);p?(p.changeParent(e),p.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return t(this,b)===e}getActive(){return t(this,b)}getMode(){return t(this,o)}get imageManager(){return(0,h.shadow)(this,"imageManager",new j)}};b=new WeakMap,B=new WeakMap,X=new WeakMap,x=new WeakMap,$=new WeakMap,it=new WeakMap,at=new WeakMap,W=new WeakMap,lt=new WeakMap,gt=new WeakMap,xt=new WeakMap,Pt=new WeakMap,S=new WeakMap,i=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakMap,A=new WeakMap,F=new WeakMap,N=new WeakMap,tt=new WeakMap,Q=new WeakMap,rt=new WeakMap,ct=new WeakMap,yt=new WeakMap,dt=new WeakMap,Rt=new WeakMap,jt=new WeakMap,St=new WeakMap,Dt=new WeakMap,ut=new WeakMap,K=new WeakMap,J=new WeakMap,ht=new WeakSet,wi=function(){window.addEventListener("focus",t(this,N)),window.addEventListener("blur",t(this,F))},wt=new WeakSet,Xe=function(){window.removeEventListener("focus",t(this,N)),window.removeEventListener("blur",t(this,F))},zt=new WeakSet,$e=function(){window.addEventListener("keydown",t(this,ct),{capture:!0})},Xt=new WeakSet,we=function(){window.removeEventListener("keydown",t(this,ct),{capture:!0})},Ht=new WeakSet,Ve=function(){document.addEventListener("copy",t(this,tt)),document.addEventListener("cut",t(this,Q)),document.addEventListener("paste",t(this,rt))},ot=new WeakSet,qe=function(){document.removeEventListener("copy",t(this,tt)),document.removeEventListener("cut",t(this,Q)),document.removeEventListener("paste",t(this,rt))},G=new WeakSet,re=function(e){Object.entries(e).some(([D,U])=>t(this,St)[D]!==U)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,St),e)})},At=new WeakSet,me=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Zt=new WeakSet,Ci=function(){if(!t(this,i)){Z(this,i,!0);for(const e of t(this,X).values())e.enable()}},vt=new WeakSet,Ti=function(){if(this.unselectAll(),t(this,i)){Z(this,i,!1);for(const e of t(this,X).values())e.disable()}},Ct=new WeakSet,Ye=function(e){const p=t(this,X).get(e.pageIndex);p?p.addOrRebuild(e):this.addEditor(e)},Nt=new WeakSet,be=function(){if(t(this,B).size===0)return!0;if(t(this,B).size===1)for(const e of t(this,B).values())return e.isEmpty();return!1},_t=new WeakSet,Ke=function(e){t(this,c).clear();for(const p of e)p.isEmpty()||(t(this,c).add(p),p.select());H(this,G,re).call(this,{hasSelectedEditor:!0})},ee(It,"TRANSLATE_SMALL",1),ee(It,"TRANSLATE_BIG",10);let O=It;d.AnnotationEditorUIManager=O},(pt,d,st)=>{var at,W,lt,gt,xt,Pt,S,i,n,s,o,c,de,F,ue,tt,Je,rt,Ce,yt,Te,Rt,_e,St,Ae;Object.defineProperty(d,"__esModule",{value:!0}),d.StatTimer=d.RenderingCancelledException=d.PixelsPerInch=d.PageViewport=d.PDFDateString=d.DOMStandardFontDataFactory=d.DOMSVGFactory=d.DOMFilterFactory=d.DOMCanvasFactory=d.DOMCMapReaderFactory=void 0,d.deprecated=k,d.getColorValues=B,d.getCurrentTransform=X,d.getCurrentTransformInverse=x,d.getFilenameFromUrl=_,d.getPdfFilenameFromUrl=E,d.getRGB=b,d.getXfaPageViewport=C,d.isDataScheme=y,d.isPdfFile=u,d.isValidFetchUrl=m,d.loadScript=l,d.noContextMenu=r,d.setLayerDimensions=$;var h=st(7),T=st(1);const nt="http://www.w3.org/2000/svg",it=class it{};ee(it,"CSS",96),ee(it,"PDF",72),ee(it,"PDF_TO_CSS_UNITS",it.CSS/it.PDF);let z=it;d.PixelsPerInch=z;class ft extends h.BaseFilterFactory{constructor({docId:J,ownerDocument:ht=globalThis.document}={}){super();I(this,c);I(this,F);I(this,tt);I(this,rt);I(this,yt);I(this,Rt);I(this,St);I(this,at,void 0);I(this,W,void 0);I(this,lt,void 0);I(this,gt,void 0);I(this,xt,void 0);I(this,Pt,void 0);I(this,S,void 0);I(this,i,void 0);I(this,n,void 0);I(this,s,void 0);I(this,o,0);Z(this,lt,J),Z(this,gt,ht)}addFilter(J){if(!J)return"none";let ht=t(this,c,de).get(J);if(ht)return ht;let Et,wt,Ut,zt;if(J.length===1){const Ht=J[0],qt=new Array(256);for(let ot=0;ot<256;ot++)qt[ot]=Ht[ot]/255;zt=Et=wt=Ut=qt.join(",")}else{const[Ht,qt,ot]=J,Y=new Array(256),G=new Array(256),bt=new Array(256);for(let At=0;At<256;At++)Y[At]=Ht[At]/255,G[At]=qt[At]/255,bt[At]=ot[At]/255;Et=Y.join(","),wt=G.join(","),Ut=bt.join(","),zt=`${Et}${wt}${Ut}`}if(ht=t(this,c,de).get(zt),ht)return t(this,c,de).set(J,ht),ht;const Wt=`g_${t(this,lt)}_transfer_map_${ge(this,o)._++}`,Xt=`url(#${Wt})`;t(this,c,de).set(J,Xt),t(this,c,de).set(zt,Xt);const $t=H(this,rt,Ce).call(this,Wt);return H(this,Rt,_e).call(this,Et,wt,Ut,$t),Xt}addHCMFilter(J,ht){var qt;const Et=`${J}-${ht}`;if(t(this,Pt)===Et)return t(this,S);if(Z(this,Pt,Et),Z(this,S,"none"),(qt=t(this,xt))==null||qt.remove(),!J||!ht)return t(this,S);const wt=H(this,St,Ae).call(this,J);J=T.Util.makeHexColor(...wt);const Ut=H(this,St,Ae).call(this,ht);if(ht=T.Util.makeHexColor(...Ut),t(this,F,ue).style.color="",J==="#000000"&&ht==="#ffffff"||J===ht)return t(this,S);const zt=new Array(256);for(let ot=0;ot<=255;ot++){const Y=ot/255;zt[ot]=Y<=.03928?Y/12.92:((Y+.055)/1.055)**2.4}const Wt=zt.join(","),Xt=`g_${t(this,lt)}_hcm_filter`,$t=Z(this,i,H(this,rt,Ce).call(this,Xt));H(this,Rt,_e).call(this,Wt,Wt,Wt,$t),H(this,tt,Je).call(this,$t);const Ht=(ot,Y)=>{const G=wt[ot]/255,bt=Ut[ot]/255,At=new Array(Y+1);for(let te=0;te<=Y;te++)At[te]=G+te/Y*(bt-G);return At.join(",")};return H(this,Rt,_e).call(this,Ht(0,5),Ht(1,5),Ht(2,5),$t),Z(this,S,`url(#${Xt})`),t(this,S)}addHighlightHCMFilter(J,ht,Et,wt){var bt;const Ut=`${J}-${ht}-${Et}-${wt}`;if(t(this,n)===Ut)return t(this,s);if(Z(this,n,Ut),Z(this,s,"none"),(bt=t(this,i))==null||bt.remove(),!J||!ht)return t(this,s);const[zt,Wt]=[J,ht].map(H(this,St,Ae).bind(this));let Xt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),$t=Math.round(.2126*Wt[0]+.7152*Wt[1]+.0722*Wt[2]),[Ht,qt]=[Et,wt].map(H(this,St,Ae).bind(this));$t<Xt&&([Xt,$t,Ht,qt]=[$t,Xt,qt,Ht]),t(this,F,ue).style.color="";const ot=(At,te,Zt)=>{const q=new Array(256),vt=($t-Xt)/Zt,Lt=At/255,Ct=(te-At)/(255*Zt);let Ot=0;for(let Nt=0;Nt<=Zt;Nt++){const Jt=Math.round(Xt+Nt*vt),_t=Lt+Nt*Ct;for(let Yt=Ot;Yt<=Jt;Yt++)q[Yt]=_t;Ot=Jt+1}for(let Nt=Ot;Nt<256;Nt++)q[Nt]=q[Ot-1];return q.join(",")},Y=`g_${t(this,lt)}_hcm_highlight_filter`,G=Z(this,i,H(this,rt,Ce).call(this,Y));return H(this,tt,Je).call(this,G),H(this,Rt,_e).call(this,ot(Ht[0],qt[0],5),ot(Ht[1],qt[1],5),ot(Ht[2],qt[2],5),G),Z(this,s,`url(#${Y})`),t(this,s)}destroy(J=!1){J&&(t(this,S)||t(this,s))||(t(this,W)&&(t(this,W).parentNode.parentNode.remove(),Z(this,W,null)),t(this,at)&&(t(this,at).clear(),Z(this,at,null)),Z(this,o,0))}}at=new WeakMap,W=new WeakMap,lt=new WeakMap,gt=new WeakMap,xt=new WeakMap,Pt=new WeakMap,S=new WeakMap,i=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,c=new WeakSet,de=function(){return t(this,at)||Z(this,at,new Map)},F=new WeakSet,ue=function(){if(!t(this,W)){const J=t(this,gt).createElement("div"),{style:ht}=J;ht.visibility="hidden",ht.contain="strict",ht.width=ht.height=0,ht.position="absolute",ht.top=ht.left=0,ht.zIndex=-1;const Et=t(this,gt).createElementNS(nt,"svg");Et.setAttribute("width",0),Et.setAttribute("height",0),Z(this,W,t(this,gt).createElementNS(nt,"defs")),J.append(Et),Et.append(t(this,W)),t(this,gt).body.append(J)}return t(this,W)},tt=new WeakSet,Je=function(J){const ht=t(this,gt).createElementNS(nt,"feColorMatrix");ht.setAttribute("type","matrix"),ht.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),J.append(ht)},rt=new WeakSet,Ce=function(J){const ht=t(this,gt).createElementNS(nt,"filter");return ht.setAttribute("color-interpolation-filters","sRGB"),ht.setAttribute("id",J),t(this,F,ue).append(ht),ht},yt=new WeakSet,Te=function(J,ht,Et){const wt=t(this,gt).createElementNS(nt,ht);wt.setAttribute("type","discrete"),wt.setAttribute("tableValues",Et),J.append(wt)},Rt=new WeakSet,_e=function(J,ht,Et,wt){const Ut=t(this,gt).createElementNS(nt,"feComponentTransfer");wt.append(Ut),H(this,yt,Te).call(this,Ut,"feFuncR",J),H(this,yt,Te).call(this,Ut,"feFuncG",ht),H(this,yt,Te).call(this,Ut,"feFuncB",Et)},St=new WeakSet,Ae=function(J){return t(this,F,ue).style.color=J,b(getComputedStyle(t(this,F,ue)).getPropertyValue("color"))},d.DOMFilterFactory=ft;class j extends h.BaseCanvasFactory{constructor({ownerDocument:K=globalThis.document}={}){super(),this._document=K}_createCanvas(K,J){const ht=this._document.createElement("canvas");return ht.width=K,ht.height=J,ht}}d.DOMCanvasFactory=j;async function R(ut,K=!1){if(m(ut,document.baseURI)){const J=await fetch(ut);if(!J.ok)throw new Error(J.statusText);return K?new Uint8Array(await J.arrayBuffer()):(0,T.stringToBytes)(await J.text())}return new Promise((J,ht)=>{const Et=new XMLHttpRequest;Et.open("GET",ut,!0),K&&(Et.responseType="arraybuffer"),Et.onreadystatechange=()=>{if(Et.readyState===XMLHttpRequest.DONE){if(Et.status===200||Et.status===0){let wt;if(K&&Et.response?wt=new Uint8Array(Et.response):!K&&Et.responseText&&(wt=(0,T.stringToBytes)(Et.responseText)),wt){J(wt);return}}ht(new Error(Et.statusText))}},Et.send(null)})}class f extends h.BaseCMapReaderFactory{_fetchData(K,J){return R(K,this.isCompressed).then(ht=>({cMapData:ht,compressionType:J}))}}d.DOMCMapReaderFactory=f;class L extends h.BaseStandardFontDataFactory{_fetchData(K){return R(K,!0)}}d.DOMStandardFontDataFactory=L;class O extends h.BaseSVGFactory{_createSVG(K){return document.createElementNS(nt,K)}}d.DOMSVGFactory=O;class P{constructor({viewBox:K,scale:J,rotation:ht,offsetX:Et=0,offsetY:wt=0,dontFlip:Ut=!1}){this.viewBox=K,this.scale=J,this.rotation=ht,this.offsetX=Et,this.offsetY=wt;const zt=(K[2]+K[0])/2,Wt=(K[3]+K[1])/2;let Xt,$t,Ht,qt;switch(ht%=360,ht<0&&(ht+=360),ht){case 180:Xt=-1,$t=0,Ht=0,qt=1;break;case 90:Xt=0,$t=1,Ht=1,qt=0;break;case 270:Xt=0,$t=-1,Ht=-1,qt=0;break;case 0:Xt=1,$t=0,Ht=0,qt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Ht=-Ht,qt=-qt);let ot,Y,G,bt;Xt===0?(ot=Math.abs(Wt-K[1])*J+Et,Y=Math.abs(zt-K[0])*J+wt,G=(K[3]-K[1])*J,bt=(K[2]-K[0])*J):(ot=Math.abs(zt-K[0])*J+Et,Y=Math.abs(Wt-K[1])*J+wt,G=(K[2]-K[0])*J,bt=(K[3]-K[1])*J),this.transform=[Xt*J,$t*J,Ht*J,qt*J,ot-Xt*J*zt-Ht*J*Wt,Y-$t*J*zt-qt*J*Wt],this.width=G,this.height=bt}get rawDims(){const{viewBox:K}=this;return(0,T.shadow)(this,"rawDims",{pageWidth:K[2]-K[0],pageHeight:K[3]-K[1],pageX:K[0],pageY:K[1]})}clone({scale:K=this.scale,rotation:J=this.rotation,offsetX:ht=this.offsetX,offsetY:Et=this.offsetY,dontFlip:wt=!1}={}){return new P({viewBox:this.viewBox.slice(),scale:K,rotation:J,offsetX:ht,offsetY:Et,dontFlip:wt})}convertToViewportPoint(K,J){return T.Util.applyTransform([K,J],this.transform)}convertToViewportRectangle(K){const J=T.Util.applyTransform([K[0],K[1]],this.transform),ht=T.Util.applyTransform([K[2],K[3]],this.transform);return[J[0],J[1],ht[0],ht[1]]}convertToPdfPoint(K,J){return T.Util.applyInverseTransform([K,J],this.transform)}}d.PageViewport=P;class v extends T.BaseException{constructor(K,J=0){super(K,"RenderingCancelledException"),this.extraDelay=J}}d.RenderingCancelledException=v;function y(ut){const K=ut.length;let J=0;for(;J<K&&ut[J].trim()==="";)J++;return ut.substring(J,J+5).toLowerCase()==="data:"}function u(ut){return typeof ut=="string"&&/\.pdf$/i.test(ut)}function _(ut,K=!1){return K||([ut]=ut.split(/[#?]/,1)),ut.substring(ut.lastIndexOf("/")+1)}function E(ut,K="document.pdf"){if(typeof ut!="string")return K;if(y(ut))return(0,T.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),K;const J=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ht=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Et=J.exec(ut);let wt=ht.exec(Et[1])||ht.exec(Et[2])||ht.exec(Et[3]);if(wt&&(wt=wt[0],wt.includes("%")))try{wt=ht.exec(decodeURIComponent(wt))[0]}catch{}return wt||K}class w{constructor(){ee(this,"started",Object.create(null));ee(this,"times",[])}time(K){K in this.started&&(0,T.warn)(`Timer is already running for ${K}`),this.started[K]=Date.now()}timeEnd(K){K in this.started||(0,T.warn)(`Timer has not been started for ${K}`),this.times.push({name:K,start:this.started[K],end:Date.now()}),delete this.started[K]}toString(){const K=[];let J=0;for(const{name:ht}of this.times)J=Math.max(ht.length,J);for(const{name:ht,start:Et,end:wt}of this.times)K.push(`${ht.padEnd(J)} ${wt-Et}ms
`);return K.join("")}}d.StatTimer=w;function m(ut,K){try{const{protocol:J}=K?new URL(ut,K):new URL(ut);return J==="http:"||J==="https:"}catch{return!1}}function r(ut){ut.preventDefault()}function l(ut,K=!1){return new Promise((J,ht)=>{const Et=document.createElement("script");Et.src=ut,Et.onload=function(wt){K&&Et.remove(),J(wt)},Et.onerror=function(){ht(new Error(`Cannot load script at: ${Et.src}`))},(document.head||document.documentElement).append(Et)})}function k(ut){console.log("Deprecated API usage: "+ut)}let g;class a{static toDateObject(K){if(!K||typeof K!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const J=g.exec(K);if(!J)return null;const ht=parseInt(J[1],10);let Et=parseInt(J[2],10);Et=Et>=1&&Et<=12?Et-1:0;let wt=parseInt(J[3],10);wt=wt>=1&&wt<=31?wt:1;let Ut=parseInt(J[4],10);Ut=Ut>=0&&Ut<=23?Ut:0;let zt=parseInt(J[5],10);zt=zt>=0&&zt<=59?zt:0;let Wt=parseInt(J[6],10);Wt=Wt>=0&&Wt<=59?Wt:0;const Xt=J[7]||"Z";let $t=parseInt(J[8],10);$t=$t>=0&&$t<=23?$t:0;let Ht=parseInt(J[9],10)||0;return Ht=Ht>=0&&Ht<=59?Ht:0,Xt==="-"?(Ut+=$t,zt+=Ht):Xt==="+"&&(Ut-=$t,zt-=Ht),new Date(Date.UTC(ht,Et,wt,Ut,zt,Wt))}}d.PDFDateString=a;function C(ut,{scale:K=1,rotation:J=0}){const{width:ht,height:Et}=ut.attributes.style,wt=[0,0,parseInt(ht),parseInt(Et)];return new P({viewBox:wt,scale:K,rotation:J})}function b(ut){if(ut.startsWith("#")){const K=parseInt(ut.slice(1),16);return[(K&16711680)>>16,(K&65280)>>8,K&255]}return ut.startsWith("rgb(")?ut.slice(4,-1).split(",").map(K=>parseInt(K)):ut.startsWith("rgba(")?ut.slice(5,-1).split(",").map(K=>parseInt(K)).slice(0,3):((0,T.warn)(`Not a valid color format: "${ut}"`),[0,0,0])}function B(ut){const K=document.createElement("span");K.style.visibility="hidden",document.body.append(K);for(const J of ut.keys()){K.style.color=J;const ht=window.getComputedStyle(K).color;ut.set(J,b(ht))}K.remove()}function X(ut){const{a:K,b:J,c:ht,d:Et,e:wt,f:Ut}=ut.getTransform();return[K,J,ht,Et,wt,Ut]}function x(ut){const{a:K,b:J,c:ht,d:Et,e:wt,f:Ut}=ut.getTransform().invertSelf();return[K,J,ht,Et,wt,Ut]}function $(ut,K,J=!1,ht=!0){if(K instanceof P){const{pageWidth:Et,pageHeight:wt}=K.rawDims,{style:Ut}=ut,zt=T.FeatureTest.isCSSRoundSupported,Wt=`var(--scale-factor) * ${Et}px`,Xt=`var(--scale-factor) * ${wt}px`,$t=zt?`round(${Wt}, 1px)`:`calc(${Wt})`,Ht=zt?`round(${Xt}, 1px)`:`calc(${Xt})`;!J||K.rotation%180===0?(Ut.width=$t,Ut.height=Ht):(Ut.width=Ht,Ut.height=$t)}ht&&ut.setAttribute("data-main-rotation",K.rotation)}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseStandardFontDataFactory=d.BaseSVGFactory=d.BaseFilterFactory=d.BaseCanvasFactory=d.BaseCMapReaderFactory=void 0;var h=st(1);class T{constructor(){this.constructor===T&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,L){return"none"}addHighlightHCMFilter(f,L,O,P){return"none"}destroy(f=!1){}}d.BaseFilterFactory=T;class nt{constructor(){this.constructor===nt&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,L){if(f<=0||L<=0)throw new Error("Invalid canvas size");const O=this._createCanvas(f,L);return{canvas:O,context:O.getContext("2d")}}reset(f,L,O){if(!f.canvas)throw new Error("Canvas is not specified");if(L<=0||O<=0)throw new Error("Invalid canvas size");f.canvas.width=L,f.canvas.height=O}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,L){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}d.BaseCanvasFactory=nt;class z{constructor({baseUrl:f=null,isCompressed:L=!0}){this.constructor===z&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=L}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const L=this.baseUrl+f+(this.isCompressed?".bcmap":""),O=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(L,O).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${L}`)})}_fetchData(f,L){(0,h.unreachable)("Abstract method `_fetchData` called.")}}d.BaseCMapReaderFactory=z;class ft{constructor({baseUrl:f=null}){this.constructor===ft&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const L=`${this.baseUrl}${f}`;return this._fetchData(L).catch(O=>{throw new Error(`Unable to load font data at: ${L}`)})}_fetchData(f){(0,h.unreachable)("Abstract method `_fetchData` called.")}}d.BaseStandardFontDataFactory=ft;class j{constructor(){this.constructor===j&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,L,O=!1){if(f<=0||L<=0)throw new Error("Invalid SVG dimensions");const P=this._createSVG("svg:svg");return P.setAttribute("version","1.1"),O||(P.setAttribute("width",`${f}px`),P.setAttribute("height",`${L}px`)),P.setAttribute("preserveAspectRatio","none"),P.setAttribute("viewBox",`0 0 ${f} ${L}`),P}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,h.unreachable)("Abstract method `_createSVG` called.")}}d.BaseSVGFactory=j},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.MurmurHash3_64=void 0;var h=st(1);const T=3285377520,nt=4294901760,z=65535;class ft{constructor(R){this.h1=R?R&4294967295:T,this.h2=R?R&4294967295:T}update(R){let f,L;if(typeof R=="string"){f=new Uint8Array(R.length*2),L=0;for(let k=0,g=R.length;k<g;k++){const a=R.charCodeAt(k);a<=255?f[L++]=a:(f[L++]=a>>>8,f[L++]=a&255)}}else if((0,h.isArrayBuffer)(R))f=R.slice(),L=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=L>>2,P=L-O*4,v=new Uint32Array(f.buffer,0,O);let y=0,u=0,_=this.h1,E=this.h2;const w=3432918353,m=461845907,r=w&z,l=m&z;for(let k=0;k<O;k++)k&1?(y=v[k],y=y*w&nt|y*r&z,y=y<<15|y>>>17,y=y*m&nt|y*l&z,_^=y,_=_<<13|_>>>19,_=_*5+3864292196):(u=v[k],u=u*w&nt|u*r&z,u=u<<15|u>>>17,u=u*m&nt|u*l&z,E^=u,E=E<<13|E>>>19,E=E*5+3864292196);switch(y=0,P){case 3:y^=f[O*4+2]<<16;case 2:y^=f[O*4+1]<<8;case 1:y^=f[O*4],y=y*w&nt|y*r&z,y=y<<15|y>>>17,y=y*m&nt|y*l&z,O&1?_^=y:E^=y}this.h1=_,this.h2=E}hexdigest(){let R=this.h1,f=this.h2;return R^=f>>>1,R=R*3981806797&nt|R*36045&z,f=f*4283543511&nt|((f<<16|R>>>16)*2950163797&nt)>>>16,R^=f>>>1,R=R*444984403&nt|R*60499&z,f=f*3301882366&nt|((f<<16|R>>>16)*3120437893&nt)>>>16,R^=f>>>1,(R>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}d.MurmurHash3_64=ft},(pt,d,st)=>{var z;Object.defineProperty(d,"__esModule",{value:!0}),d.FontLoader=d.FontFaceObject=void 0;var h=st(1);class T{constructor({ownerDocument:j=globalThis.document,styleElement:R=null}){I(this,z,new Set);this._document=j,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(j){this.nativeFontFaces.add(j),this._document.fonts.add(j)}removeNativeFontFace(j){this.nativeFontFaces.delete(j),this._document.fonts.delete(j)}insertRule(j){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const R=this.styleElement.sheet;R.insertRule(j,R.cssRules.length)}clear(){for(const j of this.nativeFontFaces)this._document.fonts.delete(j);this.nativeFontFaces.clear(),t(this,z).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(j){if(!(!j||t(this,z).has(j.loadedName))){if((0,h.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:R,src:f,style:L}=j,O=new FontFace(R,f,L);this.addNativeFontFace(O);try{await O.load(),t(this,z).add(R)}catch{(0,h.warn)(`Cannot load system font: ${j.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(O)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(j){if(j.attached||j.missingFile&&!j.systemFontInfo)return;if(j.attached=!0,j.systemFontInfo){await this.loadSystemFont(j.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=j.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(L){throw(0,h.warn)(`Failed to load font '${f.family}': '${L}'.`),j.disableFontFace=!0,L}}return}const R=j.createFontFaceRule();if(R){if(this.insertRule(R),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const L=this._queueLoadingCallback(f);this._prepareFontLoadEvent(j,L)})}}get isFontLoadingAPISupported(){var R;const j=!!((R=this._document)!=null&&R.fonts);return(0,h.shadow)(this,"isFontLoadingAPISupported",j)}get isSyncFontLoadingSupported(){let j=!1;return(h.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(j=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",j)}_queueLoadingCallback(j){function R(){for((0,h.assert)(!L.done,"completeRequest() cannot be called twice."),L.done=!0;f.length>0&&f[0].done;){const O=f.shift();setTimeout(O.callback,0)}}const{loadingRequests:f}=this,L={done:!1,complete:R,callback:j};return f.push(L),L}get _loadTestFont(){const j=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",j)}_prepareFontLoadEvent(j,R){function f(b,B){return b.charCodeAt(B)<<24|b.charCodeAt(B+1)<<16|b.charCodeAt(B+2)<<8|b.charCodeAt(B+3)&255}function L(b,B,X,x){const $=b.substring(0,B),it=b.substring(B+X);return $+x+it}let O,P;const v=this._document.createElement("canvas");v.width=1,v.height=1;const y=v.getContext("2d");let u=0;function _(b,B){if(++u>30){(0,h.warn)("Load test font never loaded."),B();return}if(y.font="30px "+b,y.fillText(".",0,20),y.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(_.bind(null,b,B))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=L(w,976,E.length,E);const r=16,l=1482184792;let k=f(w,r);for(O=0,P=E.length-3;O<P;O+=4)k=k-l+f(E,O)|0;O<E.length&&(k=k-l+f(E+"XXX",O)|0),w=L(w,r,4,(0,h.string32)(k));const g=`url(data:font/opentype;base64,${btoa(w)});`,a=`@font-face {font-family:"${E}";src:${g}}`;this.insertRule(a);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const b of[j.loadedName,E]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=b,C.append(B)}this._document.body.append(C),_(E,()=>{C.remove(),R.complete()})}}z=new WeakMap,d.FontLoader=T;class nt{constructor(j,{isEvalSupported:R=!0,disableFontFace:f=!1,ignoreErrors:L=!1,inspectFont:O=null}){this.compiledGlyphs=Object.create(null);for(const P in j)this[P]=j[P];this.isEvalSupported=R!==!1,this.disableFontFace=f===!0,this.ignoreErrors=L===!0,this._inspectFont=O}createNativeFontFace(){var R;if(!this.data||this.disableFontFace)return null;let j;if(!this.cssFontInfo)j=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),j=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(R=this._inspectFont)==null||R.call(this,this),j}createFontFaceRule(){var L;if(!this.data||this.disableFontFace)return null;const j=(0,h.bytesToString)(this.data),R=`url(data:${this.mimetype};base64,${btoa(j)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${R}}`;else{let O=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(O+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${O}src:${R}}`}return(L=this._inspectFont)==null||L.call(this,this,R),f}getPathGenerator(j,R){if(this.compiledGlyphs[R]!==void 0)return this.compiledGlyphs[R];let f;try{f=j.get(this.loadedName+"_path_"+R)}catch(L){if(!this.ignoreErrors)throw L;return(0,h.warn)(`getPathGenerator - ignoring character: "${L}".`),this.compiledGlyphs[R]=function(O,P){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const L=[];for(const O of f){const P=O.args!==void 0?O.args.join(","):"";L.push("c.",O.cmd,"(",P,`);
`)}return this.compiledGlyphs[R]=new Function("c","size",L.join(""))}return this.compiledGlyphs[R]=function(L,O){for(const P of f)P.cmd==="scale"&&(P.args=[O,-O]),L[P.cmd].apply(L,P.args)}}}d.FontFaceObject=nt},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NodeStandardFontDataFactory=d.NodeFilterFactory=d.NodeCanvasFactory=d.NodeCMapReaderFactory=void 0;var h=st(7);st(1);const T=function(R){return new Promise((f,L)=>{require$$5.readFile(R,(P,v)=>{if(P||!v){L(new Error(P));return}f(new Uint8Array(v))})})};class nt extends h.BaseFilterFactory{}d.NodeFilterFactory=nt;class z extends h.BaseCanvasFactory{_createCanvas(f,L){return require$$5.createCanvas(f,L)}}d.NodeCanvasFactory=z;class ft extends h.BaseCMapReaderFactory{_fetchData(f,L){return T(f).then(O=>({cMapData:O,compressionType:L}))}}d.NodeCMapReaderFactory=ft;class j extends h.BaseStandardFontDataFactory{_fetchData(f){return T(f)}}d.NodeStandardFontDataFactory=j},(pt,d,st)=>{var W,Qe,gt,Ze;Object.defineProperty(d,"__esModule",{value:!0}),d.CanvasGraphics=void 0;var h=st(1),T=st(6),nt=st(12),z=st(13);const ft=16,j=100,R=4096,f=15,L=10,O=1e3,P=16;function v(S,i){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){i.save(),this.__originalSave()},S.restore=function(){i.restore(),this.__originalRestore()},S.translate=function(s,o){i.translate(s,o),this.__originalTranslate(s,o)},S.scale=function(s,o){i.scale(s,o),this.__originalScale(s,o)},S.transform=function(s,o,c,A,F,N){i.transform(s,o,c,A,F,N),this.__originalTransform(s,o,c,A,F,N)},S.setTransform=function(s,o,c,A,F,N){i.setTransform(s,o,c,A,F,N),this.__originalSetTransform(s,o,c,A,F,N)},S.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},S.rotate=function(s){i.rotate(s),this.__originalRotate(s)},S.clip=function(s){i.clip(s),this.__originalClip(s)},S.moveTo=function(n,s){i.moveTo(n,s),this.__originalMoveTo(n,s)},S.lineTo=function(n,s){i.lineTo(n,s),this.__originalLineTo(n,s)},S.bezierCurveTo=function(n,s,o,c,A,F){i.bezierCurveTo(n,s,o,c,A,F),this.__originalBezierCurveTo(n,s,o,c,A,F)},S.rect=function(n,s,o,c){i.rect(n,s,o,c),this.__originalRect(n,s,o,c)},S.closePath=function(){i.closePath(),this.__originalClosePath()},S.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class y{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,n,s){let o;return this.cache[i]!==void 0?(o=this.cache[i],this.canvasFactory.reset(o,n,s)):(o=this.canvasFactory.create(n,s),this.cache[i]=o),o}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const n=this.cache[i];this.canvasFactory.destroy(n),delete this.cache[i]}}}function u(S,i,n,s,o,c,A,F,N,tt){const[Q,rt,ct,yt,dt,Rt]=(0,T.getCurrentTransform)(S);if(rt===0&&ct===0){const Dt=A*Q+dt,ut=Math.round(Dt),K=F*yt+Rt,J=Math.round(K),ht=(A+N)*Q+dt,Et=Math.abs(Math.round(ht)-ut)||1,wt=(F+tt)*yt+Rt,Ut=Math.abs(Math.round(wt)-J)||1;return S.setTransform(Math.sign(Q),0,0,Math.sign(yt),ut,J),S.drawImage(i,n,s,o,c,0,0,Et,Ut),S.setTransform(Q,rt,ct,yt,dt,Rt),[Et,Ut]}if(Q===0&&yt===0){const Dt=F*ct+dt,ut=Math.round(Dt),K=A*rt+Rt,J=Math.round(K),ht=(F+tt)*ct+dt,Et=Math.abs(Math.round(ht)-ut)||1,wt=(A+N)*rt+Rt,Ut=Math.abs(Math.round(wt)-J)||1;return S.setTransform(0,Math.sign(rt),Math.sign(ct),0,ut,J),S.drawImage(i,n,s,o,c,0,0,Ut,Et),S.setTransform(Q,rt,ct,yt,dt,Rt),[Ut,Et]}S.drawImage(i,n,s,o,c,A,F,N,tt);const jt=Math.hypot(Q,rt),St=Math.hypot(ct,yt);return[jt*N,St*tt]}function _(S){const{width:i,height:n}=S;if(i>O||n>O)return null;const s=1e3,o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=i+1;let A=new Uint8Array(c*(n+1)),F,N,tt;const Q=i+7&-8;let rt=new Uint8Array(Q*n),ct=0;for(const St of S.data){let Dt=128;for(;Dt>0;)rt[ct++]=St&Dt?0:255,Dt>>=1}let yt=0;for(ct=0,rt[ct]!==0&&(A[0]=1,++yt),N=1;N<i;N++)rt[ct]!==rt[ct+1]&&(A[N]=rt[ct]?2:1,++yt),ct++;for(rt[ct]!==0&&(A[N]=2,++yt),F=1;F<n;F++){ct=F*Q,tt=F*c,rt[ct-Q]!==rt[ct]&&(A[tt]=rt[ct]?1:8,++yt);let St=(rt[ct]?4:0)+(rt[ct-Q]?8:0);for(N=1;N<i;N++)St=(St>>2)+(rt[ct+1]?4:0)+(rt[ct-Q+1]?8:0),o[St]&&(A[tt+N]=o[St],++yt),ct++;if(rt[ct-Q]!==rt[ct]&&(A[tt+N]=rt[ct]?2:4,++yt),yt>s)return null}for(ct=Q*(n-1),tt=F*c,rt[ct]!==0&&(A[tt]=8,++yt),N=1;N<i;N++)rt[ct]!==rt[ct+1]&&(A[tt+N]=rt[ct]?4:8,++yt),ct++;if(rt[ct]!==0&&(A[tt+N]=4,++yt),yt>s)return null;const dt=new Int32Array([0,c,-1,0,-c,0,0,0,1]),Rt=new Path2D;for(F=0;yt&&F<=n;F++){let St=F*c;const Dt=St+i;for(;St<Dt&&!A[St];)St++;if(St===Dt)continue;Rt.moveTo(St%c,F);const ut=St;let K=A[St];do{const J=dt[K];do St+=J;while(!A[St]);const ht=A[St];ht!==5&&ht!==10?(K=ht,A[St]=0):(K=ht&51*K>>4,A[St]&=K>>2|K<<2),Rt.lineTo(St%c,St/c|0),A[St]||--yt}while(ut!==St);--F}return rt=null,A=null,function(St){St.save(),St.scale(1/i,-1/n),St.translate(0,-n),St.fill(Rt),St.beginPath(),St.restore()}}class E{constructor(i,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,n])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,n){this.x=i,this.y=n}updatePathMinMax(i,n,s){[n,s]=h.Util.applyTransform([n,s],i),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(i,n){const s=h.Util.applyTransform(n,i),o=h.Util.applyTransform(n.slice(2),i);this.minX=Math.min(this.minX,s[0],o[0]),this.minY=Math.min(this.minY,s[1],o[1]),this.maxX=Math.max(this.maxX,s[0],o[0]),this.maxY=Math.max(this.maxY,s[1],o[1])}updateScalingPathMinMax(i,n){h.Util.scaleMinMax(i,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(i,n,s,o,c,A,F,N,tt,Q){const rt=h.Util.bezierBoundingBox(n,s,o,c,A,F,N,tt);if(Q){Q[0]=Math.min(Q[0],rt[0],rt[2]),Q[1]=Math.max(Q[1],rt[0],rt[2]),Q[2]=Math.min(Q[2],rt[1],rt[3]),Q[3]=Math.max(Q[3],rt[1],rt[3]);return}this.updateRectMinMax(i,rt)}getPathBoundingBox(i=nt.PathType.FILL,n=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(i===nt.PathType.STROKE){n||(0,h.unreachable)("Stroke bounding box must include transform.");const o=h.Util.singularValueDecompose2dScale(n),c=o[0]*this.lineWidth/2,A=o[1]*this.lineWidth/2;s[0]-=c,s[1]-=A,s[2]+=c,s[3]+=A}return s}updateClipFromPath(){const i=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=nt.PathType.FILL,n=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(i,n))}}function w(S,i){if(typeof ImageData<"u"&&i instanceof ImageData){S.putImageData(i,0,0);return}const n=i.height,s=i.width,o=n%P,c=(n-o)/P,A=o===0?c:c+1,F=S.createImageData(s,P);let N=0,tt;const Q=i.data,rt=F.data;let ct,yt,dt,Rt;if(i.kind===h.ImageKind.GRAYSCALE_1BPP){const jt=Q.byteLength,St=new Uint32Array(rt.buffer,0,rt.byteLength>>2),Dt=St.length,ut=s+7>>3,K=4294967295,J=h.FeatureTest.isLittleEndian?4278190080:255;for(ct=0;ct<A;ct++){for(dt=ct<c?P:o,tt=0,yt=0;yt<dt;yt++){const ht=jt-N;let Et=0;const wt=ht>ut?s:ht*8-7,Ut=wt&-8;let zt=0,Wt=0;for(;Et<Ut;Et+=8)Wt=Q[N++],St[tt++]=Wt&128?K:J,St[tt++]=Wt&64?K:J,St[tt++]=Wt&32?K:J,St[tt++]=Wt&16?K:J,St[tt++]=Wt&8?K:J,St[tt++]=Wt&4?K:J,St[tt++]=Wt&2?K:J,St[tt++]=Wt&1?K:J;for(;Et<wt;Et++)zt===0&&(Wt=Q[N++],zt=128),St[tt++]=Wt&zt?K:J,zt>>=1}for(;tt<Dt;)St[tt++]=0;S.putImageData(F,0,ct*P)}}else if(i.kind===h.ImageKind.RGBA_32BPP){for(yt=0,Rt=s*P*4,ct=0;ct<c;ct++)rt.set(Q.subarray(N,N+Rt)),N+=Rt,S.putImageData(F,0,yt),yt+=P;ct<A&&(Rt=s*o*4,rt.set(Q.subarray(N,N+Rt)),S.putImageData(F,0,yt))}else if(i.kind===h.ImageKind.RGB_24BPP)for(dt=P,Rt=s*dt,ct=0;ct<A;ct++){for(ct>=c&&(dt=o,Rt=s*dt),tt=0,yt=Rt;yt--;)rt[tt++]=Q[N++],rt[tt++]=Q[N++],rt[tt++]=Q[N++],rt[tt++]=255;S.putImageData(F,0,ct*P)}else throw new Error(`bad image kind: ${i.kind}`)}function m(S,i){if(i.bitmap){S.drawImage(i.bitmap,0,0);return}const n=i.height,s=i.width,o=n%P,c=(n-o)/P,A=o===0?c:c+1,F=S.createImageData(s,P);let N=0;const tt=i.data,Q=F.data;for(let rt=0;rt<A;rt++){const ct=rt<c?P:o;({srcPos:N}=(0,z.convertBlackAndWhiteToRGBA)({src:tt,srcPos:N,dest:Q,width:s,height:ct,nonBlackColor:0})),S.putImageData(F,0,rt*P)}}function r(S,i){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)S[s]!==void 0&&(i[s]=S[s]);S.setLineDash!==void 0&&(i.setLineDash(S.getLineDash()),i.lineDashOffset=S.lineDashOffset)}function l(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!h.isNodeJS){const{filter:i}=S;i!=="none"&&i!==""&&(S.filter="none")}}function k(S,i,n,s){const o=S.length;for(let c=3;c<o;c+=4){const A=S[c];if(A===0)S[c-3]=i,S[c-2]=n,S[c-1]=s;else if(A<255){const F=255-A;S[c-3]=S[c-3]*A+i*F>>8,S[c-2]=S[c-2]*A+n*F>>8,S[c-1]=S[c-1]*A+s*F>>8}}}function g(S,i,n){const s=S.length,o=1/255;for(let c=3;c<s;c+=4){const A=n?n[S[c]]:S[c];i[c]=i[c]*A*o|0}}function a(S,i,n){const s=S.length;for(let o=3;o<s;o+=4){const c=S[o-3]*77+S[o-2]*152+S[o-1]*28;i[o]=n?i[o]*n[c>>8]>>8:i[o]*c>>16}}function C(S,i,n,s,o,c,A,F,N,tt,Q){const rt=!!c,ct=rt?c[0]:0,yt=rt?c[1]:0,dt=rt?c[2]:0,Rt=o==="Luminosity"?a:g,St=Math.min(s,Math.ceil(1048576/n));for(let Dt=0;Dt<s;Dt+=St){const ut=Math.min(St,s-Dt),K=S.getImageData(F-tt,Dt+(N-Q),n,ut),J=i.getImageData(F,Dt+N,n,ut);rt&&k(K.data,ct,yt,dt),Rt(K.data,J.data,A),i.putImageData(J,F,Dt+N)}}function b(S,i,n,s){const o=s[0],c=s[1],A=s[2]-o,F=s[3]-c;A===0||F===0||(C(i.context,n,A,F,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(n.canvas,0,0),S.restore())}function B(S,i){const n=h.Util.singularValueDecompose2dScale(S);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*T.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:n[0]<=s||n[1]<=s}const X=["butt","round","square"],x=["miter","round","bevel"],$={},it={},Pt=class Pt{constructor(i,n,s,o,c,{optionalContentConfig:A,markedContentStack:F=null},N,tt){I(this,W);I(this,gt);this.ctx=i,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=o,this.filterFactory=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=F||[],this.optionalContentConfig=A,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=N,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=tt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,n=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):n}beginDrawing({transform:i,viewport:n,transparency:s=!1,background:o=null}){const c=this.ctx.canvas.width,A=this.ctx.canvas.height,F=this.ctx.fillStyle;if(this.ctx.fillStyle=o||"#ffffff",this.ctx.fillRect(0,0,c,A),this.ctx.fillStyle=F,s){const N=this.cachedCanvases.getCanvas("transparent",c,A);this.compositeCtx=this.ctx,this.transparentCanvas=N.canvas,this.ctx=N.context,this.ctx.save(),this.ctx.transform(...(0,T.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),l(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,T.getCurrentTransform)(this.ctx)}executeOperatorList(i,n,s,o){const c=i.argsArray,A=i.fnArray;let F=n||0;const N=c.length;if(N===F)return F;const tt=N-F>L&&typeof s=="function",Q=tt?Date.now()+f:0;let rt=0;const ct=this.commonObjs,yt=this.objs;let dt;for(;;){if(o!==void 0&&F===o.nextBreakPoint)return o.breakIt(F,s),F;if(dt=A[F],dt!==h.OPS.dependency)this[dt].apply(this,c[F]);else for(const Rt of c[F]){const jt=Rt.startsWith("g_")?ct:yt;if(!jt.has(Rt))return jt.get(Rt,s),F}if(F++,F===N)return F;if(tt&&++rt>L){if(Date.now()>Q)return s(),F;rt=0}}}endDrawing(){H(this,W,Qe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const n of i.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);i.clear()}this._cachedBitmapsMap.clear(),H(this,gt,Ze).call(this)}_scaleImage(i,n){const s=i.width,o=i.height;let c=Math.max(Math.hypot(n[0],n[1]),1),A=Math.max(Math.hypot(n[2],n[3]),1),F=s,N=o,tt="prescale1",Q,rt;for(;c>2&&F>1||A>2&&N>1;){let ct=F,yt=N;c>2&&F>1&&(ct=F>=16384?Math.floor(F/2)-1||1:Math.ceil(F/2),c/=F/ct),A>2&&N>1&&(yt=N>=16384?Math.floor(N/2)-1||1:Math.ceil(N)/2,A/=N/yt),Q=this.cachedCanvases.getCanvas(tt,ct,yt),rt=Q.context,rt.clearRect(0,0,ct,yt),rt.drawImage(i,0,0,F,N,0,0,ct,yt),i=Q.canvas,F=ct,N=yt,tt=tt==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:F,paintHeight:N}}_createMaskCanvas(i){const n=this.ctx,{width:s,height:o}=i,c=this.current.fillColor,A=this.current.patternFill,F=(0,T.getCurrentTransform)(n);let N,tt,Q,rt;if((i.bitmap||i.data)&&i.count>1){const Et=i.bitmap||i.data.buffer;tt=JSON.stringify(A?F:[F.slice(0,4),c]),N=this._cachedBitmapsMap.get(Et),N||(N=new Map,this._cachedBitmapsMap.set(Et,N));const wt=N.get(tt);if(wt&&!A){const Ut=Math.round(Math.min(F[0],F[2])+F[4]),zt=Math.round(Math.min(F[1],F[3])+F[5]);return{canvas:wt,offsetX:Ut,offsetY:zt}}Q=wt}Q||(rt=this.cachedCanvases.getCanvas("maskCanvas",s,o),m(rt.context,i));let ct=h.Util.transform(F,[1/s,0,0,-1/o,0,0]);ct=h.Util.transform(ct,[1,0,0,1,0,-o]);const yt=h.Util.applyTransform([0,0],ct),dt=h.Util.applyTransform([s,o],ct),Rt=h.Util.normalizeRect([yt[0],yt[1],dt[0],dt[1]]),jt=Math.round(Rt[2]-Rt[0])||1,St=Math.round(Rt[3]-Rt[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",jt,St),ut=Dt.context,K=Math.min(yt[0],dt[0]),J=Math.min(yt[1],dt[1]);ut.translate(-K,-J),ut.transform(...ct),Q||(Q=this._scaleImage(rt.canvas,(0,T.getCurrentTransformInverse)(ut)),Q=Q.img,N&&A&&N.set(tt,Q)),ut.imageSmoothingEnabled=B((0,T.getCurrentTransform)(ut),i.interpolate),u(ut,Q,0,0,Q.width,Q.height,0,0,s,o),ut.globalCompositeOperation="source-in";const ht=h.Util.transform((0,T.getCurrentTransformInverse)(ut),[1,0,0,1,-K,-J]);return ut.fillStyle=A?c.getPattern(n,this,ht,nt.PathType.FILL):c,ut.fillRect(0,0,s,o),N&&!A&&(this.cachedCanvases.delete("fillCanvas"),N.set(tt,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(K),offsetY:Math.round(J)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=X[i]}setLineJoin(i){this.ctx.lineJoin=x[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(i),s.lineDashOffset=n)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[n,s]of i)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(s,i,n);this.suspendedCtx=this.ctx,this.ctx=o.context;const c=this.ctx;c.setTransform(...(0,T.getCurrentTransform)(this.suspendedCtx)),r(this.suspendedCtx,c),v(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),r(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;b(s,n,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(r(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),r(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,n,s,o,c,A){this.ctx.transform(i,n,s,o,c,A),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,n,s){const o=this.ctx,c=this.current;let A=c.x,F=c.y,N,tt;const Q=(0,T.getCurrentTransform)(o),rt=Q[0]===0&&Q[3]===0||Q[1]===0&&Q[2]===0,ct=rt?s.slice(0):null;for(let yt=0,dt=0,Rt=i.length;yt<Rt;yt++)switch(i[yt]|0){case h.OPS.rectangle:A=n[dt++],F=n[dt++];const jt=n[dt++],St=n[dt++],Dt=A+jt,ut=F+St;o.moveTo(A,F),jt===0||St===0?o.lineTo(Dt,ut):(o.lineTo(Dt,F),o.lineTo(Dt,ut),o.lineTo(A,ut)),rt||c.updateRectMinMax(Q,[A,F,Dt,ut]),o.closePath();break;case h.OPS.moveTo:A=n[dt++],F=n[dt++],o.moveTo(A,F),rt||c.updatePathMinMax(Q,A,F);break;case h.OPS.lineTo:A=n[dt++],F=n[dt++],o.lineTo(A,F),rt||c.updatePathMinMax(Q,A,F);break;case h.OPS.curveTo:N=A,tt=F,A=n[dt+4],F=n[dt+5],o.bezierCurveTo(n[dt],n[dt+1],n[dt+2],n[dt+3],A,F),c.updateCurvePathMinMax(Q,N,tt,n[dt],n[dt+1],n[dt+2],n[dt+3],A,F,ct),dt+=6;break;case h.OPS.curveTo2:N=A,tt=F,o.bezierCurveTo(A,F,n[dt],n[dt+1],n[dt+2],n[dt+3]),c.updateCurvePathMinMax(Q,N,tt,A,F,n[dt],n[dt+1],n[dt+2],n[dt+3],ct),A=n[dt+2],F=n[dt+3],dt+=4;break;case h.OPS.curveTo3:N=A,tt=F,A=n[dt+2],F=n[dt+3],o.bezierCurveTo(n[dt],n[dt+1],A,F,A,F),c.updateCurvePathMinMax(Q,N,tt,n[dt],n[dt+1],A,F,A,F,ct),dt+=4;break;case h.OPS.closePath:o.closePath();break}rt&&c.updateScalingPathMinMax(Q,ct),c.setCurrentPoint(A,F)}closePath(){this.ctx.closePath()}stroke(i=!0){const n=this.ctx,s=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(n.save(),n.strokeStyle=s.getPattern(n,this,(0,T.getCurrentTransformInverse)(n),nt.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const n=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let c=!1;o&&(n.save(),n.fillStyle=s.getPattern(n,this,(0,T.getCurrentTransformInverse)(n),nt.PathType.FILL),c=!0);const A=this.current.getClippedPathBoundingBox();this.contentVisible&&A!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),c&&n.restore(),i&&this.consumePath(A)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=$}eoClip(){this.pendingClip=it}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,n=this.ctx;if(i===void 0){n.beginPath();return}n.save(),n.beginPath();for(const s of i)n.setTransform(...s.transform),n.translate(s.x,s.y),s.addToPath(n,s.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,n){var Q;const s=this.commonObjs.get(i),o=this.current;if(!s)throw new Error(`Can't find font for ${i}`);if(o.fontMatrix=s.fontMatrix||h.FONT_IDENTITY_MATRIX,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+i),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const c=s.loadedName||"sans-serif",A=((Q=s.systemFontInfo)==null?void 0:Q.css)||`"${c}", ${s.fallbackName}`;let F="normal";s.black?F="900":s.bold&&(F="bold");const N=s.italic?"italic":"normal";let tt=n;n<ft?tt=ft:n>j&&(tt=j),this.current.fontSizeScale=n/tt,this.ctx.font=`${N} ${F} ${tt}px ${A}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,n){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=n}setLeadingMoveText(i,n){this.setLeading(-n),this.moveText(i,n)}setTextMatrix(i,n,s,o,c,A){this.current.textMatrix=[i,n,s,o,c,A],this.current.textMatrixScale=Math.hypot(i,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,n,s,o){const c=this.ctx,A=this.current,F=A.font,N=A.textRenderingMode,tt=A.fontSize/A.fontSizeScale,Q=N&h.TextRenderingMode.FILL_STROKE_MASK,rt=!!(N&h.TextRenderingMode.ADD_TO_PATH_FLAG),ct=A.patternFill&&!F.missingFile;let yt;(F.disableFontFace||rt||ct)&&(yt=F.getPathGenerator(this.commonObjs,i)),F.disableFontFace||ct?(c.save(),c.translate(n,s),c.beginPath(),yt(c,tt),o&&c.setTransform(...o),(Q===h.TextRenderingMode.FILL||Q===h.TextRenderingMode.FILL_STROKE)&&c.fill(),(Q===h.TextRenderingMode.STROKE||Q===h.TextRenderingMode.FILL_STROKE)&&c.stroke(),c.restore()):((Q===h.TextRenderingMode.FILL||Q===h.TextRenderingMode.FILL_STROKE)&&c.fillText(i,n,s),(Q===h.TextRenderingMode.STROKE||Q===h.TextRenderingMode.FILL_STROKE)&&c.strokeText(i,n,s)),rt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,T.getCurrentTransform)(c),x:n,y:s,fontSize:tt,addToPath:yt})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const n=i.getImageData(0,0,10,10).data;let s=!1;for(let o=3;o<n.length;o+=4)if(n[o]>0&&n[o]<255){s=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(i){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(i);const o=n.fontSize;if(o===0)return;const c=this.ctx,A=n.fontSizeScale,F=n.charSpacing,N=n.wordSpacing,tt=n.fontDirection,Q=n.textHScale*tt,rt=i.length,ct=s.vertical,yt=ct?1:-1,dt=s.defaultVMetrics,Rt=o*n.fontMatrix[0],jt=n.textRenderingMode===h.TextRenderingMode.FILL&&!s.disableFontFace&&!n.patternFill;c.save(),c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),tt>0?c.scale(Q,-1):c.scale(Q,1);let St;if(n.patternFill){c.save();const ht=n.fillColor.getPattern(c,this,(0,T.getCurrentTransformInverse)(c),nt.PathType.FILL);St=(0,T.getCurrentTransform)(c),c.restore(),c.fillStyle=ht}let Dt=n.lineWidth;const ut=n.textMatrixScale;if(ut===0||Dt===0){const ht=n.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(ht===h.TextRenderingMode.STROKE||ht===h.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=ut;if(A!==1&&(c.scale(A,A),Dt/=A),c.lineWidth=Dt,s.isInvalidPDFjsFont){const ht=[];let Et=0;for(const wt of i)ht.push(wt.unicode),Et+=wt.width;c.fillText(ht.join(""),0,0),n.x+=Et*Rt*Q,c.restore(),this.compose();return}let K=0,J;for(J=0;J<rt;++J){const ht=i[J];if(typeof ht=="number"){K+=yt*ht*o/1e3;continue}let Et=!1;const wt=(ht.isSpace?N:0)+F,Ut=ht.fontChar,zt=ht.accent;let Wt,Xt,$t=ht.width;if(ct){const qt=ht.vmetric||dt,ot=-(ht.vmetric?qt[1]:$t*.5)*Rt,Y=qt[2]*Rt;$t=qt?-qt[0]:$t,Wt=ot/A,Xt=(K+Y)/A}else Wt=K/A,Xt=0;if(s.remeasure&&$t>0){const qt=c.measureText(Ut).width*1e3/o*A;if($t<qt&&this.isFontSubpixelAAEnabled){const ot=$t/qt;Et=!0,c.save(),c.scale(ot,1),Wt/=ot}else $t!==qt&&(Wt+=($t-qt)/2e3*o/A)}if(this.contentVisible&&(ht.isInFont||s.missingFile)){if(jt&&!zt)c.fillText(Ut,Wt,Xt);else if(this.paintChar(Ut,Wt,Xt,St),zt){const qt=Wt+o*zt.offset.x/A,ot=Xt-o*zt.offset.y/A;this.paintChar(zt.fontChar,qt,ot,St)}}const Ht=ct?$t*Rt-wt*tt:$t*Rt+wt*tt;K+=Ht,Et&&c.restore()}ct?n.y-=K:n.x+=K*Q,c.restore(),this.compose()}showType3Text(i){const n=this.ctx,s=this.current,o=s.font,c=s.fontSize,A=s.fontDirection,F=o.vertical?1:-1,N=s.charSpacing,tt=s.wordSpacing,Q=s.textHScale*A,rt=s.fontMatrix||h.FONT_IDENTITY_MATRIX,ct=i.length,yt=s.textRenderingMode===h.TextRenderingMode.INVISIBLE;let dt,Rt,jt,St;if(!(yt||c===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...s.textMatrix),n.translate(s.x,s.y),n.scale(Q,A),dt=0;dt<ct;++dt){if(Rt=i[dt],typeof Rt=="number"){St=F*Rt*c/1e3,this.ctx.translate(St,0),s.x+=St*Q;continue}const Dt=(Rt.isSpace?tt:0)+N,ut=o.charProcOperatorList[Rt.operatorListId];if(!ut){(0,h.warn)(`Type3 character "${Rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Rt,this.save(),n.scale(c,c),n.transform(...rt),this.executeOperatorList(ut),this.restore()),jt=h.Util.applyTransform([Rt.width,0],rt)[0]*c+Dt,n.translate(jt,0),s.x+=jt*Q}n.restore(),this.processingType3=null}}setCharWidth(i,n){}setCharWidthAndBounds(i,n,s,o,c,A){this.ctx.rect(s,o,c-s,A-o),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let n;if(i[0]==="TilingPattern"){const s=i[1],o=this.baseTransform||(0,T.getCurrentTransform)(this.ctx),c={createCanvasGraphics:A=>new Pt(A,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new nt.TilingPattern(i,s,this.ctx,c,o)}else n=this._getPattern(i[1],i[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,n,s){const o=h.Util.makeHexColor(i,n,s);this.ctx.strokeStyle=o,this.current.strokeColor=o}setFillRGBColor(i,n,s){const o=h.Util.makeHexColor(i,n,s);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}_getPattern(i,n=null){let s;return this.cachedPatterns.has(i)?s=this.cachedPatterns.get(i):(s=(0,nt.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,s)),n&&(s.matrix=n),s}shadingFill(i){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(i);n.fillStyle=s.getPattern(n,this,(0,T.getCurrentTransformInverse)(n),nt.PathType.SHADING);const o=(0,T.getCurrentTransformInverse)(n);if(o){const{width:c,height:A}=n.canvas,[F,N,tt,Q]=h.Util.getAxialAlignedBoundingBox([0,0,c,A],o);this.ctx.fillRect(F,N,tt-F,Q-N)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,T.getCurrentTransform)(this.ctx),n)){const s=n[2]-n[0],o=n[3]-n[1];this.ctx.rect(n[0],n[1],s,o),this.current.updateRectMinMax((0,T.getCurrentTransform)(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;i.isolated||(0,h.info)("TODO: Support non-isolated groups."),i.knockout&&(0,h.warn)("Knockout groups not supported.");const s=(0,T.getCurrentTransform)(n);if(i.matrix&&n.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let o=h.Util.getAxialAlignedBoundingBox(i.bbox,(0,T.getCurrentTransform)(n));const c=[0,0,n.canvas.width,n.canvas.height];o=h.Util.intersect(o,c)||[0,0,0,0];const A=Math.floor(o[0]),F=Math.floor(o[1]);let N=Math.max(Math.ceil(o[2])-A,1),tt=Math.max(Math.ceil(o[3])-F,1),Q=1,rt=1;N>R&&(Q=N/R,N=R),tt>R&&(rt=tt/R,tt=R),this.current.startNewPathAndClipBox([0,0,N,tt]);let ct="groupAt"+this.groupLevel;i.smask&&(ct+="_smask_"+this.smaskCounter++%2);const yt=this.cachedCanvases.getCanvas(ct,N,tt),dt=yt.context;dt.scale(1/Q,1/rt),dt.translate(-A,-F),dt.transform(...s),i.smask?this.smaskStack.push({canvas:yt.canvas,context:dt,offsetX:A,offsetY:F,scaleX:Q,scaleY:rt,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(A,F),n.scale(Q,rt),n.save()),r(n,dt),this.ctx=dt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const o=(0,T.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...o);const c=h.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(i,n,s,o,c){if(H(this,W,Qe).call(this),l(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(n)&&n.length===4){const A=n[2]-n[0],F=n[3]-n[1];if(c&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=A,n[3]=F;const[N,tt]=h.Util.singularValueDecompose2dScale((0,T.getCurrentTransform)(this.ctx)),{viewportScale:Q}=this,rt=Math.ceil(A*this.outputScaleX*Q),ct=Math.ceil(F*this.outputScaleY*Q);this.annotationCanvas=this.canvasFactory.create(rt,ct);const{canvas:yt,context:dt}=this.annotationCanvas;this.annotationCanvasMap.set(i,yt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=dt,this.ctx.save(),this.ctx.setTransform(N,0,0,-tt,0,F*tt),l(this.ctx)}else l(this.ctx),this.ctx.rect(n[0],n[1],A,F),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...o)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),H(this,gt,Ze).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const n=i.count;i=this.getObject(i.data,i),i.count=n;const s=this.ctx,o=this.processingType3;if(o&&(o.compiled===void 0&&(o.compiled=_(i)),o.compiled)){o.compiled(s);return}const c=this._createMaskCanvas(i),A=c.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(A,c.offsetX,c.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(i,n,s=0,o=0,c,A){if(!this.contentVisible)return;i=this.getObject(i.data,i);const F=this.ctx;F.save();const N=(0,T.getCurrentTransform)(F);F.transform(n,s,o,c,0,0);const tt=this._createMaskCanvas(i);F.setTransform(1,0,0,1,tt.offsetX-N[4],tt.offsetY-N[5]);for(let Q=0,rt=A.length;Q<rt;Q+=2){const ct=h.Util.transform(N,[n,s,o,c,A[Q],A[Q+1]]),[yt,dt]=h.Util.applyTransform([0,0],ct);F.drawImage(tt.canvas,yt,dt)}F.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,o=this.current.patternFill;for(const c of i){const{data:A,width:F,height:N,transform:tt}=c,Q=this.cachedCanvases.getCanvas("maskCanvas",F,N),rt=Q.context;rt.save();const ct=this.getObject(A,c);m(rt,ct),rt.globalCompositeOperation="source-in",rt.fillStyle=o?s.getPattern(rt,this,(0,T.getCurrentTransformInverse)(n),nt.PathType.FILL):s,rt.fillRect(0,0,F,N),rt.restore(),n.save(),n.transform(...tt),n.scale(1,-1),u(n,Q.canvas,0,0,F,N,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const n=this.getObject(i);if(!n){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(i,n,s,o){if(!this.contentVisible)return;const c=this.getObject(i);if(!c){(0,h.warn)("Dependent image isn't ready yet");return}const A=c.width,F=c.height,N=[];for(let tt=0,Q=o.length;tt<Q;tt+=2)N.push({transform:[n,0,0,s,o[tt],o[tt+1]],x:0,y:0,w:A,h:F});this.paintInlineImageXObjectGroup(c,N)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:n,width:s,height:o}=i,c=this.cachedCanvases.getCanvas("inlineImage",s,o),A=c.context;return A.filter=this.current.transferMaps,A.drawImage(n,0,0),A.filter="none",c.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const n=i.width,s=i.height,o=this.ctx;if(this.save(),!h.isNodeJS){const{filter:F}=o;F!=="none"&&F!==""&&(o.filter="none")}o.scale(1/n,-1/s);let c;if(i.bitmap)c=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)c=i;else{const N=this.cachedCanvases.getCanvas("inlineImage",n,s).context;w(N,i),c=this.applyTransferMapsToCanvas(N)}const A=this._scaleImage(c,(0,T.getCurrentTransformInverse)(o));o.imageSmoothingEnabled=B((0,T.getCurrentTransform)(o),i.interpolate),u(o,A.img,0,0,A.paintWidth,A.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,n){if(!this.contentVisible)return;const s=this.ctx;let o;if(i.bitmap)o=i.bitmap;else{const c=i.width,A=i.height,N=this.cachedCanvases.getCanvas("inlineImage",c,A).context;w(N,i),o=this.applyTransferMapsToCanvas(N)}for(const c of n)s.save(),s.transform(...c.transform),s.scale(1,-1),u(s,o,c.x,c.y,c.w,c.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,n){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,n){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===it?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,T.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const n=Math.abs(i[0]*i[3]-i[2]*i[1]),s=Math.hypot(i[0],i[2]),o=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(s,o)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:n,b:s,c:o,d:c}=this.ctx.getTransform();let A,F;if(s===0&&o===0){const N=Math.abs(n),tt=Math.abs(c);if(N===tt)if(i===0)A=F=1/N;else{const Q=N*i;A=F=Q<1?1/Q:1}else if(i===0)A=1/N,F=1/tt;else{const Q=N*i,rt=tt*i;A=Q<1?1/Q:1,F=rt<1?1/rt:1}}else{const N=Math.abs(n*c-s*o),tt=Math.hypot(n,s),Q=Math.hypot(o,c);if(i===0)A=Q/N,F=tt/N;else{const rt=i*N;A=Q>rt?Q/rt:1,F=tt>rt?tt/rt:1}}this._cachedScaleForStroking[0]=A,this._cachedScaleForStroking[1]=F}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:n}=this,{lineWidth:s}=this.current,[o,c]=this.getScaleForStroking();if(n.lineWidth=s||1,o===1&&c===1){n.stroke();return}const A=n.getLineDash();if(i&&n.save(),n.scale(o,c),A.length>0){const F=Math.max(o,c);n.setLineDash(A.map(N=>N/F)),n.lineDashOffset/=F}n.stroke(),i&&n.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};W=new WeakSet,Qe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gt=new WeakSet,Ze=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const n=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}};let at=Pt;d.CanvasGraphics=at;for(const S in h.OPS)at.prototype[S]!==void 0&&(at.prototype[h.OPS[S]]=at.prototype[S])},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TilingPattern=d.PathType=void 0,d.getShadingPattern=P;var h=st(1),T=st(6);const nt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};d.PathType=nt;function z(_,E){if(!E)return;const w=E[2]-E[0],m=E[3]-E[1],r=new Path2D;r.rect(E[0],E[1],w,m),_.clip(r)}class ft{constructor(){this.constructor===ft&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class j extends ft{constructor(E){super(),this._type=E[1],this._bbox=E[2],this._colorStops=E[3],this._p0=E[4],this._p1=E[5],this._r0=E[6],this._r1=E[7],this.matrix=null}_createGradient(E){let w;this._type==="axial"?w=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(w=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)w.addColorStop(m[0],m[1]);return w}getPattern(E,w,m,r){let l;if(r===nt.STROKE||r===nt.FILL){const k=w.current.getClippedPathBoundingBox(r,(0,T.getCurrentTransform)(E))||[0,0,0,0],g=Math.ceil(k[2]-k[0])||1,a=Math.ceil(k[3]-k[1])||1,C=w.cachedCanvases.getCanvas("pattern",g,a,!0),b=C.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-k[0],-k[1]),m=h.Util.transform(m,[1,0,0,1,k[0],k[1]]),b.transform(...w.baseTransform),this.matrix&&b.transform(...this.matrix),z(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),l=E.createPattern(C.canvas,"no-repeat");const B=new DOMMatrix(m);l.setTransform(B)}else z(E,this._bbox),l=this._createGradient(E);return l}}function R(_,E,w,m,r,l,k,g){const a=E.coords,C=E.colors,b=_.data,B=_.width*4;let X;a[w+1]>a[m+1]&&(X=w,w=m,m=X,X=l,l=k,k=X),a[m+1]>a[r+1]&&(X=m,m=r,r=X,X=k,k=g,g=X),a[w+1]>a[m+1]&&(X=w,w=m,m=X,X=l,l=k,k=X);const x=(a[w]+E.offsetX)*E.scaleX,$=(a[w+1]+E.offsetY)*E.scaleY,it=(a[m]+E.offsetX)*E.scaleX,at=(a[m+1]+E.offsetY)*E.scaleY,W=(a[r]+E.offsetX)*E.scaleX,lt=(a[r+1]+E.offsetY)*E.scaleY;if($>=lt)return;const gt=C[l],xt=C[l+1],Pt=C[l+2],S=C[k],i=C[k+1],n=C[k+2],s=C[g],o=C[g+1],c=C[g+2],A=Math.round($),F=Math.round(lt);let N,tt,Q,rt,ct,yt,dt,Rt;for(let jt=A;jt<=F;jt++){if(jt<at){const J=jt<$?0:($-jt)/($-at);N=x-(x-it)*J,tt=gt-(gt-S)*J,Q=xt-(xt-i)*J,rt=Pt-(Pt-n)*J}else{let J;jt>lt?J=1:at===lt?J=0:J=(at-jt)/(at-lt),N=it-(it-W)*J,tt=S-(S-s)*J,Q=i-(i-o)*J,rt=n-(n-c)*J}let St;jt<$?St=0:jt>lt?St=1:St=($-jt)/($-lt),ct=x-(x-W)*St,yt=gt-(gt-s)*St,dt=xt-(xt-o)*St,Rt=Pt-(Pt-c)*St;const Dt=Math.round(Math.min(N,ct)),ut=Math.round(Math.max(N,ct));let K=B*jt+Dt*4;for(let J=Dt;J<=ut;J++)St=(N-J)/(N-ct),St<0?St=0:St>1&&(St=1),b[K++]=tt-(tt-yt)*St|0,b[K++]=Q-(Q-dt)*St|0,b[K++]=rt-(rt-Rt)*St|0,b[K++]=255}}function f(_,E,w){const m=E.coords,r=E.colors;let l,k;switch(E.type){case"lattice":const g=E.verticesPerRow,a=Math.floor(m.length/g)-1,C=g-1;for(l=0;l<a;l++){let b=l*g;for(let B=0;B<C;B++,b++)R(_,w,m[b],m[b+1],m[b+g],r[b],r[b+1],r[b+g]),R(_,w,m[b+g+1],m[b+1],m[b+g],r[b+g+1],r[b+1],r[b+g])}break;case"triangles":for(l=0,k=m.length;l<k;l+=3)R(_,w,m[l],m[l+1],m[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class L extends ft{constructor(E){super(),this._coords=E[2],this._colors=E[3],this._figures=E[4],this._bounds=E[5],this._bbox=E[7],this._background=E[8],this.matrix=null}_createMeshCanvas(E,w,m){const g=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),C=Math.ceil(this._bounds[2])-g,b=Math.ceil(this._bounds[3])-a,B=Math.min(Math.ceil(Math.abs(C*E[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(b*E[1]*1.1)),3e3),x=C/B,$=b/X,it={coords:this._coords,colors:this._colors,offsetX:-g,offsetY:-a,scaleX:1/x,scaleY:1/$},at=B+2*2,W=X+2*2,lt=m.getCanvas("mesh",at,W,!1),gt=lt.context,xt=gt.createImageData(B,X);if(w){const S=xt.data;for(let i=0,n=S.length;i<n;i+=4)S[i]=w[0],S[i+1]=w[1],S[i+2]=w[2],S[i+3]=255}for(const S of this._figures)f(xt,S,it);return gt.putImageData(xt,2,2),{canvas:lt.canvas,offsetX:g-2*x,offsetY:a-2*$,scaleX:x,scaleY:$}}getPattern(E,w,m,r){z(E,this._bbox);let l;if(r===nt.SHADING)l=h.Util.singularValueDecompose2dScale((0,T.getCurrentTransform)(E));else if(l=h.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const g=h.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*g[0],l[1]*g[1]]}const k=this._createMeshCanvas(l,r===nt.SHADING?null:this._background,w.cachedCanvases);return r!==nt.SHADING&&(E.setTransform(...w.baseTransform),this.matrix&&E.transform(...this.matrix)),E.translate(k.offsetX,k.offsetY),E.scale(k.scaleX,k.scaleY),E.createPattern(k.canvas,"no-repeat")}}class O extends ft{getPattern(){return"hotpink"}}function P(_){switch(_[0]){case"RadialAxial":return new j(_);case"Mesh":return new L(_);case"Dummy":return new O}throw new Error(`Unknown IR type: ${_[0]}`)}const v={COLORED:1,UNCOLORED:2},u=class u{constructor(E,w,m,r,l){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=w,this.ctx=m,this.canvasGraphicsFactory=r,this.baseTransform=l}createPatternCanvas(E){const w=this.operatorList,m=this.bbox,r=this.xstep,l=this.ystep,k=this.paintType,g=this.tilingType,a=this.color,C=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+g);const b=m[0],B=m[1],X=m[2],x=m[3],$=h.Util.singularValueDecompose2dScale(this.matrix),it=h.Util.singularValueDecompose2dScale(this.baseTransform),at=[$[0]*it[0],$[1]*it[1]],W=this.getSizeAndScale(r,this.ctx.canvas.width,at[0]),lt=this.getSizeAndScale(l,this.ctx.canvas.height,at[1]),gt=E.cachedCanvases.getCanvas("pattern",W.size,lt.size,!0),xt=gt.context,Pt=C.createCanvasGraphics(xt);Pt.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(Pt,k,a);let S=b,i=B,n=X,s=x;return b<0&&(S=0,n+=Math.abs(b)),B<0&&(i=0,s+=Math.abs(B)),xt.translate(-(W.scale*S),-(lt.scale*i)),Pt.transform(W.scale,0,0,lt.scale,0,0),xt.save(),this.clipBbox(Pt,S,i,n,s),Pt.baseTransform=(0,T.getCurrentTransform)(Pt.ctx),Pt.executeOperatorList(w),Pt.endDrawing(),{canvas:gt.canvas,scaleX:W.scale,scaleY:lt.scale,offsetX:S,offsetY:i}}getSizeAndScale(E,w,m){E=Math.abs(E);const r=Math.max(u.MAX_PATTERN_SIZE,w);let l=Math.ceil(E*m);return l>=r?l=r:m=l/E,{scale:m,size:l}}clipBbox(E,w,m,r,l){const k=r-w,g=l-m;E.ctx.rect(w,m,k,g),E.current.updateRectMinMax((0,T.getCurrentTransform)(E.ctx),[w,m,r,l]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,w,m){const r=E.ctx,l=E.current;switch(w){case v.COLORED:const k=this.ctx;r.fillStyle=k.fillStyle,r.strokeStyle=k.strokeStyle,l.fillColor=k.fillStyle,l.strokeColor=k.strokeStyle;break;case v.UNCOLORED:const g=h.Util.makeHexColor(m[0],m[1],m[2]);r.fillStyle=g,r.strokeStyle=g,l.fillColor=g,l.strokeColor=g;break;default:throw new h.FormatError(`Unsupported paint type: ${w}`)}}getPattern(E,w,m,r){let l=m;r!==nt.SHADING&&(l=h.Util.transform(l,w.baseTransform),this.matrix&&(l=h.Util.transform(l,this.matrix)));const k=this.createPatternCanvas(w);let g=new DOMMatrix(l);g=g.translate(k.offsetX,k.offsetY),g=g.scale(1/k.scaleX,1/k.scaleY);const a=E.createPattern(k.canvas,"repeat");return a.setTransform(g),a}};ee(u,"MAX_PATTERN_SIZE",3e3);let y=u;d.TilingPattern=y},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.convertBlackAndWhiteToRGBA=nt,d.convertToRGBA=T,d.grayToRGBA=ft;var h=st(1);function T(j){switch(j.kind){case h.ImageKind.GRAYSCALE_1BPP:return nt(j);case h.ImageKind.RGB_24BPP:return z(j)}return null}function nt({src:j,srcPos:R=0,dest:f,width:L,height:O,nonBlackColor:P=4294967295,inverseDecode:v=!1}){const y=h.FeatureTest.isLittleEndian?4278190080:255,[u,_]=v?[P,y]:[y,P],E=L>>3,w=L&7,m=j.length;f=new Uint32Array(f.buffer);let r=0;for(let l=0;l<O;l++){for(const g=R+E;R<g;R++){const a=R<m?j[R]:255;f[r++]=a&128?_:u,f[r++]=a&64?_:u,f[r++]=a&32?_:u,f[r++]=a&16?_:u,f[r++]=a&8?_:u,f[r++]=a&4?_:u,f[r++]=a&2?_:u,f[r++]=a&1?_:u}if(w===0)continue;const k=R<m?j[R++]:255;for(let g=0;g<w;g++)f[r++]=k&1<<7-g?_:u}return{srcPos:R,destPos:r}}function z({src:j,srcPos:R=0,dest:f,destPos:L=0,width:O,height:P}){let v=0;const y=j.length>>2,u=new Uint32Array(j.buffer,R,y);if(h.FeatureTest.isLittleEndian){for(;v<y-2;v+=3,L+=4){const _=u[v],E=u[v+1],w=u[v+2];f[L]=_|4278190080,f[L+1]=_>>>24|E<<8|4278190080,f[L+2]=E>>>16|w<<16|4278190080,f[L+3]=w>>>8|4278190080}for(let _=v*4,E=j.length;_<E;_+=3)f[L++]=j[_]|j[_+1]<<8|j[_+2]<<16|4278190080}else{for(;v<y-2;v+=3,L+=4){const _=u[v],E=u[v+1],w=u[v+2];f[L]=_|255,f[L+1]=_<<24|E>>>8|255,f[L+2]=E<<16|w>>>16|255,f[L+3]=w<<8|255}for(let _=v*4,E=j.length;_<E;_+=3)f[L++]=j[_]<<24|j[_+1]<<16|j[_+2]<<8|255}return{srcPos:R,destPos:L}}function ft(j,R){if(h.FeatureTest.isLittleEndian)for(let f=0,L=j.length;f<L;f++)R[f]=j[f]*65793|4278190080;else for(let f=0,L=j.length;f<L;f++)R[f]=j[f]*16843008|255}},(pt,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GlobalWorkerOptions=void 0;const st=Object.create(null);d.GlobalWorkerOptions=st,st.workerPort=null,st.workerSrc=""},(pt,d,st)=>{var j,Pi,f,ki,O,Pe;Object.defineProperty(d,"__esModule",{value:!0}),d.MessageHandler=void 0;var h=st(1);const T={UNKNOWN:0,DATA:1,ERROR:2},nt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function z(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new h.AbortException(v.message);case"MissingPDFException":return new h.MissingPDFException(v.message);case"PasswordException":return new h.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new h.UnknownErrorException(v.message,v.details);default:return new h.UnknownErrorException(v.message,v.toString())}}class ft{constructor(y,u,_){I(this,j);I(this,f);I(this,O);this.sourceName=y,this.targetName=u,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const w=E.data;if(w.targetName!==this.sourceName)return;if(w.stream){H(this,f,ki).call(this,w);return}if(w.callback){const r=w.callbackId,l=this.callbackCapabilities[r];if(!l)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],w.callback===T.DATA)l.resolve(w.data);else if(w.callback===T.ERROR)l.reject(z(w.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[w.action];if(!m)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){const r=this.sourceName,l=w.sourceName;new Promise(function(k){k(m(w.data))}).then(function(k){_.postMessage({sourceName:r,targetName:l,callback:T.DATA,callbackId:w.callbackId,data:k})},function(k){_.postMessage({sourceName:r,targetName:l,callback:T.ERROR,callbackId:w.callbackId,reason:z(k)})});return}if(w.streamId){H(this,j,Pi).call(this,w);return}m(w.data)},_.addEventListener("message",this._onComObjOnMessage)}on(y,u){const _=this.actionHandler;if(_[y])throw new Error(`There is already an actionName called "${y}"`);_[y]=u}send(y,u,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:u},_)}sendWithPromise(y,u,_){const E=this.callbackId++,w=new h.PromiseCapability;this.callbackCapabilities[E]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:E,data:u},_)}catch(m){w.reject(m)}return w.promise}sendWithStream(y,u,_,E){const w=this.streamId++,m=this.sourceName,r=this.targetName,l=this.comObj;return new ReadableStream({start:k=>{const g=new h.PromiseCapability;return this.streamControllers[w]={controller:k,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:m,targetName:r,action:y,streamId:w,data:u,desiredSize:k.desiredSize},E),g.promise},pull:k=>{const g=new h.PromiseCapability;return this.streamControllers[w].pullCall=g,l.postMessage({sourceName:m,targetName:r,stream:nt.PULL,streamId:w,desiredSize:k.desiredSize}),g.promise},cancel:k=>{(0,h.assert)(k instanceof Error,"cancel must have a valid reason");const g=new h.PromiseCapability;return this.streamControllers[w].cancelCall=g,this.streamControllers[w].isClosed=!0,l.postMessage({sourceName:m,targetName:r,stream:nt.CANCEL,streamId:w,reason:z(k)}),g.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}j=new WeakSet,Pi=function(y){const u=y.streamId,_=this.sourceName,E=y.sourceName,w=this.comObj,m=this,r=this.actionHandler[y.action],l={enqueue(k,g=1,a){if(this.isCancelled)return;const C=this.desiredSize;this.desiredSize-=g,C>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),w.postMessage({sourceName:_,targetName:E,stream:nt.ENQUEUE,streamId:u,chunk:k},a)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:_,targetName:E,stream:nt.CLOSE,streamId:u}),delete m.streamSinks[u])},error(k){(0,h.assert)(k instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:_,targetName:E,stream:nt.ERROR,streamId:u,reason:z(k)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[u]=l,new Promise(function(k){k(r(y.data,l))}).then(function(){w.postMessage({sourceName:_,targetName:E,stream:nt.START_COMPLETE,streamId:u,success:!0})},function(k){w.postMessage({sourceName:_,targetName:E,stream:nt.START_COMPLETE,streamId:u,reason:z(k)})})},f=new WeakSet,ki=function(y){const u=y.streamId,_=this.sourceName,E=y.sourceName,w=this.comObj,m=this.streamControllers[u],r=this.streamSinks[u];switch(y.stream){case nt.START_COMPLETE:y.success?m.startCall.resolve():m.startCall.reject(z(y.reason));break;case nt.PULL_COMPLETE:y.success?m.pullCall.resolve():m.pullCall.reject(z(y.reason));break;case nt.PULL:if(!r){w.postMessage({sourceName:_,targetName:E,stream:nt.PULL_COMPLETE,streamId:u,success:!0});break}r.desiredSize<=0&&y.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=y.desiredSize,new Promise(function(l){var k;l((k=r.onPull)==null?void 0:k.call(r))}).then(function(){w.postMessage({sourceName:_,targetName:E,stream:nt.PULL_COMPLETE,streamId:u,success:!0})},function(l){w.postMessage({sourceName:_,targetName:E,stream:nt.PULL_COMPLETE,streamId:u,reason:z(l)})});break;case nt.ENQUEUE:if((0,h.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(y.chunk);break;case nt.CLOSE:if((0,h.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),H(this,O,Pe).call(this,m,u);break;case nt.ERROR:(0,h.assert)(m,"error should have stream controller"),m.controller.error(z(y.reason)),H(this,O,Pe).call(this,m,u);break;case nt.CANCEL_COMPLETE:y.success?m.cancelCall.resolve():m.cancelCall.reject(z(y.reason)),H(this,O,Pe).call(this,m,u);break;case nt.CANCEL:if(!r)break;new Promise(function(l){var k;l((k=r.onCancel)==null?void 0:k.call(r,z(y.reason)))}).then(function(){w.postMessage({sourceName:_,targetName:E,stream:nt.CANCEL_COMPLETE,streamId:u,success:!0})},function(l){w.postMessage({sourceName:_,targetName:E,stream:nt.CANCEL_COMPLETE,streamId:u,reason:z(l)})}),r.sinkCapability.reject(z(y.reason)),r.isCancelled=!0,delete this.streamSinks[u];break;default:throw new Error("Unexpected stream case")}},O=new WeakSet,Pe=async function(y,u){var _,E,w;await Promise.allSettled([(_=y.startCall)==null?void 0:_.promise,(E=y.pullCall)==null?void 0:E.promise,(w=y.cancelCall)==null?void 0:w.promise]),delete this.streamControllers[u]},d.MessageHandler=ft},(pt,d,st)=>{var nt,z;Object.defineProperty(d,"__esModule",{value:!0}),d.Metadata=void 0;var h=st(1);class T{constructor({parsedData:j,rawData:R}){I(this,nt,void 0);I(this,z,void 0);Z(this,nt,j),Z(this,z,R)}getRaw(){return t(this,z)}get(j){return t(this,nt).get(j)??null}getAll(){return(0,h.objectFromMap)(t(this,nt))}has(j){return t(this,nt).has(j)}}nt=new WeakMap,z=new WeakMap,d.Metadata=T},(pt,d,st)=>{var j,R,f,L,O,P,ti;Object.defineProperty(d,"__esModule",{value:!0}),d.OptionalContentConfig=void 0;var h=st(1),T=st(8);const nt=Symbol("INTERNAL");class z{constructor(u,_){I(this,j,!0);this.name=u,this.intent=_}get visible(){return t(this,j)}_setVisible(u,_){u!==nt&&(0,h.unreachable)("Internal method `_setVisible` called."),Z(this,j,_)}}j=new WeakMap;class ft{constructor(u){I(this,P);I(this,R,null);I(this,f,new Map);I(this,L,null);I(this,O,null);if(this.name=null,this.creator=null,u!==null){this.name=u.name,this.creator=u.creator,Z(this,O,u.order);for(const _ of u.groups)t(this,f).set(_.id,new z(_.name,_.intent));if(u.baseState==="OFF")for(const _ of t(this,f).values())_._setVisible(nt,!1);for(const _ of u.on)t(this,f).get(_)._setVisible(nt,!0);for(const _ of u.off)t(this,f).get(_)._setVisible(nt,!1);Z(this,L,this.getHash())}}isVisible(u){if(t(this,f).size===0)return!0;if(!u)return(0,h.warn)("Optional content group not defined."),!0;if(u.type==="OCG")return t(this,f).has(u.id)?t(this,f).get(u.id).visible:((0,h.warn)(`Optional content group not found: ${u.id}`),!0);if(u.type==="OCMD"){if(u.expression)return H(this,P,ti).call(this,u.expression);if(!u.policy||u.policy==="AnyOn"){for(const _ of u.ids){if(!t(this,f).has(_))return(0,h.warn)(`Optional content group not found: ${_}`),!0;if(t(this,f).get(_).visible)return!0}return!1}else if(u.policy==="AllOn"){for(const _ of u.ids){if(!t(this,f).has(_))return(0,h.warn)(`Optional content group not found: ${_}`),!0;if(!t(this,f).get(_).visible)return!1}return!0}else if(u.policy==="AnyOff"){for(const _ of u.ids){if(!t(this,f).has(_))return(0,h.warn)(`Optional content group not found: ${_}`),!0;if(!t(this,f).get(_).visible)return!0}return!1}else if(u.policy==="AllOff"){for(const _ of u.ids){if(!t(this,f).has(_))return(0,h.warn)(`Optional content group not found: ${_}`),!0;if(t(this,f).get(_).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${u.policy}.`),!0}return(0,h.warn)(`Unknown group type ${u.type}.`),!0}setVisibility(u,_=!0){if(!t(this,f).has(u)){(0,h.warn)(`Optional content group not found: ${u}`);return}t(this,f).get(u)._setVisible(nt,!!_),Z(this,R,null)}get hasInitialVisibility(){return t(this,L)===null||this.getHash()===t(this,L)}getOrder(){return t(this,f).size?t(this,O)?t(this,O).slice():[...t(this,f).keys()]:null}getGroups(){return t(this,f).size>0?(0,h.objectFromMap)(t(this,f)):null}getGroup(u){return t(this,f).get(u)||null}getHash(){if(t(this,R)!==null)return t(this,R);const u=new T.MurmurHash3_64;for(const[_,E]of t(this,f))u.update(`${_}:${E.visible}`);return Z(this,R,u.hexdigest())}}R=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,P=new WeakSet,ti=function(u){const _=u.length;if(_<2)return!0;const E=u[0];for(let w=1;w<_;w++){const m=u[w];let r;if(Array.isArray(m))r=H(this,P,ti).call(this,m);else if(t(this,f).has(m))r=t(this,f).get(m).visible;else return(0,h.warn)(`Optional content group not found: ${m}`),!0;switch(E){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return E==="And"},d.OptionalContentConfig=ft},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFDataTransportStream=void 0;var h=st(1),T=st(6);class nt{constructor({length:R,initialData:f,progressiveDone:L=!1,contentDispositionFilename:O=null,disableRange:P=!1,disableStream:v=!1},y){if((0,h.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=L,this._contentDispositionFilename=O,(f==null?void 0:f.length)>0){const u=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!v,this._isRangeSupported=!P,this._contentLength=R,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,_)=>{this._onReceiveData({begin:u,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((u,_)=>{this._onProgress({loaded:u,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:R,chunk:f}){const L=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(R===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(L):this._queuedChunks.push(L);else{const O=this._rangeReaders.some(function(P){return P._begin!==R?!1:(P._enqueue(L),!0)});(0,h.assert)(O,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var R;return((R=this._fullRequestReader)==null?void 0:R._loaded)??0}_onProgress(R){var f,L,O,P;R.total===void 0?(L=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||L.call(f,{loaded:R.loaded}):(P=(O=this._fullRequestReader)==null?void 0:O.onProgress)==null||P.call(O,{loaded:R.loaded,total:R.total})}_onProgressiveDone(){var R;(R=this._fullRequestReader)==null||R.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(R){const f=this._rangeReaders.indexOf(R);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const R=this._queuedChunks;return this._queuedChunks=null,new z(this,R,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(R,f){if(f<=this._progressiveDataLength)return null;const L=new ft(this,R,f);return this._pdfDataRangeTransport.requestDataRange(R,f),this._rangeReaders.push(L),L}cancelAllRequests(R){var f;(f=this._fullRequestReader)==null||f.cancel(R);for(const L of this._rangeReaders.slice(0))L.cancel(R);this._pdfDataRangeTransport.abort()}}d.PDFDataTransportStream=nt;class z{constructor(R,f,L=!1,O=null){this._stream=R,this._done=L||!1,this._filename=(0,T.isPdfFile)(O)?O:null,this._queuedChunks=f||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),R._fullRequestReader=this,this.onProgress=null}_enqueue(R){this._done||(this._requests.length>0?this._requests.shift().resolve({value:R,done:!1}):this._queuedChunks.push(R),this._loaded+=R.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new h.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ft{constructor(R,f,L){this._stream=R,this._begin=f,this._end=L,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(R){if(!this._done){if(this._requests.length===0)this._queuedChunk=R;else{this._requests.shift().resolve({value:R,done:!1});for(const L of this._requests)L.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new h.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFFetchStream=void 0;var h=st(1),T=st(20);function nt(L,O,P){return{method:"GET",headers:L,signal:P.signal,mode:"cors",credentials:O?"include":"same-origin",redirect:"follow"}}function z(L){const O=new Headers;for(const P in L){const v=L[P];v!==void 0&&O.append(P,v)}return O}function ft(L){return L instanceof Uint8Array?L.buffer:L instanceof ArrayBuffer?L:((0,h.warn)(`getArrayBuffer - unexpected data format: ${L}`),new Uint8Array(L).buffer)}class j{constructor(O){this.source=O,this.isHttp=/^https?:/i.test(O.url),this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var O;return((O=this._fullRequestReader)==null?void 0:O._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new R(this),this._fullRequestReader}getRangeReader(O,P){if(P<=this._progressiveDataLength)return null;const v=new f(this,O,P);return this._rangeRequestReaders.push(v),v}cancelAllRequests(O){var P;(P=this._fullRequestReader)==null||P.cancel(O);for(const v of this._rangeRequestReaders.slice(0))v.cancel(O)}}d.PDFFetchStream=j;class R{constructor(O){this._stream=O,this._reader=null,this._loaded=0,this._filename=null;const P=O.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=new h.PromiseCapability,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=z(this._stream.httpHeaders);const v=P.url;fetch(v,nt(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,T.validateResponseStatus)(y.status))throw(0,T.createResponseStatusError)(y.status,v);this._reader=y.body.getReader(),this._headersCapability.resolve();const u=w=>y.headers.get(w),{allowRangeRequests:_,suggestedLength:E}=(0,T.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=E||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._headersCapability.promise;const{value:O,done:P}=await this._reader.read();return P?{value:O,done:P}:(this._loaded+=O.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ft(O),done:!1})}cancel(O){var P;(P=this._reader)==null||P.cancel(O),this._abortController.abort()}}class f{constructor(O,P,v){this._stream=O,this._reader=null,this._loaded=0;const y=O.source;this._withCredentials=y.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!y.disableStream,this._abortController=new AbortController,this._headers=z(this._stream.httpHeaders),this._headers.append("Range",`bytes=${P}-${v-1}`);const u=y.url;fetch(u,nt(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,T.validateResponseStatus)(_.status))throw(0,T.createResponseStatusError)(_.status,u);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._readCapability.promise;const{value:O,done:P}=await this._reader.read();return P?{value:O,done:P}:(this._loaded+=O.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:ft(O),done:!1})}cancel(O){var P;(P=this._reader)==null||P.cancel(O),this._abortController.abort()}}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.createResponseStatusError=j,d.extractFilenameFromHeader=ft,d.validateRangeRequestCapabilities=z,d.validateResponseStatus=R;var h=st(1),T=st(21),nt=st(6);function z({getResponseHeader:f,isHttp:L,rangeChunkSize:O,disableRange:P}){const v={allowRangeRequests:!1,suggestedLength:void 0},y=parseInt(f("Content-Length"),10);return!Number.isInteger(y)||(v.suggestedLength=y,y<=2*O)||P||!L||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(v.allowRangeRequests=!0),v}function ft(f){const L=f("Content-Disposition");if(L){let O=(0,T.getFilenameFromContentDispositionHeader)(L);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,nt.isPdfFile)(O))return O}return null}function j(f,L){return f===404||f===0&&L.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+L+'".'):new h.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${L}".`,f)}function R(f){return f===200||f===206}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.getFilenameFromContentDispositionHeader=T;var h=st(1);function T(nt){let z=!0,ft=j("filename\\*","i").exec(nt);if(ft){ft=ft[1];let y=O(ft);return y=unescape(y),y=P(y),y=v(y),f(y)}if(ft=L(nt),ft){const y=v(ft);return f(y)}if(ft=j("filename","i").exec(nt),ft){ft=ft[1];let y=O(ft);return y=v(y),f(y)}function j(y,u){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function R(y,u){if(y){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const _=new TextDecoder(y,{fatal:!0}),E=(0,h.stringToBytes)(u);u=_.decode(E),z=!1}catch{}}return u}function f(y){return z&&/[\x80-\xff]/.test(y)&&(y=R("utf-8",y),z&&(y=R("iso-8859-1",y))),y}function L(y){const u=[];let _;const E=j("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=E.exec(y))!==null;){let[,m,r,l]=_;if(m=parseInt(m,10),m in u){if(m===0)break;continue}u[m]=[r,l]}const w=[];for(let m=0;m<u.length&&m in u;++m){let[r,l]=u[m];l=O(l),r&&(l=unescape(l),m===0&&(l=P(l))),w.push(l)}return w.join("")}function O(y){if(y.startsWith('"')){const u=y.slice(1).split('\\"');for(let _=0;_<u.length;++_){const E=u[_].indexOf('"');E!==-1&&(u[_]=u[_].slice(0,E),u.length=_+1),u[_]=u[_].replaceAll(/\\(.)/g,"$1")}y=u.join('"')}return y}function P(y){const u=y.indexOf("'");if(u===-1)return y;const _=y.slice(0,u),w=y.slice(u+1).replace(/^[^']*'/,"");return R(_,w)}function v(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,_,E,w){if(E==="q"||E==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,r){return String.fromCharCode(parseInt(r,16))}),R(_,w);try{w=atob(w)}catch{}return R(_,w)})}return""}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNetworkStream=void 0;var h=st(1),T=st(20);const nt=200,z=206;function ft(O){const P=O.response;return typeof P!="string"?P:(0,h.stringToBytes)(P).buffer}class j{constructor(P,v={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,v,y){const u={begin:P,end:v};for(const _ in y)u[_]=y[_];return this.request(u)}requestFull(P){return this.request(P)}request(P){const v=new XMLHttpRequest,y=this.currXhrId++,u=this.pendingRequests[y]={xhr:v};v.open("GET",this.url),v.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const E=this.httpHeaders[_];E!==void 0&&v.setRequestHeader(_,E)}return this.isHttp&&"begin"in P&&"end"in P?(v.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),u.expectedStatus=z):u.expectedStatus=nt,v.responseType="arraybuffer",P.onError&&(v.onerror=function(_){P.onError(v.status)}),v.onreadystatechange=this.onStateChange.bind(this,y),v.onprogress=this.onProgress.bind(this,y),u.onHeadersReceived=P.onHeadersReceived,u.onDone=P.onDone,u.onError=P.onError,u.onProgress=P.onProgress,v.send(null),y}onProgress(P,v){var u;const y=this.pendingRequests[P];y&&((u=y.onProgress)==null||u.call(y,v))}onStateChange(P,v){var m,r,l;const y=this.pendingRequests[P];if(!y)return;const u=y.xhr;if(u.readyState>=2&&y.onHeadersReceived&&(y.onHeadersReceived(),delete y.onHeadersReceived),u.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],u.status===0&&this.isHttp){(m=y.onError)==null||m.call(y,u.status);return}const _=u.status||nt;if(!(_===nt&&y.expectedStatus===z)&&_!==y.expectedStatus){(r=y.onError)==null||r.call(y,u.status);return}const w=ft(u);if(_===z){const k=u.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(k);y.onDone({begin:parseInt(g[1],10),chunk:w})}else w?y.onDone({begin:0,chunk:w}):(l=y.onError)==null||l.call(y,u.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const v=this.pendingRequests[P].xhr;delete this.pendingRequests[P],v.abort()}}class R{constructor(P){this._source=P,this._manager=new j(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const v=this._rangeRequestReaders.indexOf(P);v>=0&&this._rangeRequestReaders.splice(v,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(P,v){const y=new L(this._manager,P,v);return y.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(y),y}cancelAllRequests(P){var v;(v=this._fullRequestReader)==null||v.cancel(P);for(const y of this._rangeRequestReaders.slice(0))y.cancel(P)}}d.PDFNetworkStream=R;class f{constructor(P,v){this._manager=P;const y={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._fullRequestId=P.requestFull(y),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=v.disableRange||!1,this._contentLength=v.length,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,v=this._manager.getRequestXhr(P),y=E=>v.getResponseHeader(E),{allowRangeRequests:u,suggestedLength:_}=(0,T.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});u&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(y),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,T.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var v;(v=this.onProgress)==null||v.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new h.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L{constructor(P,v,y){this._manager=P;const u={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(v,y,u),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const v=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,T.createResponseStatusError)(P,this._url);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var v;this.isStreamingSupported||(v=this.onProgress)==null||v.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new h.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFNodeStream=void 0;var h=st(1),T=st(20);const nt=/^file:\/\/\/[a-zA-Z]:\//;function z(y){const u=require$$5,_=u.parse(y);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(y)?u.parse(`file:///${y}`):(_.host||(_.protocol="file:"),_)}class ft{constructor(u){this.source=u,this.url=z(u.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&u.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var u;return((u=this._fullRequestReader)==null?void 0:u._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new P(this):new L(this),this._fullRequestReader}getRangeReader(u,_){if(_<=this._progressiveDataLength)return null;const E=this.isFsUrl?new v(this,u,_):new O(this,u,_);return this._rangeRequestReaders.push(E),E}cancelAllRequests(u){var _;(_=this._fullRequestReader)==null||_.cancel(u);for(const E of this._rangeRequestReaders.slice(0))E.cancel(u)}}d.PDFNodeStream=ft;class j{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=u.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const u=this._readableStream.read();return u===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=u.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(u).buffer,done:!1})}cancel(u){if(!this._readableStream){this._error(u);return}this._readableStream.destroy(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class R{constructor(u){this._url=u.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability;const _=u.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const u=this._readableStream.read();return u===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=u.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:new Uint8Array(u).buffer,done:!1})}cancel(u){if(!this._readableStream){this._error(u);return}this._readableStream.destroy(u)}_error(u){this._storedError=u,this._readCapability.resolve()}_setReadableStream(u){this._readableStream=u,u.on("readable",()=>{this._readCapability.resolve()}),u.on("end",()=>{u.destroy(),this._done=!0,this._readCapability.resolve()}),u.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(y,u){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:u}}class L extends j{constructor(u){super(u);const _=E=>{if(E.statusCode===404){const l=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(E);const w=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:m,suggestedLength:r}=(0,T.validateRangeRequestCapabilities)({getResponseHeader:w,isHttp:u.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=r||this._contentLength,this._filename=(0,T.extractFilenameFromHeader)(w)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(f(this._url,u.httpHeaders),_)}else{const E=require$$5;this._request=E.request(f(this._url,u.httpHeaders),_)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class O extends R{constructor(u,_,E){super(u),this._httpHeaders={};for(const m in u.httpHeaders){const r=u.httpHeaders[m];r!==void 0&&(this._httpHeaders[m]=r)}this._httpHeaders.Range=`bytes=${_}-${E-1}`;const w=m=>{if(m.statusCode===404){const r=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=r;return}this._setReadableStream(m)};if(this._request=null,this._url.protocol==="http:"){const m=require$$5;this._request=m.request(f(this._url,this._httpHeaders),w)}else{const m=require$$5;this._request=m.request(f(this._url,this._httpHeaders),w)}this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class P extends j{constructor(u){super(u);let _=decodeURIComponent(this._url.path);nt.test(this._url.href)&&(_=_.replace(/^\//,""));const E=require$$5;E.lstat(_,(w,m)=>{if(w){w.code==="ENOENT"&&(w=new h.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=w,this._headersCapability.reject(w);return}this._contentLength=m.size,this._setReadableStream(E.createReadStream(_)),this._headersCapability.resolve()})}}class v extends R{constructor(u,_,E){super(u);let w=decodeURIComponent(this._url.path);nt.test(this._url.href)&&(w=w.replace(/^\//,""));const m=require$$5;this._setReadableStream(m.createReadStream(w,{start:_,end:E-1}))}}},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.SVGGraphics=void 0;var h=st(6),T=st(1);const nt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},z="http://www.w3.org/XML/1998/namespace",ft="http://www.w3.org/1999/xlink",j=["butt","round","square"],R=["miter","round","bevel"],f=function(m,r="",l=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!l)return URL.createObjectURL(new Blob([m],{type:r}));const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let g=`data:${r};base64,`;for(let a=0,C=m.length;a<C;a+=3){const b=m[a]&255,B=m[a+1]&255,X=m[a+2]&255,x=b>>2,$=(b&3)<<4|B>>4,it=a+1<C?(B&15)<<2|X>>6:64,at=a+2<C?X&63:64;g+=k[x]+k[$]+k[it]+k[at]}return g},L=function(){const m=new Uint8Array([137,80,78,71,13,10,26,10]),r=12,l=new Int32Array(256);for(let X=0;X<256;X++){let x=X;for(let $=0;$<8;$++)x=x&1?3988292384^x>>1&2147483647:x>>1&2147483647;l[X]=x}function k(X,x,$){let it=-1;for(let at=x;at<$;at++){const W=(it^X[at])&255,lt=l[W];it=it>>>8^lt}return it^-1}function g(X,x,$,it){let at=it;const W=x.length;$[at]=W>>24&255,$[at+1]=W>>16&255,$[at+2]=W>>8&255,$[at+3]=W&255,at+=4,$[at]=X.charCodeAt(0)&255,$[at+1]=X.charCodeAt(1)&255,$[at+2]=X.charCodeAt(2)&255,$[at+3]=X.charCodeAt(3)&255,at+=4,$.set(x,at),at+=x.length;const lt=k($,it+4,at);$[at]=lt>>24&255,$[at+1]=lt>>16&255,$[at+2]=lt>>8&255,$[at+3]=lt&255}function a(X,x,$){let it=1,at=0;for(let W=x;W<$;++W)it=(it+(X[W]&255))%65521,at=(at+it)%65521;return at<<16|it}function C(X){if(!T.isNodeJS)return b(X);try{const x=parseInt(process.versions.node)>=8?X:Buffer.from(X),$=require$$5.deflateSync(x,{level:9});return $ instanceof Uint8Array?$:new Uint8Array($)}catch(x){(0,T.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+x)}return b(X)}function b(X){let x=X.length;const $=65535,it=Math.ceil(x/$),at=new Uint8Array(2+x+it*5+4);let W=0;at[W++]=120,at[W++]=156;let lt=0;for(;x>$;)at[W++]=0,at[W++]=255,at[W++]=255,at[W++]=0,at[W++]=0,at.set(X.subarray(lt,lt+$),W),W+=$,lt+=$,x-=$;at[W++]=1,at[W++]=x&255,at[W++]=x>>8&255,at[W++]=~x&65535&255,at[W++]=(~x&65535)>>8&255,at.set(X.subarray(lt),W),W+=X.length-lt;const gt=a(X,0,X.length);return at[W++]=gt>>24&255,at[W++]=gt>>16&255,at[W++]=gt>>8&255,at[W++]=gt&255,at}function B(X,x,$,it){const at=X.width,W=X.height;let lt,gt,xt;const Pt=X.data;switch(x){case T.ImageKind.GRAYSCALE_1BPP:gt=0,lt=1,xt=at+7>>3;break;case T.ImageKind.RGB_24BPP:gt=2,lt=8,xt=at*3;break;case T.ImageKind.RGBA_32BPP:gt=6,lt=8,xt=at*4;break;default:throw new Error("invalid format")}const S=new Uint8Array((1+xt)*W);let i=0,n=0;for(let N=0;N<W;++N)S[i++]=0,S.set(Pt.subarray(n,n+xt),i),n+=xt,i+=xt;if(x===T.ImageKind.GRAYSCALE_1BPP&&it){i=0;for(let N=0;N<W;N++){i++;for(let tt=0;tt<xt;tt++)S[i++]^=255}}const s=new Uint8Array([at>>24&255,at>>16&255,at>>8&255,at&255,W>>24&255,W>>16&255,W>>8&255,W&255,lt,gt,0,0,0]),o=C(S),c=m.length+r*3+s.length+o.length,A=new Uint8Array(c);let F=0;return A.set(m,F),F+=m.length,g("IHDR",s,A,F),F+=r+s.length,g("IDATA",o,A,F),F+=r+o.length,g("IEND",new Uint8Array(0),A,F),f(A,"image/png",$)}return function(x,$,it){const at=x.kind===void 0?T.ImageKind.GRAYSCALE_1BPP:x.kind;return B(x,at,$,it)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=nt.fontWeight,this.fontSize=0,this.textMatrix=T.IDENTITY_MATRIX,this.fontMatrix=T.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=T.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=nt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(r,l){this.x=r,this.y=l}}function P(m){let r=[];const l=[];for(const k of m){if(k.fn==="save"){r.push({fnId:92,fn:"group",items:[]}),l.push(r),r=r.at(-1).items;continue}k.fn==="restore"?r=l.pop():r.push(k)}return r}function v(m){if(Number.isInteger(m))return m.toString();const r=m.toFixed(10);let l=r.length-1;if(r[l]!=="0")return r;do l--;while(r[l]==="0");return r.substring(0,r[l]==="."?l:l+1)}function y(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0)return m[0]===1&&m[3]===1?"":`scale(${v(m[0])} ${v(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){const r=Math.acos(m[0])*180/Math.PI;return`rotate(${v(r)})`}}else if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1)return`translate(${v(m[4])} ${v(m[5])})`;return`matrix(${v(m[0])} ${v(m[1])} ${v(m[2])} ${v(m[3])} ${v(m[4])} ${v(m[5])})`}let u=0,_=0,E=0;class w{constructor(r,l,k=!1){(0,h.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new h.DOMSVGFactory,this.current=new O,this.transformMatrix=T.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!k,this._operatorIdMapping=[];for(const g in T.OPS)this._operatorIdMapping[T.OPS[g]]=g}getObject(r,l=null){return typeof r=="string"?r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r):l}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const l=r.fnArray,k=r.argsArray;for(let g=0,a=l.length;g<a;g++)if(l[g]===T.OPS.dependency)for(const C of k[g]){const b=C.startsWith("g_")?this.commonObjs:this.objs,B=new Promise(X=>{b.get(C,X)});this.current.dependencies.push(B)}return Promise.all(this.current.dependencies)}transform(r,l,k,g,a,C){const b=[r,l,k,g,a,C];this.transformMatrix=T.Util.transform(this.transformMatrix,b),this.tgrp=null}getSVG(r,l){this.viewport=l;const k=this._initialize(l);return this.loadDependencies(r).then(()=>(this.transformMatrix=T.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),k))}convertOpList(r){const l=this._operatorIdMapping,k=r.argsArray,g=r.fnArray,a=[];for(let C=0,b=g.length;C<b;C++){const B=g[C];a.push({fnId:B,fn:l[B],args:k[C]})}return P(a)}executeOpTree(r){for(const l of r){const k=l.fn,g=l.fnId,a=l.args;switch(g|0){case T.OPS.beginText:this.beginText();break;case T.OPS.dependency:break;case T.OPS.setLeading:this.setLeading(a);break;case T.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case T.OPS.setFont:this.setFont(a);break;case T.OPS.showText:this.showText(a[0]);break;case T.OPS.showSpacedText:this.showText(a[0]);break;case T.OPS.endText:this.endText();break;case T.OPS.moveText:this.moveText(a[0],a[1]);break;case T.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case T.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case T.OPS.setHScale:this.setHScale(a[0]);break;case T.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case T.OPS.setTextRise:this.setTextRise(a[0]);break;case T.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case T.OPS.setLineWidth:this.setLineWidth(a[0]);break;case T.OPS.setLineJoin:this.setLineJoin(a[0]);break;case T.OPS.setLineCap:this.setLineCap(a[0]);break;case T.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case T.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case T.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case T.OPS.setStrokeColorN:this.setStrokeColorN(a);break;case T.OPS.setFillColorN:this.setFillColorN(a);break;case T.OPS.shadingFill:this.shadingFill(a[0]);break;case T.OPS.setDash:this.setDash(a[0],a[1]);break;case T.OPS.setRenderingIntent:this.setRenderingIntent(a[0]);break;case T.OPS.setFlatness:this.setFlatness(a[0]);break;case T.OPS.setGState:this.setGState(a[0]);break;case T.OPS.fill:this.fill();break;case T.OPS.eoFill:this.eoFill();break;case T.OPS.stroke:this.stroke();break;case T.OPS.fillStroke:this.fillStroke();break;case T.OPS.eoFillStroke:this.eoFillStroke();break;case T.OPS.clip:this.clip("nonzero");break;case T.OPS.eoClip:this.clip("evenodd");break;case T.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case T.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case T.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case T.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case T.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case T.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case T.OPS.closePath:this.closePath();break;case T.OPS.closeStroke:this.closeStroke();break;case T.OPS.closeFillStroke:this.closeFillStroke();break;case T.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case T.OPS.nextLine:this.nextLine();break;case T.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case T.OPS.constructPath:this.constructPath(a[0],a[1]);break;case T.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,T.warn)(`Unimplemented operator ${k}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,l,k,g,a,C){const b=this.current;b.textMatrix=b.lineMatrix=[r,l,k,g,a,C],b.textMatrixScale=Math.hypot(r,l),b.x=b.lineX=0,b.y=b.lineY=0,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${v(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",v(-b.y)),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtElement.append(b.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=T.IDENTITY_MATRIX,r.lineMatrix=T.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,l){const k=this.current;k.x=k.lineX+=r,k.y=k.lineY+=l,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${v(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",v(-k.y))}showText(r){const l=this.current,k=l.font,g=l.fontSize;if(g===0)return;const a=l.fontSizeScale,C=l.charSpacing,b=l.wordSpacing,B=l.fontDirection,X=l.textHScale*B,x=k.vertical,$=x?1:-1,it=k.defaultVMetrics,at=g*l.fontMatrix[0];let W=0;for(const xt of r){if(xt===null){W+=B*b;continue}else if(typeof xt=="number"){W+=$*xt*g/1e3;continue}const Pt=(xt.isSpace?b:0)+C,S=xt.fontChar;let i,n,s=xt.width;if(x){let c;const A=xt.vmetric||it;c=xt.vmetric?A[1]:s*.5,c=-c*at;const F=A[2]*at;s=A?-A[0]:s,i=c/a,n=(W+F)/a}else i=W/a,n=0;(xt.isInFont||k.missingFile)&&(l.xcoords.push(l.x+i),x&&l.ycoords.push(-l.y+n),l.tspan.textContent+=S);const o=x?s*at-Pt*B:s*at+Pt*B;W+=o}l.tspan.setAttributeNS(null,"x",l.xcoords.map(v).join(" ")),x?l.tspan.setAttributeNS(null,"y",l.ycoords.map(v).join(" ")):l.tspan.setAttributeNS(null,"y",v(-l.y)),x?l.y-=W:l.x+=W*X,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${v(l.fontSize)}px`),l.fontStyle!==nt.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==nt.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const lt=l.textRenderingMode&T.TextRenderingMode.FILL_STROKE_MASK;if(lt===T.TextRenderingMode.FILL||lt===T.TextRenderingMode.FILL_STROKE?(l.fillColor!==nt.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===T.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),lt===T.TextRenderingMode.STROKE||lt===T.TextRenderingMode.FILL_STROKE){const xt=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,xt)}let gt=l.textMatrix;l.textRise!==0&&(gt=gt.slice(),gt[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${y(gt)} scale(${v(X)}, -1)`),l.txtElement.setAttributeNS(z,"xml:space","preserve"),l.txtElement.append(l.tspan),l.txtgrp.append(l.txtElement),this._ensureTransformGroup().append(l.txtElement)}setLeadingMoveText(r,l){this.setLeading(-l),this.moveText(r,l)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const l=f(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${l}); }
`}setFont(r){const l=this.current,k=this.commonObjs.get(r[0]);let g=r[1];l.font=k,this.embedFonts&&!k.missingFile&&!this.embeddedFonts[k.loadedName]&&(this.addFontStyle(k),this.embeddedFonts[k.loadedName]=k),l.fontMatrix=k.fontMatrix||T.FONT_IDENTITY_MATRIX;let a="normal";k.black?a="900":k.bold&&(a="bold");const C=k.italic?"italic":"normal";g<0?(g=-g,l.fontDirection=-1):l.fontDirection=1,l.fontSize=g,l.fontFamily=k.loadedName,l.fontWeight=a,l.fontStyle=C,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",v(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const r=this.current;r.textRenderingMode&T.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=r.txtElement)!=null&&l.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=j[r]}setLineJoin(r){this.current.lineJoin=R[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,l,k){this.current.strokeColor=T.Util.makeHexColor(r,l,k)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,l,k){this.current.fillColor=T.Util.makeHexColor(r,l,k),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const{width:l,height:k}=this.viewport,g=T.Util.inverseTransform(this.transformMatrix),[a,C,b,B]=T.Util.getAxialAlignedBoundingBox([0,0,l,k],g),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",a),X.setAttributeNS(null,"y",C),X.setAttributeNS(null,"width",b-a),X.setAttributeNS(null,"height",B-C),X.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(X)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const l=r[1],k=r[2],g=r[3]||T.IDENTITY_MATRIX,[a,C,b,B]=r[4],X=r[5],x=r[6],$=r[7],it=`shading${E++}`,[at,W,lt,gt]=T.Util.normalizeRect([...T.Util.applyTransform([a,C],g),...T.Util.applyTransform([b,B],g)]),[xt,Pt]=T.Util.singularValueDecompose2dScale(g),S=X*xt,i=x*Pt,n=this.svgFactory.createElement("svg:pattern");n.setAttributeNS(null,"id",it),n.setAttributeNS(null,"patternUnits","userSpaceOnUse"),n.setAttributeNS(null,"width",S),n.setAttributeNS(null,"height",i),n.setAttributeNS(null,"x",`${at}`),n.setAttributeNS(null,"y",`${W}`);const s=this.svg,o=this.transformMatrix,c=this.current.fillColor,A=this.current.strokeColor,F=this.svgFactory.create(lt-at,gt-W);if(this.svg=F,this.transformMatrix=g,$===2){const N=T.Util.makeHexColor(...l);this.current.fillColor=N,this.current.strokeColor=N}return this.executeOpTree(this.convertOpList(k)),this.svg=s,this.transformMatrix=o,this.current.fillColor=c,this.current.strokeColor=A,n.append(F.childNodes[0]),this.defs.append(n),`url(#${it})`}_makeShadingPattern(r){switch(typeof r=="string"&&(r=this.objs.get(r)),r[0]){case"RadialAxial":const l=`shading${E++}`,k=r[3];let g;switch(r[1]){case"axial":const a=r[4],C=r[5];g=this.svgFactory.createElement("svg:linearGradient"),g.setAttributeNS(null,"id",l),g.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),g.setAttributeNS(null,"x1",a[0]),g.setAttributeNS(null,"y1",a[1]),g.setAttributeNS(null,"x2",C[0]),g.setAttributeNS(null,"y2",C[1]);break;case"radial":const b=r[4],B=r[5],X=r[6],x=r[7];g=this.svgFactory.createElement("svg:radialGradient"),g.setAttributeNS(null,"id",l),g.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),g.setAttributeNS(null,"cx",B[0]),g.setAttributeNS(null,"cy",B[1]),g.setAttributeNS(null,"r",x),g.setAttributeNS(null,"fx",b[0]),g.setAttributeNS(null,"fy",b[1]),g.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const a of k){const C=this.svgFactory.createElement("svg:stop");C.setAttributeNS(null,"offset",a[0]),C.setAttributeNS(null,"stop-color",a[1]),g.append(C)}return this.defs.append(g),`url(#${l})`;case"Mesh":return(0,T.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,l){this.current.dashArray=r,this.current.dashPhase=l}constructPath(r,l){const k=this.current;let g=k.x,a=k.y,C=[],b=0;for(const B of r)switch(B|0){case T.OPS.rectangle:g=l[b++],a=l[b++];const X=l[b++],x=l[b++],$=g+X,it=a+x;C.push("M",v(g),v(a),"L",v($),v(a),"L",v($),v(it),"L",v(g),v(it),"Z");break;case T.OPS.moveTo:g=l[b++],a=l[b++],C.push("M",v(g),v(a));break;case T.OPS.lineTo:g=l[b++],a=l[b++],C.push("L",v(g),v(a));break;case T.OPS.curveTo:g=l[b+4],a=l[b+5],C.push("C",v(l[b]),v(l[b+1]),v(l[b+2]),v(l[b+3]),v(g),v(a)),b+=6;break;case T.OPS.curveTo2:C.push("C",v(g),v(a),v(l[b]),v(l[b+1]),v(l[b+2]),v(l[b+3])),g=l[b+2],a=l[b+3],b+=4;break;case T.OPS.curveTo3:g=l[b+2],a=l[b+3],C.push("C",v(l[b]),v(l[b+1]),v(g),v(a),v(g),v(a)),b+=4;break;case T.OPS.closePath:C.push("Z");break}C=C.join(" "),k.path&&r.length>0&&r[0]!==T.OPS.rectangle&&r[0]!==T.OPS.moveTo?C=k.path.getAttributeNS(null,"d")+C:(k.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(k.path)),k.path.setAttributeNS(null,"d",C),k.path.setAttributeNS(null,"fill","none"),k.element=k.path,k.setCurrentPoint(g,a)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const l=`clippath${u++}`,k=this.svgFactory.createElement("svg:clipPath");k.setAttributeNS(null,"id",l),k.setAttributeNS(null,"transform",y(this.transformMatrix));const g=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?g.setAttributeNS(null,"clip-rule","evenodd"):g.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,k.append(g),this.defs.append(k),r.activeClipUrl){r.clipGroup=null;for(const a of this.extraStack)a.clipGroup=null;k.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const l=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",l)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[l,k]of r)switch(l){case"LW":this.setLineWidth(k);break;case"LC":this.setLineCap(k);break;case"LJ":this.setLineJoin(k);break;case"ML":this.setMiterLimit(k);break;case"D":this.setDash(k[0],k[1]);break;case"RI":this.setRenderingIntent(k);break;case"FL":this.setFlatness(k);break;case"Font":this.setFont(k);break;case"CA":this.setStrokeAlpha(k);break;case"ca":this.setFillAlpha(k);break;default:(0,T.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,l=1){const k=this.current;let g=k.dashArray;l!==1&&g.length>0&&(g=g.map(function(a){return l*a})),r.setAttributeNS(null,"stroke",k.strokeColor),r.setAttributeNS(null,"stroke-opacity",k.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",v(k.miterLimit)),r.setAttributeNS(null,"stroke-linecap",k.lineCap),r.setAttributeNS(null,"stroke-linejoin",k.lineJoin),r.setAttributeNS(null,"stroke-width",v(l*k.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",g.map(v).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",v(l*k.dashPhase)+"px")}eoFill(){var r;(r=this.current.element)==null||r.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var r;(r=this.current.element)==null||r.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(r)}paintImageXObject(r){const l=this.getObject(r);if(!l){(0,T.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(r,l){const k=r.width,g=r.height,a=L(r,this.forceDataSchema,!!l),C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y","0"),C.setAttributeNS(null,"width",v(k)),C.setAttributeNS(null,"height",v(g)),this.current.element=C,this.clip("nonzero");const b=this.svgFactory.createElement("svg:image");b.setAttributeNS(ft,"xlink:href",a),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y",v(-g)),b.setAttributeNS(null,"width",v(k)+"px"),b.setAttributeNS(null,"height",v(g)+"px"),b.setAttributeNS(null,"transform",`scale(${v(1/k)} ${v(-1/g)})`),l?l.append(b):this._ensureTransformGroup().append(b)}paintImageMaskXObject(r){const l=this.getObject(r.data,r);if(l.bitmap){(0,T.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const k=this.current,g=l.width,a=l.height,C=k.fillColor;k.maskId=`mask${_++}`;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",k.maskId);const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",v(g)),B.setAttributeNS(null,"height",v(a)),B.setAttributeNS(null,"fill",C),B.setAttributeNS(null,"mask",`url(#${k.maskId})`),this.defs.append(b),this._ensureTransformGroup().append(B),this.paintInlineImageXObject(l,b)}paintFormXObjectBegin(r,l){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),l){const k=l[2]-l[0],g=l[3]-l[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",l[0]),a.setAttributeNS(null,"y",l[1]),a.setAttributeNS(null,"width",v(k)),a.setAttributeNS(null,"height",v(g)),this.current.element=a,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const l=this.svgFactory.create(r.width,r.height),k=this.svgFactory.createElement("svg:defs");l.append(k),this.defs=k;const g=this.svgFactory.createElement("svg:g");return g.setAttributeNS(null,"transform",y(r.transform)),l.append(g),this.svg=g,l}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",y(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}d.SVGGraphics=w},(pt,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaText=void 0;class st{static textContent(T){const nt=[],z={items:nt,styles:Object.create(null)};function ft(j){var L;if(!j)return;let R=null;const f=j.name;if(f==="#text")R=j.value;else if(st.shouldBuildText(f))(L=j==null?void 0:j.attributes)!=null&&L.textContent?R=j.attributes.textContent:j.value&&(R=j.value);else return;if(R!==null&&nt.push({str:R}),!!j.children)for(const O of j.children)ft(O)}return ft(T),z}static shouldBuildText(T){return!(T==="textarea"||T==="input"||T==="option"||T==="select")}}d.XfaText=st},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextLayerRenderTask=void 0,d.renderTextLayer=y,d.updateTextLayer=u;var h=st(1),T=st(6);const nt=1e5,z=30,ft=.8,j=new Map;function R(_,E){let w;if(E&&h.FeatureTest.isOffscreenCanvasSupported)w=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const m=document.createElement("canvas");m.width=m.height=_,w=m.getContext("2d",{alpha:!1})}return w}function f(_,E){const w=j.get(_);if(w)return w;const m=R(z,E);m.font=`${z}px ${_}`;const r=m.measureText("");let l=r.fontBoundingBoxAscent,k=Math.abs(r.fontBoundingBoxDescent);if(l){const a=l/(l+k);return j.set(_,a),m.canvas.width=m.canvas.height=0,a}m.strokeStyle="red",m.clearRect(0,0,z,z),m.strokeText("g",0,0);let g=m.getImageData(0,0,z,z).data;k=0;for(let a=g.length-1-3;a>=0;a-=4)if(g[a]>0){k=Math.ceil(a/4/z);break}m.clearRect(0,0,z,z),m.strokeText("A",0,z),g=m.getImageData(0,0,z,z).data,l=0;for(let a=0,C=g.length;a<C;a+=4)if(g[a]>0){l=z-Math.floor(a/4/z);break}if(m.canvas.width=m.canvas.height=0,l){const a=l/(l+k);return j.set(_,a),a}return j.set(_,ft),ft}function L(_,E,w){const m=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};_._textDivs.push(m);const l=h.Util.transform(_._transform,E.transform);let k=Math.atan2(l[1],l[0]);const g=w[E.fontName];g.vertical&&(k+=Math.PI/2);const a=Math.hypot(l[2],l[3]),C=a*f(g.fontFamily,_._isOffscreenCanvasSupported);let b,B;k===0?(b=l[4],B=l[5]-C):(b=l[4]+C*Math.sin(k),B=l[5]-C*Math.cos(k));const X="calc(var(--scale-factor)*",x=m.style;_._container===_._rootContainer?(x.left=`${(100*b/_._pageWidth).toFixed(2)}%`,x.top=`${(100*B/_._pageHeight).toFixed(2)}%`):(x.left=`${X}${b.toFixed(2)}px)`,x.top=`${X}${B.toFixed(2)}px)`),x.fontSize=`${X}${a.toFixed(2)}px)`,x.fontFamily=g.fontFamily,r.fontSize=a,m.setAttribute("role","presentation"),m.textContent=E.str,m.dir=E.dir,_._fontInspectorEnabled&&(m.dataset.fontName=E.fontName),k!==0&&(r.angle=k*(180/Math.PI));let $=!1;if(E.str.length>1)$=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){const it=Math.abs(E.transform[0]),at=Math.abs(E.transform[3]);it!==at&&Math.max(it,at)/Math.min(it,at)>1.5&&($=!0)}$&&(r.canvasWidth=g.vertical?E.height:E.width),_._textDivProperties.set(m,r),_._isReadableStream&&_._layoutText(m)}function O(_){const{div:E,scale:w,properties:m,ctx:r,prevFontSize:l,prevFontFamily:k}=_,{style:g}=E;let a="";if(m.canvasWidth!==0&&m.hasText){const{fontFamily:C}=g,{canvasWidth:b,fontSize:B}=m;(l!==B||k!==C)&&(r.font=`${B*w}px ${C}`,_.prevFontSize=B,_.prevFontFamily=C);const{width:X}=r.measureText(E.textContent);X>0&&(a=`scaleX(${b*w/X})`)}m.angle!==0&&(a=`rotate(${m.angle}deg) ${a}`),a.length>0&&(g.transform=a)}function P(_){if(_._canceled)return;const E=_._textDivs,w=_._capability;if(E.length>nt){w.resolve();return}if(!_._isReadableStream)for(const r of E)_._layoutText(r);w.resolve()}class v{constructor({textContentSource:E,container:w,viewport:m,textDivs:r,textDivProperties:l,textContentItemsStr:k,isOffscreenCanvasSupported:g}){var X;this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=w,this._textDivs=r||[],this._textContentItemsStr=k||[],this._isOffscreenCanvasSupported=g,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=l||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:R(0,g)};const{pageWidth:a,pageHeight:C,pageX:b,pageY:B}=m.rawDims;this._transform=[1,0,0,-1,-b,B+C],this._pageWidth=a,this._pageHeight=C,(0,T.setLayerDimensions)(w,m),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(E,w){for(const m of E){if(m.str===void 0){if(m.type==="beginMarkedContentProps"||m.type==="beginMarkedContent"){const r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),m.id!==null&&this._container.setAttribute("id",`${m.id}`),r.append(this._container)}else m.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(m.str),L(this,m,w)}}_layoutText(E){const w=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,O(this._layoutTextParams),w.hasText&&this._container.append(E),w.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(){const E=new h.PromiseCapability;let w=Object.create(null);if(this._isReadableStream){const m=()=>{this._reader.read().then(({value:r,done:l})=>{if(l){E.resolve();return}Object.assign(w,r.styles),this._processItems(r.items,w),m()},E.reject)};this._reader=this._textContentSource.getReader(),m()}else if(this._textContentSource){const{items:m,styles:r}=this._textContentSource;this._processItems(m,r),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{w=null,P(this)},this._capability.reject)}}d.TextLayerRenderTask=v;function y(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,T.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:E,viewport:w}=_,m=getComputedStyle(E),r=m.getPropertyValue("visibility"),l=parseFloat(m.getPropertyValue("--scale-factor"));r==="visible"&&(!l||Math.abs(l-w.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const k=new v(_);return k._render(),k}function u({container:_,viewport:E,textDivs:w,textDivProperties:m,isOffscreenCanvasSupported:r,mustRotate:l=!0,mustRescale:k=!0}){if(l&&(0,T.setLayerDimensions)(_,{rotation:E.rotation}),k){const g=R(0,r),C={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g};for(const b of w)C.properties=m.get(b),C.div=b,O(C)}}},(pt,d,st)=>{var f,L,O,P,v,y,u,_,E,w,m,ei,l,ke,g,ii,C,si;Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationEditorLayer=void 0;var h=st(1),T=st(4),nt=st(28),z=st(33),ft=st(6),j=st(34);const B=class B{constructor({uiManager:x,pageIndex:$,div:it,accessibilityManager:at,annotationLayer:W,viewport:lt,l10n:gt}){I(this,m);I(this,l);I(this,g);I(this,C);I(this,f,void 0);I(this,L,!1);I(this,O,null);I(this,P,this.pointerup.bind(this));I(this,v,this.pointerdown.bind(this));I(this,y,new Map);I(this,u,!1);I(this,_,!1);I(this,E,!1);I(this,w,void 0);const xt=[nt.FreeTextEditor,z.InkEditor,j.StampEditor];if(!B._initialized){B._initialized=!0;for(const Pt of xt)Pt.initialize(gt)}x.registerEditorTypes(xt),Z(this,w,x),this.pageIndex=$,this.div=it,Z(this,f,at),Z(this,O,W),this.viewport=lt,t(this,w).addLayer(this)}get isEmpty(){return t(this,y).size===0}updateToolbar(x){t(this,w).updateToolbar(x)}updateMode(x=t(this,w).getMode()){H(this,C,si).call(this),x===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),x!==h.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",x===h.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",x===h.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",x===h.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(x){if(!x&&t(this,w).getMode()!==h.AnnotationEditorType.INK)return;if(!x){for(const it of t(this,y).values())if(it.isEmpty()){it.setInBackground();return}}H(this,l,ke).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(x){t(this,w).setEditingState(x)}addCommands(x){t(this,w).addCommands(x)}enable(){this.div.style.pointerEvents="auto";const x=new Set;for(const it of t(this,y).values())it.enableEditing(),it.annotationElementId&&x.add(it.annotationElementId);if(!t(this,O))return;const $=t(this,O).getEditableAnnotations();for(const it of $){if(it.hide(),t(this,w).isDeletedAnnotationElement(it.data.id)||x.has(it.data.id))continue;const at=this.deserialize(it);at&&(this.addOrRebuild(at),at.enableEditing())}}disable(){var $;Z(this,E,!0),this.div.style.pointerEvents="none";const x=new Set;for(const it of t(this,y).values()){if(it.disableEditing(),!it.annotationElementId||it.serialize()!==null){x.add(it.annotationElementId);continue}($=this.getEditableAnnotation(it.annotationElementId))==null||$.show(),it.remove()}if(t(this,O)){const it=t(this,O).getEditableAnnotations();for(const at of it){const{id:W}=at.data;x.has(W)||t(this,w).isDeletedAnnotationElement(W)||at.show()}}H(this,C,si).call(this),this.isEmpty&&(this.div.hidden=!0),Z(this,E,!1)}getEditableAnnotation(x){var $;return(($=t(this,O))==null?void 0:$.getEditableAnnotation(x))||null}setActiveEditor(x){t(this,w).getActive()!==x&&t(this,w).setActiveEditor(x)}enableClick(){this.div.addEventListener("pointerdown",t(this,v)),this.div.addEventListener("pointerup",t(this,P))}disableClick(){this.div.removeEventListener("pointerdown",t(this,v)),this.div.removeEventListener("pointerup",t(this,P))}attach(x){t(this,y).set(x.id,x);const{annotationElementId:$}=x;$&&t(this,w).isDeletedAnnotationElement($)&&t(this,w).removeDeletedAnnotationElement(x)}detach(x){var $;t(this,y).delete(x.id),($=t(this,f))==null||$.removePointerInTextLayer(x.contentDiv),!t(this,E)&&x.annotationElementId&&t(this,w).addDeletedAnnotationElement(x)}remove(x){this.detach(x),t(this,w).removeEditor(x),x.div.contains(document.activeElement)&&setTimeout(()=>{t(this,w).focusMainContainer()},0),x.div.remove(),x.isAttachedToDOM=!1,t(this,_)||this.addInkEditorIfNeeded(!1)}changeParent(x){var $;x.parent!==this&&(x.annotationElementId&&(t(this,w).addDeletedAnnotationElement(x.annotationElementId),T.AnnotationEditor.deleteAnnotationElement(x),x.annotationElementId=null),this.attach(x),($=x.parent)==null||$.detach(x),x.setParent(this),x.div&&x.isAttachedToDOM&&(x.div.remove(),this.div.append(x.div)))}add(x){if(this.changeParent(x),t(this,w).addEditor(x),this.attach(x),!x.isAttachedToDOM){const $=x.render();this.div.append($),x.isAttachedToDOM=!0}x.fixAndSetPosition(),x.onceAdded(),t(this,w).addToAnnotationStorage(x)}moveEditorInDOM(x){var it;if(!x.isAttachedToDOM)return;const{activeElement:$}=document;x.div.contains($)&&(x._focusEventsAllowed=!1,setTimeout(()=>{x.div.contains(document.activeElement)?x._focusEventsAllowed=!0:(x.div.addEventListener("focusin",()=>{x._focusEventsAllowed=!0},{once:!0}),$.focus())},0)),x._structTreeParentId=(it=t(this,f))==null?void 0:it.moveElementInDOM(this.div,x.div,x.contentDiv,!0)}addOrRebuild(x){x.needsToBeRebuilt()?x.rebuild():this.add(x)}addUndoableEditor(x){const $=()=>x._uiManager.rebuild(x),it=()=>{x.remove()};this.addCommands({cmd:$,undo:it,mustExec:!1})}getNextId(){return t(this,w).getId()}pasteEditor(x,$){t(this,w).updateToolbar(x),t(this,w).updateMode(x);const{offsetX:it,offsetY:at}=H(this,g,ii).call(this),W=this.getNextId(),lt=H(this,m,ei).call(this,{parent:this,id:W,x:it,y:at,uiManager:t(this,w),isCentered:!0,...$});lt&&this.add(lt)}deserialize(x){switch(x.annotationType??x.annotationEditorType){case h.AnnotationEditorType.FREETEXT:return nt.FreeTextEditor.deserialize(x,this,t(this,w));case h.AnnotationEditorType.INK:return z.InkEditor.deserialize(x,this,t(this,w));case h.AnnotationEditorType.STAMP:return j.StampEditor.deserialize(x,this,t(this,w))}return null}addNewEditor(){H(this,l,ke).call(this,H(this,g,ii).call(this),!0)}setSelected(x){t(this,w).setSelected(x)}toggleSelected(x){t(this,w).toggleSelected(x)}isSelected(x){return t(this,w).isSelected(x)}unselect(x){t(this,w).unselect(x)}pointerup(x){const{isMac:$}=h.FeatureTest.platform;if(!(x.button!==0||x.ctrlKey&&$)&&x.target===this.div&&t(this,u)){if(Z(this,u,!1),!t(this,L)){Z(this,L,!0);return}if(t(this,w).getMode()===h.AnnotationEditorType.STAMP){t(this,w).unselectAll();return}H(this,l,ke).call(this,x,!1)}}pointerdown(x){if(t(this,u)){Z(this,u,!1);return}const{isMac:$}=h.FeatureTest.platform;if(x.button!==0||x.ctrlKey&&$||x.target!==this.div)return;Z(this,u,!0);const it=t(this,w).getActive();Z(this,L,!it||it.isEmpty())}findNewParent(x,$,it){const at=t(this,w).findParent($,it);return at===null||at===this?!1:(at.changeParent(x),!0)}destroy(){var x,$;((x=t(this,w).getActive())==null?void 0:x.parent)===this&&(t(this,w).commitOrRemove(),t(this,w).setActiveEditor(null));for(const it of t(this,y).values())($=t(this,f))==null||$.removePointerInTextLayer(it.contentDiv),it.setParent(null),it.isAttachedToDOM=!1,it.div.remove();this.div=null,t(this,y).clear(),t(this,w).removeLayer(this)}render({viewport:x}){this.viewport=x,(0,ft.setLayerDimensions)(this.div,x);for(const $ of t(this,w).getEditors(this.pageIndex))this.add($);this.updateMode()}update({viewport:x}){t(this,w).commitOrRemove(),this.viewport=x,(0,ft.setLayerDimensions)(this.div,{rotation:x.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:x,pageHeight:$}=this.viewport.rawDims;return[x,$]}};f=new WeakMap,L=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakMap,_=new WeakMap,E=new WeakMap,w=new WeakMap,m=new WeakSet,ei=function(x){switch(t(this,w).getMode()){case h.AnnotationEditorType.FREETEXT:return new nt.FreeTextEditor(x);case h.AnnotationEditorType.INK:return new z.InkEditor(x);case h.AnnotationEditorType.STAMP:return new j.StampEditor(x)}return null},l=new WeakSet,ke=function(x,$){const it=this.getNextId(),at=H(this,m,ei).call(this,{parent:this,id:it,x:x.offsetX,y:x.offsetY,uiManager:t(this,w),isCentered:$});return at&&this.add(at),at},g=new WeakSet,ii=function(){const{x,y:$,width:it,height:at}=this.div.getBoundingClientRect(),W=Math.max(0,x),lt=Math.max(0,$),gt=Math.min(window.innerWidth,x+it),xt=Math.min(window.innerHeight,$+at),Pt=(W+gt)/2-x,S=(lt+xt)/2-$,[i,n]=this.viewport.rotation%180===0?[Pt,S]:[S,Pt];return{offsetX:i,offsetY:n}},C=new WeakSet,si=function(){Z(this,_,!0);for(const x of t(this,y).values())x.isEmpty()&&x.remove();Z(this,_,!1)},ee(B,"_initialized",!1);let R=B;d.AnnotationEditorLayer=R},(pt,d,st)=>{var j,R,f,L,O,P,v,y,u,_,Ri,w,Fi,r,Mi,k,ye,a,ni,b,Di,X,ri;Object.defineProperty(d,"__esModule",{value:!0}),d.FreeTextEditor=void 0;var h=st(1),T=st(5),nt=st(4),z=st(29);const $=class $ extends nt.AnnotationEditor{constructor(W){super({...W,name:"freeTextEditor"});I(this,_);I(this,w);I(this,r);I(this,k);I(this,a);I(this,b);I(this,X);I(this,j,this.editorDivBlur.bind(this));I(this,R,this.editorDivFocus.bind(this));I(this,f,this.editorDivInput.bind(this));I(this,L,this.editorDivKeydown.bind(this));I(this,O,void 0);I(this,P,"");I(this,v,`${this.id}-editor`);I(this,y,void 0);I(this,u,null);Z(this,O,W.color||$._defaultColor||nt.AnnotationEditor._defaultLineColor),Z(this,y,W.fontSize||$._defaultFontSize)}static get _keyboardManager(){const W=$.prototype,lt=Pt=>Pt.isEmpty(),gt=T.AnnotationEditorUIManager.TRANSLATE_SMALL,xt=T.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new T.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],W.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],W.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],W._translateEmpty,{args:[-gt,0],checker:lt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],W._translateEmpty,{args:[-xt,0],checker:lt}],[["ArrowRight","mac+ArrowRight"],W._translateEmpty,{args:[gt,0],checker:lt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],W._translateEmpty,{args:[xt,0],checker:lt}],[["ArrowUp","mac+ArrowUp"],W._translateEmpty,{args:[0,-gt],checker:lt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],W._translateEmpty,{args:[0,-xt],checker:lt}],[["ArrowDown","mac+ArrowDown"],W._translateEmpty,{args:[0,gt],checker:lt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],W._translateEmpty,{args:[0,xt],checker:lt}]]))}static initialize(W){nt.AnnotationEditor.initialize(W,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const lt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(lt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(W,lt){switch(W){case h.AnnotationEditorParamsType.FREETEXT_SIZE:$._defaultFontSize=lt;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:$._defaultColor=lt;break}}updateParams(W,lt){switch(W){case h.AnnotationEditorParamsType.FREETEXT_SIZE:H(this,_,Ri).call(this,lt);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:H(this,w,Fi).call(this,lt);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,$._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,$._defaultColor||nt.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,y)],[h.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,O)]]}_translateEmpty(W,lt){this._uiManager.translateSelectedEditors(W,lt,!0)}getInitialTranslation(){const W=this.parentScale;return[-$._internalPadding*W,-($._internalPadding+t(this,y))*W]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,L)),this.editorDiv.addEventListener("focus",t(this,R)),this.editorDiv.addEventListener("blur",t(this,j)),this.editorDiv.addEventListener("input",t(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,v)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,L)),this.editorDiv.removeEventListener("focus",t(this,R)),this.editorDiv.removeEventListener("blur",t(this,j)),this.editorDiv.removeEventListener("input",t(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(W){this._focusEventsAllowed&&(super.focusin(W),W.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var W;if(this.width){H(this,X,ri).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(W=this._initialOptions)!=null&&W.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const W=t(this,P),lt=Z(this,P,H(this,r,Mi).call(this).trimEnd());if(W===lt)return;const gt=xt=>{if(Z(this,P,xt),!xt){this.remove();return}H(this,a,ni).call(this),this._uiManager.rebuild(this),H(this,k,ye).call(this)};this.addCommands({cmd:()=>{gt(lt)},undo:()=>{gt(W)},mustExec:!1}),H(this,k,ye).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(W){this.enterInEditMode()}keydown(W){W.target===this.div&&W.key==="Enter"&&(this.enterInEditMode(),W.preventDefault())}editorDivKeydown(W){$._keyboardManager.exec(this,W)}editorDivFocus(W){this.isEditing=!0}editorDivBlur(W){this.isEditing=!1}editorDivInput(W){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let W,lt;this.width&&(W=this.x,lt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,v)),this.enableEditing(),nt.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(xt=>{var Pt;return(Pt=this.editorDiv)==null?void 0:Pt.setAttribute("aria-label",xt)}),nt.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(xt=>{var Pt;return(Pt=this.editorDiv)==null?void 0:Pt.setAttribute("default-content",xt)}),this.editorDiv.contentEditable=!0;const{style:gt}=this.editorDiv;if(gt.fontSize=`calc(${t(this,y)}px * var(--scale-factor))`,gt.color=t(this,O),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,T.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[xt,Pt]=this.parentDimensions;if(this.annotationElementId){const{position:S}=t(this,u);let[i,n]=this.getInitialTranslation();[i,n]=this.pageTranslationToScreen(i,n);const[s,o]=this.pageDimensions,[c,A]=this.pageTranslation;let F,N;switch(this.rotation){case 0:F=W+(S[0]-c)/s,N=lt+this.height-(S[1]-A)/o;break;case 90:F=W+(S[0]-c)/s,N=lt-(S[1]-A)/o,[i,n]=[n,-i];break;case 180:F=W-this.width+(S[0]-c)/s,N=lt-(S[1]-A)/o,[i,n]=[-i,-n];break;case 270:F=W+(S[0]-c-this.height*o)/s,N=lt+(S[1]-A-this.width*s)/o,[i,n]=[-n,i];break}this.setAt(F*xt,N*Pt,i,n)}else this.setAt(W*xt,lt*Pt,this.width*xt,this.height*Pt);H(this,a,ni).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(W,lt,gt){let xt=null;if(W instanceof z.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:S,fontColor:i},rect:n,rotation:s,id:o},textContent:c,textPosition:A,parent:{page:{pageNumber:F}}}=W;if(!c||c.length===0)return null;xt=W={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:S,value:c.join(`
`),position:A,pageIndex:F-1,rect:n,rotation:s,id:o,deleted:!1}}const Pt=super.deserialize(W,lt,gt);return Z(Pt,y,W.fontSize),Z(Pt,O,h.Util.makeHexColor(...W.color)),Z(Pt,P,W.value),Pt.annotationElementId=W.id||null,Z(Pt,u,xt),Pt}serialize(W=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const lt=$._internalPadding*this.parentScale,gt=this.getRect(lt,lt),xt=nt.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,O)),Pt={annotationType:h.AnnotationEditorType.FREETEXT,color:xt,fontSize:t(this,y),value:t(this,P),pageIndex:this.pageIndex,rect:gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return W?Pt:this.annotationElementId&&!H(this,b,Di).call(this,Pt)?null:(Pt.id=this.annotationElementId,Pt)}};j=new WeakMap,R=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakMap,_=new WeakSet,Ri=function(W){const lt=xt=>{this.editorDiv.style.fontSize=`calc(${xt}px * var(--scale-factor))`,this.translate(0,-(xt-t(this,y))*this.parentScale),Z(this,y,xt),H(this,k,ye).call(this)},gt=t(this,y);this.addCommands({cmd:()=>{lt(W)},undo:()=>{lt(gt)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Fi=function(W){const lt=t(this,O);this.addCommands({cmd:()=>{Z(this,O,this.editorDiv.style.color=W)},undo:()=>{Z(this,O,this.editorDiv.style.color=lt)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,Mi=function(){const W=this.editorDiv.getElementsByTagName("div");if(W.length===0)return this.editorDiv.innerText;const lt=[];for(const gt of W)lt.push(gt.innerText.replace(/\r\n?|\n/,""));return lt.join(`
`)},k=new WeakSet,ye=function(){const[W,lt]=this.parentDimensions;let gt;if(this.isAttachedToDOM)gt=this.div.getBoundingClientRect();else{const{currentLayer:xt,div:Pt}=this,S=Pt.style.display;Pt.style.display="hidden",xt.div.append(this.div),gt=Pt.getBoundingClientRect(),Pt.remove(),Pt.style.display=S}this.rotation%180===this.parentRotation%180?(this.width=gt.width/W,this.height=gt.height/lt):(this.width=gt.height/W,this.height=gt.width/lt),this.fixAndSetPosition()},a=new WeakSet,ni=function(){if(this.editorDiv.replaceChildren(),!!t(this,P))for(const W of t(this,P).split(`
`)){const lt=document.createElement("div");lt.append(W?document.createTextNode(W):document.createElement("br")),this.editorDiv.append(lt)}},b=new WeakSet,Di=function(W){const{value:lt,fontSize:gt,color:xt,rect:Pt,pageIndex:S}=t(this,u);return W.value!==lt||W.fontSize!==gt||W.rect.some((i,n)=>Math.abs(i-Pt[n])>=1)||W.color.some((i,n)=>i!==xt[n])||W.pageIndex!==S},X=new WeakSet,ri=function(W=!1){if(!this.annotationElementId)return;if(H(this,k,ye).call(this),!W&&(this.width===0||this.height===0)){setTimeout(()=>H(this,X,ri).call(this,!0),0);return}const lt=$._internalPadding*this.parentScale;t(this,u).rect=this.getRect(lt,lt)},ee($,"_freeTextDefaultContent",""),ee($,"_internalPadding",0),ee($,"_defaultColor",null),ee($,"_defaultFontSize",10),ee($,"_type","freetext");let ft=$;d.FreeTextEditor=ft},(pt,d,st)=>{var n,o,ce,A,Ii,N,tt,Q,rt,ct,yt,dt,Rt,jt,St,Dt,ut,K,J,ht,Et,wt,Ut,Li,Wt,Re,$t,ai,qt,oi,Y,G,bt,At,te,Zt,q,li,Lt,Ct,Ot,Nt,Oi,_t,ci;Object.defineProperty(d,"__esModule",{value:!0}),d.StampAnnotationElement=d.InkAnnotationElement=d.FreeTextAnnotationElement=d.AnnotationLayer=void 0;var h=st(1),T=st(6),nt=st(3),z=st(30),ft=st(31),j=st(32);const R=1e3,f=9,L=new WeakSet;function O(It){return{width:It[2]-It[0],height:It[3]-It[1]}}class P{static create(M){switch(M.data.annotationType){case h.AnnotationType.LINK:return new y(M);case h.AnnotationType.TEXT:return new u(M);case h.AnnotationType.WIDGET:switch(M.data.fieldType){case"Tx":return new E(M);case"Btn":return M.data.radioButton?new r(M):M.data.checkBox?new m(M):new l(M);case"Ch":return new k(M);case"Sig":return new w(M)}return new _(M);case h.AnnotationType.POPUP:return new g(M);case h.AnnotationType.FREETEXT:return new C(M);case h.AnnotationType.LINE:return new b(M);case h.AnnotationType.SQUARE:return new B(M);case h.AnnotationType.CIRCLE:return new X(M);case h.AnnotationType.POLYLINE:return new x(M);case h.AnnotationType.CARET:return new it(M);case h.AnnotationType.INK:return new at(M);case h.AnnotationType.POLYGON:return new $(M);case h.AnnotationType.HIGHLIGHT:return new W(M);case h.AnnotationType.UNDERLINE:return new lt(M);case h.AnnotationType.SQUIGGLY:return new gt(M);case h.AnnotationType.STRIKEOUT:return new xt(M);case h.AnnotationType.STAMP:return new Pt(M);case h.AnnotationType.FILEATTACHMENT:return new S(M);default:return new v(M)}}}const s=class s{constructor(M,{isRenderable:e=!1,ignoreBorder:p=!1,createQuadrilaterals:D=!1}={}){I(this,n,!1);this.isRenderable=e,this.data=M.data,this.layer=M.layer,this.linkService=M.linkService,this.downloadManager=M.downloadManager,this.imageResourcesPath=M.imageResourcesPath,this.renderForms=M.renderForms,this.svgFactory=M.svgFactory,this.annotationStorage=M.annotationStorage,this.enableScripting=M.enableScripting,this.hasJSActions=M.hasJSActions,this._fieldObjects=M.fieldObjects,this.parent=M.parent,e&&(this.container=this._createContainer(p)),D&&this._createQuadrilaterals()}static _hasPopupData({titleObj:M,contentsObj:e,richText:p}){return!!(M!=null&&M.str||e!=null&&e.str||p!=null&&p.str)}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(M){const{data:e,parent:{page:p,viewport:D}}=this,U=document.createElement("section");U.setAttribute("data-annotation-id",e.id),this instanceof _||(U.tabIndex=R),U.style.zIndex=this.parent.zIndex++,this.data.popupRef&&U.setAttribute("aria-haspopup","dialog"),e.noRotate&&U.classList.add("norotate");const{pageWidth:V,pageHeight:et,pageX:mt,pageY:kt}=D.rawDims;if(!e.rect||this instanceof g){const{rotation:Bt}=e;return!e.hasOwnCanvas&&Bt!==0&&this.setRotation(Bt,U),U}const{width:Tt,height:Gt}=O(e.rect),Ft=h.Util.normalizeRect([e.rect[0],p.view[3]-e.rect[1]+p.view[1],e.rect[2],p.view[3]-e.rect[3]+p.view[1]]);if(!M&&e.borderStyle.width>0){U.style.borderWidth=`${e.borderStyle.width}px`;const Bt=e.borderStyle.horizontalCornerRadius,Vt=e.borderStyle.verticalCornerRadius;if(Bt>0||Vt>0){const Qt=`calc(${Bt}px * var(--scale-factor)) / calc(${Vt}px * var(--scale-factor))`;U.style.borderRadius=Qt}else if(this instanceof r){const Qt=`calc(${Tt}px * var(--scale-factor)) / calc(${Gt}px * var(--scale-factor))`;U.style.borderRadius=Qt}switch(e.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:U.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:U.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:U.style.borderBottomStyle="solid";break}const Kt=e.borderColor||null;Kt?(Z(this,n,!0),U.style.borderColor=h.Util.makeHexColor(Kt[0]|0,Kt[1]|0,Kt[2]|0)):U.style.borderWidth=0}U.style.left=`${100*(Ft[0]-mt)/V}%`,U.style.top=`${100*(Ft[1]-kt)/et}%`;const{rotation:Mt}=e;return e.hasOwnCanvas||Mt===0?(U.style.width=`${100*Tt/V}%`,U.style.height=`${100*Gt/et}%`):this.setRotation(Mt,U),U}setRotation(M,e=this.container){if(!this.data.rect)return;const{pageWidth:p,pageHeight:D}=this.parent.viewport.rawDims,{width:U,height:V}=O(this.data.rect);let et,mt;M%180===0?(et=100*U/p,mt=100*V/D):(et=100*V/p,mt=100*U/D),e.style.width=`${et}%`,e.style.height=`${mt}%`,e.setAttribute("data-main-rotation",(360-M)%360)}get _commonActions(){const M=(e,p,D)=>{const U=D.detail[e],V=U[0],et=U.slice(1);D.target.style[p]=z.ColorConverters[`${V}_HTML`](et),this.annotationStorage.setValue(this.data.id,{[p]:z.ColorConverters[`${V}_rgb`](et)})};return(0,h.shadow)(this,"_commonActions",{display:e=>{const{display:p}=e.detail,D=p%2===1;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:D,noPrint:p===1||p===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:p}=e.detail;this.container.style.visibility=p?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:p,noView:p})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{M("bgColor","backgroundColor",e)},fillColor:e=>{M("fillColor","backgroundColor",e)},fgColor:e=>{M("fgColor","color",e)},textColor:e=>{M("textColor","color",e)},borderColor:e=>{M("borderColor","borderColor",e)},strokeColor:e=>{M("strokeColor","borderColor",e)},rotation:e=>{const p=e.detail.rotation;this.setRotation(p),this.annotationStorage.setValue(this.data.id,{rotation:p})}})}_dispatchEventFromSandbox(M,e){const p=this._commonActions;for(const D of Object.keys(e.detail)){const U=M[D]||p[D];U==null||U(e)}}_setDefaultPropertiesFromJS(M){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const p=this._commonActions;for(const[D,U]of Object.entries(e)){const V=p[D];if(V){const et={detail:{[D]:U},target:M};V(et),delete e[D]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:M}=this.data;if(!M)return;const[e,p,D,U]=this.data.rect;if(M.length===1){const[,{x:Vt,y:Kt},{x:Qt,y:se}]=M[0];if(D===Vt&&U===Kt&&e===Qt&&p===se)return}const{style:V}=this.container;let et;if(t(this,n)){const{borderColor:Vt,borderWidth:Kt}=V;V.borderWidth=0,et=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Vt}" stroke-width="${Kt}">`],this.container.classList.add("hasBorder")}const mt=D-e,kt=U-p,{svgFactory:Tt}=this,Gt=Tt.createElement("svg");Gt.classList.add("quadrilateralsContainer"),Gt.setAttribute("width",0),Gt.setAttribute("height",0);const Ft=Tt.createElement("defs");Gt.append(Ft);const Mt=Tt.createElement("clipPath"),Bt=`clippath_${this.data.id}`;Mt.setAttribute("id",Bt),Mt.setAttribute("clipPathUnits","objectBoundingBox"),Ft.append(Mt);for(const[,{x:Vt,y:Kt},{x:Qt,y:se}]of M){const ie=Tt.createElement("rect"),ne=(Qt-e)/mt,oe=(U-Kt)/kt,le=(Vt-Qt)/mt,_i=(Kt-se)/kt;ie.setAttribute("x",ne),ie.setAttribute("y",oe),ie.setAttribute("width",le),ie.setAttribute("height",_i),Mt.append(ie),et==null||et.push(`<rect vector-effect="non-scaling-stroke" x="${ne}" y="${oe}" width="${le}" height="${_i}"/>`)}t(this,n)&&(et.push("</g></svg>')"),V.backgroundImage=et.join("")),this.container.append(Gt),this.container.style.clipPath=`url(#${Bt})`}_createPopup(){const{container:M,data:e}=this;M.setAttribute("aria-haspopup","dialog");const p=new g({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(p.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(M,e=null){const p=[];if(this._fieldObjects){const D=this._fieldObjects[M];if(D)for(const{page:U,id:V,exportValues:et}of D){if(U===-1||V===e)continue;const mt=typeof et=="string"?et:null,kt=document.querySelector(`[data-element-id="${V}"]`);if(kt&&!L.has(kt)){(0,h.warn)(`_getElementsByName - element not allowed: ${V}`);continue}p.push({id:V,exportValue:mt,domElement:kt})}return p}for(const D of document.getElementsByName(M)){const{exportValue:U}=D,V=D.getAttribute("data-element-id");V!==e&&L.has(D)&&p.push({id:V,exportValue:U,domElement:D})}return p}show(){var M;this.container&&(this.container.hidden=!1),(M=this.popup)==null||M.maybeShow()}hide(){var M;this.container&&(this.container.hidden=!0),(M=this.popup)==null||M.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const M=this.getElementsToTriggerPopup();if(Array.isArray(M))for(const e of M)e.classList.add("highlightArea");else M.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:M,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var p;(p=this.linkService.eventBus)==null||p.dispatch("switchannotationeditormode",{source:this,mode:M,editId:e})})}};n=new WeakMap;let v=s;class y extends v{constructor(e,p=null){super(e,{isRenderable:!0,ignoreBorder:!!(p!=null&&p.ignoreBorder),createQuadrilaterals:!0});I(this,o);I(this,A);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:p}=this,D=document.createElement("a");D.setAttribute("data-element-id",e.id);let U=!1;return e.url?(p.addLinkAttributes(D,e.url,e.newWindow),U=!0):e.action?(this._bindNamedAction(D,e.action),U=!0):e.attachment?(this._bindAttachment(D,e.attachment),U=!0):e.setOCGState?(H(this,A,Ii).call(this,D,e.setOCGState),U=!0):e.dest?(this._bindLink(D,e.dest),U=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(D,e),U=!0),e.resetForm?(this._bindResetFormAction(D,e.resetForm),U=!0):this.isTooltipOnly&&!U&&(this._bindLink(D,""),U=!0)),this.container.classList.add("linkAnnotation"),U&&this.container.append(D),this.container}_bindLink(e,p){e.href=this.linkService.getDestinationHash(p),e.onclick=()=>(p&&this.linkService.goToDestination(p),!1),(p||p==="")&&H(this,o,ce).call(this)}_bindNamedAction(e,p){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(p),!1),H(this,o,ce).call(this)}_bindAttachment(e,p){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var D;return(D=this.downloadManager)==null||D.openOrDownloadData(this.container,p.content,p.filename),!1},H(this,o,ce).call(this)}_bindJSAction(e,p){e.href=this.linkService.getAnchorUrl("");const D=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const U of Object.keys(p.actions)){const V=D.get(U);V&&(e[V]=()=>{var et;return(et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p.id,name:U}}),!1})}e.onclick||(e.onclick=()=>!1),H(this,o,ce).call(this)}_bindResetFormAction(e,p){const D=e.onclick;if(D||(e.href=this.linkService.getAnchorUrl("")),H(this,o,ce).call(this),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),D||(e.onclick=()=>!1);return}e.onclick=()=>{var Gt;D==null||D();const{fields:U,refs:V,include:et}=p,mt=[];if(U.length!==0||V.length!==0){const Ft=new Set(V);for(const Mt of U){const Bt=this._fieldObjects[Mt]||[];for(const{id:Vt}of Bt)Ft.add(Vt)}for(const Mt of Object.values(this._fieldObjects))for(const Bt of Mt)Ft.has(Bt.id)===et&&mt.push(Bt)}else for(const Ft of Object.values(this._fieldObjects))mt.push(...Ft);const kt=this.annotationStorage,Tt=[];for(const Ft of mt){const{id:Mt}=Ft;switch(Tt.push(Mt),Ft.type){case"text":{const Vt=Ft.defaultValue||"";kt.setValue(Mt,{value:Vt});break}case"checkbox":case"radiobutton":{const Vt=Ft.defaultValue===Ft.exportValues;kt.setValue(Mt,{value:Vt});break}case"combobox":case"listbox":{const Vt=Ft.defaultValue||"";kt.setValue(Mt,{value:Vt});break}default:continue}const Bt=document.querySelector(`[data-element-id="${Mt}"]`);if(Bt){if(!L.has(Bt)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${Mt}`);continue}}else continue;Bt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}o=new WeakSet,ce=function(){this.container.setAttribute("data-internal-link","")},A=new WeakSet,Ii=function(e,p){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(p),!1),H(this,o,ce).call(this)};class u extends v{constructor(M){super(M,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const M=document.createElement("img");return M.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",M.alt="[{{type}} Annotation]",M.dataset.l10nId="text_annotation_type",M.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(M),this.container}}class _ extends v{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(M){var e;this.data.hasOwnCanvas&&(((e=M.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(M.previousSibling.hidden=!0),M.hidden=!1)}_getKeyModifier(M){const{isWin:e,isMac:p}=h.FeatureTest.platform;return e&&M.ctrlKey||p&&M.metaKey}_setEventListener(M,e,p,D,U){p.includes("mouse")?M.addEventListener(p,V=>{var et;(et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:U(V),shift:V.shiftKey,modifier:this._getKeyModifier(V)}})}):M.addEventListener(p,V=>{var et;if(p==="blur"){if(!e.focused||!V.relatedTarget)return;e.focused=!1}else if(p==="focus"){if(e.focused)return;e.focused=!0}U&&((et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:D,value:U(V)}}))})}_setEventListeners(M,e,p,D){var U,V,et;for(const[mt,kt]of p)(kt==="Action"||(U=this.data.actions)!=null&&U[kt])&&((kt==="Focus"||kt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(M,e,mt,kt,D),kt==="Focus"&&!((V=this.data.actions)!=null&&V.Blur)?this._setEventListener(M,e,"blur","Blur",null):kt==="Blur"&&!((et=this.data.actions)!=null&&et.Focus)&&this._setEventListener(M,e,"focus","Focus",null))}_setBackgroundColor(M){const e=this.data.backgroundColor||null;M.style.backgroundColor=e===null?"transparent":h.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(M){const e=["left","center","right"],{fontColor:p}=this.data.defaultAppearanceData,D=this.data.defaultAppearanceData.fontSize||f,U=M.style;let V;const et=2,mt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-et),Tt=Math.round(kt/(h.LINE_FACTOR*D))||1,Gt=kt/Tt;V=Math.min(D,mt(Gt/h.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-et);V=Math.min(D,mt(kt/h.LINE_FACTOR))}U.fontSize=`calc(${V}px * var(--scale-factor))`,U.color=h.Util.makeHexColor(p[0],p[1],p[2]),this.data.textAlignment!==null&&(U.textAlign=e[this.data.textAlignment])}_setRequired(M,e){e?M.setAttribute("required",!0):M.removeAttribute("required"),M.setAttribute("aria-required",e)}}class E extends _{constructor(M){const e=M.renderForms||!M.data.hasAppearance&&!!M.data.fieldValue;super(M,{isRenderable:e})}setPropertyOnSiblings(M,e,p,D){const U=this.annotationStorage;for(const V of this._getElementsByName(M.name,M.id))V.domElement&&(V.domElement[e]=p),U.setValue(V.id,{[D]:p})}render(){var D,U;const M=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let p=null;if(this.renderForms){const V=M.getValue(e,{value:this.data.fieldValue});let et=V.value||"";const mt=M.getValue(e,{charLimit:this.data.maxLen}).charLimit;mt&&et.length>mt&&(et=et.slice(0,mt));let kt=V.formattedValue||((D=this.data.textContent)==null?void 0:D.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Tt={userValue:et,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(p=document.createElement("textarea"),p.textContent=kt??et,this.data.doNotScroll&&(p.style.overflowY="hidden")):(p=document.createElement("input"),p.type="text",p.setAttribute("value",kt??et),this.data.doNotScroll&&(p.style.overflowX="hidden")),this.data.hasOwnCanvas&&(p.hidden=!0),L.add(p),p.setAttribute("data-element-id",e),p.disabled=this.data.readOnly,p.name=this.data.fieldName,p.tabIndex=R,this._setRequired(p,this.data.required),mt&&(p.maxLength=mt),p.addEventListener("input",Ft=>{M.setValue(e,{value:Ft.target.value}),this.setPropertyOnSiblings(p,"value",Ft.target.value,"value"),Tt.formattedValue=null}),p.addEventListener("resetform",Ft=>{const Mt=this.data.defaultFieldValue??"";p.value=Tt.userValue=Mt,Tt.formattedValue=null});let Gt=Ft=>{const{formattedValue:Mt}=Tt;Mt!=null&&(Ft.target.value=Mt),Ft.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){p.addEventListener("focus",Mt=>{if(Tt.focused)return;const{target:Bt}=Mt;Tt.userValue&&(Bt.value=Tt.userValue),Tt.lastCommittedValue=Bt.value,Tt.commitKey=1,Tt.focused=!0}),p.addEventListener("updatefromsandbox",Mt=>{this.showElementAndHideCanvas(Mt.target);const Bt={value(Vt){Tt.userValue=Vt.detail.value??"",M.setValue(e,{value:Tt.userValue.toString()}),Vt.target.value=Tt.userValue},formattedValue(Vt){const{formattedValue:Kt}=Vt.detail;Tt.formattedValue=Kt,Kt!=null&&Vt.target!==document.activeElement&&(Vt.target.value=Kt),M.setValue(e,{formattedValue:Kt})},selRange(Vt){Vt.target.setSelectionRange(...Vt.detail.selRange)},charLimit:Vt=>{var ie;const{charLimit:Kt}=Vt.detail,{target:Qt}=Vt;if(Kt===0){Qt.removeAttribute("maxLength");return}Qt.setAttribute("maxLength",Kt);let se=Tt.userValue;!se||se.length<=Kt||(se=se.slice(0,Kt),Qt.value=Tt.userValue=se,M.setValue(e,{value:se}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:se,willCommit:!0,commitKey:1,selStart:Qt.selectionStart,selEnd:Qt.selectionEnd}}))}};this._dispatchEventFromSandbox(Bt,Mt)}),p.addEventListener("keydown",Mt=>{var Kt;Tt.commitKey=1;let Bt=-1;if(Mt.key==="Escape"?Bt=0:Mt.key==="Enter"&&!this.data.multiLine?Bt=2:Mt.key==="Tab"&&(Tt.commitKey=3),Bt===-1)return;const{value:Vt}=Mt.target;Tt.lastCommittedValue!==Vt&&(Tt.lastCommittedValue=Vt,Tt.userValue=Vt,(Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Vt,willCommit:!0,commitKey:Bt,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}}))});const Ft=Gt;Gt=null,p.addEventListener("blur",Mt=>{var Vt;if(!Tt.focused||!Mt.relatedTarget)return;Tt.focused=!1;const{value:Bt}=Mt.target;Tt.userValue=Bt,Tt.lastCommittedValue!==Bt&&((Vt=this.linkService.eventBus)==null||Vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Bt,willCommit:!0,commitKey:Tt.commitKey,selStart:Mt.target.selectionStart,selEnd:Mt.target.selectionEnd}})),Ft(Mt)}),(U=this.data.actions)!=null&&U.Keystroke&&p.addEventListener("beforeinput",Mt=>{var oe;Tt.lastCommittedValue=null;const{data:Bt,target:Vt}=Mt,{value:Kt,selectionStart:Qt,selectionEnd:se}=Vt;let ie=Qt,ne=se;switch(Mt.inputType){case"deleteWordBackward":{const le=Kt.substring(0,Qt).match(/\w*[^\w]*$/);le&&(ie-=le[0].length);break}case"deleteWordForward":{const le=Kt.substring(Qt).match(/^[^\w]*\w*/);le&&(ne+=le[0].length);break}case"deleteContentBackward":Qt===se&&(ie-=1);break;case"deleteContentForward":Qt===se&&(ne+=1);break}Mt.preventDefault(),(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Kt,change:Bt||"",willCommit:!1,selStart:ie,selEnd:ne}})}),this._setEventListeners(p,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Mt=>Mt.target.value)}if(Gt&&p.addEventListener("blur",Gt),this.data.comb){const Mt=(this.data.rect[2]-this.data.rect[0])/mt;p.classList.add("comb"),p.style.letterSpacing=`calc(${Mt}px * var(--scale-factor) - 1ch)`}}else p=document.createElement("div"),p.textContent=this.data.fieldValue,p.style.verticalAlign="middle",p.style.display="table-cell";return this._setTextStyle(p),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.append(p),this.container}}class w extends _{constructor(M){super(M,{isRenderable:!!M.data.hasOwnCanvas})}}class m extends _{constructor(M){super(M,{isRenderable:M.renderForms})}render(){const M=this.annotationStorage,e=this.data,p=e.id;let D=M.getValue(p,{value:e.exportValue===e.fieldValue}).value;typeof D=="string"&&(D=D!=="Off",M.setValue(p,{value:D})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const U=document.createElement("input");return L.add(U),U.setAttribute("data-element-id",p),U.disabled=e.readOnly,this._setRequired(U,this.data.required),U.type="checkbox",U.name=e.fieldName,D&&U.setAttribute("checked",!0),U.setAttribute("exportValue",e.exportValue),U.tabIndex=R,U.addEventListener("change",V=>{const{name:et,checked:mt}=V.target;for(const kt of this._getElementsByName(et,p)){const Tt=mt&&kt.exportValue===e.exportValue;kt.domElement&&(kt.domElement.checked=Tt),M.setValue(kt.id,{value:Tt})}M.setValue(p,{value:mt})}),U.addEventListener("resetform",V=>{const et=e.defaultFieldValue||"Off";V.target.checked=et===e.exportValue}),this.enableScripting&&this.hasJSActions&&(U.addEventListener("updatefromsandbox",V=>{const et={value(mt){mt.target.checked=mt.detail.value!=="Off",M.setValue(p,{value:mt.target.checked})}};this._dispatchEventFromSandbox(et,V)}),this._setEventListeners(U,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class r extends _{constructor(M){super(M,{isRenderable:M.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const M=this.annotationStorage,e=this.data,p=e.id;let D=M.getValue(p,{value:e.fieldValue===e.buttonValue}).value;typeof D=="string"&&(D=D!==e.buttonValue,M.setValue(p,{value:D}));const U=document.createElement("input");if(L.add(U),U.setAttribute("data-element-id",p),U.disabled=e.readOnly,this._setRequired(U,this.data.required),U.type="radio",U.name=e.fieldName,D&&U.setAttribute("checked",!0),U.tabIndex=R,U.addEventListener("change",V=>{const{name:et,checked:mt}=V.target;for(const kt of this._getElementsByName(et,p))M.setValue(kt.id,{value:!1});M.setValue(p,{value:mt})}),U.addEventListener("resetform",V=>{const et=e.defaultFieldValue;V.target.checked=et!=null&&et===e.buttonValue}),this.enableScripting&&this.hasJSActions){const V=e.buttonValue;U.addEventListener("updatefromsandbox",et=>{const mt={value:kt=>{const Tt=V===kt.detail.value;for(const Gt of this._getElementsByName(kt.target.name)){const Ft=Tt&&Gt.id===p;Gt.domElement&&(Gt.domElement.checked=Ft),M.setValue(Gt.id,{value:Ft})}}};this._dispatchEventFromSandbox(mt,et)}),this._setEventListeners(U,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.checked)}return this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class l extends y{constructor(M){super(M,{ignoreBorder:M.data.hasAppearance})}render(){const M=super.render();M.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(M.title=this.data.alternativeText);const e=M.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",p=>{this._dispatchEventFromSandbox({},p)})),M}}class k extends _{constructor(M){super(M,{isRenderable:M.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const M=this.annotationStorage,e=this.data.id,p=M.getValue(e,{value:this.data.fieldValue}),D=document.createElement("select");L.add(D),D.setAttribute("data-element-id",e),D.disabled=this.data.readOnly,this._setRequired(D,this.data.required),D.name=this.data.fieldName,D.tabIndex=R;let U=this.data.combo&&this.data.options.length>0;this.data.combo||(D.size=this.data.options.length,this.data.multiSelect&&(D.multiple=!0)),D.addEventListener("resetform",Tt=>{const Gt=this.data.defaultFieldValue;for(const Ft of D.options)Ft.selected=Ft.value===Gt});for(const Tt of this.data.options){const Gt=document.createElement("option");Gt.textContent=Tt.displayValue,Gt.value=Tt.exportValue,p.value.includes(Tt.exportValue)&&(Gt.setAttribute("selected",!0),U=!1),D.append(Gt)}let V=null;if(U){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),D.prepend(Tt),V=()=>{Tt.remove(),D.removeEventListener("input",V),V=null},D.addEventListener("input",V)}const et=Tt=>{const Gt=Tt?"value":"textContent",{options:Ft,multiple:Mt}=D;return Mt?Array.prototype.filter.call(Ft,Bt=>Bt.selected).map(Bt=>Bt[Gt]):Ft.selectedIndex===-1?null:Ft[Ft.selectedIndex][Gt]};let mt=et(!1);const kt=Tt=>{const Gt=Tt.target.options;return Array.prototype.map.call(Gt,Ft=>({displayValue:Ft.textContent,exportValue:Ft.value}))};return this.enableScripting&&this.hasJSActions?(D.addEventListener("updatefromsandbox",Tt=>{const Gt={value(Ft){V==null||V();const Mt=Ft.detail.value,Bt=new Set(Array.isArray(Mt)?Mt:[Mt]);for(const Vt of D.options)Vt.selected=Bt.has(Vt.value);M.setValue(e,{value:et(!0)}),mt=et(!1)},multipleSelection(Ft){D.multiple=!0},remove(Ft){const Mt=D.options,Bt=Ft.detail.remove;Mt[Bt].selected=!1,D.remove(Bt),Mt.length>0&&Array.prototype.findIndex.call(Mt,Kt=>Kt.selected)===-1&&(Mt[0].selected=!0),M.setValue(e,{value:et(!0),items:kt(Ft)}),mt=et(!1)},clear(Ft){for(;D.length!==0;)D.remove(0);M.setValue(e,{value:null,items:[]}),mt=et(!1)},insert(Ft){const{index:Mt,displayValue:Bt,exportValue:Vt}=Ft.detail.insert,Kt=D.children[Mt],Qt=document.createElement("option");Qt.textContent=Bt,Qt.value=Vt,Kt?Kt.before(Qt):D.append(Qt),M.setValue(e,{value:et(!0),items:kt(Ft)}),mt=et(!1)},items(Ft){const{items:Mt}=Ft.detail;for(;D.length!==0;)D.remove(0);for(const Bt of Mt){const{displayValue:Vt,exportValue:Kt}=Bt,Qt=document.createElement("option");Qt.textContent=Vt,Qt.value=Kt,D.append(Qt)}D.options.length>0&&(D.options[0].selected=!0),M.setValue(e,{value:et(!0),items:kt(Ft)}),mt=et(!1)},indices(Ft){const Mt=new Set(Ft.detail.indices);for(const Bt of Ft.target.options)Bt.selected=Mt.has(Bt.index);M.setValue(e,{value:et(!0)}),mt=et(!1)},editable(Ft){Ft.target.disabled=!Ft.detail.editable}};this._dispatchEventFromSandbox(Gt,Tt)}),D.addEventListener("input",Tt=>{var Ft;const Gt=et(!0);M.setValue(e,{value:Gt}),Tt.preventDefault(),(Ft=this.linkService.eventBus)==null||Ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:mt,changeEx:Gt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(D,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):D.addEventListener("input",function(Tt){M.setValue(e,{value:et(!0)})}),this.data.combo&&this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class g extends v{constructor(M){const{data:e,elements:p}=M;super(M,{isRenderable:v._hasPopupData(e)}),this.elements=p}render(){this.container.classList.add("popupAnnotation");const M=new a({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const p of this.elements)p.popup=M,e.push(p.data.id),p.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(p=>`${h.AnnotationPrefix}${p}`).join(",")),this.container}}class a{constructor({container:M,color:e,elements:p,titleObj:D,modificationDate:U,contentsObj:V,richText:et,parent:mt,rect:kt,parentRect:Tt,open:Gt}){I(this,Ut);I(this,Wt);I(this,$t);I(this,qt);I(this,N,null);I(this,tt,H(this,Ut,Li).bind(this));I(this,Q,H(this,qt,oi).bind(this));I(this,rt,H(this,$t,ai).bind(this));I(this,ct,H(this,Wt,Re).bind(this));I(this,yt,null);I(this,dt,null);I(this,Rt,null);I(this,jt,null);I(this,St,null);I(this,Dt,null);I(this,ut,!1);I(this,K,null);I(this,J,null);I(this,ht,null);I(this,Et,null);I(this,wt,!1);var Mt;Z(this,dt,M),Z(this,Et,D),Z(this,Rt,V),Z(this,ht,et),Z(this,St,mt),Z(this,yt,e),Z(this,J,kt),Z(this,Dt,Tt),Z(this,jt,p);const Ft=T.PDFDateString.toDateObject(U);Ft&&Z(this,N,mt.l10n.get("annotation_date_string",{date:Ft.toLocaleDateString(),time:Ft.toLocaleTimeString()})),this.trigger=p.flatMap(Bt=>Bt.getElementsToTriggerPopup());for(const Bt of this.trigger)Bt.addEventListener("click",t(this,ct)),Bt.addEventListener("mouseenter",t(this,rt)),Bt.addEventListener("mouseleave",t(this,Q)),Bt.classList.add("popupTriggerArea");for(const Bt of p)(Mt=Bt.container)==null||Mt.addEventListener("keydown",t(this,tt));t(this,dt).hidden=!0,Gt&&H(this,Wt,Re).call(this)}render(){if(t(this,K))return;const{page:{view:M},viewport:{rawDims:{pageWidth:e,pageHeight:p,pageX:D,pageY:U}}}=t(this,St),V=Z(this,K,document.createElement("div"));if(V.className="popup",t(this,yt)){const ie=V.style.outlineColor=h.Util.makeHexColor(...t(this,yt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?V.style.backgroundColor=`color-mix(in srgb, ${ie} 30%, white)`:V.style.backgroundColor=h.Util.makeHexColor(...t(this,yt).map(oe=>Math.floor(.7*(255-oe)+oe)))}const et=document.createElement("span");et.className="header";const mt=document.createElement("h1");if(et.append(mt),{dir:mt.dir,str:mt.textContent}=t(this,Et),V.append(et),t(this,N)){const ie=document.createElement("span");ie.classList.add("popupDate"),t(this,N).then(ne=>{ie.textContent=ne}),et.append(ie)}const kt=t(this,Rt),Tt=t(this,ht);if(Tt!=null&&Tt.str&&(!(kt!=null&&kt.str)||kt.str===Tt.str))j.XfaLayer.render({xfaHtml:Tt.html,intent:"richText",div:V}),V.lastChild.classList.add("richText","popupContent");else{const ie=this._formatContents(kt);V.append(ie)}let Gt=!!t(this,Dt),Ft=Gt?t(this,Dt):t(this,J);for(const ie of t(this,jt))if(!Ft||h.Util.intersect(ie.data.rect,Ft)!==null){Ft=ie.data.rect,Gt=!0;break}const Mt=h.Util.normalizeRect([Ft[0],M[3]-Ft[1]+M[1],Ft[2],M[3]-Ft[3]+M[1]]),Bt=5,Vt=Gt?Ft[2]-Ft[0]+Bt:0,Kt=Mt[0]+Vt,Qt=Mt[1],{style:se}=t(this,dt);se.left=`${100*(Kt-D)/e}%`,se.top=`${100*(Qt-U)/p}%`,t(this,dt).append(V)}_formatContents({str:M,dir:e}){const p=document.createElement("p");p.classList.add("popupContent"),p.dir=e;const D=M.split(/(?:\r\n?|\n)/);for(let U=0,V=D.length;U<V;++U){const et=D[U];p.append(document.createTextNode(et)),U<V-1&&p.append(document.createElement("br"))}return p}forceHide(){Z(this,wt,this.isVisible),t(this,wt)&&(t(this,dt).hidden=!0)}maybeShow(){t(this,wt)&&(Z(this,wt,!1),t(this,dt).hidden=!1)}get isVisible(){return t(this,dt).hidden===!1}}N=new WeakMap,tt=new WeakMap,Q=new WeakMap,rt=new WeakMap,ct=new WeakMap,yt=new WeakMap,dt=new WeakMap,Rt=new WeakMap,jt=new WeakMap,St=new WeakMap,Dt=new WeakMap,ut=new WeakMap,K=new WeakMap,J=new WeakMap,ht=new WeakMap,Et=new WeakMap,wt=new WeakMap,Ut=new WeakSet,Li=function(M){M.altKey||M.shiftKey||M.ctrlKey||M.metaKey||(M.key==="Enter"||M.key==="Escape"&&t(this,ut))&&H(this,Wt,Re).call(this)},Wt=new WeakSet,Re=function(){Z(this,ut,!t(this,ut)),t(this,ut)?(H(this,$t,ai).call(this),t(this,dt).addEventListener("click",t(this,ct)),t(this,dt).addEventListener("keydown",t(this,tt))):(H(this,qt,oi).call(this),t(this,dt).removeEventListener("click",t(this,ct)),t(this,dt).removeEventListener("keydown",t(this,tt)))},$t=new WeakSet,ai=function(){t(this,K)||this.render(),this.isVisible?t(this,ut)&&t(this,dt).classList.add("focused"):(t(this,dt).hidden=!1,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)+1e3)},qt=new WeakSet,oi=function(){t(this,dt).classList.remove("focused"),!(t(this,ut)||!this.isVisible)&&(t(this,dt).hidden=!0,t(this,dt).style.zIndex=parseInt(t(this,dt).style.zIndex)-1e3)};class C extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0}),this.textContent=M.data.textContent,this.textPosition=M.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const M=document.createElement("div");M.classList.add("annotationTextContent"),M.setAttribute("role","comment");for(const e of this.textContent){const p=document.createElement("span");p.textContent=e,M.append(p)}this.container.append(M)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}d.FreeTextAnnotationElement=C;class b extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});I(this,Y,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:p,height:D}=O(e.rect),U=this.svgFactory.create(p,D,!0),V=Z(this,Y,this.svgFactory.createElement("svg:line"));return V.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),V.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),V.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),V.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),V.setAttribute("stroke-width",e.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),U.append(V),this.container.append(U),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class B extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});I(this,G,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:p,height:D}=O(e.rect),U=this.svgFactory.create(p,D,!0),V=e.borderStyle.width,et=Z(this,G,this.svgFactory.createElement("svg:rect"));return et.setAttribute("x",V/2),et.setAttribute("y",V/2),et.setAttribute("width",p-V),et.setAttribute("height",D-V),et.setAttribute("stroke-width",V||1),et.setAttribute("stroke","transparent"),et.setAttribute("fill","transparent"),U.append(et),this.container.append(U),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,G)}addHighlightArea(){this.container.classList.add("highlightArea")}}G=new WeakMap;class X extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});I(this,bt,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:p,height:D}=O(e.rect),U=this.svgFactory.create(p,D,!0),V=e.borderStyle.width,et=Z(this,bt,this.svgFactory.createElement("svg:ellipse"));return et.setAttribute("cx",p/2),et.setAttribute("cy",D/2),et.setAttribute("rx",p/2-V/2),et.setAttribute("ry",D/2-V/2),et.setAttribute("stroke-width",V||1),et.setAttribute("stroke","transparent"),et.setAttribute("fill","transparent"),U.append(et),this.container.append(U),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}bt=new WeakMap;class x extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});I(this,At,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:p,height:D}=O(e.rect),U=this.svgFactory.create(p,D,!0);let V=[];for(const mt of e.vertices){const kt=mt.x-e.rect[0],Tt=e.rect[3]-mt.y;V.push(kt+","+Tt)}V=V.join(" ");const et=Z(this,At,this.svgFactory.createElement(this.svgElementName));return et.setAttribute("points",V),et.setAttribute("stroke-width",e.borderStyle.width||1),et.setAttribute("stroke","transparent"),et.setAttribute("fill","transparent"),U.append(et),this.container.append(U),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,At)}addHighlightArea(){this.container.classList.add("highlightArea")}}At=new WeakMap;class $ extends x{constructor(M){super(M),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class at extends v{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});I(this,te,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:p,height:D}=O(e.rect),U=this.svgFactory.create(p,D,!0);for(const V of e.inkLists){let et=[];for(const kt of V){const Tt=kt.x-e.rect[0],Gt=e.rect[3]-kt.y;et.push(`${Tt},${Gt}`)}et=et.join(" ");const mt=this.svgFactory.createElement(this.svgElementName);t(this,te).push(mt),mt.setAttribute("points",et),mt.setAttribute("stroke-width",e.borderStyle.width||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),U.append(mt)}return this.container.append(U),this.container}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,d.InkAnnotationElement=at;class W extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class lt extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class gt extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xt extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Pt extends v{constructor(M){super(M,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}d.StampAnnotationElement=Pt;class S extends v{constructor(e){var U;super(e,{isRenderable:!0});I(this,q);I(this,Zt,null);const{filename:p,content:D}=this.data.file;this.filename=(0,T.getFilenameFromUrl)(p,!0),this.content=D,(U=this.linkService.eventBus)==null||U.dispatch("fileattachmentannotation",{source:this,filename:p,content:D})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:p}=this;let D;p.hasAppearance||p.fillAlpha===0?D=document.createElement("div"):(D=document.createElement("img"),D.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(p.name)?"paperclip":"pushpin"}.svg`,p.fillAlpha&&p.fillAlpha<1&&(D.style=`filter: opacity(${Math.round(p.fillAlpha*100)}%);`)),D.addEventListener("dblclick",H(this,q,li).bind(this)),Z(this,Zt,D);const{isMac:U}=h.FeatureTest.platform;return e.addEventListener("keydown",V=>{V.key==="Enter"&&(U?V.metaKey:V.ctrlKey)&&H(this,q,li).call(this)}),!p.popupRef&&this.hasPopupData?this._createPopup():D.classList.add("popupTriggerArea"),e.append(D),e}getElementsToTriggerPopup(){return t(this,Zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zt=new WeakMap,q=new WeakSet,li=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:M,accessibilityManager:e,annotationCanvasMap:p,l10n:D,page:U,viewport:V}){I(this,Nt);I(this,_t);I(this,Lt,null);I(this,Ct,null);I(this,Ot,new Map);this.div=M,Z(this,Lt,e),Z(this,Ct,p),this.l10n=D,this.page=U,this.viewport=V,this.zIndex=0,this.l10n||(this.l10n=ft.NullL10n)}async render(M){const{annotations:e}=M,p=this.div;(0,T.setLayerDimensions)(p,this.viewport);const D=new Map,U={data:null,layer:p,linkService:M.linkService,downloadManager:M.downloadManager,imageResourcesPath:M.imageResourcesPath||"",renderForms:M.renderForms!==!1,svgFactory:new T.DOMSVGFactory,annotationStorage:M.annotationStorage||new nt.AnnotationStorage,enableScripting:M.enableScripting===!0,hasJSActions:M.hasJSActions,fieldObjects:M.fieldObjects,parent:this,elements:null};for(const V of e){if(V.noHTML)continue;const et=V.annotationType===h.AnnotationType.POPUP;if(et){const Tt=D.get(V.id);if(!Tt)continue;U.elements=Tt}else{const{width:Tt,height:Gt}=O(V.rect);if(Tt<=0||Gt<=0)continue}U.data=V;const mt=P.create(U);if(!mt.isRenderable)continue;if(!et&&V.popupRef){const Tt=D.get(V.popupRef);Tt?Tt.push(mt):D.set(V.popupRef,[mt])}mt.annotationEditorType>0&&t(this,Ot).set(mt.data.id,mt);const kt=mt.render();V.hidden&&(kt.style.visibility="hidden"),H(this,Nt,Oi).call(this,kt,V.id)}H(this,_t,ci).call(this),await this.l10n.translate(p)}update({viewport:M}){const e=this.div;this.viewport=M,(0,T.setLayerDimensions)(e,{rotation:M.rotation}),H(this,_t,ci).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ot).values())}getEditableAnnotation(M){return t(this,Ot).get(M)}}Lt=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,Nt=new WeakSet,Oi=function(M,e){var D;const p=M.firstChild||M;p.id=`${h.AnnotationPrefix}${e}`,this.div.append(M),(D=t(this,Lt))==null||D.moveElementInDOM(this.div,M,p,!1)},_t=new WeakSet,ci=function(){if(!t(this,Ct))return;const M=this.div;for(const[e,p]of t(this,Ct)){const D=M.querySelector(`[data-annotation-id="${e}"]`);if(!D)continue;const{firstChild:U}=D;U?U.nodeName==="CANVAS"?U.replaceWith(p):U.before(p):D.append(p)}t(this,Ct).clear()},d.AnnotationLayer=i},(pt,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ColorConverters=void 0;function st(nt){return Math.floor(Math.max(0,Math.min(1,nt))*255).toString(16).padStart(2,"0")}function h(nt){return Math.max(0,Math.min(255,255*nt))}class T{static CMYK_G([z,ft,j,R]){return["G",1-Math.min(1,.3*z+.59*j+.11*ft+R)]}static G_CMYK([z]){return["CMYK",0,0,0,1-z]}static G_RGB([z]){return["RGB",z,z,z]}static G_rgb([z]){return z=h(z),[z,z,z]}static G_HTML([z]){const ft=st(z);return`#${ft}${ft}${ft}`}static RGB_G([z,ft,j]){return["G",.3*z+.59*ft+.11*j]}static RGB_rgb(z){return z.map(h)}static RGB_HTML(z){return`#${z.map(st).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([z,ft,j,R]){return["RGB",1-Math.min(1,z+R),1-Math.min(1,j+R),1-Math.min(1,ft+R)]}static CMYK_rgb([z,ft,j,R]){return[h(1-Math.min(1,z+R)),h(1-Math.min(1,j+R)),h(1-Math.min(1,ft+R))]}static CMYK_HTML(z){const ft=this.CMYK_RGB(z).slice(1);return this.RGB_HTML(ft)}static RGB_CMYK([z,ft,j]){const R=1-z,f=1-ft,L=1-j,O=Math.min(R,f,L);return["CMYK",R,f,L,O]}}d.ColorConverters=T},(pt,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NullL10n=void 0,d.getL10nFallback=h;const st={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};st.print_progress_percent="{{progress}}%";function h(z,ft){switch(z){case"find_match_count":z=`find_match_count[${ft.total===1?"one":"other"}]`;break;case"find_match_count_limit":z=`find_match_count_limit[${ft.limit===1?"one":"other"}]`;break}return st[z]||""}function T(z,ft){return ft?z.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(j,R)=>R in ft?ft[R]:"{{"+R+"}}"):z}const nt={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(z,ft=null,j=h(z,ft)){return T(j,ft)},async translate(z){}};d.NullL10n=nt},(pt,d,st)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaLayer=void 0;var h=st(25);class T{static setupStorage(z,ft,j,R,f){const L=R.getValue(ft,{value:null});switch(j.name){case"textarea":if(L.value!==null&&(z.textContent=L.value),f==="print")break;z.addEventListener("input",O=>{R.setValue(ft,{value:O.target.value})});break;case"input":if(j.attributes.type==="radio"||j.attributes.type==="checkbox"){if(L.value===j.attributes.xfaOn?z.setAttribute("checked",!0):L.value===j.attributes.xfaOff&&z.removeAttribute("checked"),f==="print")break;z.addEventListener("change",O=>{R.setValue(ft,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(L.value!==null&&z.setAttribute("value",L.value),f==="print")break;z.addEventListener("input",O=>{R.setValue(ft,{value:O.target.value})})}break;case"select":if(L.value!==null){z.setAttribute("value",L.value);for(const O of j.children)O.attributes.value===L.value?O.attributes.selected=!0:O.attributes.hasOwnProperty("selected")&&delete O.attributes.selected}z.addEventListener("input",O=>{const P=O.target.options,v=P.selectedIndex===-1?"":P[P.selectedIndex].value;R.setValue(ft,{value:v})});break}}static setAttributes({html:z,element:ft,storage:j=null,intent:R,linkService:f}){const{attributes:L}=ft,O=z instanceof HTMLAnchorElement;L.type==="radio"&&(L.name=`${L.name}-${R}`);for(const[P,v]of Object.entries(L))if(v!=null)switch(P){case"class":v.length&&z.setAttribute(P,v.join(" "));break;case"dataId":break;case"id":z.setAttribute("data-element-id",v);break;case"style":Object.assign(z.style,v);break;case"textContent":z.textContent=v;break;default:(!O||P!=="href"&&P!=="newWindow")&&z.setAttribute(P,v)}O&&f.addLinkAttributes(z,L.href,L.newWindow),j&&L.dataId&&this.setupStorage(z,L.dataId,ft,j)}static render(z){var y;const ft=z.annotationStorage,j=z.linkService,R=z.xfaHtml,f=z.intent||"display",L=document.createElement(R.name);R.attributes&&this.setAttributes({html:L,element:R,intent:f,linkService:j});const O=[[R,-1,L]],P=z.div;if(P.append(L),z.viewport){const u=`matrix(${z.viewport.transform.join(",")})`;P.style.transform=u}f!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const v=[];for(;O.length>0;){const[u,_,E]=O.at(-1);if(_+1===u.children.length){O.pop();continue}const w=u.children[++O.at(-1)[1]];if(w===null)continue;const{name:m}=w;if(m==="#text"){const l=document.createTextNode(w.value);v.push(l),E.append(l);continue}const r=(y=w==null?void 0:w.attributes)!=null&&y.xmlns?document.createElementNS(w.attributes.xmlns,m):document.createElement(m);if(E.append(r),w.attributes&&this.setAttributes({html:r,element:w,storage:ft,intent:f,linkService:j}),w.children&&w.children.length>0)O.push([w,-1,r]);else if(w.value){const l=document.createTextNode(w.value);h.XfaText.shouldBuildText(m)&&v.push(l),r.append(l)}}for(const u of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))u.setAttribute("readOnly",!0);return{textDivs:v}}static update(z){const ft=`matrix(${z.viewport.transform.join(",")})`;z.div.style.transform=ft,z.div.hidden=!1}}d.XfaLayer=T},(pt,d,st)=>{var R,f,L,O,P,v,y,u,_,E,w,m,r,l,k,Ni,a,ji,b,Bi,X,Ui,$,hi,at,Wi,lt,di,xt,Hi,S,zi,n,Gi,o,Xi,A,$i,N,ae,Q,ui,ct,Fe,dt,Me,jt,fe,Dt,fi,K,De,ht,Vi,wt,pi,zt,qi,Xt,Yi,Ht,gi,ot,Ie,G,pe;Object.defineProperty(d,"__esModule",{value:!0}),d.InkEditor=void 0;var h=st(1),T=st(4),nt=st(29),z=st(6),ft=st(5);const At=class At extends T.AnnotationEditor{constructor(q){super({...q,name:"inkEditor"});I(this,k);I(this,a);I(this,b);I(this,X);I(this,$);I(this,at);I(this,lt);I(this,xt);I(this,S);I(this,n);I(this,o);I(this,A);I(this,N);I(this,Q);I(this,ct);I(this,dt);I(this,jt);I(this,Dt);I(this,K);I(this,Xt);I(this,Ht);I(this,ot);I(this,G);I(this,R,0);I(this,f,0);I(this,L,this.canvasPointermove.bind(this));I(this,O,this.canvasPointerleave.bind(this));I(this,P,this.canvasPointerup.bind(this));I(this,v,this.canvasPointerdown.bind(this));I(this,y,new Path2D);I(this,u,!1);I(this,_,!1);I(this,E,!1);I(this,w,null);I(this,m,0);I(this,r,0);I(this,l,null);this.color=q.color||null,this.thickness=q.thickness||null,this.opacity=q.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(q){T.AnnotationEditor.initialize(q,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(q,vt){switch(q){case h.AnnotationEditorParamsType.INK_THICKNESS:At._defaultThickness=vt;break;case h.AnnotationEditorParamsType.INK_COLOR:At._defaultColor=vt;break;case h.AnnotationEditorParamsType.INK_OPACITY:At._defaultOpacity=vt/100;break}}updateParams(q,vt){switch(q){case h.AnnotationEditorParamsType.INK_THICKNESS:H(this,k,Ni).call(this,vt);break;case h.AnnotationEditorParamsType.INK_COLOR:H(this,a,ji).call(this,vt);break;case h.AnnotationEditorParamsType.INK_OPACITY:H(this,b,Bi).call(this,vt);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,At._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,At._defaultColor||T.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(At._defaultOpacity*100)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||At._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||At._defaultColor||T.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??At._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(H(this,ct,Fe).call(this),H(this,dt,Me).call(this)),this.isAttachedToDOM||(this.parent.add(this),H(this,jt,fe).call(this)),H(this,G,pe).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,w).disconnect(),Z(this,w,null),super.remove())}setParent(q){!this.parent&&q?this._uiManager.removeShouldRescale(this):this.parent&&q===null&&this._uiManager.addShouldRescale(this),super.setParent(q)}onScaleChanging(){const[q,vt]=this.parentDimensions,Lt=this.width*q,Ct=this.height*vt;this.setDimensions(Lt,Ct)}enableEditMode(){t(this,u)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,v)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,v)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,u)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Z(this,u,!0),this.div.classList.add("disabled"),H(this,G,pe).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(q){this._focusEventsAllowed&&(super.focusin(q),this.enableEditMode())}canvasPointerdown(q){q.button!==0||!this.isInEditMode()||t(this,u)||(this.setInForeground(),q.preventDefault(),q.type!=="mouse"&&this.div.focus(),H(this,at,Wi).call(this,q.offsetX,q.offsetY))}canvasPointermove(q){q.preventDefault(),H(this,lt,di).call(this,q.offsetX,q.offsetY)}canvasPointerup(q){q.preventDefault(),H(this,Q,ui).call(this,q)}canvasPointerleave(q){H(this,Q,ui).call(this,q)}get isResizable(){return!this.isEmpty()&&t(this,u)}render(){if(this.div)return this.div;let q,vt;this.width&&(q=this.x,vt=this.y),super.render(),T.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Jt=>{var _t;return(_t=this.div)==null?void 0:_t.setAttribute("aria-label",Jt)});const[Lt,Ct,Ot,Nt]=H(this,X,Ui).call(this);if(this.setAt(Lt,Ct,0,0),this.setDims(Ot,Nt),H(this,ct,Fe).call(this),this.width){const[Jt,_t]=this.parentDimensions;this.setAspectRatio(this.width*Jt,this.height*_t),this.setAt(q*Jt,vt*_t,this.width*Jt,this.height*_t),Z(this,E,!0),H(this,jt,fe).call(this),this.setDims(this.width*Jt,this.height*_t),H(this,N,ae).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return H(this,dt,Me).call(this),this.div}setDimensions(q,vt){const Lt=Math.round(q),Ct=Math.round(vt);if(t(this,m)===Lt&&t(this,r)===Ct)return;Z(this,m,Lt),Z(this,r,Ct),this.canvas.style.visibility="hidden";const[Ot,Nt]=this.parentDimensions;this.width=q/Ot,this.height=vt/Nt,this.fixAndSetPosition(),t(this,u)&&H(this,Dt,fi).call(this,q,vt),H(this,jt,fe).call(this),H(this,N,ae).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(q,vt,Lt){var U,V,et;if(q instanceof nt.InkAnnotationElement)return null;const Ct=super.deserialize(q,vt,Lt);Ct.thickness=q.thickness,Ct.color=h.Util.makeHexColor(...q.color),Ct.opacity=q.opacity;const[Ot,Nt]=Ct.pageDimensions,Jt=Ct.width*Ot,_t=Ct.height*Nt,Yt=Ct.parentScale,It=q.thickness/2;Z(Ct,u,!0),Z(Ct,m,Math.round(Jt)),Z(Ct,r,Math.round(_t));const{paths:M,rect:e,rotation:p}=q;for(let{bezier:mt}of M){mt=H(U=At,zt,qi).call(U,mt,e,p);const kt=[];Ct.paths.push(kt);let Tt=Yt*(mt[0]-It),Gt=Yt*(mt[1]-It);for(let Mt=2,Bt=mt.length;Mt<Bt;Mt+=6){const Vt=Yt*(mt[Mt]-It),Kt=Yt*(mt[Mt+1]-It),Qt=Yt*(mt[Mt+2]-It),se=Yt*(mt[Mt+3]-It),ie=Yt*(mt[Mt+4]-It),ne=Yt*(mt[Mt+5]-It);kt.push([[Tt,Gt],[Vt,Kt],[Qt,se],[ie,ne]]),Tt=ie,Gt=ne}const Ft=H(this,ht,Vi).call(this,kt);Ct.bezierPath2D.push(Ft)}const D=H(V=Ct,Ht,gi).call(V);return Z(Ct,f,Math.max(T.AnnotationEditor.MIN_SIZE,D[2]-D[0])),Z(Ct,R,Math.max(T.AnnotationEditor.MIN_SIZE,D[3]-D[1])),H(et=Ct,Dt,fi).call(et,Jt,_t),Ct}serialize(){if(this.isEmpty())return null;const q=this.getRect(0,0),vt=T.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:vt,thickness:this.thickness,opacity:this.opacity,paths:H(this,Xt,Yi).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,q),pageIndex:this.pageIndex,rect:q,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};R=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakMap,_=new WeakMap,E=new WeakMap,w=new WeakMap,m=new WeakMap,r=new WeakMap,l=new WeakMap,k=new WeakSet,Ni=function(q){const vt=this.thickness;this.addCommands({cmd:()=>{this.thickness=q,H(this,G,pe).call(this)},undo:()=>{this.thickness=vt,H(this,G,pe).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},a=new WeakSet,ji=function(q){const vt=this.color;this.addCommands({cmd:()=>{this.color=q,H(this,N,ae).call(this)},undo:()=>{this.color=vt,H(this,N,ae).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,Bi=function(q){q/=100;const vt=this.opacity;this.addCommands({cmd:()=>{this.opacity=q,H(this,N,ae).call(this)},undo:()=>{this.opacity=vt,H(this,N,ae).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Ui=function(){const{parentRotation:q,parentDimensions:[vt,Lt]}=this;switch(q){case 90:return[0,Lt,Lt,vt];case 180:return[vt,Lt,vt,Lt];case 270:return[vt,0,Lt,vt];default:return[0,0,vt,Lt]}},$=new WeakSet,hi=function(){const{ctx:q,color:vt,opacity:Lt,thickness:Ct,parentScale:Ot,scaleFactor:Nt}=this;q.lineWidth=Ct*Ot/Nt,q.lineCap="round",q.lineJoin="round",q.miterLimit=10,q.strokeStyle=`${vt}${(0,ft.opacityToHex)(Lt)}`},at=new WeakSet,Wi=function(q,vt){this.canvas.addEventListener("contextmenu",z.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,O)),this.canvas.addEventListener("pointermove",t(this,L)),this.canvas.addEventListener("pointerup",t(this,P)),this.canvas.removeEventListener("pointerdown",t(this,v)),this.isEditing=!0,t(this,E)||(Z(this,E,!0),H(this,jt,fe).call(this),this.thickness||(this.thickness=At._defaultThickness),this.color||(this.color=At._defaultColor||T.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=At._defaultOpacity)),this.currentPath.push([q,vt]),Z(this,_,!1),H(this,$,hi).call(this),Z(this,l,()=>{H(this,n,Gi).call(this),t(this,l)&&window.requestAnimationFrame(t(this,l))}),window.requestAnimationFrame(t(this,l))},lt=new WeakSet,di=function(q,vt){const[Lt,Ct]=this.currentPath.at(-1);if(this.currentPath.length>1&&q===Lt&&vt===Ct)return;const Ot=this.currentPath;let Nt=t(this,y);if(Ot.push([q,vt]),Z(this,_,!0),Ot.length<=2){Nt.moveTo(...Ot[0]),Nt.lineTo(q,vt);return}Ot.length===3&&(Z(this,y,Nt=new Path2D),Nt.moveTo(...Ot[0])),H(this,o,Xi).call(this,Nt,...Ot.at(-3),...Ot.at(-2),q,vt)},xt=new WeakSet,Hi=function(){if(this.currentPath.length===0)return;const q=this.currentPath.at(-1);t(this,y).lineTo(...q)},S=new WeakSet,zi=function(q,vt){Z(this,l,null),q=Math.min(Math.max(q,0),this.canvas.width),vt=Math.min(Math.max(vt,0),this.canvas.height),H(this,lt,di).call(this,q,vt),H(this,xt,Hi).call(this);let Lt;if(this.currentPath.length!==1)Lt=H(this,A,$i).call(this);else{const _t=[q,vt];Lt=[[_t,_t.slice(),_t.slice(),_t]]}const Ct=t(this,y),Ot=this.currentPath;this.currentPath=[],Z(this,y,new Path2D);const Nt=()=>{this.allRawPaths.push(Ot),this.paths.push(Lt),this.bezierPath2D.push(Ct),this.rebuild()},Jt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(H(this,ct,Fe).call(this),H(this,dt,Me).call(this)),H(this,G,pe).call(this))};this.addCommands({cmd:Nt,undo:Jt,mustExec:!0})},n=new WeakSet,Gi=function(){if(!t(this,_))return;Z(this,_,!1);const q=Math.ceil(this.thickness*this.parentScale),vt=this.currentPath.slice(-3),Lt=vt.map(Nt=>Nt[0]),Ct=vt.map(Nt=>Nt[1]);Math.min(...Lt)-q,Math.max(...Lt)+q,Math.min(...Ct)-q,Math.max(...Ct)+q;const{ctx:Ot}=this;Ot.save(),Ot.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Nt of this.bezierPath2D)Ot.stroke(Nt);Ot.stroke(t(this,y)),Ot.restore()},o=new WeakSet,Xi=function(q,vt,Lt,Ct,Ot,Nt,Jt){const _t=(vt+Ct)/2,Yt=(Lt+Ot)/2,It=(Ct+Nt)/2,M=(Ot+Jt)/2;q.bezierCurveTo(_t+2*(Ct-_t)/3,Yt+2*(Ot-Yt)/3,It+2*(Ct-It)/3,M+2*(Ot-M)/3,It,M)},A=new WeakSet,$i=function(){const q=this.currentPath;if(q.length<=2)return[[q[0],q[0],q.at(-1),q.at(-1)]];const vt=[];let Lt,[Ct,Ot]=q[0];for(Lt=1;Lt<q.length-2;Lt++){const[e,p]=q[Lt],[D,U]=q[Lt+1],V=(e+D)/2,et=(p+U)/2,mt=[Ct+2*(e-Ct)/3,Ot+2*(p-Ot)/3],kt=[V+2*(e-V)/3,et+2*(p-et)/3];vt.push([[Ct,Ot],mt,kt,[V,et]]),[Ct,Ot]=[V,et]}const[Nt,Jt]=q[Lt],[_t,Yt]=q[Lt+1],It=[Ct+2*(Nt-Ct)/3,Ot+2*(Jt-Ot)/3],M=[_t+2*(Nt-_t)/3,Yt+2*(Jt-Yt)/3];return vt.push([[Ct,Ot],It,M,[_t,Yt]]),vt},N=new WeakSet,ae=function(){if(this.isEmpty()){H(this,K,De).call(this);return}H(this,$,hi).call(this);const{canvas:q,ctx:vt}=this;vt.setTransform(1,0,0,1,0,0),vt.clearRect(0,0,q.width,q.height),H(this,K,De).call(this);for(const Lt of this.bezierPath2D)vt.stroke(Lt)},Q=new WeakSet,ui=function(q){this.canvas.removeEventListener("pointerleave",t(this,O)),this.canvas.removeEventListener("pointermove",t(this,L)),this.canvas.removeEventListener("pointerup",t(this,P)),this.canvas.addEventListener("pointerdown",t(this,v)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",z.noContextMenu)},10),H(this,S,zi).call(this,q.offsetX,q.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ct=new WeakSet,Fe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",T.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(q=>{var vt;return(vt=this.canvas)==null?void 0:vt.setAttribute("aria-label",q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dt=new WeakSet,Me=function(){Z(this,w,new ResizeObserver(q=>{const vt=q[0].contentRect;vt.width&&vt.height&&this.setDimensions(vt.width,vt.height)})),t(this,w).observe(this.div)},jt=new WeakSet,fe=function(){if(!t(this,E))return;const[q,vt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*q),this.canvas.height=Math.ceil(this.height*vt),H(this,K,De).call(this)},Dt=new WeakSet,fi=function(q,vt){const Lt=H(this,ot,Ie).call(this),Ct=(q-Lt)/t(this,f),Ot=(vt-Lt)/t(this,R);this.scaleFactor=Math.min(Ct,Ot)},K=new WeakSet,De=function(){const q=H(this,ot,Ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+q,this.translationY*this.scaleFactor+q)},ht=new WeakSet,Vi=function(q){const vt=new Path2D;for(let Lt=0,Ct=q.length;Lt<Ct;Lt++){const[Ot,Nt,Jt,_t]=q[Lt];Lt===0&&vt.moveTo(...Ot),vt.bezierCurveTo(Nt[0],Nt[1],Jt[0],Jt[1],_t[0],_t[1])}return vt},wt=new WeakSet,pi=function(q,vt,Lt){const[Ct,Ot,Nt,Jt]=vt;switch(Lt){case 0:for(let _t=0,Yt=q.length;_t<Yt;_t+=2)q[_t]+=Ct,q[_t+1]=Jt-q[_t+1];break;case 90:for(let _t=0,Yt=q.length;_t<Yt;_t+=2){const It=q[_t];q[_t]=q[_t+1]+Ct,q[_t+1]=It+Ot}break;case 180:for(let _t=0,Yt=q.length;_t<Yt;_t+=2)q[_t]=Nt-q[_t],q[_t+1]+=Ot;break;case 270:for(let _t=0,Yt=q.length;_t<Yt;_t+=2){const It=q[_t];q[_t]=Nt-q[_t+1],q[_t+1]=Jt-It}break;default:throw new Error("Invalid rotation")}return q},zt=new WeakSet,qi=function(q,vt,Lt){const[Ct,Ot,Nt,Jt]=vt;switch(Lt){case 0:for(let _t=0,Yt=q.length;_t<Yt;_t+=2)q[_t]-=Ct,q[_t+1]=Jt-q[_t+1];break;case 90:for(let _t=0,Yt=q.length;_t<Yt;_t+=2){const It=q[_t];q[_t]=q[_t+1]-Ot,q[_t+1]=It-Ct}break;case 180:for(let _t=0,Yt=q.length;_t<Yt;_t+=2)q[_t]=Nt-q[_t],q[_t+1]-=Ot;break;case 270:for(let _t=0,Yt=q.length;_t<Yt;_t+=2){const It=q[_t];q[_t]=Jt-q[_t+1],q[_t+1]=Nt-It}break;default:throw new Error("Invalid rotation")}return q},Xt=new WeakSet,Yi=function(q,vt,Lt,Ct){var Yt,It;const Ot=[],Nt=this.thickness/2,Jt=q*vt+Nt,_t=q*Lt+Nt;for(const M of this.paths){const e=[],p=[];for(let D=0,U=M.length;D<U;D++){const[V,et,mt,kt]=M[D],Tt=q*V[0]+Jt,Gt=q*V[1]+_t,Ft=q*et[0]+Jt,Mt=q*et[1]+_t,Bt=q*mt[0]+Jt,Vt=q*mt[1]+_t,Kt=q*kt[0]+Jt,Qt=q*kt[1]+_t;D===0&&(e.push(Tt,Gt),p.push(Tt,Gt)),e.push(Ft,Mt,Bt,Vt,Kt,Qt),p.push(Ft,Mt),D===U-1&&p.push(Kt,Qt)}Ot.push({bezier:H(Yt=At,wt,pi).call(Yt,e,Ct,this.rotation),points:H(It=At,wt,pi).call(It,p,Ct,this.rotation)})}return Ot},Ht=new WeakSet,gi=function(){let q=1/0,vt=-1/0,Lt=1/0,Ct=-1/0;for(const Ot of this.paths)for(const[Nt,Jt,_t,Yt]of Ot){const It=h.Util.bezierBoundingBox(...Nt,...Jt,..._t,...Yt);q=Math.min(q,It[0]),Lt=Math.min(Lt,It[1]),vt=Math.max(vt,It[2]),Ct=Math.max(Ct,It[3])}return[q,Lt,vt,Ct]},ot=new WeakSet,Ie=function(){return t(this,u)?Math.ceil(this.thickness*this.parentScale):0},G=new WeakSet,pe=function(q=!1){if(this.isEmpty())return;if(!t(this,u)){H(this,N,ae).call(this);return}const vt=H(this,Ht,gi).call(this),Lt=H(this,ot,Ie).call(this);Z(this,f,Math.max(T.AnnotationEditor.MIN_SIZE,vt[2]-vt[0])),Z(this,R,Math.max(T.AnnotationEditor.MIN_SIZE,vt[3]-vt[1]));const Ct=Math.ceil(Lt+t(this,f)*this.scaleFactor),Ot=Math.ceil(Lt+t(this,R)*this.scaleFactor),[Nt,Jt]=this.parentDimensions;this.width=Ct/Nt,this.height=Ot/Jt,this.setAspectRatio(Ct,Ot);const _t=this.translationX,Yt=this.translationY;this.translationX=-vt[0],this.translationY=-vt[1],H(this,jt,fe).call(this),H(this,N,ae).call(this),Z(this,m,Ct),Z(this,r,Ot),this.setDims(Ct,Ot);const It=q?Lt/this.scaleFactor/2:0;this.translate(_t-this.translationX-It,Yt-this.translationY-It)},I(At,ht),I(At,wt),I(At,zt),ee(At,"_defaultColor",null),ee(At,"_defaultOpacity",1),ee(At,"_defaultThickness",1),ee(At,"_type","ink");let j=At;d.InkEditor=j},(pt,d,st)=>{var j,R,f,L,O,P,v,y,u,_,E,ve,m,Se,l,Le,g,mi,C,Ki,B,Ji,x,bi,it,Oe,W,Qi;Object.defineProperty(d,"__esModule",{value:!0}),d.StampEditor=void 0;var h=st(1),T=st(4),nt=st(6),z=st(29);const gt=class gt extends T.AnnotationEditor{constructor(S){super({...S,name:"stampEditor"});I(this,E);I(this,m);I(this,l);I(this,g);I(this,C);I(this,B);I(this,x);I(this,it);I(this,W);I(this,j,null);I(this,R,null);I(this,f,null);I(this,L,null);I(this,O,null);I(this,P,null);I(this,v,null);I(this,y,null);I(this,u,!1);I(this,_,!1);Z(this,L,S.bitmapUrl),Z(this,O,S.bitmapFile)}static initialize(S){T.AnnotationEditor.initialize(S)}static get supportedTypes(){const S=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,h.shadow)(this,"supportedTypes",S.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,h.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(S){return this.supportedTypes.includes(S)}static paste(S,i){i.pasteEditor(h.AnnotationEditorType.STAMP,{bitmapFile:S.getAsFile()})}remove(){var S,i;t(this,R)&&(Z(this,j,null),this._uiManager.imageManager.deleteId(t(this,R)),(S=t(this,P))==null||S.remove(),Z(this,P,null),(i=t(this,v))==null||i.disconnect(),Z(this,v,null)),super.remove()}rebuild(){if(!this.parent){t(this,R)&&H(this,l,Le).call(this);return}super.rebuild(),this.div!==null&&(t(this,R)&&H(this,l,Le).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,f)||t(this,j)||t(this,L)||t(this,O))}get isResizable(){return!0}render(){if(this.div)return this.div;let S,i;if(this.width&&(S=this.x,i=this.y),super.render(),this.div.hidden=!0,t(this,j)?H(this,g,mi).call(this):H(this,l,Le).call(this),this.width){const[n,s]=this.parentDimensions;this.setAt(S*n,i*s,this.width*n,this.height*s)}return this.div}static deserialize(S,i,n){if(S instanceof z.StampAnnotationElement)return null;const s=super.deserialize(S,i,n),{rect:o,bitmapUrl:c,bitmapId:A,isSvg:F,accessibilityData:N}=S;A&&n.imageManager.isValidId(A)?Z(s,R,A):Z(s,L,c),Z(s,u,F);const[tt,Q]=s.pageDimensions;return s.width=(o[2]-o[0])/tt,s.height=(o[3]-o[1])/Q,N&&(s.altTextData=N),s}serialize(S=!1,i=null){if(this.isEmpty())return null;const n={annotationType:h.AnnotationEditorType.STAMP,bitmapId:t(this,R),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,u),structTreeParentId:this._structTreeParentId};if(S)return n.bitmapUrl=H(this,it,Oe).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:s,altText:o}=this.altTextData;if(!s&&o&&(n.accessibilityData={type:"Figure",alt:o}),i===null)return n;i.stamps||(i.stamps=new Map);const c=t(this,u)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(t(this,R)))i.stamps.set(t(this,R),{area:c,serialized:n}),n.bitmap=H(this,it,Oe).call(this,!1);else if(t(this,u)){const A=i.stamps.get(t(this,R));c>A.area&&(A.area=c,A.serialized.bitmap.close(),A.serialized.bitmap=H(this,it,Oe).call(this,!1))}return n}};j=new WeakMap,R=new WeakMap,f=new WeakMap,L=new WeakMap,O=new WeakMap,P=new WeakMap,v=new WeakMap,y=new WeakMap,u=new WeakMap,_=new WeakMap,E=new WeakSet,ve=function(S,i=!1){if(!S){this.remove();return}Z(this,j,S.bitmap),i||(Z(this,R,S.id),Z(this,u,S.isSvg)),H(this,g,mi).call(this)},m=new WeakSet,Se=function(){Z(this,f,null),this._uiManager.enableWaiting(!1),t(this,P)&&this.div.focus()},l=new WeakSet,Le=function(){if(t(this,R)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,R)).then(i=>H(this,E,ve).call(this,i,!0)).finally(()=>H(this,m,Se).call(this));return}if(t(this,L)){const i=t(this,L);Z(this,L,null),this._uiManager.enableWaiting(!0),Z(this,f,this._uiManager.imageManager.getFromUrl(i).then(n=>H(this,E,ve).call(this,n)).finally(()=>H(this,m,Se).call(this)));return}if(t(this,O)){const i=t(this,O);Z(this,O,null),this._uiManager.enableWaiting(!0),Z(this,f,this._uiManager.imageManager.getFromFile(i).then(n=>H(this,E,ve).call(this,n)).finally(()=>H(this,m,Se).call(this)));return}const S=document.createElement("input");S.type="file",S.accept=gt.supportedTypesStr,Z(this,f,new Promise(i=>{S.addEventListener("change",async()=>{if(!S.files||S.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(S.files[0]);H(this,E,ve).call(this,n)}i()}),S.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>H(this,m,Se).call(this))),S.click()},g=new WeakSet,mi=function(){const{div:S}=this;let{width:i,height:n}=t(this,j);const[s,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*s,n=this.height*o;else if(i>c*s||n>c*o){const tt=Math.min(c*s/i,c*o/n);i*=tt,n*=tt}const[A,F]=this.parentDimensions;this.setDims(i*A/s,n*F/o),this._uiManager.enableWaiting(!1);const N=Z(this,P,document.createElement("canvas"));S.append(N),S.hidden=!1,H(this,x,bi).call(this,i,n),H(this,W,Qi).call(this),t(this,_)||(this.parent.addUndoableEditor(this),Z(this,_,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},C=new WeakSet,Ki=function(S,i){var c;const[n,s]=this.parentDimensions;this.width=S/n,this.height=i/s,this.setDims(S,i),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,y)!==null&&clearTimeout(t(this,y)),Z(this,y,setTimeout(()=>{Z(this,y,null),H(this,x,bi).call(this,S,i)},200))},B=new WeakSet,Ji=function(S,i){const{width:n,height:s}=t(this,j);let o=n,c=s,A=t(this,j);for(;o>2*S||c>2*i;){const F=o,N=c;o>2*S&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const tt=new OffscreenCanvas(o,c);tt.getContext("2d").drawImage(A,0,0,F,N,0,0,o,c),A=tt.transferToImageBitmap()}return A},x=new WeakSet,bi=function(S,i){S=Math.ceil(S),i=Math.ceil(i);const n=t(this,P);if(!n||n.width===S&&n.height===i)return;n.width=S,n.height=i;const s=t(this,u)?t(this,j):H(this,B,Ji).call(this,S,i),o=n.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(s,0,0,s.width,s.height,0,0,S,i)},it=new WeakSet,Oe=function(S){if(S){if(t(this,u)){const s=this._uiManager.imageManager.getSvgUrl(t(this,R));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=t(this,j),i.getContext("2d").drawImage(t(this,j),0,0),i.toDataURL()}if(t(this,u)){const[i,n]=this.pageDimensions,s=Math.round(this.width*i*nt.PixelsPerInch.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*nt.PixelsPerInch.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(s,o);return c.getContext("2d").drawImage(t(this,j),0,0,t(this,j).width,t(this,j).height,0,0,s,o),c.transferToImageBitmap()}return structuredClone(t(this,j))},W=new WeakSet,Qi=function(){Z(this,v,new ResizeObserver(S=>{const i=S[0].contentRect;i.width&&i.height&&H(this,C,Ki).call(this,i.width,i.height)})),t(this,v).observe(this.div)},ee(gt,"_type","stamp");let ft=gt;d.StampEditor=ft}],__webpack_module_cache__={};function __w_pdfjs_require__(pt){var d=__webpack_module_cache__[pt];if(d!==void 0)return d.exports;var st=__webpack_module_cache__[pt]={exports:{}};return __webpack_modules__[pt](st,st.exports,__w_pdfjs_require__),st.exports}var __webpack_exports__={};return(()=>{var pt=__webpack_exports__;Object.defineProperty(pt,"__esModule",{value:!0}),Object.defineProperty(pt,"AbortException",{enumerable:!0,get:function(){return d.AbortException}}),Object.defineProperty(pt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return nt.AnnotationEditorLayer}}),Object.defineProperty(pt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return d.AnnotationEditorParamsType}}),Object.defineProperty(pt,"AnnotationEditorType",{enumerable:!0,get:function(){return d.AnnotationEditorType}}),Object.defineProperty(pt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return z.AnnotationEditorUIManager}}),Object.defineProperty(pt,"AnnotationLayer",{enumerable:!0,get:function(){return ft.AnnotationLayer}}),Object.defineProperty(pt,"AnnotationMode",{enumerable:!0,get:function(){return d.AnnotationMode}}),Object.defineProperty(pt,"CMapCompressionType",{enumerable:!0,get:function(){return d.CMapCompressionType}}),Object.defineProperty(pt,"DOMSVGFactory",{enumerable:!0,get:function(){return h.DOMSVGFactory}}),Object.defineProperty(pt,"FeatureTest",{enumerable:!0,get:function(){return d.FeatureTest}}),Object.defineProperty(pt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return j.GlobalWorkerOptions}}),Object.defineProperty(pt,"ImageKind",{enumerable:!0,get:function(){return d.ImageKind}}),Object.defineProperty(pt,"InvalidPDFException",{enumerable:!0,get:function(){return d.InvalidPDFException}}),Object.defineProperty(pt,"MissingPDFException",{enumerable:!0,get:function(){return d.MissingPDFException}}),Object.defineProperty(pt,"OPS",{enumerable:!0,get:function(){return d.OPS}}),Object.defineProperty(pt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return st.PDFDataRangeTransport}}),Object.defineProperty(pt,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(pt,"PDFWorker",{enumerable:!0,get:function(){return st.PDFWorker}}),Object.defineProperty(pt,"PasswordResponses",{enumerable:!0,get:function(){return d.PasswordResponses}}),Object.defineProperty(pt,"PermissionFlag",{enumerable:!0,get:function(){return d.PermissionFlag}}),Object.defineProperty(pt,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(pt,"PromiseCapability",{enumerable:!0,get:function(){return d.PromiseCapability}}),Object.defineProperty(pt,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(pt,"SVGGraphics",{enumerable:!0,get:function(){return st.SVGGraphics}}),Object.defineProperty(pt,"UnexpectedResponseException",{enumerable:!0,get:function(){return d.UnexpectedResponseException}}),Object.defineProperty(pt,"Util",{enumerable:!0,get:function(){return d.Util}}),Object.defineProperty(pt,"VerbosityLevel",{enumerable:!0,get:function(){return d.VerbosityLevel}}),Object.defineProperty(pt,"XfaLayer",{enumerable:!0,get:function(){return R.XfaLayer}}),Object.defineProperty(pt,"build",{enumerable:!0,get:function(){return st.build}}),Object.defineProperty(pt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return d.createValidAbsoluteUrl}}),Object.defineProperty(pt,"getDocument",{enumerable:!0,get:function(){return st.getDocument}}),Object.defineProperty(pt,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(pt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(pt,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(pt,"isDataScheme",{enumerable:!0,get:function(){return h.isDataScheme}}),Object.defineProperty(pt,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(pt,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(pt,"noContextMenu",{enumerable:!0,get:function(){return h.noContextMenu}}),Object.defineProperty(pt,"normalizeUnicode",{enumerable:!0,get:function(){return d.normalizeUnicode}}),Object.defineProperty(pt,"renderTextLayer",{enumerable:!0,get:function(){return T.renderTextLayer}}),Object.defineProperty(pt,"setLayerDimensions",{enumerable:!0,get:function(){return h.setLayerDimensions}}),Object.defineProperty(pt,"shadow",{enumerable:!0,get:function(){return d.shadow}}),Object.defineProperty(pt,"updateTextLayer",{enumerable:!0,get:function(){return T.updateTextLayer}}),Object.defineProperty(pt,"version",{enumerable:!0,get:function(){return st.version}});var d=__w_pdfjs_require__(1),st=__w_pdfjs_require__(2),h=__w_pdfjs_require__(6),T=__w_pdfjs_require__(26),nt=__w_pdfjs_require__(27),z=__w_pdfjs_require__(5),ft=__w_pdfjs_require__(29),j=__w_pdfjs_require__(14),R=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:",allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";const brochure="/static/assets/largo_brochure_A4_8-012a11dd.pdf";pdfjs$1.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs$1.version}/pdf.worker.js`;const PdfViewer=()=>{const[pt,d]=reactExports.useState("");console.log(brochure,"brochure");const st=brochure.replace("/media/brochures/largo_brochure_A4_8.pdf","");console.log(st,"brochurePath");const h=async()=>{await fetchBrochure().then(nt=>{nt&&(console.log(nt[0].archivo,"data"),d(nt[0].archivo))})};reactExports.useEffect(()=>{h()},[]);const T=`${st}${pt}`;return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("embed",{src:T,type:"application/pdf",width:"100%",height:"700px"})})},servicesDetail="",LazyServicios=reactExports.lazy(()=>__vitePreload(()=>import("./Servicios-f24173ed.js"),["assets/Servicios-f24173ed.js","assets/index-dae76508.js","assets/index-7996de27.css","assets/setionHeader-1e734e47.js","assets/Servicios-461373b5.css"])),ServecesDetail=({issue:pt})=>{var E,w;const{id:d}=useParams();let[st,h]=reactExports.useState("Nuestros Servicios"),[T,nt]=reactExports.useState(imagenServicios);const{data:z}=useQuery({queryKey:["services"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchInterval:1e3*60*30});let ft="container";const[j,R]=reactExports.useState(),[f,L]=reactExports.useState(null),[O,P]=reactExports.useState(null);reactExports.useEffect(()=>{if(z){if(d){const r=z.filter(l=>l.id===parseInt(d));if(r){const l="servicios de "+r[0].nombre;h(l),R(r),r[0].nombre==="Topografía"&&nt(imagenTopografia),r[0].nombre==="Ingeniería y Consultoría"&&nt(imagenIngenieria),r[0].nombre==="Medio Ambiente"&&nt(imagenMedioAmbiente)}}else R(z),h("Nuestros Servicios");const m=z.flatMap(r=>r.subservicios);P(m)}},[z,d]);const{width:v}=useScreenSize(),y=v<=1e3,u=reactExports.useRef(null);y&&(ft="mobile");const _=async m=>{if(!m)return;const r=[];r.push(m),L(r),console.log(r,"selectedSubServicio"),r&&(P(r),setTimeout(()=>{if(L(null),!z)return;const l=z.flatMap(k=>k.subservicios);P(l)},2e4))};return reactExports.useEffect(()=>{u.current&&f&&u.current.scrollIntoView({behavior:"smooth"})},[f]),j?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(PagesLayout,{children:[jsxRuntimeExports.jsx(Banner,{title:j.length==1?j[0].nombre:"Servicios",paragraph:st.toString(),image:T}),jsxRuntimeExports.jsxs("div",{className:ft,children:[jsxRuntimeExports.jsx("div",{className:"row servicio",children:jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsxs("h2",{className:"text-center",children:[" ",st]})})}),jsxRuntimeExports.jsxs("div",{className:"row content",children:[jsxRuntimeExports.jsx("div",{className:"col-12 col-md-4 ",children:jsxRuntimeExports.jsx("div",{className:`aside ${pt}-template`,children:j.map(m=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"row",children:[jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"servicio",children:[jsxRuntimeExports.jsx("h3",{children:m==null?void 0:m.nombre}),jsxRuntimeExports.jsx("p",{children:m==null?void 0:m.descripcion})]},m.id)}),jsxRuntimeExports.jsx("div",{children:m.subservicios.map(r=>jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(motion.div,{onClick:()=>_(r),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"subservicio",children:jsxRuntimeExports.jsxs("div",{className:"row items",children:[jsxRuntimeExports.jsx("span",{className:"col-1 icon-row",children:jsxRuntimeExports.jsx(AiOutlineDoubleRight,{})}),jsxRuntimeExports.jsxs("h5",{className:"col-10",children:[r.nombre+"   ",jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(AiFillCaretDown,{})})]})]})},r.id)})},r.id))})]})},m.id))})}),jsxRuntimeExports.jsxs("div",{className:"col-12 col-md-8 ",children:[jsxRuntimeExports.jsx("div",{className:"row slider",children:jsxRuntimeExports.jsx(SliderServices,{subServicios:O})}),jsxRuntimeExports.jsx("div",{ref:u,children:jsxRuntimeExports.jsx("br",{})},f&&((E=f[0])==null?void 0:E.descripcion)),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{className:"row porque-elegirnos",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsxs(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0,scale:.5},transition:{duration:.3,delay:1,delayChildren:.3,staggerChildren:.3},children:[jsxRuntimeExports.jsx("h2",{children:f?f[0].nombre:"Servicios de calidad y con la más alta tecnología"}),jsxRuntimeExports.jsx("p",{children:f?f[0].descripcion:"Somos una empresa con más de 10 años de experiencia en el mercado, con profesionales altamente calificados y con amplia experiencia en el sector público y privado, brindando servicios de calidad y con la más alta tecnología."})]},f&&((w=f[0])==null?void 0:w.id))}),jsxRuntimeExports.jsx("div",{children:j.map(m=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"row",children:[jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"servicio",children:[jsxRuntimeExports.jsx("h2",{children:m==null?void 0:m.nombre}),jsxRuntimeExports.jsx("p",{children:m==null?void 0:m.descripcion})]},m.id)}),jsxRuntimeExports.jsx("div",{children:m.caracteristicas.map(r=>jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx("div",{className:"col-12",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"subservicio",children:jsxRuntimeExports.jsxs("div",{className:"row items",children:[jsxRuntimeExports.jsx("span",{className:"col-1 icon-row",children:jsxRuntimeExports.jsx(AiOutlineDoubleRight,{})}),jsxRuntimeExports.jsx("h5",{className:"col-10",children:r.nombre+"   "})]})},r.id)})},r.id))})]})},m.id))}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{children:"Brochure"}),jsxRuntimeExports.jsx("p",{children:"Descarga nuestro brochure para más información."}),jsxRuntimeExports.jsx(PdfViewer,{})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"row",children:jsxRuntimeExports.jsx(LazyServicios,{})})]})]})}):jsxRuntimeExports.jsx("h3",{children:"Error"})};export{ServecesDetail as default};
