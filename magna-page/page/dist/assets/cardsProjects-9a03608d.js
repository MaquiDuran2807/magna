import{U as _,j as e,r as d,u as g,m as f,L as A}from"./index-73912ebe.js";const C=({type:c,actualPage:m,imagenes:o})=>{const[u,n]=d.useState([]),[y,h]=d.useState([]),[x,v]=d.useState([]),[i,j]=d.useState(),{data:a}=g({queryKey:["projects"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30});if(!a)return null;d.useEffect(()=>{if(c===0){const t=Array.isArray(a.results)?a.results.map(r=>r.tipo).filter((r,l,N)=>N.findIndex(b=>b.id===r.id)===l):[];n(a.results),h(o),v([{id:0,name:"Todos"},...t]);return}const s=a.results.filter(t=>t.tipo.id===c).filter(t=>t.id!==m);n(s),h(o)},[c,m,o]);const p=s=>{if(s===0){n(a.results),j(void 0);return}if(!s)return;const t=x.filter(l=>l.id===s)[0];if(!t)return;const r=Array.isArray(a.results)?a.results.filter(l=>l.tipo.id===t.id):[];j(t),n(r)};return e.jsx("div",{children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row",children:c===0?x?x.map(s=>e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"col-12 col-sm-6 col-lg-3 col-md-4",children:e.jsx("button",{className:"boton-1 ",onClick:()=>p(s.id),children:s.name})},s.id)):null:e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"col-4 col-lg-3",children:e.jsx("button",{className:"boton-1",onClick:()=>p(i==null?void 0:i.id),children:i==null?void 0:i.name})},i==null?void 0:i.id)}),e.jsx("div",{className:"row",children:Array.isArray(u)&&u.map(s=>{let t="no hay imagen";try{t=y.filter(r=>r.proyecto===s.id)[0].imagen}catch(r){console.error(r)}return e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-100},transition:{duration:.6},className:"col-md-6 col-lg-4 col-12 col-xl-3",children:e.jsx("div",{children:e.jsx("div",{className:"card-project",children:e.jsxs("div",{className:"card-body card-body-projects",children:[t?e.jsx("img",{src:t,alt:"",className:"img-fluid"}):e.jsx("p",{children:"No hay imagen"}),e.jsx("div",{className:"content-1 ",children:e.jsxs("div",{children:[e.jsx("h5",{className:"card-title text-center",children:s.nombre}),e.jsx("p",{className:"card-text text-center",children:`${s.descripcion.slice(0,100)} ...`})]})}),e.jsx(A,{to:`/projects/${s.id}`,className:"boton-1 text-center end-boton",children:"Ver m√°s"})]})})})},s.id)})})]})})};function S({type:c,actualPage:m,imagenes:o}){const{isVisible:u,ref:n}=_("100px");return e.jsx("div",{id:"LazyServices",ref:n,children:u?e.jsx(C,{type:c,actualPage:m,imagenes:o}):null})}export{S as default};
