{"version":3,"file":"cardsProjects-e98f4a0b.js","sources":["../../src/components/cardsProjects.tsx"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport { ProyectosMagna,Result,ProyectImagesMagna,Tipo } from '../types/projects';\nimport { motion } from 'framer-motion';\nimport { useQuery } from '@tanstack/react-query';\nimport { Link } from 'react-router-dom';\nimport \"./styles/cardsProjects.css\";\nimport useIntersectionObserver from '../hooks/useLazyload';\n\ninterface Props {\n    type: Tipo | number | undefined;\n    actualPage: number| null;\n    imagenes: ProyectImagesMagna[];\n}\n\nconst CardsProjects = ({ type, actualPage,imagenes }: Props) => {\n    const [proyectos_card_type, setProyectos_card_type] = useState<Result[]|Result >([]);\n    const [imagenesCard, setImagenes] = useState<ProyectImagesMagna[]>([]);\n    const [types,setTypes] =  useState<Tipo[]>([]);\n    const [typeProject, setTypeProject] = useState<Tipo>();\n    const { data:Project } = useQuery<ProyectosMagna>({\n        queryKey: ['projects'],\n        staleTime: 1000*60*30,refetchOnWindowFocus: false,refetchOnMount: false,refetchOnReconnect: false,refetchInterval: 1000*60*30,\n    });\n\n    \n    if (!Project) {\n        return null;\n    }\n    \n    useEffect(() => {\n        if (type === 0) {\n            const types1: Tipo[]= Array.isArray(Project.results) ? Project.results.map((proyecto: Result) => proyecto.tipo).filter ((proyecto: Tipo, index: number,self: Tipo[]) => self.findIndex((t: Tipo) => t.id === proyecto.id) === index) : [];\n            setProyectos_card_type(Project.results);\n            setImagenes(imagenes);\n            setTypes([\n                {\n                    id:0,\n                    name:\"Todos\"\n                },\n                ...types1\n            ]);\n            return;\n        }\n        const proyectos_card_type_1: Result[] = Project.results\n    .filter((proyecto: Result) => proyecto.tipo.id === type) // Filtra por tipo\n    .filter((proyecto: Result) => proyecto.id !== actualPage)\n\n        setProyectos_card_type(proyectos_card_type_1);\n        setImagenes(imagenes);\n        \n    }, [type, actualPage,imagenes]);\n\n    const filterProjects = (type: number|undefined) => {\n        if (type === 0) {\n            setProyectos_card_type(Project.results);\n            setTypeProject(undefined);\n            return;\n        }\n        if (!type) {\n\n            return;\n        }\n        const newTypeProject = types.filter((typeProject: Tipo) => typeProject.id === type)[0];\n        if (!newTypeProject) {\n            return;\n        }\n        const proyectos_card_type_1: Result[] = Array.isArray(Project.results) ? Project.results.filter((proyecto: Result) => proyecto.tipo.id === newTypeProject.id) : [];\n        setTypeProject(newTypeProject);\n        setProyectos_card_type(proyectos_card_type_1);\n    }\n    return (\n        <div>\n            <div className=\"container\">\n                <div className=\"row\">\n                {\n                        type === 0 ?\n                            !types ? null:\n                                types.map((typeProject: Tipo) => {\n                                    return (\n                                        <motion.div\n                                            key={typeProject.id}\n                                            initial={{ opacity: 0 }}\n                                            animate={{ opacity: 1 }}\n                                            exit={{ opacity: 0 }}\n                                            transition={{ duration: 0.5 }}\n                                            className=\"col-12 col-sm-6 col-lg-3 col-md-4\"\n                                        >\n                                            <button className=\"boton-1 \" onClick={() => filterProjects(typeProject.id)}>{typeProject.name}</button>\n                                        </motion.div>\n                                    )\n                                },\n                                )\n                                :\n                                <motion.div\n                                    key={typeProject?.id}\n                                    initial={{ opacity: 0 }}\n                                    animate={{ opacity: 1 }}\n                                    exit={{ opacity: 0 }}\n                                    transition={{ duration: 0.5 }}\n                                    className=\"col-4 col-lg-3\"\n                                >\n                                    <button className=\"boton-1\" onClick={() => filterProjects(typeProject?.id)}>{typeProject?.name}</button>\n                                </motion.div>\n                                \n                    }\n                </div>\n                <div className=\"row\">\n\n            {Array.isArray(proyectos_card_type) && proyectos_card_type.map((proyecto: Result) => {\n                let firstImage = \"no hay imagen\";\n               try {\n                firstImage = imagenesCard.filter((imagen: ProyectImagesMagna) => imagen.proyecto === proyecto.id)[0].imagen;\n               } catch (error) {\n                console.error(error);\n               }\n                return (\n                    \n                    <motion.div\n                        key={proyecto.id}\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0, x: -100 }}\n                        transition={{ duration: 0.6 }}\n                        className=\"col-md-6 col-lg-4 col-12 col-xl-3\"\n                    >\n                        <div >\n                            <div className=\"card-project\">\n                                <div className=\"card-body card-body-projects\">\n                                    {firstImage ? <img src={firstImage} alt=\"\" className=\"img-fluid card-img\" /> : <p>No hay imagen</p>}\n                                    <div className=\"content-1 \">\n                                        <div>\n                                            <h5 className=\"card-title text-center\">{proyecto.nombre}</h5>\n                                            <p className=\"card-text text-center\">{`${proyecto.descripcion.slice(0, 100)} ...`\n                                            }</p>\n                                        </div>\n                                    </div>\n                                    <Link to={`/projects/${proyecto.id}`} className=\"boton-1 text-center end-boton\">Ver m√°s</Link>\n                                </div>\n                            </div>\n                        </div>\n                            \n                    </motion.div>\n                );\n            }\n            )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default function LazyCardsProjects ({ type, actualPage,imagenes }: Props) {\n    const {  isVisible, ref } = useIntersectionObserver('100px');\n    return (\n        <div id=\"LazyServices\" ref={ref}>\n            {isVisible ? <CardsProjects type={type} actualPage={actualPage} imagenes={imagenes}  /> : null}\n        </div>\n    );\n}\n\n\n"],"names":["CardsProjects","type","actualPage","imagenes","proyectos_card_type","setProyectos_card_type","useState","imagenesCard","setImagenes","types","setTypes","typeProject","setTypeProject","Project","useQuery","useEffect","types1","proyecto","index","self","t","proyectos_card_type_1","filterProjects","newTypeProject","jsx","jsxs","motion","firstImage","imagen","error","Link","LazyCardsProjects","isVisible","ref","useIntersectionObserver"],"mappings":"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"}