import{l as g,n as v,j as s,S as b,A as E,b as P,N,c as T,m as S,r as w,_,R as h,e as O,u as j,P as I,a as M,L as x}from"./index-73912ebe.js";import{B as F}from"./banner-3b286f1a.js";import{Proyectos as R}from"./proyectos-933df398.js";import"./index.esm-ebd93029.js";import"./setionHeader-b5d18e70.js";import"./Recurso 1-e9af6898.js";import"./ScreenSize-8ac180d5.js";function $(i){const{effect:e,swiper:t,on:c,setTranslate:l,setTransition:f,overwriteParams:o,perspective:a,recreateShadows:n,getEffectParams:r}=i;c("beforeInit",()=>{if(t.params.effect!==e)return;t.classNames.push(`${t.params.containerModifierClass}${e}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=o?o():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),c("setTranslate",()=>{t.params.effect===e&&l()}),c("setTransition",(d,p)=>{t.params.effect===e&&f(p)}),c("transitionEnd",()=>{if(t.params.effect===e&&n){if(!r||!r().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),n()}});let m;c("virtualUpdate",()=>{t.params.effect===e&&(t.slides.length||(m=!0),requestAnimationFrame(()=>{m&&t.slides&&t.slides.length&&(l(),m=!1)}))})}function D(i,e){const t=g(e);return t!==e&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function q(i){let{swiper:e,duration:t,transformElements:c,allSlides:l}=i;const{activeIndex:f}=e,o=a=>a.parentElement?a.parentElement:e.slides.filter(r=>r.shadowRoot&&r.shadowRoot===a.parentNode)[0];if(e.params.virtualTranslate&&t!==0){let a=!1,n;l?n=c:n=c.filter(r=>{const m=r.classList.contains("swiper-slide-transform")?o(r):r;return e.getSlideIndex(m)===f}),n.forEach(r=>{v(r,()=>{if(a||!e||e.destroyed)return;a=!0,e.animating=!1;const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(m)})})}}function L(i){let{swiper:e,extendParams:t,on:c}=i;t({fadeEffect:{crossFade:!1}}),$({effect:"fade",swiper:e,on:c,setTranslate:()=>{const{slides:o}=e,a=e.params.fadeEffect;for(let n=0;n<o.length;n+=1){const r=e.slides[n];let d=-r.swiperSlideOffset;e.params.virtualTranslate||(d-=e.translate);let p=0;e.isHorizontal()||(p=d,d=0);const y=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(r.progress),0):1+Math.min(Math.max(r.progress,-1),0),u=D(a,r);u.style.opacity=y,u.style.transform=`translate3d(${d}px, ${p}px, 0px)`}},setTransition:o=>{const a=e.slides.map(n=>g(n));a.forEach(n=>{n.style.transitionDuration=`${o}ms`}),q({swiper:e,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}const V=({images:i})=>s.jsx(b,{spaceBetween:0,slidesPerView:1,autoplay:{delay:8e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},modules:[E,P,N,L],effect:"fade",className:"projectDetailSlider",children:i.map((e,t)=>s.jsx(T,{children:s.jsxs(S.div,{initial:{opacity:0,y:50},transition:{duration:.5},animate:{opacity:1,y:0},children:[s.jsx("img",{src:`${e.imagen}`,alt:`proyecto-${e.proyecto} `,className:"img-fluid imagen-proecto"}),s.jsx("a",{href:e.references_url?e.references_url:"https://www.Magnaingenieriaytopografia.com",target:"_blank",rel:"noreferrer",children:e.references_name?e.references_name:"Magnaingenieriaytopografia.com"})]})},t))});const k=w.lazy(()=>_(()=>import("./cardsProjects-9a03608d.js"),["assets/cardsProjects-9a03608d.js","assets/index-73912ebe.js","assets/index-3f85233c.css","assets/cardsProjects-4abee322.css"])),G=()=>{const[i,e]=h.useState(),[t,c]=h.useState([]),{id:l}=O(),{data:f}=j({queryKey:["projects"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30}),{data:o}=j({queryKey:["projectsImages"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30});return!f||!o||!l||(w.useEffect(()=>{const a=f.results.find(r=>r.id===parseInt(l))||null,n=o.filter(r=>r.proyecto===parseInt(l));console.log(a,"aqui estoy en project_select",n,"images"),a&&(e(a),c(n))},[f,o,l]),!i||!t)?null:s.jsx(s.Fragment,{children:s.jsxs(I,{children:[s.jsx(F,{title:"Proyectos",paragraph:"Proyectos",image:M}),s.jsxs("div",{className:"container-fluid",children:[s.jsxs("div",{className:"row titulo",children:[s.jsx("h2",{className:"col-10",children:i.nombre}),s.jsx(x,{to:"/projects",className:"col-2",children:s.jsx("button",{className:"boton-1 ",children:"ver m치s"})})]}),s.jsxs("div",{className:"row project-detail",children:[s.jsx("div",{className:"col-12 col-md-6 ",children:s.jsx(V,{images:t})}),s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsx("br",{}),s.jsx("br",{}),s.jsx("h3",{children:"Descripci칩n del proyecto"}),s.jsx("p",{children:i.descripcion}),s.jsx("h3",{children:"Ubicaci칩n"}),s.jsxs("p",{children:[i.ciudad.departamento.pais.nombre,", ",i.ciudad.departamento.nombre,", ",i.ciudad.nombre]}),s.jsx("h3",{children:"Servicios prestados"}),i.servicios.map(a=>s.jsxs(s.Fragment,{children:[s.jsx("h5",{children:a.nombre},a.id),s.jsx(x,{to:"/servicios",children:s.jsx("button",{className:"boton-1",children:"ver m치s"})})]}))]},l)]}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12 relacionados",children:s.jsx("h3",{children:"Proyectos relacionados"})})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx(k,{type:i.tipo.id,actualPage:i.id,imagenes:o})})}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsx(R,{})})})]})]})})};export{G as default};
