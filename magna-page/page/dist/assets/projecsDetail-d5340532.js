import{o as g,p as v,j as e,S as b,A as E,b as P,N,c as T,n as S,r as w,_,R as h,e as O,u as j,P as I,a as M,L as x}from"./index-5591fd3e.js";import{B as F}from"./banner-9686fb25.js";import{Proyectos as R}from"./proyectos-cdd01d64.js";import"./index.esm-0c0661b7.js";import"./setionHeader-9e16d5df.js";import"./Recurso 1-e9af6898.js";import"./ScreenSize-0dba7d34.js";function $(i){const{effect:s,swiper:t,on:c,setTranslate:l,setTransition:f,overwriteParams:o,perspective:a,recreateShadows:n,getEffectParams:r}=i;c("beforeInit",()=>{if(t.params.effect!==s)return;t.classNames.push(`${t.params.containerModifierClass}${s}`),a&&a()&&t.classNames.push(`${t.params.containerModifierClass}3d`);const d=o?o():{};Object.assign(t.params,d),Object.assign(t.originalParams,d)}),c("setTranslate",()=>{t.params.effect===s&&l()}),c("setTransition",(d,p)=>{t.params.effect===s&&f(p)}),c("transitionEnd",()=>{if(t.params.effect===s&&n){if(!r||!r().slideShadows)return;t.slides.forEach(d=>{d.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),n()}});let m;c("virtualUpdate",()=>{t.params.effect===s&&(t.slides.length||(m=!0),requestAnimationFrame(()=>{m&&t.slides&&t.slides.length&&(l(),m=!1)}))})}function D(i,s){const t=g(s);return t!==s&&(t.style.backfaceVisibility="hidden",t.style["-webkit-backface-visibility"]="hidden"),t}function k(i){let{swiper:s,duration:t,transformElements:c,allSlides:l}=i;const{activeIndex:f}=s,o=a=>a.parentElement?a.parentElement:s.slides.filter(r=>r.shadowRoot&&r.shadowRoot===a.parentNode)[0];if(s.params.virtualTranslate&&t!==0){let a=!1,n;l?n=c:n=c.filter(r=>{const m=r.classList.contains("swiper-slide-transform")?o(r):r;return s.getSlideIndex(m)===f}),n.forEach(r=>{v(r,()=>{if(a||!s||s.destroyed)return;a=!0,s.animating=!1;const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});s.wrapperEl.dispatchEvent(m)})})}}function q(i){let{swiper:s,extendParams:t,on:c}=i;t({fadeEffect:{crossFade:!1}}),$({effect:"fade",swiper:s,on:c,setTranslate:()=>{const{slides:o}=s,a=s.params.fadeEffect;for(let n=0;n<o.length;n+=1){const r=s.slides[n];let d=-r.swiperSlideOffset;s.params.virtualTranslate||(d-=s.translate);let p=0;s.isHorizontal()||(p=d,d=0);const y=s.params.fadeEffect.crossFade?Math.max(1-Math.abs(r.progress),0):1+Math.min(Math.max(r.progress,-1),0),u=D(a,r);u.style.opacity=y,u.style.transform=`translate3d(${d}px, ${p}px, 0px)`}},setTransition:o=>{const a=s.slides.map(n=>g(n));a.forEach(n=>{n.style.transitionDuration=`${o}ms`}),k({swiper:s,duration:o,transformElements:a,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!s.params.cssMode})})}const L=({images:i})=>e.jsx(b,{spaceBetween:0,slidesPerView:1,autoplay:{delay:8e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},modules:[E,P,N,q],effect:"fade",className:"projectDetailSlider",children:i.map((s,t)=>e.jsx(T,{style:{height:"100%",width:"100%",backgroundColor:"white"},children:e.jsxs(S.div,{initial:{opacity:0,y:50},transition:{duration:.5},animate:{opacity:1,y:0},children:[e.jsx("img",{src:`${s.imagen}`,alt:`proyecto-${s.proyecto} `,className:"img-fluid imagen-proecto"}),e.jsx("div",{children:e.jsx("a",{href:s.references_url?s.references_url:"https://www.Magnaingenieriaytopografia.com",target:"_blank",rel:"noreferrer",children:s.references_name?s.references_name:"Magnaingenieriaytopografia.com"})})]})},t))});const V=w.lazy(()=>_(()=>import("./cardsProjects-ffffb991.js"),["assets/cardsProjects-ffffb991.js","assets/index-5591fd3e.js","assets/index-7996de27.css","assets/cardsProjects-b03829ff.css"])),G=()=>{const[i,s]=h.useState(),[t,c]=h.useState([]),{id:l}=O(),{data:f}=j({queryKey:["projects"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30}),{data:o}=j({queryKey:["projectsImages"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e3*60*30});return!f||!o||!l||(w.useEffect(()=>{const a=f.results.find(r=>r.id===parseInt(l))||null,n=o.filter(r=>r.proyecto===parseInt(l));console.log(a,"aqui estoy en project_select",n,"images"),a&&(s(a),c(n))},[f,o,l]),!i||!t)?null:e.jsx(e.Fragment,{children:e.jsxs(I,{children:[e.jsx(F,{title:"Proyectos",paragraph:"Proyectos",image:M}),e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"row titulo",children:[e.jsx("h2",{className:"col-10",children:i.nombre}),e.jsx(x,{to:"/projects",className:"col-2",children:e.jsx("button",{className:"boton-1 ",children:"ver m치s"})})]}),e.jsxs("div",{className:"row project-detail",children:[e.jsx("div",{className:"col-12 col-md-6 ",children:e.jsx(L,{images:t})}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("h3",{children:"Descripci칩n del proyecto"}),e.jsx("p",{children:i.descripcion}),e.jsx("h3",{children:"Ubicaci칩n"}),e.jsxs("p",{children:[i.ciudad.departamento.pais.nombre,", ",i.ciudad.departamento.nombre,", ",i.ciudad.nombre]}),e.jsx("h3",{children:"Servicios prestados"}),i.servicios.map(a=>e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:a.nombre},a.id),e.jsx(x,{to:"/servicios",children:e.jsx("button",{className:"boton-1",children:"ver m치s"})})]}))]},l)]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 relacionados",children:e.jsx("h3",{children:"Proyectos relacionados"})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(V,{type:i.tipo.id,actualPage:i.id,imagenes:o})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(R,{})})})]})]})})};export{G as default};
