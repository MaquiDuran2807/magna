var J=(r,t,e)=>{if(!t.has(r))throw TypeError("Cannot "+e)};var s=(r,t,e)=>(J(r,t,"read from private field"),e?e.call(r):t.get(r)),a=(r,t,e)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,e)},o=(r,t,e,i)=>(J(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e);var l=(r,t,e)=>(J(r,t,"access private method"),e);import{S as mt,s as X,n as Ct,a as ct,i as lt,t as Ot,k as Et,e as St,r as dt,b as bt,v as Qt,u as Ut}from"./utils-2d216c44.js";import{r as m}from"./jsx-runtime-e1ec7694.js";var p,n,M,f,E,I,g,A,F,T,S,Q,O,x,U,D,L,Y,k,Z,B,$,j,tt,K,et,V,st,W,rt,_,Rt,yt,wt=(yt=class extends mt{constructor(t,e){super();a(this,U);a(this,L);a(this,k);a(this,B);a(this,j);a(this,K);a(this,V);a(this,W);a(this,_);a(this,p,void 0);a(this,n,void 0);a(this,M,void 0);a(this,f,void 0);a(this,E,void 0);a(this,I,void 0);a(this,g,void 0);a(this,A,void 0);a(this,F,void 0);a(this,T,void 0);a(this,S,void 0);a(this,Q,void 0);a(this,O,void 0);a(this,x,new Set);this.options=e,o(this,p,t),o(this,g,null),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(s(this,n).addObserver(this),ft(s(this,n),this.options)?l(this,U,D).call(this):this.updateResult(),l(this,j,tt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return it(s(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return it(s(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,K,et).call(this),l(this,V,st).call(this),s(this,n).removeObserver(this)}setOptions(t,e){const i=this.options,y=s(this,n);if(this.options=s(this,p).defaultQueryOptions(t),X(i,this.options)||s(this,p).getQueryCache().notify({type:"observerOptionsUpdated",query:s(this,n),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),l(this,W,rt).call(this);const u=this.hasListeners();u&&pt(s(this,n),y,this.options,i)&&l(this,U,D).call(this),this.updateResult(e),u&&(s(this,n)!==y||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&l(this,L,Y).call(this);const h=l(this,k,Z).call(this);u&&(s(this,n)!==y||this.options.enabled!==i.enabled||h!==s(this,O))&&l(this,B,$).call(this,h)}getOptimisticResult(t){const e=s(this,p).getQueryCache().build(s(this,p),t),i=this.createResult(e,t);return Ft(this,i)&&(o(this,f,i),o(this,I,this.options),o(this,E,s(this,n).state)),i}getCurrentResult(){return s(this,f)}trackResult(t){const e={};return Object.keys(t).forEach(i=>{Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:()=>(s(this,x).add(i),t[i])})}),e}getCurrentQuery(){return s(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=s(this,p).defaultQueryOptions(t),i=s(this,p).getQueryCache().build(s(this,p),e);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,e))}fetch(t){return l(this,U,D).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),s(this,f)))}createResult(t,e){var ut;const i=s(this,n),y=this.options,u=s(this,f),h=s(this,E),d=s(this,I),w=t!==i?t.state:s(this,M),{state:c}=t;let{error:z,errorUpdatedAt:at,fetchStatus:P,status:C}=c,ht=!1,R;if(e._optimisticResults){const b=this.hasListeners(),G=!b&&ft(t,e),vt=b&&pt(t,i,e,y);(G||vt)&&(P=St(t.options.networkMode)?"fetching":"paused",c.dataUpdatedAt||(C="pending")),e._optimisticResults==="isRestoring"&&(P="idle")}if(e.select&&typeof c.data<"u")if(u&&c.data===(h==null?void 0:h.data)&&e.select===s(this,A))R=s(this,F);else try{o(this,A,e.select),R=e.select(c.data),R=dt(u==null?void 0:u.data,R,e),o(this,F,R),o(this,g,null)}catch(b){o(this,g,b)}else R=c.data;if(typeof e.placeholderData<"u"&&typeof R>"u"&&C==="pending"){let b;if(u!=null&&u.isPlaceholderData&&e.placeholderData===(d==null?void 0:d.placeholderData))b=u.data;else if(b=typeof e.placeholderData=="function"?e.placeholderData((ut=s(this,T))==null?void 0:ut.state.data,s(this,T)):e.placeholderData,e.select&&typeof b<"u")try{b=e.select(b),o(this,g,null)}catch(G){o(this,g,G)}typeof b<"u"&&(C="success",R=dt(u==null?void 0:u.data,b,e),ht=!0)}s(this,g)&&(z=s(this,g),R=s(this,F),at=Date.now(),C="error");const H=P==="fetching",N=C==="pending",q=C==="error",ot=N&&H;return{status:C,fetchStatus:P,isPending:N,isSuccess:C==="success",isError:q,isInitialLoading:ot,isLoading:ot,data:R,dataUpdatedAt:c.dataUpdatedAt,error:z,errorUpdatedAt:at,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>w.dataUpdateCount||c.errorUpdateCount>w.errorUpdateCount,isFetching:H,isRefetching:H&&!N,isLoadingError:q&&c.dataUpdatedAt===0,isPaused:P==="paused",isPlaceholderData:ht,isRefetchError:q&&c.dataUpdatedAt!==0,isStale:nt(t,e),refetch:this.refetch}}updateResult(t){const e=s(this,f),i=this.createResult(s(this,n),this.options);if(o(this,E,s(this,n).state),o(this,I,this.options),s(this,E).data!==void 0&&o(this,T,s(this,n)),X(i,e))return;o(this,f,i);const y={},u=()=>{if(!e)return!0;const{notifyOnChangeProps:h}=this.options,d=typeof h=="function"?h():h;if(d==="all"||!d&&!s(this,x).size)return!0;const v=new Set(d??s(this,x));return this.options.throwOnError&&v.add("error"),Object.keys(s(this,f)).some(w=>{const c=w;return s(this,f)[c]!==e[c]&&v.has(c)})};(t==null?void 0:t.listeners)!==!1&&u()&&(y.listeners=!0),l(this,_,Rt).call(this,{...y,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,j,tt).call(this)}},p=new WeakMap,n=new WeakMap,M=new WeakMap,f=new WeakMap,E=new WeakMap,I=new WeakMap,g=new WeakMap,A=new WeakMap,F=new WeakMap,T=new WeakMap,S=new WeakMap,Q=new WeakMap,O=new WeakMap,x=new WeakMap,U=new WeakSet,D=function(t){l(this,W,rt).call(this);let e=s(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Ct)),e},L=new WeakSet,Y=function(){if(l(this,K,et).call(this),ct||s(this,f).isStale||!lt(this.options.staleTime))return;const e=Ot(s(this,f).dataUpdatedAt,this.options.staleTime)+1;o(this,S,setTimeout(()=>{s(this,f).isStale||this.updateResult()},e))},k=new WeakSet,Z=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(s(this,n)):this.options.refetchInterval)??!1},B=new WeakSet,$=function(t){l(this,V,st).call(this),o(this,O,t),!(ct||this.options.enabled===!1||!lt(s(this,O))||s(this,O)===0)&&o(this,Q,setInterval(()=>{(this.options.refetchIntervalInBackground||Et.isFocused())&&l(this,U,D).call(this)},s(this,O)))},j=new WeakSet,tt=function(){l(this,L,Y).call(this),l(this,B,$).call(this,l(this,k,Z).call(this))},K=new WeakSet,et=function(){s(this,S)&&(clearTimeout(s(this,S)),o(this,S,void 0))},V=new WeakSet,st=function(){s(this,Q)&&(clearInterval(s(this,Q)),o(this,Q,void 0))},W=new WeakSet,rt=function(){const t=s(this,p).getQueryCache().build(s(this,p),this.options);if(t===s(this,n))return;const e=s(this,n);o(this,n,t),o(this,M,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},_=new WeakSet,Rt=function(t){bt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(s(this,f))}),s(this,p).getQueryCache().notify({query:s(this,n),type:"observerResultsUpdated"})})},yt);function It(r,t){return t.enabled!==!1&&!r.state.dataUpdatedAt&&!(r.state.status==="error"&&t.retryOnMount===!1)}function ft(r,t){return It(r,t)||r.state.dataUpdatedAt>0&&it(r,t,t.refetchOnMount)}function it(r,t,e){if(t.enabled!==!1){const i=typeof e=="function"?e(r):e;return i==="always"||i!==!1&&nt(r,t)}return!1}function pt(r,t,e,i){return e.enabled!==!1&&(r!==t||i.enabled===!1)&&(!e.suspense||r.state.status!=="error")&&nt(r,e)}function nt(r,t){return r.isStaleByTime(t.staleTime)}function Ft(r,t){return!X(r.getCurrentResult(),t)}var gt=m.createContext(!1),Tt=()=>m.useContext(gt);gt.Provider;function xt(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var Pt=m.createContext(xt()),Dt=()=>m.useContext(Pt),Mt=(r,t)=>{(r.suspense||r.throwOnError)&&(t.isReset()||(r.retryOnMount=!1))},At=r=>{m.useEffect(()=>{r.clearReset()},[r])},Lt=({result:r,errorResetBoundary:t,throwOnError:e,query:i})=>r.isError&&!t.isReset()&&!r.isFetching&&i&&Qt(e,[r.error,i]),kt=r=>{r.suspense&&typeof r.staleTime!="number"&&(r.staleTime=1e3)},Bt=(r,t)=>(r==null?void 0:r.suspense)&&t.isPending,jt=(r,t,e)=>t.fetchOptimistic(r).catch(()=>{e.clearReset()});function Kt(r,t,e){const i=Ut(e),y=Tt(),u=Dt(),h=i.defaultQueryOptions(r);h._optimisticResults=y?"isRestoring":"optimistic",kt(h),Mt(h,u),At(u);const[d]=m.useState(()=>new t(i,h)),v=d.getOptimisticResult(h);if(m.useSyncExternalStore(m.useCallback(w=>{const c=y?()=>{}:d.subscribe(bt.batchCalls(w));return d.updateResult(),c},[d,y]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),m.useEffect(()=>{d.setOptions(h,{listeners:!1})},[h,d]),Bt(h,v))throw jt(h,d,u);if(Lt({result:v,errorResetBoundary:u,throwOnError:h.throwOnError,query:i.getQueryCache().get(h.queryHash)}))throw v.error;return h.notifyOnChangeProps?v:d.trackResult(v)}function Ht(r,t){return Kt(r,wt,t)}export{wt as Q,Kt as a,Ht as u};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlUXVlcnktNDcyMDU3YTguanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcXVlcnktY29yZS9idWlsZC9tb2Rlcm4vcXVlcnlPYnNlcnZlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL2lzUmVzdG9yaW5nLmpzIiwiLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9yZWFjdC1xdWVyeS9idWlsZC9tb2Rlcm4vUXVlcnlFcnJvclJlc2V0Qm91bmRhcnkuanMiLCIuLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9lcnJvckJvdW5kYXJ5VXRpbHMuanMiLCIuLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi9zdXNwZW5zZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL3VzZUJhc2VRdWVyeS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AdGFuc3RhY2svcmVhY3QtcXVlcnkvYnVpbGQvbW9kZXJuL3VzZVF1ZXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9xdWVyeU9ic2VydmVyLnRzXG5pbXBvcnQge1xuICBpc1NlcnZlcixcbiAgaXNWYWxpZFRpbWVvdXQsXG4gIG5vb3AsXG4gIHJlcGxhY2VEYXRhLFxuICBzaGFsbG93RXF1YWxPYmplY3RzLFxuICB0aW1lVW50aWxTdGFsZVxufSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgbm90aWZ5TWFuYWdlciB9IGZyb20gXCIuL25vdGlmeU1hbmFnZXIuanNcIjtcbmltcG9ydCB7IGZvY3VzTWFuYWdlciB9IGZyb20gXCIuL2ZvY3VzTWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgU3Vic2NyaWJhYmxlIH0gZnJvbSBcIi4vc3Vic2NyaWJhYmxlLmpzXCI7XG5pbXBvcnQgeyBjYW5GZXRjaCB9IGZyb20gXCIuL3JldHJ5ZXIuanNcIjtcbnZhciBRdWVyeU9ic2VydmVyID0gY2xhc3MgZXh0ZW5kcyBTdWJzY3JpYmFibGUge1xuICBjb25zdHJ1Y3RvcihjbGllbnQsIG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy4jY2xpZW50ID0gY2xpZW50O1xuICAgIHRoaXMuI3NlbGVjdEVycm9yID0gbnVsbDtcbiAgICB0aGlzLmJpbmRNZXRob2RzKCk7XG4gICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICB9XG4gICNjbGllbnQ7XG4gICNjdXJyZW50UXVlcnkgPSB2b2lkIDA7XG4gICNjdXJyZW50UXVlcnlJbml0aWFsU3RhdGUgPSB2b2lkIDA7XG4gICNjdXJyZW50UmVzdWx0ID0gdm9pZCAwO1xuICAjY3VycmVudFJlc3VsdFN0YXRlO1xuICAjY3VycmVudFJlc3VsdE9wdGlvbnM7XG4gICNzZWxlY3RFcnJvcjtcbiAgI3NlbGVjdEZuO1xuICAjc2VsZWN0UmVzdWx0O1xuICAvLyBUaGlzIHByb3BlcnR5IGtlZXBzIHRyYWNrIG9mIHRoZSBsYXN0IHF1ZXJ5IHdpdGggZGVmaW5lZCBkYXRhLlxuICAvLyBJdCB3aWxsIGJlIHVzZWQgdG8gcGFzcyB0aGUgcHJldmlvdXMgZGF0YSBhbmQgcXVlcnkgdG8gdGhlIHBsYWNlaG9sZGVyIGZ1bmN0aW9uIGJldHdlZW4gcmVuZGVycy5cbiAgI2xhc3RRdWVyeVdpdGhEZWZpbmVkRGF0YTtcbiAgI3N0YWxlVGltZW91dElkO1xuICAjcmVmZXRjaEludGVydmFsSWQ7XG4gICNjdXJyZW50UmVmZXRjaEludGVydmFsO1xuICAjdHJhY2tlZFByb3BzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgYmluZE1ldGhvZHMoKSB7XG4gICAgdGhpcy5yZWZldGNoID0gdGhpcy5yZWZldGNoLmJpbmQodGhpcyk7XG4gIH1cbiAgb25TdWJzY3JpYmUoKSB7XG4gICAgaWYgKHRoaXMubGlzdGVuZXJzLnNpemUgPT09IDEpIHtcbiAgICAgIHRoaXMuI2N1cnJlbnRRdWVyeS5hZGRPYnNlcnZlcih0aGlzKTtcbiAgICAgIGlmIChzaG91bGRGZXRjaE9uTW91bnQodGhpcy4jY3VycmVudFF1ZXJ5LCB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICAgIHRoaXMuI2V4ZWN1dGVGZXRjaCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVSZXN1bHQoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3VwZGF0ZVRpbWVycygpO1xuICAgIH1cbiAgfVxuICBvblVuc3Vic2NyaWJlKCkge1xuICAgIGlmICghdGhpcy5oYXNMaXN0ZW5lcnMoKSkge1xuICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG4gIHNob3VsZEZldGNoT25SZWNvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHNob3VsZEZldGNoT24oXG4gICAgICB0aGlzLiNjdXJyZW50UXVlcnksXG4gICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICB0aGlzLm9wdGlvbnMucmVmZXRjaE9uUmVjb25uZWN0XG4gICAgKTtcbiAgfVxuICBzaG91bGRGZXRjaE9uV2luZG93Rm9jdXMoKSB7XG4gICAgcmV0dXJuIHNob3VsZEZldGNoT24oXG4gICAgICB0aGlzLiNjdXJyZW50UXVlcnksXG4gICAgICB0aGlzLm9wdGlvbnMsXG4gICAgICB0aGlzLm9wdGlvbnMucmVmZXRjaE9uV2luZG93Rm9jdXNcbiAgICApO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgIHRoaXMuI2NsZWFyU3RhbGVUaW1lb3V0KCk7XG4gICAgdGhpcy4jY2xlYXJSZWZldGNoSW50ZXJ2YWwoKTtcbiAgICB0aGlzLiNjdXJyZW50UXVlcnkucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7XG4gIH1cbiAgc2V0T3B0aW9ucyhvcHRpb25zLCBub3RpZnlPcHRpb25zKSB7XG4gICAgY29uc3QgcHJldk9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgcHJldlF1ZXJ5ID0gdGhpcy4jY3VycmVudFF1ZXJ5O1xuICAgIHRoaXMub3B0aW9ucyA9IHRoaXMuI2NsaWVudC5kZWZhdWx0UXVlcnlPcHRpb25zKG9wdGlvbnMpO1xuICAgIGlmICghc2hhbGxvd0VxdWFsT2JqZWN0cyhwcmV2T3B0aW9ucywgdGhpcy5vcHRpb25zKSkge1xuICAgICAgdGhpcy4jY2xpZW50LmdldFF1ZXJ5Q2FjaGUoKS5ub3RpZnkoe1xuICAgICAgICB0eXBlOiBcIm9ic2VydmVyT3B0aW9uc1VwZGF0ZWRcIixcbiAgICAgICAgcXVlcnk6IHRoaXMuI2N1cnJlbnRRdWVyeSxcbiAgICAgICAgb2JzZXJ2ZXI6IHRoaXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5lbmFibGVkICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB0aGlzLm9wdGlvbnMuZW5hYmxlZCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIGVuYWJsZWQgdG8gYmUgYSBib29sZWFuXCIpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5xdWVyeUtleSkge1xuICAgICAgdGhpcy5vcHRpb25zLnF1ZXJ5S2V5ID0gcHJldk9wdGlvbnMucXVlcnlLZXk7XG4gICAgfVxuICAgIHRoaXMuI3VwZGF0ZVF1ZXJ5KCk7XG4gICAgY29uc3QgbW91bnRlZCA9IHRoaXMuaGFzTGlzdGVuZXJzKCk7XG4gICAgaWYgKG1vdW50ZWQgJiYgc2hvdWxkRmV0Y2hPcHRpb25hbGx5KFxuICAgICAgdGhpcy4jY3VycmVudFF1ZXJ5LFxuICAgICAgcHJldlF1ZXJ5LFxuICAgICAgdGhpcy5vcHRpb25zLFxuICAgICAgcHJldk9wdGlvbnNcbiAgICApKSB7XG4gICAgICB0aGlzLiNleGVjdXRlRmV0Y2goKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVSZXN1bHQobm90aWZ5T3B0aW9ucyk7XG4gICAgaWYgKG1vdW50ZWQgJiYgKHRoaXMuI2N1cnJlbnRRdWVyeSAhPT0gcHJldlF1ZXJ5IHx8IHRoaXMub3B0aW9ucy5lbmFibGVkICE9PSBwcmV2T3B0aW9ucy5lbmFibGVkIHx8IHRoaXMub3B0aW9ucy5zdGFsZVRpbWUgIT09IHByZXZPcHRpb25zLnN0YWxlVGltZSkpIHtcbiAgICAgIHRoaXMuI3VwZGF0ZVN0YWxlVGltZW91dCgpO1xuICAgIH1cbiAgICBjb25zdCBuZXh0UmVmZXRjaEludGVydmFsID0gdGhpcy4jY29tcHV0ZVJlZmV0Y2hJbnRlcnZhbCgpO1xuICAgIGlmIChtb3VudGVkICYmICh0aGlzLiNjdXJyZW50UXVlcnkgIT09IHByZXZRdWVyeSB8fCB0aGlzLm9wdGlvbnMuZW5hYmxlZCAhPT0gcHJldk9wdGlvbnMuZW5hYmxlZCB8fCBuZXh0UmVmZXRjaEludGVydmFsICE9PSB0aGlzLiNjdXJyZW50UmVmZXRjaEludGVydmFsKSkge1xuICAgICAgdGhpcy4jdXBkYXRlUmVmZXRjaEludGVydmFsKG5leHRSZWZldGNoSW50ZXJ2YWwpO1xuICAgIH1cbiAgfVxuICBnZXRPcHRpbWlzdGljUmVzdWx0KG9wdGlvbnMpIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuI2NsaWVudC5nZXRRdWVyeUNhY2hlKCkuYnVpbGQodGhpcy4jY2xpZW50LCBvcHRpb25zKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNyZWF0ZVJlc3VsdChxdWVyeSwgb3B0aW9ucyk7XG4gICAgaWYgKHNob3VsZEFzc2lnbk9ic2VydmVyQ3VycmVudFByb3BlcnRpZXModGhpcywgcmVzdWx0KSkge1xuICAgICAgdGhpcy4jY3VycmVudFJlc3VsdCA9IHJlc3VsdDtcbiAgICAgIHRoaXMuI2N1cnJlbnRSZXN1bHRPcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgdGhpcy4jY3VycmVudFJlc3VsdFN0YXRlID0gdGhpcy4jY3VycmVudFF1ZXJ5LnN0YXRlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGdldEN1cnJlbnRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRSZXN1bHQ7XG4gIH1cbiAgdHJhY2tSZXN1bHQocmVzdWx0KSB7XG4gICAgY29uc3QgdHJhY2tlZFJlc3VsdCA9IHt9O1xuICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHJhY2tlZFJlc3VsdCwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuI3RyYWNrZWRQcm9wcy5hZGQoa2V5KTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0W2tleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0cmFja2VkUmVzdWx0O1xuICB9XG4gIGdldEN1cnJlbnRRdWVyeSgpIHtcbiAgICByZXR1cm4gdGhpcy4jY3VycmVudFF1ZXJ5O1xuICB9XG4gIHJlZmV0Y2goeyAuLi5vcHRpb25zIH0gPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmZldGNoKHtcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgfVxuICBmZXRjaE9wdGltaXN0aWMob3B0aW9ucykge1xuICAgIGNvbnN0IGRlZmF1bHRlZE9wdGlvbnMgPSB0aGlzLiNjbGllbnQuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhvcHRpb25zKTtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuI2NsaWVudC5nZXRRdWVyeUNhY2hlKCkuYnVpbGQodGhpcy4jY2xpZW50LCBkZWZhdWx0ZWRPcHRpb25zKTtcbiAgICBxdWVyeS5pc0ZldGNoaW5nT3B0aW1pc3RpYyA9IHRydWU7XG4gICAgcmV0dXJuIHF1ZXJ5LmZldGNoKCkudGhlbigoKSA9PiB0aGlzLmNyZWF0ZVJlc3VsdChxdWVyeSwgZGVmYXVsdGVkT3B0aW9ucykpO1xuICB9XG4gIGZldGNoKGZldGNoT3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLiNleGVjdXRlRmV0Y2goe1xuICAgICAgLi4uZmV0Y2hPcHRpb25zLFxuICAgICAgY2FuY2VsUmVmZXRjaDogZmV0Y2hPcHRpb25zLmNhbmNlbFJlZmV0Y2ggPz8gdHJ1ZVxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVSZXN1bHQoKTtcbiAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50UmVzdWx0O1xuICAgIH0pO1xuICB9XG4gICNleGVjdXRlRmV0Y2goZmV0Y2hPcHRpb25zKSB7XG4gICAgdGhpcy4jdXBkYXRlUXVlcnkoKTtcbiAgICBsZXQgcHJvbWlzZSA9IHRoaXMuI2N1cnJlbnRRdWVyeS5mZXRjaChcbiAgICAgIHRoaXMub3B0aW9ucyxcbiAgICAgIGZldGNoT3B0aW9uc1xuICAgICk7XG4gICAgaWYgKCFmZXRjaE9wdGlvbnM/LnRocm93T25FcnJvcikge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UuY2F0Y2gobm9vcCk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG4gICN1cGRhdGVTdGFsZVRpbWVvdXQoKSB7XG4gICAgdGhpcy4jY2xlYXJTdGFsZVRpbWVvdXQoKTtcbiAgICBpZiAoaXNTZXJ2ZXIgfHwgdGhpcy4jY3VycmVudFJlc3VsdC5pc1N0YWxlIHx8ICFpc1ZhbGlkVGltZW91dCh0aGlzLm9wdGlvbnMuc3RhbGVUaW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0aW1lID0gdGltZVVudGlsU3RhbGUoXG4gICAgICB0aGlzLiNjdXJyZW50UmVzdWx0LmRhdGFVcGRhdGVkQXQsXG4gICAgICB0aGlzLm9wdGlvbnMuc3RhbGVUaW1lXG4gICAgKTtcbiAgICBjb25zdCB0aW1lb3V0ID0gdGltZSArIDE7XG4gICAgdGhpcy4jc3RhbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy4jY3VycmVudFJlc3VsdC5pc1N0YWxlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlUmVzdWx0KCk7XG4gICAgICB9XG4gICAgfSwgdGltZW91dCk7XG4gIH1cbiAgI2NvbXB1dGVSZWZldGNoSW50ZXJ2YWwoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdGhpcy5vcHRpb25zLnJlZmV0Y2hJbnRlcnZhbCA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5vcHRpb25zLnJlZmV0Y2hJbnRlcnZhbCh0aGlzLiNjdXJyZW50UXVlcnkpIDogdGhpcy5vcHRpb25zLnJlZmV0Y2hJbnRlcnZhbCkgPz8gZmFsc2U7XG4gIH1cbiAgI3VwZGF0ZVJlZmV0Y2hJbnRlcnZhbChuZXh0SW50ZXJ2YWwpIHtcbiAgICB0aGlzLiNjbGVhclJlZmV0Y2hJbnRlcnZhbCgpO1xuICAgIHRoaXMuI2N1cnJlbnRSZWZldGNoSW50ZXJ2YWwgPSBuZXh0SW50ZXJ2YWw7XG4gICAgaWYgKGlzU2VydmVyIHx8IHRoaXMub3B0aW9ucy5lbmFibGVkID09PSBmYWxzZSB8fCAhaXNWYWxpZFRpbWVvdXQodGhpcy4jY3VycmVudFJlZmV0Y2hJbnRlcnZhbCkgfHwgdGhpcy4jY3VycmVudFJlZmV0Y2hJbnRlcnZhbCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiNyZWZldGNoSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVmZXRjaEludGVydmFsSW5CYWNrZ3JvdW5kIHx8IGZvY3VzTWFuYWdlci5pc0ZvY3VzZWQoKSkge1xuICAgICAgICB0aGlzLiNleGVjdXRlRmV0Y2goKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzLiNjdXJyZW50UmVmZXRjaEludGVydmFsKTtcbiAgfVxuICAjdXBkYXRlVGltZXJzKCkge1xuICAgIHRoaXMuI3VwZGF0ZVN0YWxlVGltZW91dCgpO1xuICAgIHRoaXMuI3VwZGF0ZVJlZmV0Y2hJbnRlcnZhbCh0aGlzLiNjb21wdXRlUmVmZXRjaEludGVydmFsKCkpO1xuICB9XG4gICNjbGVhclN0YWxlVGltZW91dCgpIHtcbiAgICBpZiAodGhpcy4jc3RhbGVUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLiNzdGFsZVRpbWVvdXRJZCk7XG4gICAgICB0aGlzLiNzdGFsZVRpbWVvdXRJZCA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbiAgI2NsZWFyUmVmZXRjaEludGVydmFsKCkge1xuICAgIGlmICh0aGlzLiNyZWZldGNoSW50ZXJ2YWxJZCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLiNyZWZldGNoSW50ZXJ2YWxJZCk7XG4gICAgICB0aGlzLiNyZWZldGNoSW50ZXJ2YWxJZCA9IHZvaWQgMDtcbiAgICB9XG4gIH1cbiAgY3JlYXRlUmVzdWx0KHF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcHJldlF1ZXJ5ID0gdGhpcy4jY3VycmVudFF1ZXJ5O1xuICAgIGNvbnN0IHByZXZPcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IHByZXZSZXN1bHQgPSB0aGlzLiNjdXJyZW50UmVzdWx0O1xuICAgIGNvbnN0IHByZXZSZXN1bHRTdGF0ZSA9IHRoaXMuI2N1cnJlbnRSZXN1bHRTdGF0ZTtcbiAgICBjb25zdCBwcmV2UmVzdWx0T3B0aW9ucyA9IHRoaXMuI2N1cnJlbnRSZXN1bHRPcHRpb25zO1xuICAgIGNvbnN0IHF1ZXJ5Q2hhbmdlID0gcXVlcnkgIT09IHByZXZRdWVyeTtcbiAgICBjb25zdCBxdWVyeUluaXRpYWxTdGF0ZSA9IHF1ZXJ5Q2hhbmdlID8gcXVlcnkuc3RhdGUgOiB0aGlzLiNjdXJyZW50UXVlcnlJbml0aWFsU3RhdGU7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gcXVlcnk7XG4gICAgbGV0IHsgZXJyb3IsIGVycm9yVXBkYXRlZEF0LCBmZXRjaFN0YXR1cywgc3RhdHVzIH0gPSBzdGF0ZTtcbiAgICBsZXQgaXNQbGFjZWhvbGRlckRhdGEgPSBmYWxzZTtcbiAgICBsZXQgZGF0YTtcbiAgICBpZiAob3B0aW9ucy5fb3B0aW1pc3RpY1Jlc3VsdHMpIHtcbiAgICAgIGNvbnN0IG1vdW50ZWQgPSB0aGlzLmhhc0xpc3RlbmVycygpO1xuICAgICAgY29uc3QgZmV0Y2hPbk1vdW50ID0gIW1vdW50ZWQgJiYgc2hvdWxkRmV0Y2hPbk1vdW50KHF1ZXJ5LCBvcHRpb25zKTtcbiAgICAgIGNvbnN0IGZldGNoT3B0aW9uYWxseSA9IG1vdW50ZWQgJiYgc2hvdWxkRmV0Y2hPcHRpb25hbGx5KHF1ZXJ5LCBwcmV2UXVlcnksIG9wdGlvbnMsIHByZXZPcHRpb25zKTtcbiAgICAgIGlmIChmZXRjaE9uTW91bnQgfHwgZmV0Y2hPcHRpb25hbGx5KSB7XG4gICAgICAgIGZldGNoU3RhdHVzID0gY2FuRmV0Y2gocXVlcnkub3B0aW9ucy5uZXR3b3JrTW9kZSkgPyBcImZldGNoaW5nXCIgOiBcInBhdXNlZFwiO1xuICAgICAgICBpZiAoIXN0YXRlLmRhdGFVcGRhdGVkQXQpIHtcbiAgICAgICAgICBzdGF0dXMgPSBcInBlbmRpbmdcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMuX29wdGltaXN0aWNSZXN1bHRzID09PSBcImlzUmVzdG9yaW5nXCIpIHtcbiAgICAgICAgZmV0Y2hTdGF0dXMgPSBcImlkbGVcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc2VsZWN0ICYmIHR5cGVvZiBzdGF0ZS5kYXRhICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpZiAocHJldlJlc3VsdCAmJiBzdGF0ZS5kYXRhID09PSBwcmV2UmVzdWx0U3RhdGU/LmRhdGEgJiYgb3B0aW9ucy5zZWxlY3QgPT09IHRoaXMuI3NlbGVjdEZuKSB7XG4gICAgICAgIGRhdGEgPSB0aGlzLiNzZWxlY3RSZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuI3NlbGVjdEZuID0gb3B0aW9ucy5zZWxlY3Q7XG4gICAgICAgICAgZGF0YSA9IG9wdGlvbnMuc2VsZWN0KHN0YXRlLmRhdGEpO1xuICAgICAgICAgIGRhdGEgPSByZXBsYWNlRGF0YShwcmV2UmVzdWx0Py5kYXRhLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgICAgICB0aGlzLiNzZWxlY3RSZXN1bHQgPSBkYXRhO1xuICAgICAgICAgIHRoaXMuI3NlbGVjdEVycm9yID0gbnVsbDtcbiAgICAgICAgfSBjYXRjaCAoc2VsZWN0RXJyb3IpIHtcbiAgICAgICAgICB0aGlzLiNzZWxlY3RFcnJvciA9IHNlbGVjdEVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSBzdGF0ZS5kYXRhO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucGxhY2Vob2xkZXJEYXRhICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkYXRhID09PSBcInVuZGVmaW5lZFwiICYmIHN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpIHtcbiAgICAgIGxldCBwbGFjZWhvbGRlckRhdGE7XG4gICAgICBpZiAocHJldlJlc3VsdD8uaXNQbGFjZWhvbGRlckRhdGEgJiYgb3B0aW9ucy5wbGFjZWhvbGRlckRhdGEgPT09IHByZXZSZXN1bHRPcHRpb25zPy5wbGFjZWhvbGRlckRhdGEpIHtcbiAgICAgICAgcGxhY2Vob2xkZXJEYXRhID0gcHJldlJlc3VsdC5kYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGxhY2Vob2xkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucGxhY2Vob2xkZXJEYXRhID09PSBcImZ1bmN0aW9uXCIgPyBvcHRpb25zLnBsYWNlaG9sZGVyRGF0YShcbiAgICAgICAgICB0aGlzLiNsYXN0UXVlcnlXaXRoRGVmaW5lZERhdGE/LnN0YXRlLmRhdGEsXG4gICAgICAgICAgdGhpcy4jbGFzdFF1ZXJ5V2l0aERlZmluZWREYXRhXG4gICAgICAgICkgOiBvcHRpb25zLnBsYWNlaG9sZGVyRGF0YTtcbiAgICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0ICYmIHR5cGVvZiBwbGFjZWhvbGRlckRhdGEgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGxhY2Vob2xkZXJEYXRhID0gb3B0aW9ucy5zZWxlY3QocGxhY2Vob2xkZXJEYXRhKTtcbiAgICAgICAgICAgIHRoaXMuI3NlbGVjdEVycm9yID0gbnVsbDtcbiAgICAgICAgICB9IGNhdGNoIChzZWxlY3RFcnJvcikge1xuICAgICAgICAgICAgdGhpcy4jc2VsZWN0RXJyb3IgPSBzZWxlY3RFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcGxhY2Vob2xkZXJEYXRhICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHN0YXR1cyA9IFwic3VjY2Vzc1wiO1xuICAgICAgICBkYXRhID0gcmVwbGFjZURhdGEoXG4gICAgICAgICAgcHJldlJlc3VsdD8uZGF0YSxcbiAgICAgICAgICBwbGFjZWhvbGRlckRhdGEsXG4gICAgICAgICAgb3B0aW9uc1xuICAgICAgICApO1xuICAgICAgICBpc1BsYWNlaG9sZGVyRGF0YSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLiNzZWxlY3RFcnJvcikge1xuICAgICAgZXJyb3IgPSB0aGlzLiNzZWxlY3RFcnJvcjtcbiAgICAgIGRhdGEgPSB0aGlzLiNzZWxlY3RSZXN1bHQ7XG4gICAgICBlcnJvclVwZGF0ZWRBdCA9IERhdGUubm93KCk7XG4gICAgICBzdGF0dXMgPSBcImVycm9yXCI7XG4gICAgfVxuICAgIGNvbnN0IGlzRmV0Y2hpbmcgPSBmZXRjaFN0YXR1cyA9PT0gXCJmZXRjaGluZ1wiO1xuICAgIGNvbnN0IGlzUGVuZGluZyA9IHN0YXR1cyA9PT0gXCJwZW5kaW5nXCI7XG4gICAgY29uc3QgaXNFcnJvciA9IHN0YXR1cyA9PT0gXCJlcnJvclwiO1xuICAgIGNvbnN0IGlzTG9hZGluZyA9IGlzUGVuZGluZyAmJiBpc0ZldGNoaW5nO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIHN0YXR1cyxcbiAgICAgIGZldGNoU3RhdHVzLFxuICAgICAgaXNQZW5kaW5nLFxuICAgICAgaXNTdWNjZXNzOiBzdGF0dXMgPT09IFwic3VjY2Vzc1wiLFxuICAgICAgaXNFcnJvcixcbiAgICAgIGlzSW5pdGlhbExvYWRpbmc6IGlzTG9hZGluZyxcbiAgICAgIGlzTG9hZGluZyxcbiAgICAgIGRhdGEsXG4gICAgICBkYXRhVXBkYXRlZEF0OiBzdGF0ZS5kYXRhVXBkYXRlZEF0LFxuICAgICAgZXJyb3IsXG4gICAgICBlcnJvclVwZGF0ZWRBdCxcbiAgICAgIGZhaWx1cmVDb3VudDogc3RhdGUuZmV0Y2hGYWlsdXJlQ291bnQsXG4gICAgICBmYWlsdXJlUmVhc29uOiBzdGF0ZS5mZXRjaEZhaWx1cmVSZWFzb24sXG4gICAgICBlcnJvclVwZGF0ZUNvdW50OiBzdGF0ZS5lcnJvclVwZGF0ZUNvdW50LFxuICAgICAgaXNGZXRjaGVkOiBzdGF0ZS5kYXRhVXBkYXRlQ291bnQgPiAwIHx8IHN0YXRlLmVycm9yVXBkYXRlQ291bnQgPiAwLFxuICAgICAgaXNGZXRjaGVkQWZ0ZXJNb3VudDogc3RhdGUuZGF0YVVwZGF0ZUNvdW50ID4gcXVlcnlJbml0aWFsU3RhdGUuZGF0YVVwZGF0ZUNvdW50IHx8IHN0YXRlLmVycm9yVXBkYXRlQ291bnQgPiBxdWVyeUluaXRpYWxTdGF0ZS5lcnJvclVwZGF0ZUNvdW50LFxuICAgICAgaXNGZXRjaGluZyxcbiAgICAgIGlzUmVmZXRjaGluZzogaXNGZXRjaGluZyAmJiAhaXNQZW5kaW5nLFxuICAgICAgaXNMb2FkaW5nRXJyb3I6IGlzRXJyb3IgJiYgc3RhdGUuZGF0YVVwZGF0ZWRBdCA9PT0gMCxcbiAgICAgIGlzUGF1c2VkOiBmZXRjaFN0YXR1cyA9PT0gXCJwYXVzZWRcIixcbiAgICAgIGlzUGxhY2Vob2xkZXJEYXRhLFxuICAgICAgaXNSZWZldGNoRXJyb3I6IGlzRXJyb3IgJiYgc3RhdGUuZGF0YVVwZGF0ZWRBdCAhPT0gMCxcbiAgICAgIGlzU3RhbGU6IGlzU3RhbGUocXVlcnksIG9wdGlvbnMpLFxuICAgICAgcmVmZXRjaDogdGhpcy5yZWZldGNoXG4gICAgfTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHVwZGF0ZVJlc3VsdChub3RpZnlPcHRpb25zKSB7XG4gICAgY29uc3QgcHJldlJlc3VsdCA9IHRoaXMuI2N1cnJlbnRSZXN1bHQ7XG4gICAgY29uc3QgbmV4dFJlc3VsdCA9IHRoaXMuY3JlYXRlUmVzdWx0KHRoaXMuI2N1cnJlbnRRdWVyeSwgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLiNjdXJyZW50UmVzdWx0U3RhdGUgPSB0aGlzLiNjdXJyZW50UXVlcnkuc3RhdGU7XG4gICAgdGhpcy4jY3VycmVudFJlc3VsdE9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKHRoaXMuI2N1cnJlbnRSZXN1bHRTdGF0ZS5kYXRhICE9PSB2b2lkIDApIHtcbiAgICAgIHRoaXMuI2xhc3RRdWVyeVdpdGhEZWZpbmVkRGF0YSA9IHRoaXMuI2N1cnJlbnRRdWVyeTtcbiAgICB9XG4gICAgaWYgKHNoYWxsb3dFcXVhbE9iamVjdHMobmV4dFJlc3VsdCwgcHJldlJlc3VsdCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy4jY3VycmVudFJlc3VsdCA9IG5leHRSZXN1bHQ7XG4gICAgY29uc3QgZGVmYXVsdE5vdGlmeU9wdGlvbnMgPSB7fTtcbiAgICBjb25zdCBzaG91bGROb3RpZnlMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICBpZiAoIXByZXZSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCB7IG5vdGlmeU9uQ2hhbmdlUHJvcHMgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgIGNvbnN0IG5vdGlmeU9uQ2hhbmdlUHJvcHNWYWx1ZSA9IHR5cGVvZiBub3RpZnlPbkNoYW5nZVByb3BzID09PSBcImZ1bmN0aW9uXCIgPyBub3RpZnlPbkNoYW5nZVByb3BzKCkgOiBub3RpZnlPbkNoYW5nZVByb3BzO1xuICAgICAgaWYgKG5vdGlmeU9uQ2hhbmdlUHJvcHNWYWx1ZSA9PT0gXCJhbGxcIiB8fCAhbm90aWZ5T25DaGFuZ2VQcm9wc1ZhbHVlICYmICF0aGlzLiN0cmFja2VkUHJvcHMuc2l6ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluY2x1ZGVkUHJvcHMgPSBuZXcgU2V0KFxuICAgICAgICBub3RpZnlPbkNoYW5nZVByb3BzVmFsdWUgPz8gdGhpcy4jdHJhY2tlZFByb3BzXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy50aHJvd09uRXJyb3IpIHtcbiAgICAgICAgaW5jbHVkZWRQcm9wcy5hZGQoXCJlcnJvclwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLiNjdXJyZW50UmVzdWx0KS5zb21lKChrZXkpID0+IHtcbiAgICAgICAgY29uc3QgdHlwZWRLZXkgPSBrZXk7XG4gICAgICAgIGNvbnN0IGNoYW5nZWQgPSB0aGlzLiNjdXJyZW50UmVzdWx0W3R5cGVkS2V5XSAhPT0gcHJldlJlc3VsdFt0eXBlZEtleV07XG4gICAgICAgIHJldHVybiBjaGFuZ2VkICYmIGluY2x1ZGVkUHJvcHMuaGFzKHR5cGVkS2V5KTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaWYgKG5vdGlmeU9wdGlvbnM/Lmxpc3RlbmVycyAhPT0gZmFsc2UgJiYgc2hvdWxkTm90aWZ5TGlzdGVuZXJzKCkpIHtcbiAgICAgIGRlZmF1bHROb3RpZnlPcHRpb25zLmxpc3RlbmVycyA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuI25vdGlmeSh7IC4uLmRlZmF1bHROb3RpZnlPcHRpb25zLCAuLi5ub3RpZnlPcHRpb25zIH0pO1xuICB9XG4gICN1cGRhdGVRdWVyeSgpIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuI2NsaWVudC5nZXRRdWVyeUNhY2hlKCkuYnVpbGQodGhpcy4jY2xpZW50LCB0aGlzLm9wdGlvbnMpO1xuICAgIGlmIChxdWVyeSA9PT0gdGhpcy4jY3VycmVudFF1ZXJ5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHByZXZRdWVyeSA9IHRoaXMuI2N1cnJlbnRRdWVyeTtcbiAgICB0aGlzLiNjdXJyZW50UXVlcnkgPSBxdWVyeTtcbiAgICB0aGlzLiNjdXJyZW50UXVlcnlJbml0aWFsU3RhdGUgPSBxdWVyeS5zdGF0ZTtcbiAgICBpZiAodGhpcy5oYXNMaXN0ZW5lcnMoKSkge1xuICAgICAgcHJldlF1ZXJ5Py5yZW1vdmVPYnNlcnZlcih0aGlzKTtcbiAgICAgIHF1ZXJ5LmFkZE9ic2VydmVyKHRoaXMpO1xuICAgIH1cbiAgfVxuICBvblF1ZXJ5VXBkYXRlKCkge1xuICAgIHRoaXMudXBkYXRlUmVzdWx0KCk7XG4gICAgaWYgKHRoaXMuaGFzTGlzdGVuZXJzKCkpIHtcbiAgICAgIHRoaXMuI3VwZGF0ZVRpbWVycygpO1xuICAgIH1cbiAgfVxuICAjbm90aWZ5KG5vdGlmeU9wdGlvbnMpIHtcbiAgICBub3RpZnlNYW5hZ2VyLmJhdGNoKCgpID0+IHtcbiAgICAgIGlmIChub3RpZnlPcHRpb25zLmxpc3RlbmVycykge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4ge1xuICAgICAgICAgIGxpc3RlbmVyKHRoaXMuI2N1cnJlbnRSZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI2NsaWVudC5nZXRRdWVyeUNhY2hlKCkubm90aWZ5KHtcbiAgICAgICAgcXVlcnk6IHRoaXMuI2N1cnJlbnRRdWVyeSxcbiAgICAgICAgdHlwZTogXCJvYnNlcnZlclJlc3VsdHNVcGRhdGVkXCJcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuZnVuY3Rpb24gc2hvdWxkTG9hZE9uTW91bnQocXVlcnksIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG9wdGlvbnMuZW5hYmxlZCAhPT0gZmFsc2UgJiYgIXF1ZXJ5LnN0YXRlLmRhdGFVcGRhdGVkQXQgJiYgIShxdWVyeS5zdGF0ZS5zdGF0dXMgPT09IFwiZXJyb3JcIiAmJiBvcHRpb25zLnJldHJ5T25Nb3VudCA9PT0gZmFsc2UpO1xufVxuZnVuY3Rpb24gc2hvdWxkRmV0Y2hPbk1vdW50KHF1ZXJ5LCBvcHRpb25zKSB7XG4gIHJldHVybiBzaG91bGRMb2FkT25Nb3VudChxdWVyeSwgb3B0aW9ucykgfHwgcXVlcnkuc3RhdGUuZGF0YVVwZGF0ZWRBdCA+IDAgJiYgc2hvdWxkRmV0Y2hPbihxdWVyeSwgb3B0aW9ucywgb3B0aW9ucy5yZWZldGNoT25Nb3VudCk7XG59XG5mdW5jdGlvbiBzaG91bGRGZXRjaE9uKHF1ZXJ5LCBvcHRpb25zLCBmaWVsZCkge1xuICBpZiAob3B0aW9ucy5lbmFibGVkICE9PSBmYWxzZSkge1xuICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGZpZWxkID09PSBcImZ1bmN0aW9uXCIgPyBmaWVsZChxdWVyeSkgOiBmaWVsZDtcbiAgICByZXR1cm4gdmFsdWUgPT09IFwiYWx3YXlzXCIgfHwgdmFsdWUgIT09IGZhbHNlICYmIGlzU3RhbGUocXVlcnksIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHNob3VsZEZldGNoT3B0aW9uYWxseShxdWVyeSwgcHJldlF1ZXJ5LCBvcHRpb25zLCBwcmV2T3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucy5lbmFibGVkICE9PSBmYWxzZSAmJiAocXVlcnkgIT09IHByZXZRdWVyeSB8fCBwcmV2T3B0aW9ucy5lbmFibGVkID09PSBmYWxzZSkgJiYgKCFvcHRpb25zLnN1c3BlbnNlIHx8IHF1ZXJ5LnN0YXRlLnN0YXR1cyAhPT0gXCJlcnJvclwiKSAmJiBpc1N0YWxlKHF1ZXJ5LCBvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIGlzU3RhbGUocXVlcnksIG9wdGlvbnMpIHtcbiAgcmV0dXJuIHF1ZXJ5LmlzU3RhbGVCeVRpbWUob3B0aW9ucy5zdGFsZVRpbWUpO1xufVxuZnVuY3Rpb24gc2hvdWxkQXNzaWduT2JzZXJ2ZXJDdXJyZW50UHJvcGVydGllcyhvYnNlcnZlciwgb3B0aW1pc3RpY1Jlc3VsdCkge1xuICBpZiAoIXNoYWxsb3dFcXVhbE9iamVjdHMob2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpLCBvcHRpbWlzdGljUmVzdWx0KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7XG4gIFF1ZXJ5T2JzZXJ2ZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeU9ic2VydmVyLmpzLm1hcCIsIlwidXNlIGNsaWVudFwiO1xuXG4vLyBzcmMvaXNSZXN0b3JpbmcudHNcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xudmFyIElzUmVzdG9yaW5nQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoZmFsc2UpO1xudmFyIHVzZUlzUmVzdG9yaW5nID0gKCkgPT4gUmVhY3QudXNlQ29udGV4dChJc1Jlc3RvcmluZ0NvbnRleHQpO1xudmFyIElzUmVzdG9yaW5nUHJvdmlkZXIgPSBJc1Jlc3RvcmluZ0NvbnRleHQuUHJvdmlkZXI7XG5leHBvcnQge1xuICBJc1Jlc3RvcmluZ1Byb3ZpZGVyLFxuICB1c2VJc1Jlc3RvcmluZ1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUmVzdG9yaW5nLmpzLm1hcCIsIlwidXNlIGNsaWVudFwiO1xuXG4vLyBzcmMvUXVlcnlFcnJvclJlc2V0Qm91bmRhcnkudHN4XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmZ1bmN0aW9uIGNyZWF0ZVZhbHVlKCkge1xuICBsZXQgaXNSZXNldCA9IGZhbHNlO1xuICByZXR1cm4ge1xuICAgIGNsZWFyUmVzZXQ6ICgpID0+IHtcbiAgICAgIGlzUmVzZXQgPSBmYWxzZTtcbiAgICB9LFxuICAgIHJlc2V0OiAoKSA9PiB7XG4gICAgICBpc1Jlc2V0ID0gdHJ1ZTtcbiAgICB9LFxuICAgIGlzUmVzZXQ6ICgpID0+IHtcbiAgICAgIHJldHVybiBpc1Jlc2V0O1xuICAgIH1cbiAgfTtcbn1cbnZhciBRdWVyeUVycm9yUmVzZXRCb3VuZGFyeUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KGNyZWF0ZVZhbHVlKCkpO1xudmFyIHVzZVF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5ID0gKCkgPT4gUmVhY3QudXNlQ29udGV4dChRdWVyeUVycm9yUmVzZXRCb3VuZGFyeUNvbnRleHQpO1xudmFyIFF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5ID0gKHtcbiAgY2hpbGRyZW5cbn0pID0+IHtcbiAgY29uc3QgW3ZhbHVlXSA9IFJlYWN0LnVzZVN0YXRlKCgpID0+IGNyZWF0ZVZhbHVlKCkpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUXVlcnlFcnJvclJlc2V0Qm91bmRhcnlDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlIH0sIHR5cGVvZiBjaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiID8gY2hpbGRyZW4odmFsdWUpIDogY2hpbGRyZW4pO1xufTtcbmV4cG9ydCB7XG4gIFF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5LFxuICB1c2VRdWVyeUVycm9yUmVzZXRCb3VuZGFyeVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5LmpzLm1hcCIsIlwidXNlIGNsaWVudFwiO1xuXG4vLyBzcmMvZXJyb3JCb3VuZGFyeVV0aWxzLnRzXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHNob3VsZFRocm93RXJyb3IgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xudmFyIGVuc3VyZVByZXZlbnRFcnJvckJvdW5kYXJ5UmV0cnkgPSAob3B0aW9ucywgZXJyb3JSZXNldEJvdW5kYXJ5KSA9PiB7XG4gIGlmIChvcHRpb25zLnN1c3BlbnNlIHx8IG9wdGlvbnMudGhyb3dPbkVycm9yKSB7XG4gICAgaWYgKCFlcnJvclJlc2V0Qm91bmRhcnkuaXNSZXNldCgpKSB7XG4gICAgICBvcHRpb25zLnJldHJ5T25Nb3VudCA9IGZhbHNlO1xuICAgIH1cbiAgfVxufTtcbnZhciB1c2VDbGVhclJlc2V0RXJyb3JCb3VuZGFyeSA9IChlcnJvclJlc2V0Qm91bmRhcnkpID0+IHtcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBlcnJvclJlc2V0Qm91bmRhcnkuY2xlYXJSZXNldCgpO1xuICB9LCBbZXJyb3JSZXNldEJvdW5kYXJ5XSk7XG59O1xudmFyIGdldEhhc0Vycm9yID0gKHtcbiAgcmVzdWx0LFxuICBlcnJvclJlc2V0Qm91bmRhcnksXG4gIHRocm93T25FcnJvcixcbiAgcXVlcnlcbn0pID0+IHtcbiAgcmV0dXJuIHJlc3VsdC5pc0Vycm9yICYmICFlcnJvclJlc2V0Qm91bmRhcnkuaXNSZXNldCgpICYmICFyZXN1bHQuaXNGZXRjaGluZyAmJiBxdWVyeSAmJiBzaG91bGRUaHJvd0Vycm9yKHRocm93T25FcnJvciwgW3Jlc3VsdC5lcnJvciwgcXVlcnldKTtcbn07XG5leHBvcnQge1xuICBlbnN1cmVQcmV2ZW50RXJyb3JCb3VuZGFyeVJldHJ5LFxuICBnZXRIYXNFcnJvcixcbiAgdXNlQ2xlYXJSZXNldEVycm9yQm91bmRhcnlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvckJvdW5kYXJ5VXRpbHMuanMubWFwIiwiLy8gc3JjL3N1c3BlbnNlLnRzXG52YXIgZGVmYXVsdFRocm93T25FcnJvciA9IChfZXJyb3IsIHF1ZXJ5KSA9PiB0eXBlb2YgcXVlcnkuc3RhdGUuZGF0YSA9PT0gXCJ1bmRlZmluZWRcIjtcbnZhciBlbnN1cmVTdGFsZVRpbWUgPSAoZGVmYXVsdGVkT3B0aW9ucykgPT4ge1xuICBpZiAoZGVmYXVsdGVkT3B0aW9ucy5zdXNwZW5zZSkge1xuICAgIGlmICh0eXBlb2YgZGVmYXVsdGVkT3B0aW9ucy5zdGFsZVRpbWUgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGRlZmF1bHRlZE9wdGlvbnMuc3RhbGVUaW1lID0gMWUzO1xuICAgIH1cbiAgfVxufTtcbnZhciB3aWxsRmV0Y2ggPSAocmVzdWx0LCBpc1Jlc3RvcmluZykgPT4gcmVzdWx0LmlzTG9hZGluZyAmJiByZXN1bHQuaXNGZXRjaGluZyAmJiAhaXNSZXN0b3Jpbmc7XG52YXIgc2hvdWxkU3VzcGVuZCA9IChkZWZhdWx0ZWRPcHRpb25zLCByZXN1bHQpID0+IGRlZmF1bHRlZE9wdGlvbnM/LnN1c3BlbnNlICYmIHJlc3VsdC5pc1BlbmRpbmc7XG52YXIgZmV0Y2hPcHRpbWlzdGljID0gKGRlZmF1bHRlZE9wdGlvbnMsIG9ic2VydmVyLCBlcnJvclJlc2V0Qm91bmRhcnkpID0+IG9ic2VydmVyLmZldGNoT3B0aW1pc3RpYyhkZWZhdWx0ZWRPcHRpb25zKS5jYXRjaCgoKSA9PiB7XG4gIGVycm9yUmVzZXRCb3VuZGFyeS5jbGVhclJlc2V0KCk7XG59KTtcbmV4cG9ydCB7XG4gIGRlZmF1bHRUaHJvd09uRXJyb3IsXG4gIGVuc3VyZVN0YWxlVGltZSxcbiAgZmV0Y2hPcHRpbWlzdGljLFxuICBzaG91bGRTdXNwZW5kLFxuICB3aWxsRmV0Y2hcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdXNwZW5zZS5qcy5tYXAiLCJcInVzZSBjbGllbnRcIjtcblxuLy8gc3JjL3VzZUJhc2VRdWVyeS50c1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBub3RpZnlNYW5hZ2VyIH0gZnJvbSBcIkB0YW5zdGFjay9xdWVyeS1jb3JlXCI7XG5pbXBvcnQgeyB1c2VRdWVyeUVycm9yUmVzZXRCb3VuZGFyeSB9IGZyb20gXCIuL1F1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5LmpzXCI7XG5pbXBvcnQgeyB1c2VRdWVyeUNsaWVudCB9IGZyb20gXCIuL1F1ZXJ5Q2xpZW50UHJvdmlkZXIuanNcIjtcbmltcG9ydCB7IHVzZUlzUmVzdG9yaW5nIH0gZnJvbSBcIi4vaXNSZXN0b3JpbmcuanNcIjtcbmltcG9ydCB7XG4gIGVuc3VyZVByZXZlbnRFcnJvckJvdW5kYXJ5UmV0cnksXG4gIGdldEhhc0Vycm9yLFxuICB1c2VDbGVhclJlc2V0RXJyb3JCb3VuZGFyeVxufSBmcm9tIFwiLi9lcnJvckJvdW5kYXJ5VXRpbHMuanNcIjtcbmltcG9ydCB7IGVuc3VyZVN0YWxlVGltZSwgZmV0Y2hPcHRpbWlzdGljLCBzaG91bGRTdXNwZW5kIH0gZnJvbSBcIi4vc3VzcGVuc2UuanNcIjtcbmZ1bmN0aW9uIHVzZUJhc2VRdWVyeShvcHRpb25zLCBPYnNlcnZlciwgcXVlcnlDbGllbnQpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdCYWQgYXJndW1lbnQgdHlwZS4gU3RhcnRpbmcgd2l0aCB2NSwgb25seSB0aGUgXCJPYmplY3RcIiBmb3JtIGlzIGFsbG93ZWQgd2hlbiBjYWxsaW5nIHF1ZXJ5IHJlbGF0ZWQgZnVuY3Rpb25zLiBQbGVhc2UgdXNlIHRoZSBlcnJvciBzdGFjayB0byBmaW5kIHRoZSBjdWxwcml0IGNhbGwuIE1vcmUgaW5mbyBoZXJlOiBodHRwczovL3RhbnN0YWNrLmNvbS9xdWVyeS9sYXRlc3QvZG9jcy9yZWFjdC9ndWlkZXMvbWlncmF0aW5nLXRvLXY1I3N1cHBvcnRzLWEtc2luZ2xlLXNpZ25hdHVyZS1vbmUtb2JqZWN0J1xuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgY2xpZW50ID0gdXNlUXVlcnlDbGllbnQocXVlcnlDbGllbnQpO1xuICBjb25zdCBpc1Jlc3RvcmluZyA9IHVzZUlzUmVzdG9yaW5nKCk7XG4gIGNvbnN0IGVycm9yUmVzZXRCb3VuZGFyeSA9IHVzZVF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5KCk7XG4gIGNvbnN0IGRlZmF1bHRlZE9wdGlvbnMgPSBjbGllbnQuZGVmYXVsdFF1ZXJ5T3B0aW9ucyhvcHRpb25zKTtcbiAgZGVmYXVsdGVkT3B0aW9ucy5fb3B0aW1pc3RpY1Jlc3VsdHMgPSBpc1Jlc3RvcmluZyA/IFwiaXNSZXN0b3JpbmdcIiA6IFwib3B0aW1pc3RpY1wiO1xuICBlbnN1cmVTdGFsZVRpbWUoZGVmYXVsdGVkT3B0aW9ucyk7XG4gIGVuc3VyZVByZXZlbnRFcnJvckJvdW5kYXJ5UmV0cnkoZGVmYXVsdGVkT3B0aW9ucywgZXJyb3JSZXNldEJvdW5kYXJ5KTtcbiAgdXNlQ2xlYXJSZXNldEVycm9yQm91bmRhcnkoZXJyb3JSZXNldEJvdW5kYXJ5KTtcbiAgY29uc3QgW29ic2VydmVyXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgICgpID0+IG5ldyBPYnNlcnZlcihcbiAgICAgIGNsaWVudCxcbiAgICAgIGRlZmF1bHRlZE9wdGlvbnNcbiAgICApXG4gICk7XG4gIGNvbnN0IHJlc3VsdCA9IG9ic2VydmVyLmdldE9wdGltaXN0aWNSZXN1bHQoZGVmYXVsdGVkT3B0aW9ucyk7XG4gIFJlYWN0LnVzZVN5bmNFeHRlcm5hbFN0b3JlKFxuICAgIFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICAgKG9uU3RvcmVDaGFuZ2UpID0+IHtcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBpc1Jlc3RvcmluZyA/ICgpID0+IHZvaWQgMCA6IG9ic2VydmVyLnN1YnNjcmliZShub3RpZnlNYW5hZ2VyLmJhdGNoQ2FsbHMob25TdG9yZUNoYW5nZSkpO1xuICAgICAgICBvYnNlcnZlci51cGRhdGVSZXN1bHQoKTtcbiAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlO1xuICAgICAgfSxcbiAgICAgIFtvYnNlcnZlciwgaXNSZXN0b3JpbmddXG4gICAgKSxcbiAgICAoKSA9PiBvYnNlcnZlci5nZXRDdXJyZW50UmVzdWx0KCksXG4gICAgKCkgPT4gb2JzZXJ2ZXIuZ2V0Q3VycmVudFJlc3VsdCgpXG4gICk7XG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgb2JzZXJ2ZXIuc2V0T3B0aW9ucyhkZWZhdWx0ZWRPcHRpb25zLCB7IGxpc3RlbmVyczogZmFsc2UgfSk7XG4gIH0sIFtkZWZhdWx0ZWRPcHRpb25zLCBvYnNlcnZlcl0pO1xuICBpZiAoc2hvdWxkU3VzcGVuZChkZWZhdWx0ZWRPcHRpb25zLCByZXN1bHQpKSB7XG4gICAgdGhyb3cgZmV0Y2hPcHRpbWlzdGljKGRlZmF1bHRlZE9wdGlvbnMsIG9ic2VydmVyLCBlcnJvclJlc2V0Qm91bmRhcnkpO1xuICB9XG4gIGlmIChnZXRIYXNFcnJvcih7XG4gICAgcmVzdWx0LFxuICAgIGVycm9yUmVzZXRCb3VuZGFyeSxcbiAgICB0aHJvd09uRXJyb3I6IGRlZmF1bHRlZE9wdGlvbnMudGhyb3dPbkVycm9yLFxuICAgIHF1ZXJ5OiBjbGllbnQuZ2V0UXVlcnlDYWNoZSgpLmdldChkZWZhdWx0ZWRPcHRpb25zLnF1ZXJ5SGFzaClcbiAgfSkpIHtcbiAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gIH1cbiAgcmV0dXJuICFkZWZhdWx0ZWRPcHRpb25zLm5vdGlmeU9uQ2hhbmdlUHJvcHMgPyBvYnNlcnZlci50cmFja1Jlc3VsdChyZXN1bHQpIDogcmVzdWx0O1xufVxuZXhwb3J0IHtcbiAgdXNlQmFzZVF1ZXJ5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlQmFzZVF1ZXJ5LmpzLm1hcCIsIlwidXNlIGNsaWVudFwiO1xuXG4vLyBzcmMvdXNlUXVlcnkudHNcbmltcG9ydCB7IFF1ZXJ5T2JzZXJ2ZXIgfSBmcm9tIFwiQHRhbnN0YWNrL3F1ZXJ5LWNvcmVcIjtcbmltcG9ydCB7IHVzZUJhc2VRdWVyeSB9IGZyb20gXCIuL3VzZUJhc2VRdWVyeS5qc1wiO1xuZnVuY3Rpb24gdXNlUXVlcnkob3B0aW9ucywgcXVlcnlDbGllbnQpIHtcbiAgcmV0dXJuIHVzZUJhc2VRdWVyeShvcHRpb25zLCBRdWVyeU9ic2VydmVyLCBxdWVyeUNsaWVudCk7XG59XG5leHBvcnQge1xuICB1c2VRdWVyeVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZVF1ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6WyJRdWVyeU9ic2VydmVyIiwiX2EiLCJTdWJzY3JpYmFibGUiLCJjbGllbnQiLCJvcHRpb25zIiwiX19wcml2YXRlQWRkIiwiX2V4ZWN1dGVGZXRjaCIsIl91cGRhdGVTdGFsZVRpbWVvdXQiLCJfY29tcHV0ZVJlZmV0Y2hJbnRlcnZhbCIsIl91cGRhdGVSZWZldGNoSW50ZXJ2YWwiLCJfdXBkYXRlVGltZXJzIiwiX2NsZWFyU3RhbGVUaW1lb3V0IiwiX2NsZWFyUmVmZXRjaEludGVydmFsIiwiX3VwZGF0ZVF1ZXJ5IiwiX25vdGlmeSIsIl9jbGllbnQiLCJfY3VycmVudFF1ZXJ5IiwiX2N1cnJlbnRRdWVyeUluaXRpYWxTdGF0ZSIsIl9jdXJyZW50UmVzdWx0IiwiX2N1cnJlbnRSZXN1bHRTdGF0ZSIsIl9jdXJyZW50UmVzdWx0T3B0aW9ucyIsIl9zZWxlY3RFcnJvciIsIl9zZWxlY3RGbiIsIl9zZWxlY3RSZXN1bHQiLCJfbGFzdFF1ZXJ5V2l0aERlZmluZWREYXRhIiwiX3N0YWxlVGltZW91dElkIiwiX3JlZmV0Y2hJbnRlcnZhbElkIiwiX2N1cnJlbnRSZWZldGNoSW50ZXJ2YWwiLCJfdHJhY2tlZFByb3BzIiwiX19wcml2YXRlU2V0IiwiX19wcml2YXRlR2V0Iiwic2hvdWxkRmV0Y2hPbk1vdW50IiwiX19wcml2YXRlTWV0aG9kIiwiZXhlY3V0ZUZldGNoX2ZuIiwidXBkYXRlVGltZXJzX2ZuIiwic2hvdWxkRmV0Y2hPbiIsImNsZWFyU3RhbGVUaW1lb3V0X2ZuIiwiY2xlYXJSZWZldGNoSW50ZXJ2YWxfZm4iLCJub3RpZnlPcHRpb25zIiwicHJldk9wdGlvbnMiLCJwcmV2UXVlcnkiLCJzaGFsbG93RXF1YWxPYmplY3RzIiwidXBkYXRlUXVlcnlfZm4iLCJtb3VudGVkIiwic2hvdWxkRmV0Y2hPcHRpb25hbGx5IiwidXBkYXRlU3RhbGVUaW1lb3V0X2ZuIiwibmV4dFJlZmV0Y2hJbnRlcnZhbCIsImNvbXB1dGVSZWZldGNoSW50ZXJ2YWxfZm4iLCJ1cGRhdGVSZWZldGNoSW50ZXJ2YWxfZm4iLCJxdWVyeSIsInJlc3VsdCIsInNob3VsZEFzc2lnbk9ic2VydmVyQ3VycmVudFByb3BlcnRpZXMiLCJ0cmFja2VkUmVzdWx0Iiwia2V5IiwiZGVmYXVsdGVkT3B0aW9ucyIsImZldGNoT3B0aW9ucyIsInByZXZSZXN1bHQiLCJwcmV2UmVzdWx0U3RhdGUiLCJwcmV2UmVzdWx0T3B0aW9ucyIsInF1ZXJ5SW5pdGlhbFN0YXRlIiwic3RhdGUiLCJlcnJvciIsImVycm9yVXBkYXRlZEF0IiwiZmV0Y2hTdGF0dXMiLCJzdGF0dXMiLCJpc1BsYWNlaG9sZGVyRGF0YSIsImRhdGEiLCJmZXRjaE9uTW91bnQiLCJmZXRjaE9wdGlvbmFsbHkiLCJjYW5GZXRjaCIsInJlcGxhY2VEYXRhIiwic2VsZWN0RXJyb3IiLCJwbGFjZWhvbGRlckRhdGEiLCJpc0ZldGNoaW5nIiwiaXNQZW5kaW5nIiwiaXNFcnJvciIsImlzTG9hZGluZyIsImlzU3RhbGUiLCJuZXh0UmVzdWx0IiwiZGVmYXVsdE5vdGlmeU9wdGlvbnMiLCJzaG91bGROb3RpZnlMaXN0ZW5lcnMiLCJub3RpZnlPbkNoYW5nZVByb3BzIiwibm90aWZ5T25DaGFuZ2VQcm9wc1ZhbHVlIiwiaW5jbHVkZWRQcm9wcyIsInR5cGVkS2V5Iiwibm90aWZ5X2ZuIiwicHJvbWlzZSIsIm5vb3AiLCJpc1NlcnZlciIsImlzVmFsaWRUaW1lb3V0IiwidGltZW91dCIsInRpbWVVbnRpbFN0YWxlIiwibmV4dEludGVydmFsIiwiZm9jdXNNYW5hZ2VyIiwibm90aWZ5TWFuYWdlciIsImxpc3RlbmVyIiwic2hvdWxkTG9hZE9uTW91bnQiLCJmaWVsZCIsInZhbHVlIiwib2JzZXJ2ZXIiLCJvcHRpbWlzdGljUmVzdWx0IiwiSXNSZXN0b3JpbmdDb250ZXh0IiwiUmVhY3QuY3JlYXRlQ29udGV4dCIsInVzZUlzUmVzdG9yaW5nIiwiUmVhY3QudXNlQ29udGV4dCIsImNyZWF0ZVZhbHVlIiwiaXNSZXNldCIsIlF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5Q29udGV4dCIsInVzZVF1ZXJ5RXJyb3JSZXNldEJvdW5kYXJ5IiwiZW5zdXJlUHJldmVudEVycm9yQm91bmRhcnlSZXRyeSIsImVycm9yUmVzZXRCb3VuZGFyeSIsInVzZUNsZWFyUmVzZXRFcnJvckJvdW5kYXJ5IiwiUmVhY3QudXNlRWZmZWN0IiwiZ2V0SGFzRXJyb3IiLCJ0aHJvd09uRXJyb3IiLCJzaG91bGRUaHJvd0Vycm9yIiwiZW5zdXJlU3RhbGVUaW1lIiwic2hvdWxkU3VzcGVuZCIsImZldGNoT3B0aW1pc3RpYyIsInVzZUJhc2VRdWVyeSIsIk9ic2VydmVyIiwicXVlcnlDbGllbnQiLCJ1c2VRdWVyeUNsaWVudCIsImlzUmVzdG9yaW5nIiwiUmVhY3QudXNlU3RhdGUiLCJSZWFjdC51c2VTeW5jRXh0ZXJuYWxTdG9yZSIsIlJlYWN0LnVzZUNhbGxiYWNrIiwib25TdG9yZUNoYW5nZSIsInVuc3Vic2NyaWJlIiwidXNlUXVlcnkiXSwibWFwcGluZ3MiOiIrbkJBYUlBLElBQWdCQyxHQUFBLGNBQWNDLEVBQWEsQ0FDN0MsWUFBWUMsRUFBUUMsRUFBUyxDQUMzQixRQW9KRkMsRUFBQSxLQUFBQyxHQVdBRCxFQUFBLEtBQUFFLEdBZ0JBRixFQUFBLEtBQUFHLEdBR0FILEVBQUEsS0FBQUksR0FZQUosRUFBQSxLQUFBSyxHQUlBTCxFQUFBLEtBQUFNLEdBTUFOLEVBQUEsS0FBQU8sR0EwSkFQLEVBQUEsS0FBQVEsR0FtQkFSLEVBQUEsS0FBQVMsR0E5V0FULEVBQUEsS0FBQVUsRUFBQSxRQUNBVixFQUFBLEtBQUFXLEVBQWdCLFFBQ2hCWCxFQUFBLEtBQUFZLEVBQTRCLFFBQzVCWixFQUFBLEtBQUFhLEVBQWlCLFFBQ2pCYixFQUFBLEtBQUFjLEVBQUEsUUFDQWQsRUFBQSxLQUFBZSxFQUFBLFFBQ0FmLEVBQUEsS0FBQWdCLEVBQUEsUUFDQWhCLEVBQUEsS0FBQWlCLEVBQUEsUUFDQWpCLEVBQUEsS0FBQWtCLEVBQUEsUUFHQWxCLEVBQUEsS0FBQW1CLEVBQUEsUUFDQW5CLEVBQUEsS0FBQW9CLEVBQUEsUUFDQXBCLEVBQUEsS0FBQXFCLEVBQUEsUUFDQXJCLEVB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
