import{_ as j,a as p}from"./@tanstack/react-query-devtools-a5fc292d.js";import{j as e}from"./spinner-75e68d5d.js";import{r as o,a as f}from"./react-1cdf6ce0.js";import{B as N,S as v,f as b,a as y}from"./sidebarBolgs-2c71f253.js";import{L as x}from"./react-router-dom-3d2ba1f5.js";import{a as B}from"./index.esm-d847aead.js";import{u as S}from"./useLazyload-da8a0755.js";import"./main-85e60c12.js";import"./react-dom-983a5519.js";import"./axios-28bc18a3.js";import"./swiper-dad05047.js";import"./framer-motion-e3192eb3.js";import"./floawhatsapp-7c6a976d.js";import"./footer1-d75c55ee.js";import"./index.esm-387aec9d.js";import"./index.esm-6df78010.js";import"./index.esm-c6bbc34e.js";const L=({blogs:r,search:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[a&&a.length===0&&e.jsx("h3",{children:"No se encontraron resultados"}),a&&a.length>0&&e.jsx("h3",{children:"Resultados de la búsqueda"}),a&&(a==null?void 0:a.map(s=>e.jsx("div",{className:"col-lg-4 col-md-4 col-sm-6 ",children:e.jsx(x,{to:`/blog/${s.id}`,className:"link-blogs",children:e.jsxs("div",{className:"card card-blog mt-3 small-card",children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:s.image,className:"img-fluid small-image",alt:s.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:s.title}),e.jsxs("p",{className:"card-text",children:[s.description.slice(0,200),"..."]})]})]})})},s.id))),a&&a.length>0&&e.jsx("hr",{className:"mt-5"})]}),e.jsx("div",{className:"row",children:r.map(s=>{let i="",l="",c="";return s.important===!1?(i="col-lg-4 col-md-4 col-sm-6",c="small-card",l="small-image"):s.important===!0?(i="col-lg-6 col-md-12 col-sm-12 ",l="big-image",c="big-card"):(i="col-lg-3 col-md-4 col-sm-6",l="small-image",c="small-card"),e.jsx("div",{className:i,children:e.jsx(x,{to:`/blog/${s.id}`,className:"link-blogs",children:e.jsxs("div",{className:`card card-blog mt-3 ${c}`,children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:s.image,className:` img-fluid ${l}`,alt:s.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:s.title}),e.jsxs("p",{className:"card-text",children:[s.description.slice(0,200),"..."]})]})]})})},s.id)})})]}),E=({setFilter:r})=>{const[a,s]=o.useState(""),i=l=>{s(l.target.value),r(l.target.value)};return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a,onChange:i,placeholder:"Buscar...",className:"blog-search"}),e.jsx(B,{className:"ms-2"})]})},P=f.lazy(()=>j(()=>import("./main-85e60c12.js").then(r=>r.x),["static/main-85e60c12.js","static/@tanstack/react-query-devtools-a5fc292d.js","static/react-1cdf6ce0.js","static/spinner-75e68d5d.js","static/react-dom-983a5519.js","static/react-router-dom-3d2ba1f5.js","static/axios-28bc18a3.js","static/swiper-dad05047.js","static/framer-motion-e3192eb3.js","static/index-1ffa2a7c.css"])),_=()=>{const[r,a]=o.useState(""),[s,i]=o.useState(null),{data:l,isError:c,isLoading:g,fetchNextPage:h,hasNextPage:n,isFetchingNextPage:d}=p({queryKey:["blogs"],queryFn:({pageParam:t=0})=>y(t),initialPageParam:"1",staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchInterval:1e3*60*30,getNextPageParam:t=>{if(console.log(t,"lastPage"),t!=null&&t.nextPage)return console.log(t.nextPage,"lastPage.nextPage"),t.nextPage.split("=")[1]}});if(o.useEffect(()=>{if(!r)return;(async()=>{const m=await b(r);m&&i(m)})()},[r]),o.useEffect(()=>{l&&l.pages[0]&&console.log(l.pages[0].blogs,"data.pages[0].blogs")},[]),c)return e.jsx("div",{children:"Error"});if(g)return e.jsx(P,{});if(console.log(l,"data"),!l)return;const u=l.pages.flatMap(t=>(t==null?void 0:t.blogs)??[]);return e.jsx("div",{className:"blog-container pt-3",children:e.jsx(N,{children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"blog-header  text-center",children:e.jsx("h1",{children:"MagnaBlog"})}),e.jsx("div",{className:" text-center",children:e.jsx(E,{setFilter:a})}),e.jsxs("div",{className:"blog-cards ",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 col-12",children:e.jsx(L,{blogs:u,search:s})}),e.jsx("div",{className:"col-md-4 col-12",children:e.jsx(v,{})})]}),e.jsx("button",{onClick:()=>h(),className:"btn btn-primary",type:"button",disabled:!n||d,style:{marginTop:"2rem"},children:d?"Loading more...":n?"Cargar más blogs":"No hay más blogs"})]})]})})})};function W(){const{isVisible:r,ref:a}=S("100px");return e.jsx("div",{id:"LazyBlog",ref:a,children:r?e.jsx(_,{}):null})}export{W as default};


//# sourceMappingURL=data:application/json;base64,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UyxDQUNqQixTQUNDLE1BQUksV0FBVSxlQUNYLFNBQUNBLEVBQUEsSUFBQXFDLEVBQUEsQ0FBVyxVQUFBOUIsQ0FBc0IsR0FDdEMsRUFDQVQsT0FBQyxNQUFJLFdBQVUsY0FDWCxVQUFDQSxPQUFBLE9BQUksVUFBVSxNQUNYLFVBQUNFLE1BQUEsT0FBSSxVQUFVLGtCQUNYLFNBQUFBLE1BQUNMLEdBQVMsTUFBQUMsRUFBYyxPQUFRd0IsRUFBYSxDQUNqRCxTQUNDLE1BQUksV0FBVSxrQkFDWCxTQUFBcEIsTUFBQ3NDLEdBQVEsR0FDYixHQUNKLEVBQ0F0QyxFQUFBLElBQUMsVUFDTCxRQUFTLElBQU15QixFQUFjLEVBQzdCLFVBQVUsa0JBQ1YsS0FBSyxTQUNMLFNBQVUsQ0FBQ0MsR0FBZUMsRUFDMUIsTUFBTyxDQUFFLFVBQVcsTUFBTyxFQUUxQixTQUFBQSxFQUNLLGtCQUNBRCxFQUNBLG1CQUNBLG1CQUNWLEdBQ0ksR0FDSixFQUNKLENBQ0osRUFFUixFQUVBLFNBQXdCYSxHQUFXLENBQy9CLEtBQU0sQ0FBRyxVQUFBQyxFQUFXLElBQUFDLENBQUksRUFBSUMsRUFBd0IsT0FBTyxFQUV2RCxPQUFBMUMsRUFBQSxJQUFDLE9BQUksR0FBRyxXQUFXLElBQUF5QyxFQUNkLFNBQVlELEVBQUF4QyxFQUFBLElBQUNrQixFQUFLLElBQUssSUFDNUIsRUFFUiIsIm5hbWVzIjpbIkJsb2dMaXN0IiwiYmxvZ3MiLCJzZWFyY2giLCJqc3hzIiwiRnJhZ21lbnQiLCJqc3giLCJibG9nIiwiTGluayIsInNpemVDbGFzcyIsImltYWdlQ2xhc3MiLCJjYXJkQ2xhc3MiLCJTZWFyY2giLCJzZXRGaWx0ZXIiLCJzZWFyY2hWYWx1ZSIsInNldFNlYXJjaFZhbHVlIiwidXNlU3RhdGUiLCJoYW5kbGVTZWFyY2hDaGFuZ2UiLCJldmVudCIsIkZpU2VhcmNoIiwiU3Bpbm5lciIsIlJlYWN0IiwiX192aXRlUHJlbG9hZCIsIm4iLCJCbG9nIiwiZmlsdGVyIiwiZmlsdGVyQmxvZ3MiLCJzZXRGaWx0ZXJCbG9nc3QiLCJkYXRhIiwiaXNFcnJvciIsImlzTG9hZGluZyIsImZldGNoTmV4dFBhZ2UiLCJoYXNOZXh0UGFnZSIsImlzRmV0Y2hpbmdOZXh0UGFnZSIsInVzZUluZmluaXRlUXVlcnkiLCJwYWdlUGFyYW0iLCJmZXRjaE5leHRCbG9ncyIsImxhc3RQYWdlIiwidXNlRWZmZWN0IiwicmVzcG9uc2UiLCJmZXRjaEJsb2dTZWFyY2giLCJwYWdlIiwiQmxvZ0xheW91dCIsIkJsb2dTZWFyY2giLCJTaWRlYmFyIiwiTGF6eUJsb2ciLCJpc1Zpc2libGUiLCJyZWYiLCJ1c2VJbnRlcnNlY3Rpb25PYnNlcnZlciJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL2Jsb2dDYXJkcy50c3giLCIuLi8uLi9zcmMvY29tcG9uZW50cy9zZWFyY2gudHN4IiwiLi4vLi4vc3JjL3BhZ2VzL2Jsb2cudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gJy4uL3R5cGVzL2Jsb2cnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5cclxuaW50ZXJmYWNlIEJsb2dMaXN0UHJvcHMge1xyXG4gICAgYmxvZ3M6IFJlc3VsdFtdO1xyXG4gICAgc2VhcmNoPzogUmVzdWx0W10gfCBudWxsO1xyXG59XHJcblxyXG5jb25zdCBCbG9nTGlzdDogUmVhY3QuRkM8QmxvZ0xpc3RQcm9wcz4gPSAoeyBibG9ncyxzZWFyY2ggIH0pID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgICAgICB7c2VhcmNoICYmIHNlYXJjaC5sZW5ndGggPT09IDAgJiYgPGgzPk5vIHNlIGVuY29udHJhcm9uIHJlc3VsdGFkb3M8L2gzPn1cclxuICAgICAgICAgICAge3NlYXJjaCAmJiBzZWFyY2gubGVuZ3RoID4gMCAmJiA8aDM+UmVzdWx0YWRvcyBkZSBsYSBiw7pzcXVlZGE8L2gzPn1cclxuICAgICAgICAgICAge3NlYXJjaCAmJlxyXG4gICAgICAgICAgICAgICAgc2VhcmNoPy5tYXAoKGJsb2cpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YmxvZy5pZH0gY2xhc3NOYW1lPVwiY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTYgXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Jsb2cvJHtibG9nLmlkfWB9IGNsYXNzTmFtZT0nbGluay1ibG9ncyc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkIGNhcmQtYmxvZyBtdC0zIHNtYWxsLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWltZy10b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtibG9nLmltYWdlfSBjbGFzc05hbWU9XCJpbWctZmx1aWQgc21hbGwtaW1hZ2VcIiBhbHQ9e2Jsb2cudGl0bGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj57YmxvZy50aXRsZX08L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiY2FyZC10ZXh0XCI+e2Jsb2cuZGVzY3JpcHRpb24uc2xpY2UoMCwgMjAwKX0uLi48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge3NlYXJjaCAmJiBzZWFyY2gubGVuZ3RoID4gMCAmJiBcclxuICAgICAgICAgICAgPGhyIGNsYXNzTmFtZT0nbXQtNScvPn1cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XHJcbiAgICAgICAgICAgIHtibG9ncy5tYXAoKGJsb2cpID0+IHtcclxuICAgIGxldCBzaXplQ2xhc3MgPSAnJztcclxuICAgIGxldCBpbWFnZUNsYXNzID0gJyc7XHJcbiAgICBsZXQgY2FyZENsYXNzID0gJyc7XHJcbiAgICBpZiAoYmxvZy5pbXBvcnRhbnQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgc2l6ZUNsYXNzID0gJ2NvbC1sZy00IGNvbC1tZC00IGNvbC1zbS02JzsgLy8gUHJpbWVyYSB0YXJqZXRhIHBlcXVlw7FhXHJcbiAgICAgICAgY2FyZENsYXNzID0gJ3NtYWxsLWNhcmQnO1xyXG4gICAgICAgIGltYWdlQ2xhc3MgPSAnc21hbGwtaW1hZ2UnO1xyXG4gICAgfSBlbHNlIGlmIChibG9nLmltcG9ydGFudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHNpemVDbGFzcyA9ICdjb2wtbGctNiBjb2wtbWQtMTIgY29sLXNtLTEyICc7IC8vIFNlZ3VuZGEgdGFyamV0YSAzIHZlY2VzIG3DoXMgZ3JhbmRlXHJcbiAgICAgICAgaW1hZ2VDbGFzcyA9ICdiaWctaW1hZ2UnO1xyXG4gICAgICAgIGNhcmRDbGFzcyA9ICdiaWctY2FyZCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNpemVDbGFzcyA9ICdjb2wtbGctMyBjb2wtbWQtNCBjb2wtc20tNic7IC8vIFJlc3RvIGRlIHRhcmpldGFzIHBlcXVlw7Fhc1xyXG4gICAgICAgIGltYWdlQ2xhc3MgPSAnc21hbGwtaW1hZ2UnO1xyXG4gICAgICAgIGNhcmRDbGFzcyA9ICdzbWFsbC1jYXJkJztcclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBrZXk9e2Jsb2cuaWR9IGNsYXNzTmFtZT17c2l6ZUNsYXNzfT5cclxuICAgICAgICAgICAgPExpbmsgdG89e2AvYmxvZy8ke2Jsb2cuaWR9YH0gY2xhc3NOYW1lPSdsaW5rLWJsb2dzJz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY2FyZCBjYXJkLWJsb2cgbXQtMyAke2NhcmRDbGFzc31gfT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW1nLXRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17YmxvZy5pbWFnZX0gY2xhc3NOYW1lPXtgIGltZy1mbHVpZCAke2ltYWdlQ2xhc3N9YH0gYWx0PXtibG9nLnRpdGxlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+e2Jsb2cudGl0bGV9PC9oNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiY2FyZC10ZXh0XCI+e2Jsb2cuZGVzY3JpcHRpb24uc2xpY2UoMCwgMjAwKX0uLi48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8Lz5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCbG9nTGlzdDsiLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGaVNlYXJjaCB9IGZyb20gJ3JlYWN0LWljb25zL2ZpJztcblxudHlwZSBTZWFyY2hQcm9wcyA9IHtcbiAgICBzZXRGaWx0ZXI6IChmaWx0ZXI6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFNlYXJjaDogUmVhY3QuRkM8U2VhcmNoUHJvcHM+ID0gKHsgc2V0RmlsdGVyIH0pID0+IHtcbiAgICBjb25zdCBbc2VhcmNoVmFsdWUsIHNldFNlYXJjaFZhbHVlXSA9IHVzZVN0YXRlKCcnKTtcblxuICAgIGNvbnN0IGhhbmRsZVNlYXJjaENoYW5nZSA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgICAgc2V0U2VhcmNoVmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgc2V0RmlsdGVyKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFZhbHVlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTZWFyY2hDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJCdXNjYXIuLi5cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYmxvZy1zZWFyY2gnXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpU2VhcmNoIGNsYXNzTmFtZT1cIm1zLTJcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoOyIsImltcG9ydCB7IHVzZUluZmluaXRlUXVlcnkgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuY29uc3QgU3Bpbm5lciA9IFJlYWN0LmxhenkoKCkgPT4gaW1wb3J0KCcuLi9jb21wb25lbnRzL3NwaW5uZXInKSk7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tICcuLi90eXBlcy9ibG9nJztcbmltcG9ydCB7IGZldGNoTmV4dEJsb2dzLGZldGNoQmxvZ1NlYXJjaCB9IGZyb20gJy4uL2FwaS9ibG9nJztcbmltcG9ydCBcIi4uL3BhZ2VzL3N0eWxlcy9ibG9ncy5jc3NcIlxuaW1wb3J0IEJsb2dMYXlvdXQgZnJvbSAnLi4vbGF5b3V0cy9ibG9nTGF5b3V0JztcbmltcG9ydCBCbG9nTGlzdCBmcm9tICcuLi9jb21wb25lbnRzL2Jsb2dDYXJkcyc7XG5pbXBvcnQgU2lkZWJhciBmcm9tICcuLi9jb21wb25lbnRzL3NpZGViYXJCb2xncyc7XG5pbXBvcnQgQmxvZ1NlYXJjaCBmcm9tICcuLi9jb21wb25lbnRzL3NlYXJjaCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUludGVyc2VjdGlvbk9ic2VydmVyIGZyb20gJy4uL2hvb2tzL3VzZUxhenlsb2FkJztcblxuY29uc3QgQmxvZyA9ICAoKSA9PiB7XG4gICAgY29uc3QgW2ZpbHRlciwgc2V0RmlsdGVyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICAgIGNvbnN0IFtmaWx0ZXJCbG9ncywgc2V0RmlsdGVyQmxvZ3N0XSA9IHVzZVN0YXRlPFJlc3VsdFtdIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgeyBkYXRhLCBpc0Vycm9yLCBpc0xvYWRpbmcsIGZldGNoTmV4dFBhZ2UsaGFzTmV4dFBhZ2UsaXNGZXRjaGluZ05leHRQYWdlIH0gPSB1c2VJbmZpbml0ZVF1ZXJ5KFxuICAgICAgICB7XG4gICAgICAgICAgcXVlcnlLZXk6IFsnYmxvZ3MnXSxcbiAgICAgICAgICBxdWVyeUZuOiAoeyBwYWdlUGFyYW0gPSAwIH0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmZXRjaE5leHRCbG9ncyhwYWdlUGFyYW0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5pdGlhbFBhZ2VQYXJhbTogJzEnLFxuICAgICAgICAgIHN0YWxlVGltZTogMTAwMCo2MCozMCxyZWZldGNoT25XaW5kb3dGb2N1czogZmFsc2UscmVmZXRjaEludGVydmFsOiAxMDAwKjYwKjMwLFxuICAgICAgICAgIGdldE5leHRQYWdlUGFyYW06IChsYXN0UGFnZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobGFzdFBhZ2UsICdsYXN0UGFnZScpO1xuICAgICAgICAgICAgaWYgKGxhc3RQYWdlPy5uZXh0UGFnZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxhc3RQYWdlLm5leHRQYWdlLCAnbGFzdFBhZ2UubmV4dFBhZ2UnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIGxhc3RQYWdlLm5leHRQYWdlLnNwbGl0KCc9JylbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghZmlsdGVyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hCbG9nU2VhcmNoKGZpbHRlcik7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlKSByZXR1cm47XG4gICAgICAgICAgICBzZXRGaWx0ZXJCbG9nc3QocmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgICBmZXRjaERhdGEoKTtcbiAgICB9LCBbZmlsdGVyXSk7XG5cbiAgICAgIFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuICAgICAgICBpZiAoZGF0YS5wYWdlc1swXSApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEucGFnZXNbMF0uYmxvZ3MsICdkYXRhLnBhZ2VzWzBdLmJsb2dzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHNldENvdW50KGRhdGEucGFnZXNbMF0uYmxvZ3MpO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgIHJldHVybiA8ZGl2PkVycm9yPC9kaXY+O1xuICAgIH1cbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgIHJldHVybiA8U3Bpbm5lciAvPjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSwgJ2RhdGEnKTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICAgIFxuICAgIH1cbiAgICBjb25zdCBibG9nczogUmVzdWx0W10gPSBkYXRhLnBhZ2VzLmZsYXRNYXAoKHBhZ2UpID0+IHBhZ2U/LmJsb2dzID8/IFtdKTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYmxvZy1jb250YWluZXIgcHQtMyc+XG4gICAgICAgICAgICA8QmxvZ0xheW91dD4gXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItZmx1aWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJibG9nLWhlYWRlciAgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5NYWduYUJsb2c8L2gxPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCbG9nU2VhcmNoIHNldEZpbHRlcj17c2V0RmlsdGVyfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJibG9nLWNhcmRzIFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1sZy04IGNvbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QmxvZ0xpc3QgYmxvZ3M9e2Jsb2dzfSBzZWFyY2g9e2ZpbHRlckJsb2dzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLW1kLTQgY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaWRlYmFyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZmV0Y2hOZXh0UGFnZSgpfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFoYXNOZXh0UGFnZSB8fCBpc0ZldGNoaW5nTmV4dFBhZ2V9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblRvcDogJzJyZW0nIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7aXNGZXRjaGluZ05leHRQYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdMb2FkaW5nIG1vcmUuLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGhhc05leHRQYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdDYXJnYXIgbcOhcyBibG9ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ05vIGhheSBtw6FzIGJsb2dzJ31cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0Jsb2dMYXlvdXQ+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMYXp5QmxvZygpIHtcbiAgICBjb25zdCB7ICBpc1Zpc2libGUsIHJlZiB9ID0gdXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoJzEwMHB4Jyk7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBpZD1cIkxhenlCbG9nXCIgcmVmPXtyZWZ9PlxuICAgICAgICAgICAge2lzVmlzaWJsZSA/IDxCbG9nIC8+IDogbnVsbH1cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuXG4gICAgXG4iXSwiZmlsZSI6InN0YXRpYy9ibG9nLWZlMjQ1NWE1LmpzIn0=