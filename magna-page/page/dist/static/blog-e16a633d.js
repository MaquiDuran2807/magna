import{Q as j,w as x,x as N,y as p,z as v,j as e,_ as P}from"./main-4eee1cc0.js";import{r as d,a as b}from"./react-1cdf6ce0.js";import{B as y,S as B,f as S,a as w}from"./sidebarBolgs-d2e048e3.js";import{L as f}from"./react-router-dom-6615ee3c.js";import{a as F}from"./index.esm-59187f3a.js";import{u as M}from"./useLazyload-da8a0755.js";import"./react-dom-983a5519.js";import"./floawhatsapp-1b7d5e68.js";import"./footer1-48ade6b9.js";import"./index.esm-90d987f3.js";import"./index.esm-135f59b5.js";import"./index.esm-37eb7c17.js";var R=class extends j{constructor(s,t){super(s,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(s,t){super.setOptions({...s,behavior:x()},t)}getOptimisticResult(s){return s.behavior=x(),super.getOptimisticResult(s)}fetchNextPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(s){return this.fetch({...s,meta:{fetchMore:{direction:"backward"}}})}createResult(s,t){var n,o,g,i;const{state:a}=s,c=super.createResult(s,t),{isFetching:r,isRefetching:l}=c,m=r&&((o=(n=a.fetchMeta)==null?void 0:n.fetchMore)==null?void 0:o.direction)==="forward",h=r&&((i=(g=a.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:i.direction)==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:N(t,a.data),hasPreviousPage:p(t,a.data),isFetchingNextPage:m,isFetchingPreviousPage:h,isRefetching:l&&!m&&!h}}};function L(s,t){return v(s,R,t)}const O=({blogs:s,search:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[t&&t.length===0&&e.jsx("h3",{children:"No se encontraron resultados"}),t&&t.length>0&&e.jsx("h3",{children:"Resultados de la búsqueda"}),t&&(t==null?void 0:t.map(a=>e.jsx("div",{className:"col-lg-4 col-md-4 col-sm-6 ",children:e.jsx(f,{to:`/blog/${a.id}`,className:"link-blogs",children:e.jsxs("div",{className:"card card-blog mt-3 small-card",children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:a.image,className:"img-fluid small-image",alt:a.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:a.title}),e.jsxs("p",{className:"card-text",children:[a.description.slice(0,200),"..."]})]})]})})},a.id))),t&&t.length>0&&e.jsx("hr",{className:"mt-5"})]}),e.jsx("div",{className:"row",children:s.map(a=>{let c="",r="",l="";return a.important===!1?(c="col-lg-4 col-md-4 col-sm-6",l="small-card",r="small-image"):a.important===!0?(c="col-lg-6 col-md-12 col-sm-12 ",r="big-image",l="big-card"):(c="col-lg-3 col-md-4 col-sm-6",r="small-image",l="small-card"),e.jsx("div",{className:c,children:e.jsx(f,{to:`/blog/${a.id}`,className:"link-blogs",children:e.jsxs("div",{className:`card card-blog mt-3 ${l}`,children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:a.image,className:` img-fluid ${r}`,alt:a.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:a.title}),e.jsxs("p",{className:"card-text",children:[a.description.slice(0,200),"..."]})]})]})})},a.id)})})]}),E=({setFilter:s})=>{const[t,a]=d.useState(""),c=r=>{a(r.target.value),s(r.target.value)};return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:t,onChange:c,placeholder:"Buscar...",className:"blog-search"}),e.jsx(F,{className:"ms-2"})]})},_=b.lazy(()=>P(()=>import("./main-4eee1cc0.js").then(s=>s.a4),["static/main-4eee1cc0.js","static/react-1cdf6ce0.js","static/react-dom-983a5519.js","static/react-router-dom-6615ee3c.js","static/index-1b6ebd60.css"])),C=()=>{const[s,t]=d.useState(""),[a,c]=d.useState(null),{data:r,isError:l,isLoading:m,fetchNextPage:h,hasNextPage:n,isFetchingNextPage:o}=L({queryKey:["blogs"],queryFn:({pageParam:i=0})=>w(i),initialPageParam:"1",staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchInterval:1e3*60*30,getNextPageParam:i=>{if(console.log(i,"lastPage"),i!=null&&i.nextPage)return console.log(i.nextPage,"lastPage.nextPage"),i.nextPage.split("=")[1]}});if(d.useEffect(()=>{if(!s)return;(async()=>{const u=await S(s);u&&c(u)})()},[s]),d.useEffect(()=>{r&&r.pages[0]&&console.log(r.pages[0].blogs,"data.pages[0].blogs")},[]),l)return e.jsx("div",{children:"Error"});if(m)return e.jsx(_,{});if(console.log(r,"data"),!r)return;const g=r.pages.flatMap(i=>(i==null?void 0:i.blogs)??[]);return e.jsx("div",{className:"blog-container pt-3",children:e.jsx(y,{children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"blog-header  text-center",children:e.jsx("h1",{children:"MagnaBlog"})}),e.jsx("div",{className:" text-center",children:e.jsx(E,{setFilter:t})}),e.jsxs("div",{className:"blog-cards ",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 col-12",children:e.jsx(O,{blogs:g,search:a})}),e.jsx("div",{className:"col-md-4 col-12",children:e.jsx(B,{})})]}),e.jsx("button",{onClick:()=>h(),className:"btn btn-primary",type:"button",disabled:!n||o,style:{marginTop:"2rem"},children:o?"Loading more...":n?"Cargar más blogs":"No hay más blogs"})]})]})})})};function G(){const{isVisible:s,ref:t}=M("100px");return e.jsx("div",{id:"LazyBlog",ref:t,children:s?e.jsx(C,{}):null})}export{G as default};


//# sourceMappingURL=data:application/json;base64,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USxFQUFNLE1BQU0sRUFDcEIsQ0FBQ0EsRUFDRCxPQUdFLE1BQUExQixFQUFrQjBCLEVBQUssTUFBTSxRQUFTVSxJQUFTQSxHQUFBLFlBQUFBLEVBQU0sUUFBUyxFQUFFLEVBRWxFLE9BQUFoQyxNQUFDLE9BQUksVUFBVSxzQkFDWCxlQUFDaUMsRUFDRyxVQUFBbkMsT0FBQyxNQUFJLFdBQVUsa0JBQ1gsVUFBQUUsTUFBQyxPQUFJLFVBQVUsMkJBQ1gsU0FBQ0EsTUFBQSxNQUFHLHFCQUFTLENBQ2pCLFNBQ0MsTUFBSSxXQUFVLGVBQ1gsU0FBQ0EsRUFBQSxJQUFBa0MsRUFBQSxDQUFXLFVBQUEzQixDQUFzQixHQUN0QyxFQUNBVCxPQUFDLE1BQUksV0FBVSxjQUNYLFVBQUNBLE9BQUEsT0FBSSxVQUFVLE1BQ1gsVUFBQ0UsTUFBQSxPQUFJLFVBQVUsa0JBQ1gsU0FBQUEsTUFBQ0wsR0FBUyxNQUFBQyxFQUFjLE9BQVF3QixFQUFhLENBQ2pELFNBQ0MsTUFBSSxXQUFVLGtCQUNYLFNBQUFwQixNQUFDbUMsR0FBUSxHQUNiLEdBQ0osRUFDQW5DLEVBQUEsSUFBQyxVQUNMLFFBQVMsSUFBTXlCLEVBQWMsRUFDN0IsVUFBVSxrQkFDVixLQUFLLFNBQ0wsU0FBVSxDQUFDbkMsR0FBZU4sRUFDMUIsTUFBTyxDQUFFLFVBQVcsTUFBTyxFQUUxQixTQUFBQSxFQUNLLGtCQUNBTSxFQUNBLG1CQUNBLG1CQUNWLEdBQ0ksR0FDSixFQUNKLENBQ0osRUFFUixFQUVBLFNBQXdCOEMsR0FBVyxDQUMvQixLQUFNLENBQUcsVUFBQUMsRUFBVyxJQUFBQyxDQUFJLEVBQUlDLEVBQXdCLE9BQU8sRUFFdkQsT0FBQXZDLEVBQUEsSUFBQyxPQUFJLEdBQUcsV0FBVyxJQUFBc0MsRUFDZCxTQUFZRCxFQUFBckMsRUFBQSxJQUFDa0IsRUFBSyxJQUFLLElBQzVCLEVBRVIiLCJuYW1lcyI6WyJJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIiLCJRdWVyeU9ic2VydmVyIiwiY2xpZW50Iiwib3B0aW9ucyIsIm5vdGlmeU9wdGlvbnMiLCJpbmZpbml0ZVF1ZXJ5QmVoYXZpb3IiLCJxdWVyeSIsInN0YXRlIiwicmVzdWx0IiwiaXNGZXRjaGluZyIsImlzUmVmZXRjaGluZyIsImlzRmV0Y2hpbmdOZXh0UGFnZSIsIl9iIiwiX2EiLCJpc0ZldGNoaW5nUHJldmlvdXNQYWdlIiwiX2QiLCJfYyIsImhhc05leHRQYWdlIiwiaGFzUHJldmlvdXNQYWdlIiwidXNlSW5maW5pdGVRdWVyeSIsInF1ZXJ5Q2xpZW50IiwidXNlQmFzZVF1ZXJ5IiwiQmxvZ0xpc3QiLCJibG9ncyIsInNlYXJjaCIsImpzeHMiLCJGcmFnbWVudCIsImpzeCIsImJsb2ciLCJMaW5rIiwic2l6ZUNsYXNzIiwiaW1hZ2VDbGFzcyIsImNhcmRDbGFzcyIsIlNlYXJjaCIsInNldEZpbHRlciIsInNlYXJjaFZhbHVlIiwic2V0U2VhcmNoVmFsdWUiLCJ1c2VTdGF0ZSIsImhhbmRsZVNlYXJjaENoYW5nZSIsImV2ZW50IiwiRmlTZWFyY2giLCJTcGlubmVyIiwiUmVhY3QiLCJfX3ZpdGVQcmVsb2FkIiwibiIsIkJsb2ciLCJmaWx0ZXIiLCJmaWx0ZXJCbG9ncyIsInNldEZpbHRlckJsb2dzdCIsImRhdGEiLCJpc0Vycm9yIiwiaXNMb2FkaW5nIiwiZmV0Y2hOZXh0UGFnZSIsInBhZ2VQYXJhbSIsImZldGNoTmV4dEJsb2dzIiwibGFzdFBhZ2UiLCJ1c2VFZmZlY3QiLCJyZXNwb25zZSIsImZldGNoQmxvZ1NlYXJjaCIsInBhZ2UiLCJCbG9nTGF5b3V0IiwiQmxvZ1NlYXJjaCIsIlNpZGViYXIiLCJMYXp5QmxvZyIsImlzVmlzaWJsZSIsInJlZiIsInVzZUludGVyc2VjdGlvbk9ic2VydmVyIl0sInNvdXJjZXMiOlsiLi4vLi4vbm9kZV9tb2R1bGVzL0B0YW5zdGFjay9xdWVyeS1jb3JlL2J1aWxkL21vZGVybi9pbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5L2J1aWxkL21vZGVybi91c2VJbmZpbml0ZVF1ZXJ5LmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvYmxvZ0NhcmRzLnRzeCIsIi4uLy4uL3NyYy9jb21wb25lbnRzL3NlYXJjaC50c3giLCIuLi8uLi9zcmMvcGFnZXMvYmxvZy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2luZmluaXRlUXVlcnlPYnNlcnZlci50c1xuaW1wb3J0IHsgUXVlcnlPYnNlcnZlciB9IGZyb20gXCIuL3F1ZXJ5T2JzZXJ2ZXIuanNcIjtcbmltcG9ydCB7XG4gIGhhc05leHRQYWdlLFxuICBoYXNQcmV2aW91c1BhZ2UsXG4gIGluZmluaXRlUXVlcnlCZWhhdmlvclxufSBmcm9tIFwiLi9pbmZpbml0ZVF1ZXJ5QmVoYXZpb3IuanNcIjtcbnZhciBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIgPSBjbGFzcyBleHRlbmRzIFF1ZXJ5T2JzZXJ2ZXIge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgY29uc3RydWN0b3IoY2xpZW50LCBvcHRpb25zKSB7XG4gICAgc3VwZXIoY2xpZW50LCBvcHRpb25zKTtcbiAgfVxuICBiaW5kTWV0aG9kcygpIHtcbiAgICBzdXBlci5iaW5kTWV0aG9kcygpO1xuICAgIHRoaXMuZmV0Y2hOZXh0UGFnZSA9IHRoaXMuZmV0Y2hOZXh0UGFnZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2hQcmV2aW91c1BhZ2UgPSB0aGlzLmZldGNoUHJldmlvdXNQYWdlLmJpbmQodGhpcyk7XG4gIH1cbiAgc2V0T3B0aW9ucyhvcHRpb25zLCBub3RpZnlPcHRpb25zKSB7XG4gICAgc3VwZXIuc2V0T3B0aW9ucyhcbiAgICAgIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgYmVoYXZpb3I6IGluZmluaXRlUXVlcnlCZWhhdmlvcigpXG4gICAgICB9LFxuICAgICAgbm90aWZ5T3B0aW9uc1xuICAgICk7XG4gIH1cbiAgZ2V0T3B0aW1pc3RpY1Jlc3VsdChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5iZWhhdmlvciA9IGluZmluaXRlUXVlcnlCZWhhdmlvcigpO1xuICAgIHJldHVybiBzdXBlci5nZXRPcHRpbWlzdGljUmVzdWx0KG9wdGlvbnMpO1xuICB9XG4gIGZldGNoTmV4dFBhZ2Uob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmZldGNoKHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGZldGNoTW9yZTogeyBkaXJlY3Rpb246IFwiZm9yd2FyZFwiIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmZXRjaFByZXZpb3VzUGFnZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2goe1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgZmV0Y2hNb3JlOiB7IGRpcmVjdGlvbjogXCJiYWNrd2FyZFwiIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBjcmVhdGVSZXN1bHQocXVlcnksIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHN0YXRlIH0gPSBxdWVyeTtcbiAgICBjb25zdCByZXN1bHQgPSBzdXBlci5jcmVhdGVSZXN1bHQocXVlcnksIG9wdGlvbnMpO1xuICAgIGNvbnN0IHsgaXNGZXRjaGluZywgaXNSZWZldGNoaW5nIH0gPSByZXN1bHQ7XG4gICAgY29uc3QgaXNGZXRjaGluZ05leHRQYWdlID0gaXNGZXRjaGluZyAmJiBzdGF0ZS5mZXRjaE1ldGE/LmZldGNoTW9yZT8uZGlyZWN0aW9uID09PSBcImZvcndhcmRcIjtcbiAgICBjb25zdCBpc0ZldGNoaW5nUHJldmlvdXNQYWdlID0gaXNGZXRjaGluZyAmJiBzdGF0ZS5mZXRjaE1ldGE/LmZldGNoTW9yZT8uZGlyZWN0aW9uID09PSBcImJhY2t3YXJkXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlc3VsdCxcbiAgICAgIGZldGNoTmV4dFBhZ2U6IHRoaXMuZmV0Y2hOZXh0UGFnZSxcbiAgICAgIGZldGNoUHJldmlvdXNQYWdlOiB0aGlzLmZldGNoUHJldmlvdXNQYWdlLFxuICAgICAgaGFzTmV4dFBhZ2U6IGhhc05leHRQYWdlKG9wdGlvbnMsIHN0YXRlLmRhdGEpLFxuICAgICAgaGFzUHJldmlvdXNQYWdlOiBoYXNQcmV2aW91c1BhZ2Uob3B0aW9ucywgc3RhdGUuZGF0YSksXG4gICAgICBpc0ZldGNoaW5nTmV4dFBhZ2UsXG4gICAgICBpc0ZldGNoaW5nUHJldmlvdXNQYWdlLFxuICAgICAgaXNSZWZldGNoaW5nOiBpc1JlZmV0Y2hpbmcgJiYgIWlzRmV0Y2hpbmdOZXh0UGFnZSAmJiAhaXNGZXRjaGluZ1ByZXZpb3VzUGFnZVxuICAgIH07XG4gIH1cbn07XG5leHBvcnQge1xuICBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIuanMubWFwIiwiXCJ1c2UgY2xpZW50XCI7XG5cbi8vIHNyYy91c2VJbmZpbml0ZVF1ZXJ5LnRzXG5pbXBvcnQgeyBJbmZpbml0ZVF1ZXJ5T2JzZXJ2ZXIgfSBmcm9tIFwiQHRhbnN0YWNrL3F1ZXJ5LWNvcmVcIjtcbmltcG9ydCB7IHVzZUJhc2VRdWVyeSB9IGZyb20gXCIuL3VzZUJhc2VRdWVyeS5qc1wiO1xuZnVuY3Rpb24gdXNlSW5maW5pdGVRdWVyeShvcHRpb25zLCBxdWVyeUNsaWVudCkge1xuICByZXR1cm4gdXNlQmFzZVF1ZXJ5KFxuICAgIG9wdGlvbnMsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgIEluZmluaXRlUXVlcnlPYnNlcnZlcixcbiAgICBxdWVyeUNsaWVudFxuICApO1xufVxuZXhwb3J0IHtcbiAgdXNlSW5maW5pdGVRdWVyeVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUluZmluaXRlUXVlcnkuanMubWFwIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSAnLi4vdHlwZXMvYmxvZyc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuXHJcblxyXG5pbnRlcmZhY2UgQmxvZ0xpc3RQcm9wcyB7XHJcbiAgICBibG9nczogUmVzdWx0W107XHJcbiAgICBzZWFyY2g/OiBSZXN1bHRbXSB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IEJsb2dMaXN0OiBSZWFjdC5GQzxCbG9nTGlzdFByb3BzPiA9ICh7IGJsb2dzLHNlYXJjaCAgfSkgPT4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XHJcbiAgICAgICAgICAgIHtzZWFyY2ggJiYgc2VhcmNoLmxlbmd0aCA9PT0gMCAmJiA8aDM+Tm8gc2UgZW5jb250cmFyb24gcmVzdWx0YWRvczwvaDM+fVxyXG4gICAgICAgICAgICB7c2VhcmNoICYmIHNlYXJjaC5sZW5ndGggPiAwICYmIDxoMz5SZXN1bHRhZG9zIGRlIGxhIGLDunNxdWVkYTwvaDM+fVxyXG4gICAgICAgICAgICB7c2VhcmNoICYmXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g/Lm1hcCgoYmxvZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtibG9nLmlkfSBjbGFzc05hbWU9XCJjb2wtbGctNCBjb2wtbWQtNCBjb2wtc20tNiBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmsgdG89e2AvYmxvZy8ke2Jsb2cuaWR9YH0gY2xhc3NOYW1lPSdsaW5rLWJsb2dzJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQgY2FyZC1ibG9nIG10LTMgc21hbGwtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW1nLXRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e2Jsb2cuaW1hZ2V9IGNsYXNzTmFtZT1cImltZy1mbHVpZCBzbWFsbC1pbWFnZVwiIGFsdD17YmxvZy50aXRsZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwiY2FyZC10aXRsZVwiPntibG9nLnRpdGxlfTwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJjYXJkLXRleHRcIj57YmxvZy5kZXNjcmlwdGlvbi5zbGljZSgwLCAyMDApfS4uLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB7c2VhcmNoICYmIHNlYXJjaC5sZW5ndGggPiAwICYmIFxyXG4gICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtdC01Jy8+fVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cclxuICAgICAgICAgICAge2Jsb2dzLm1hcCgoYmxvZykgPT4ge1xyXG4gICAgbGV0IHNpemVDbGFzcyA9ICcnO1xyXG4gICAgbGV0IGltYWdlQ2xhc3MgPSAnJztcclxuICAgIGxldCBjYXJkQ2xhc3MgPSAnJztcclxuICAgIGlmIChibG9nLmltcG9ydGFudCA9PT0gZmFsc2UpIHtcclxuICAgICAgICBzaXplQ2xhc3MgPSAnY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTYnOyAvLyBQcmltZXJhIHRhcmpldGEgcGVxdWXDsWFcclxuICAgICAgICBjYXJkQ2xhc3MgPSAnc21hbGwtY2FyZCc7XHJcbiAgICAgICAgaW1hZ2VDbGFzcyA9ICdzbWFsbC1pbWFnZSc7XHJcbiAgICB9IGVsc2UgaWYgKGJsb2cuaW1wb3J0YW50ID09PSB0cnVlKSB7XHJcbiAgICAgICAgc2l6ZUNsYXNzID0gJ2NvbC1sZy02IGNvbC1tZC0xMiBjb2wtc20tMTIgJzsgLy8gU2VndW5kYSB0YXJqZXRhIDMgdmVjZXMgbcOhcyBncmFuZGVcclxuICAgICAgICBpbWFnZUNsYXNzID0gJ2JpZy1pbWFnZSc7XHJcbiAgICAgICAgY2FyZENsYXNzID0gJ2JpZy1jYXJkJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2l6ZUNsYXNzID0gJ2NvbC1sZy0zIGNvbC1tZC00IGNvbC1zbS02JzsgLy8gUmVzdG8gZGUgdGFyamV0YXMgcGVxdWXDsWFzXHJcbiAgICAgICAgaW1hZ2VDbGFzcyA9ICdzbWFsbC1pbWFnZSc7XHJcbiAgICAgICAgY2FyZENsYXNzID0gJ3NtYWxsLWNhcmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGtleT17YmxvZy5pZH0gY2xhc3NOYW1lPXtzaXplQ2xhc3N9PlxyXG4gICAgICAgICAgICA8TGluayB0bz17YC9ibG9nLyR7YmxvZy5pZH1gfSBjbGFzc05hbWU9J2xpbmstYmxvZ3MnPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BjYXJkIGNhcmQtYmxvZyBtdC0zICR7Y2FyZENsYXNzfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1pbWctdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtibG9nLmltYWdlfSBjbGFzc05hbWU9e2AgaW1nLWZsdWlkICR7aW1hZ2VDbGFzc31gfSBhbHQ9e2Jsb2cudGl0bGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj57YmxvZy50aXRsZX08L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJjYXJkLXRleHRcIj57YmxvZy5kZXNjcmlwdGlvbi5zbGljZSgwLCAyMDApfS4uLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59KX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gICAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJsb2dMaXN0OyIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZpU2VhcmNoIH0gZnJvbSAncmVhY3QtaWNvbnMvZmknO1xuXG50eXBlIFNlYXJjaFByb3BzID0ge1xuICAgIHNldEZpbHRlcjogKGZpbHRlcjogc3RyaW5nKSA9PiB2b2lkO1xufTtcblxuY29uc3QgU2VhcmNoOiBSZWFjdC5GQzxTZWFyY2hQcm9wcz4gPSAoeyBzZXRGaWx0ZXIgfSkgPT4ge1xuICAgIGNvbnN0IFtzZWFyY2hWYWx1ZSwgc2V0U2VhcmNoVmFsdWVdID0gdXNlU3RhdGUoJycpO1xuXG4gICAgY29uc3QgaGFuZGxlU2VhcmNoQ2hhbmdlID0gKGV2ZW50OiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICBzZXRTZWFyY2hWYWx1ZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgICBzZXRGaWx0ZXIoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoVmFsdWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVNlYXJjaENoYW5nZX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkJ1c2Nhci4uLlwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdibG9nLXNlYXJjaCdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8RmlTZWFyY2ggY2xhc3NOYW1lPVwibXMtMlwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTZWFyY2g7IiwiaW1wb3J0IHsgdXNlSW5maW5pdGVRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5jb25zdCBTcGlubmVyID0gUmVhY3QubGF6eSgoKSA9PiBpbXBvcnQoJy4uL2NvbXBvbmVudHMvc3Bpbm5lcicpKTtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gJy4uL3R5cGVzL2Jsb2cnO1xuaW1wb3J0IHsgZmV0Y2hOZXh0QmxvZ3MsZmV0Y2hCbG9nU2VhcmNoIH0gZnJvbSAnLi4vYXBpL2Jsb2cnO1xuaW1wb3J0IFwiLi4vcGFnZXMvc3R5bGVzL2Jsb2dzLmNzc1wiXG5pbXBvcnQgQmxvZ0xheW91dCBmcm9tICcuLi9sYXlvdXRzL2Jsb2dMYXlvdXQnO1xuaW1wb3J0IEJsb2dMaXN0IGZyb20gJy4uL2NvbXBvbmVudHMvYmxvZ0NhcmRzJztcbmltcG9ydCBTaWRlYmFyIGZyb20gJy4uL2NvbXBvbmVudHMvc2lkZWJhckJvbGdzJztcbmltcG9ydCBCbG9nU2VhcmNoIGZyb20gJy4uL2NvbXBvbmVudHMvc2VhcmNoJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgZnJvbSAnLi4vaG9va3MvdXNlTGF6eWxvYWQnO1xuXG5jb25zdCBCbG9nID0gICgpID0+IHtcbiAgICBjb25zdCBbZmlsdGVyLCBzZXRGaWx0ZXJdID0gdXNlU3RhdGUoXCJcIik7XG4gICAgY29uc3QgW2ZpbHRlckJsb2dzLCBzZXRGaWx0ZXJCbG9nc3RdID0gdXNlU3RhdGU8UmVzdWx0W10gfCBudWxsPihudWxsKTtcbiAgICBjb25zdCB7IGRhdGEsIGlzRXJyb3IsIGlzTG9hZGluZywgZmV0Y2hOZXh0UGFnZSxoYXNOZXh0UGFnZSxpc0ZldGNoaW5nTmV4dFBhZ2UgfSA9IHVzZUluZmluaXRlUXVlcnkoXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVyeUtleTogWydibG9ncyddLFxuICAgICAgICAgIHF1ZXJ5Rm46ICh7IHBhZ2VQYXJhbSA9IDAgfSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoTmV4dEJsb2dzKHBhZ2VQYXJhbSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbml0aWFsUGFnZVBhcmFtOiAnMScsXG4gICAgICAgICAgc3RhbGVUaW1lOiAxMDAwKjYwKjMwLHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxyZWZldGNoSW50ZXJ2YWw6IDEwMDAqNjAqMzAsXG4gICAgICAgICAgZ2V0TmV4dFBhZ2VQYXJhbTogKGxhc3RQYWdlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhsYXN0UGFnZSwgJ2xhc3RQYWdlJyk7XG4gICAgICAgICAgICBpZiAobGFzdFBhZ2U/Lm5leHRQYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGFzdFBhZ2UubmV4dFBhZ2UsICdsYXN0UGFnZS5uZXh0UGFnZScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gbGFzdFBhZ2UubmV4dFBhZ2Uuc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFmaWx0ZXIpIHJldHVybjtcbiAgICAgICAgY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEJsb2dTZWFyY2goZmlsdGVyKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHJldHVybjtcbiAgICAgICAgICAgIHNldEZpbHRlckJsb2dzdChyZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICAgIGZldGNoRGF0YSgpO1xuICAgIH0sIFtmaWx0ZXJdKTtcblxuICAgICAgXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG4gICAgICAgIGlmIChkYXRhLnBhZ2VzWzBdICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5wYWdlc1swXS5ibG9ncywgJ2RhdGEucGFnZXNbMF0uYmxvZ3MnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gc2V0Q291bnQoZGF0YS5wYWdlc1swXS5ibG9ncyk7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG4gICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIDxkaXY+RXJyb3I8L2Rpdj47XG4gICAgfVxuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIDxTcGlubmVyIC8+O1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhLCAnZGF0YScpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm5cbiAgICAgICAgXG4gICAgfVxuICAgIGNvbnN0IGJsb2dzOiBSZXN1bHRbXSA9IGRhdGEucGFnZXMuZmxhdE1hcCgocGFnZSkgPT4gcGFnZT8uYmxvZ3MgPz8gW10pO1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdibG9nLWNvbnRhaW5lciBwdC0zJz5cbiAgICAgICAgICAgIDxCbG9nTGF5b3V0PiBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJsb2ctaGVhZGVyICB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPk1hZ25hQmxvZzwvaDE+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJsb2dTZWFyY2ggc2V0RmlsdGVyPXtzZXRGaWx0ZXJ9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJsb2ctY2FyZHMgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLWxnLTggY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCbG9nTGlzdCBibG9ncz17YmxvZ3N9IHNlYXJjaD17ZmlsdGVyQmxvZ3N9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNCBjb2wtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNpZGViYXIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmZXRjaE5leHRQYWdlKCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWhhc05leHRQYWdlIHx8IGlzRmV0Y2hpbmdOZXh0UGFnZX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMnJlbScgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpc0ZldGNoaW5nTmV4dFBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0xvYWRpbmcgbW9yZS4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaGFzTmV4dFBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0NhcmdhciBtw6FzIGJsb2dzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnTm8gaGF5IG3DoXMgYmxvZ3MnfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQmxvZ0xheW91dD5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExhenlCbG9nKCkge1xuICAgIGNvbnN0IHsgIGlzVmlzaWJsZSwgcmVmIH0gPSB1c2VJbnRlcnNlY3Rpb25PYnNlcnZlcignMTAwcHgnKTtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiTGF6eUJsb2dcIiByZWY9e3JlZn0+XG4gICAgICAgICAgICB7aXNWaXNpYmxlID8gPEJsb2cgLz4gOiBudWxsfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5cbiAgICBcbiJdLCJmaWxlIjoic3RhdGljL2Jsb2ctZTE2YTYzM2QuanMifQ==