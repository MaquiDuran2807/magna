import{_ as j,a as p}from"./@tanstack/react-query-devtools-5e1ae0d5.js";import{j as e}from"./@react-pdf/renderer-d806818e.js";import{r as o,b as f}from"./react-a84639bd.js";import{B as N,S as v,f as b,a as y}from"./sidebarBolgs-2827246a.js";import{L as x}from"./react-router-dom-10f375c6.js";import{a as S}from"./index.esm-6aca8226.js";import"./main-4c38b34e.js";import"./react-dom-47c417a6.js";import"./AuthProvider-c4c28575.js";import"./axios-28bc18a3.js";import"./splashScreen-0d7c0e1b.js";import"./swiper-dad05047.js";import"./framer-motion-31cb7f15.js";import"./react-pdf-3633ae72.js";import"./react-floating-whatsapp-31f2a923.js";import"./react-icons-293a2bbc.js";import"./index.esm-59189682.js";const B=({blogs:r,search:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[a&&a.length===0&&e.jsx("h3",{children:"No se encontraron resultados"}),a&&a.length>0&&e.jsx("h3",{children:"Resultados de la búsqueda"}),a&&(a==null?void 0:a.map(s=>e.jsx("div",{className:"col-lg-4 col-md-4 col-sm-6 ",children:e.jsx(x,{to:`/blog/${s.id}`,className:"link-blogs",children:e.jsxs("div",{className:"card card-blog mt-3 small-card",children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:s.image,className:"img-fluid small-image",alt:s.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:s.title}),e.jsxs("p",{className:"card-text",children:[s.description.slice(0,200),"..."]})]})]})})},s.id))),a&&a.length>0&&e.jsx("hr",{className:"mt-5"})]}),e.jsx("div",{className:"row",children:r.map(s=>{let i="",l="",c="";return s.important===!1?(i="col-lg-4 col-md-4 col-sm-6",c="small-card",l="small-image"):s.important===!0?(i="col-lg-6 col-md-12 col-sm-12 ",l="big-image",c="big-card"):(i="col-lg-3 col-md-4 col-sm-6",l="small-image",c="small-card"),e.jsx("div",{className:i,children:e.jsx(x,{to:`/blog/${s.id}`,className:"link-blogs",children:e.jsxs("div",{className:`card card-blog mt-3 ${c}`,children:[e.jsx("div",{className:"card-img-top",children:e.jsx("img",{src:s.image,className:` img-fluid ${l}`,alt:s.title})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:s.title}),e.jsxs("p",{className:"card-text",children:[s.description.slice(0,200),"..."]})]})]})})},s.id)})})]}),E=({setFilter:r})=>{const[a,s]=o.useState(""),i=l=>{s(l.target.value),r(l.target.value)};return e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a,onChange:i,placeholder:"Buscar...",className:"blog-search"}),e.jsx(S,{className:"ms-2"})]})},P=f.lazy(()=>j(()=>import("./main-4c38b34e.js").then(r=>r.t),["static/main-4c38b34e.js","static/@tanstack/react-query-devtools-5e1ae0d5.js","static/react-a84639bd.js","static/@react-pdf/renderer-d806818e.js","static/react-dom-47c417a6.js","static/AuthProvider-c4c28575.js","static/axios-28bc18a3.js","static/splashScreen-0d7c0e1b.js","static/react-router-dom-10f375c6.js","static/swiper-dad05047.js","static/framer-motion-31cb7f15.js","static/react-pdf-3633ae72.js","static/react-floating-whatsapp-31f2a923.js","static/react-icons-293a2bbc.js","static/index-78e1375b.css"])),K=()=>{const[r,a]=o.useState(""),[s,i]=o.useState(null),{data:l,isError:c,isLoading:g,fetchNextPage:h,hasNextPage:n,isFetchingNextPage:d}=p({queryKey:["blogs"],queryFn:({pageParam:t=0})=>y(t),initialPageParam:"1",staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchInterval:1e3*60*30,getNextPageParam:t=>{if(console.log(t,"lastPage"),t!=null&&t.nextPage)return console.log(t.nextPage,"lastPage.nextPage"),t.nextPage.split("=")[1]}});if(o.useEffect(()=>{if(!r)return;(async()=>{const m=await b(r);m&&i(m)})()},[r]),o.useEffect(()=>{l&&l.pages[0]&&console.log(l.pages[0].blogs,"data.pages[0].blogs")},[]),c)return e.jsx("div",{children:"Error"});if(g)return e.jsx(P,{});if(console.log(l,"data"),!l)return;const u=l.pages.flatMap(t=>(t==null?void 0:t.blogs)??[]);return e.jsx("div",{className:"blog-container pt-3",children:e.jsx(N,{children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"blog-header  text-center",children:e.jsx("h1",{children:"MagnaBlog"})}),e.jsx("div",{className:" text-center",children:e.jsx(E,{setFilter:a})}),e.jsxs("div",{className:"blog-cards ",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 col-12",children:e.jsx(B,{blogs:u,search:s})}),e.jsx("div",{className:"col-md-4 col-12",children:e.jsx(v,{})})]}),e.jsx("button",{onClick:()=>h(),className:"btn btn-primary",type:"button",disabled:!n||d,style:{marginTop:"2rem"},children:d?"Loading more...":n?"Cargar más blogs":"No hay más blogs"})]})]})})})};export{K as default};


//# sourceMappingURL=data:application/json;base64,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QVMsQ0FDakIsU0FDQyxNQUFJLFdBQVUsZUFDWCxTQUFDQSxFQUFBLElBQUFxQyxFQUFBLENBQVcsVUFBQTlCLENBQXNCLEdBQ3RDLEVBQ0FULE9BQUMsTUFBSSxXQUFVLGNBQ1gsVUFBQ0EsT0FBQSxPQUFJLFVBQVUsTUFDWCxVQUFDRSxNQUFBLE9BQUksVUFBVSxrQkFDWCxTQUFBQSxNQUFDTCxHQUFTLE1BQUFDLEVBQWMsT0FBUXdCLEVBQWEsQ0FDakQsU0FDQyxNQUFJLFdBQVUsa0JBQ1gsU0FBQXBCLE1BQUNzQyxHQUFRLEdBQ2IsR0FDSixFQUNBdEMsRUFBQSxJQUFDLFVBQ0wsUUFBUyxJQUFNeUIsRUFBYyxFQUM3QixVQUFVLGtCQUNWLEtBQUssU0FDTCxTQUFVLENBQUNDLEdBQWVDLEVBQzFCLE1BQU8sQ0FBRSxVQUFXLE1BQU8sRUFFMUIsU0FBQUEsRUFDSyxrQkFDQUQsRUFDQSxtQkFDQSxtQkFDVixHQUNJLEdBQ0osRUFDSixDQUNKLEVBRVIiLCJuYW1lcyI6WyJCbG9nTGlzdCIsImJsb2dzIiwic2VhcmNoIiwianN4cyIsIkZyYWdtZW50IiwianN4IiwiYmxvZyIsIkxpbmsiLCJzaXplQ2xhc3MiLCJpbWFnZUNsYXNzIiwiY2FyZENsYXNzIiwiU2VhcmNoIiwic2V0RmlsdGVyIiwic2VhcmNoVmFsdWUiLCJzZXRTZWFyY2hWYWx1ZSIsInVzZVN0YXRlIiwiaGFuZGxlU2VhcmNoQ2hhbmdlIiwiZXZlbnQiLCJGaVNlYXJjaCIsIlNwaW5uZXIiLCJSZWFjdCIsIl9fdml0ZVByZWxvYWQiLCJuIiwiQmxvZyIsImZpbHRlciIsImZpbHRlckJsb2dzIiwic2V0RmlsdGVyQmxvZ3N0IiwiZGF0YSIsImlzRXJyb3IiLCJpc0xvYWRpbmciLCJmZXRjaE5leHRQYWdlIiwiaGFzTmV4dFBhZ2UiLCJpc0ZldGNoaW5nTmV4dFBhZ2UiLCJ1c2VJbmZpbml0ZVF1ZXJ5IiwicGFnZVBhcmFtIiwiZmV0Y2hOZXh0QmxvZ3MiLCJsYXN0UGFnZSIsInVzZUVmZmVjdCIsInJlc3BvbnNlIiwiZmV0Y2hCbG9nU2VhcmNoIiwicGFnZSIsIkJsb2dMYXlvdXQiLCJCbG9nU2VhcmNoIiwiU2lkZWJhciJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL2Jsb2dDYXJkcy50c3giLCIuLi8uLi9zcmMvY29tcG9uZW50cy9zZWFyY2gudHN4IiwiLi4vLi4vc3JjL3BhZ2VzL2Jsb2cudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gJy4uL3R5cGVzL2Jsb2cnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5cclxuaW50ZXJmYWNlIEJsb2dMaXN0UHJvcHMge1xyXG4gICAgYmxvZ3M6IFJlc3VsdFtdO1xyXG4gICAgc2VhcmNoPzogUmVzdWx0W10gfCBudWxsO1xyXG59XHJcblxyXG5jb25zdCBCbG9nTGlzdDogUmVhY3QuRkM8QmxvZ0xpc3RQcm9wcz4gPSAoeyBibG9ncyxzZWFyY2ggIH0pID0+IHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxyXG4gICAgICAgICAgICB7c2VhcmNoICYmIHNlYXJjaC5sZW5ndGggPT09IDAgJiYgPGgzPk5vIHNlIGVuY29udHJhcm9uIHJlc3VsdGFkb3M8L2gzPn1cclxuICAgICAgICAgICAge3NlYXJjaCAmJiBzZWFyY2gubGVuZ3RoID4gMCAmJiA8aDM+UmVzdWx0YWRvcyBkZSBsYSBiw7pzcXVlZGE8L2gzPn1cclxuICAgICAgICAgICAge3NlYXJjaCAmJlxyXG4gICAgICAgICAgICAgICAgc2VhcmNoPy5tYXAoKGJsb2cpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YmxvZy5pZH0gY2xhc3NOYW1lPVwiY29sLWxnLTQgY29sLW1kLTQgY29sLXNtLTYgXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2Jsb2cvJHtibG9nLmlkfWB9IGNsYXNzTmFtZT0nbGluay1ibG9ncyc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkIGNhcmQtYmxvZyBtdC0zIHNtYWxsLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWltZy10b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtibG9nLmltYWdlfSBjbGFzc05hbWU9XCJpbWctZmx1aWQgc21hbGwtaW1hZ2VcIiBhbHQ9e2Jsb2cudGl0bGV9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImNhcmQtdGl0bGVcIj57YmxvZy50aXRsZX08L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiY2FyZC10ZXh0XCI+e2Jsb2cuZGVzY3JpcHRpb24uc2xpY2UoMCwgMjAwKX0uLi48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge3NlYXJjaCAmJiBzZWFyY2gubGVuZ3RoID4gMCAmJiBcclxuICAgICAgICAgICAgPGhyIGNsYXNzTmFtZT0nbXQtNScvPn1cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XHJcbiAgICAgICAgICAgIHtibG9ncy5tYXAoKGJsb2cpID0+IHtcclxuICAgIGxldCBzaXplQ2xhc3MgPSAnJztcclxuICAgIGxldCBpbWFnZUNsYXNzID0gJyc7XHJcbiAgICBsZXQgY2FyZENsYXNzID0gJyc7XHJcbiAgICBpZiAoYmxvZy5pbXBvcnRhbnQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgc2l6ZUNsYXNzID0gJ2NvbC1sZy00IGNvbC1tZC00IGNvbC1zbS02JzsgLy8gUHJpbWVyYSB0YXJqZXRhIHBlcXVlw7FhXHJcbiAgICAgICAgY2FyZENsYXNzID0gJ3NtYWxsLWNhcmQnO1xyXG4gICAgICAgIGltYWdlQ2xhc3MgPSAnc21hbGwtaW1hZ2UnO1xyXG4gICAgfSBlbHNlIGlmIChibG9nLmltcG9ydGFudCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIHNpemVDbGFzcyA9ICdjb2wtbGctNiBjb2wtbWQtMTIgY29sLXNtLTEyICc7IC8vIFNlZ3VuZGEgdGFyamV0YSAzIHZlY2VzIG3DoXMgZ3JhbmRlXHJcbiAgICAgICAgaW1hZ2VDbGFzcyA9ICdiaWctaW1hZ2UnO1xyXG4gICAgICAgIGNhcmRDbGFzcyA9ICdiaWctY2FyZCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNpemVDbGFzcyA9ICdjb2wtbGctMyBjb2wtbWQtNCBjb2wtc20tNic7IC8vIFJlc3RvIGRlIHRhcmpldGFzIHBlcXVlw7Fhc1xyXG4gICAgICAgIGltYWdlQ2xhc3MgPSAnc21hbGwtaW1hZ2UnO1xyXG4gICAgICAgIGNhcmRDbGFzcyA9ICdzbWFsbC1jYXJkJztcclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBrZXk9e2Jsb2cuaWR9IGNsYXNzTmFtZT17c2l6ZUNsYXNzfT5cclxuICAgICAgICAgICAgPExpbmsgdG89e2AvYmxvZy8ke2Jsb2cuaWR9YH0gY2xhc3NOYW1lPSdsaW5rLWJsb2dzJz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgY2FyZCBjYXJkLWJsb2cgbXQtMyAke2NhcmRDbGFzc31gfT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaW1nLXRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17YmxvZy5pbWFnZX0gY2xhc3NOYW1lPXtgIGltZy1mbHVpZCAke2ltYWdlQ2xhc3N9YH0gYWx0PXtibG9nLnRpdGxlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+e2Jsb2cudGl0bGV9PC9oNT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiY2FyZC10ZXh0XCI+e2Jsb2cuZGVzY3JpcHRpb24uc2xpY2UoMCwgMjAwKX0uLi48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8Lz5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCbG9nTGlzdDsiLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGaVNlYXJjaCB9IGZyb20gJ3JlYWN0LWljb25zL2ZpJztcblxudHlwZSBTZWFyY2hQcm9wcyA9IHtcbiAgICBzZXRGaWx0ZXI6IChmaWx0ZXI6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmNvbnN0IFNlYXJjaDogUmVhY3QuRkM8U2VhcmNoUHJvcHM+ID0gKHsgc2V0RmlsdGVyIH0pID0+IHtcbiAgICBjb25zdCBbc2VhcmNoVmFsdWUsIHNldFNlYXJjaFZhbHVlXSA9IHVzZVN0YXRlKCcnKTtcblxuICAgIGNvbnN0IGhhbmRsZVNlYXJjaENoYW5nZSA9IChldmVudDogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgICAgc2V0U2VhcmNoVmFsdWUoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgc2V0RmlsdGVyKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFZhbHVlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTZWFyY2hDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJCdXNjYXIuLi5cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYmxvZy1zZWFyY2gnXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZpU2VhcmNoIGNsYXNzTmFtZT1cIm1zLTJcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoOyIsImltcG9ydCB7IHVzZUluZmluaXRlUXVlcnkgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xuY29uc3QgU3Bpbm5lciA9IFJlYWN0LmxhenkoKCkgPT4gaW1wb3J0KCcuLi9jb21wb25lbnRzL3NwaW5uZXInKSk7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tICcuLi90eXBlcy9ibG9nJztcbmltcG9ydCB7IGZldGNoTmV4dEJsb2dzLGZldGNoQmxvZ1NlYXJjaCB9IGZyb20gJy4uL2FwaS9ibG9nJztcbmltcG9ydCBcIi4uL3BhZ2VzL3N0eWxlcy9ibG9ncy5jc3NcIlxuaW1wb3J0IEJsb2dMYXlvdXQgZnJvbSAnLi4vbGF5b3V0cy9ibG9nTGF5b3V0JztcbmltcG9ydCBCbG9nTGlzdCBmcm9tICcuLi9jb21wb25lbnRzL2Jsb2dDYXJkcyc7XG5pbXBvcnQgU2lkZWJhciBmcm9tICcuLi9jb21wb25lbnRzL3NpZGViYXJCb2xncyc7XG5pbXBvcnQgQmxvZ1NlYXJjaCBmcm9tICcuLi9jb21wb25lbnRzL3NlYXJjaCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBCbG9nID0gICgpID0+IHtcbiAgICBjb25zdCBbZmlsdGVyLCBzZXRGaWx0ZXJdID0gdXNlU3RhdGUoXCJcIik7XG4gICAgY29uc3QgW2ZpbHRlckJsb2dzLCBzZXRGaWx0ZXJCbG9nc3RdID0gdXNlU3RhdGU8UmVzdWx0W10gfCBudWxsPihudWxsKTtcbiAgICBjb25zdCB7IGRhdGEsIGlzRXJyb3IsIGlzTG9hZGluZywgZmV0Y2hOZXh0UGFnZSxoYXNOZXh0UGFnZSxpc0ZldGNoaW5nTmV4dFBhZ2UgfSA9IHVzZUluZmluaXRlUXVlcnkoXG4gICAgICAgIHtcbiAgICAgICAgICBxdWVyeUtleTogWydibG9ncyddLFxuICAgICAgICAgIHF1ZXJ5Rm46ICh7IHBhZ2VQYXJhbSA9IDAgfSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoTmV4dEJsb2dzKHBhZ2VQYXJhbSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbml0aWFsUGFnZVBhcmFtOiAnMScsXG4gICAgICAgICAgc3RhbGVUaW1lOiAxMDAwKjYwKjMwLHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxyZWZldGNoSW50ZXJ2YWw6IDEwMDAqNjAqMzAsXG4gICAgICAgICAgZ2V0TmV4dFBhZ2VQYXJhbTogKGxhc3RQYWdlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhsYXN0UGFnZSwgJ2xhc3RQYWdlJyk7XG4gICAgICAgICAgICBpZiAobGFzdFBhZ2U/Lm5leHRQYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGFzdFBhZ2UubmV4dFBhZ2UsICdsYXN0UGFnZS5uZXh0UGFnZScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICByZXR1cm4gbGFzdFBhZ2UubmV4dFBhZ2Uuc3BsaXQoJz0nKVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFmaWx0ZXIpIHJldHVybjtcbiAgICAgICAgY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEJsb2dTZWFyY2goZmlsdGVyKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHJldHVybjtcbiAgICAgICAgICAgIHNldEZpbHRlckJsb2dzdChyZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICAgIGZldGNoRGF0YSgpO1xuICAgIH0sIFtmaWx0ZXJdKTtcblxuICAgICAgXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG4gICAgICAgIGlmIChkYXRhLnBhZ2VzWzBdICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5wYWdlc1swXS5ibG9ncywgJ2RhdGEucGFnZXNbMF0uYmxvZ3MnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gc2V0Q291bnQoZGF0YS5wYWdlc1swXS5ibG9ncyk7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG4gICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIDxkaXY+RXJyb3I8L2Rpdj47XG4gICAgfVxuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgcmV0dXJuIDxTcGlubmVyIC8+O1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhLCAnZGF0YScpO1xuICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm5cbiAgICAgICAgXG4gICAgfVxuICAgIGNvbnN0IGJsb2dzOiBSZXN1bHRbXSA9IGRhdGEucGFnZXMuZmxhdE1hcCgocGFnZSkgPT4gcGFnZT8uYmxvZ3MgPz8gW10pO1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdibG9nLWNvbnRhaW5lciBwdC0zJz5cbiAgICAgICAgICAgIDxCbG9nTGF5b3V0PiBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lci1mbHVpZFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJsb2ctaGVhZGVyICB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPk1hZ25hQmxvZzwvaDE+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJsb2dTZWFyY2ggc2V0RmlsdGVyPXtzZXRGaWx0ZXJ9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJsb2ctY2FyZHMgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLWxnLTggY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCbG9nTGlzdCBibG9ncz17YmxvZ3N9IHNlYXJjaD17ZmlsdGVyQmxvZ3N9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbWQtNCBjb2wtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNpZGViYXIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmZXRjaE5leHRQYWdlKCl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWhhc05leHRQYWdlIHx8IGlzRmV0Y2hpbmdOZXh0UGFnZX1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMnJlbScgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpc0ZldGNoaW5nTmV4dFBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0xvYWRpbmcgbW9yZS4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaGFzTmV4dFBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ0NhcmdhciBtw6FzIGJsb2dzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnTm8gaGF5IG3DoXMgYmxvZ3MnfVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQmxvZ0xheW91dD5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJsb2c7XG5cblxuICAgIFxuIl0sImZpbGUiOiJzdGF0aWMvYmxvZy1mODBmMjFiOC5qcyJ9