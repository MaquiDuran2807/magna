import{j as e,r,_ as D}from"./jsx-runtime-6ef19e59.js";import{A as z,a as O}from"./index.esm-4586649c.js";import{s as R,t as I,i as L,m as B}from"./converted_topo-f5fbb5b6.js";import{B as M}from"./banner-4c654777.js";import{S as T,A as V,P as $,N as k,a as F}from"./autoplay-58d4bfb8.js";/* empty css                  */import{u as G}from"./ScreenSize-0f59a4ff.js";import{P as Y,m as x}from"./pagesLayouts-b2166cdd.js";import{S as q}from"./main.js";import{u as H}from"./useLazyload-689b34b0.js";import{u as J}from"./getInfoPage-fd58e6da.js";import{u as K}from"./index-f8d2074a.js";import{A as Q}from"./index-3beeaf27.js";import"./iconBase-407194bc.js";import"./index.esm-3dfe3349.js";import"./index.esm-62be572a.js";import"./index-ab0b2909.js";import"./utils-210feaca.js";import"./apiClient-4214bebe.js";import"./useQuery-5396bbc9.js";const U=({subServicios:t,subtitle:l})=>e.jsx(T,{spaceBetween:30,slidesPerView:1,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:!0,modules:[V,$,k],children:t==null?void 0:t.map((n,d)=>e.jsxs(F,{children:[e.jsx("div",{className:"slide-service ",children:e.jsx("img",{srcSet:`
                            ${n.imagen_celular} 450w,
                            ${n.imagen_tablet} 1024w,
                            ${n.imagen} 5000w
                        `,sizes:`(max-width: 450px) 280px,
                            (max-width: 1023px) 736px,
                            (min-width: 1024px) 1024px`,alt:n.nombre,className:"img-fluid img-subservicio "})}),e.jsx("h3",{className:"title-slider-service",children:l?n.nombre:""})]},d))});const b=r.lazy(()=>D(()=>import("./Servicios-b81a8580.js"),["Servicios-b81a8580.js","jsx-runtime-6ef19e59.js","useQuery-5396bbc9.js","utils-210feaca.js","setionHeader-7441b4b0.js","pagesLayouts-b2166cdd.js","index-f8d2074a.js","index-ab0b2909.js","useLazyload-689b34b0.js","Servicios-7ee61343.css"])),W=()=>{var N,w;const{id:t}=K();let[l,n]=r.useState("Nuestros Servicios"),[d,m]=r.useState(R);const{services:o}=J();let h="container";const[c,f]=r.useState(),[a,j]=r.useState(null),[y,p]=r.useState(null),[_,v]=r.useState(!0),g=i=>{if(!o)return;const s=o.filter(C=>C.nombre===i);return p(s[0].subservicios),s};r.useEffect(()=>{if(o)if(t){const i=g(t);if(i){const s="servicios de "+i[0].nombre;n(s),f(i),i[0].nombre==="Topografía"&&m(I),i[0].nombre==="Ingeniería y Consultoría"&&m(L),i[0].nombre==="Medio Ambiente"&&m(B)}}else{f(o),n("Nuestros Servicios");const i=o.flatMap(s=>s.subservicios);p(i)}},[o,t]);const{width:S,height:P}=G();console.log(S,P);const A=S<=1e3,u=r.useRef(null);A&&(h="mobile");const E=async i=>{if(!i)return;const s=[];s.push(i),j(s),v(!1),s&&(p(s),t&&setTimeout(()=>{j(null),v(!0),o&&g(t)},2e4))};return r.useEffect(()=>{if(u.current&&a){const i=u.current.getBoundingClientRect().top+window.pageYOffset,s=-300;window.scroll({top:i+s,behavior:"smooth"})}},[a]),c?e.jsx(e.Fragment,{children:e.jsxs(Y,{children:[e.jsx(M,{title:c.length==1?c[0].nombre:"Servicios",paragraph:l.toString(),image:d}),e.jsxs("div",{className:h,children:[e.jsx("div",{className:"row servicio",children:c.length===1?e.jsx("div",{className:"col-12",children:e.jsx("h2",{className:"text-center",children:l})}):e.jsx("div",{className:"row",children:e.jsx(b,{})})}),e.jsxs("div",{className:"row content",children:[e.jsx("div",{className:"col-12 col-md-4 ",children:e.jsx("div",{className:"aside -template",children:c.map(i=>e.jsx("div",{children:e.jsxs("div",{className:"row px-2",children:[e.jsx("div",{className:"col-12",children:e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"servicio",children:[e.jsx("h3",{children:i==null?void 0:i.nombre}),e.jsx("p",{className:"px-2",children:i==null?void 0:i.descripcion})]},i.id)}),e.jsx("div",{children:i.subservicios.map(s=>e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(x.div,{onClick:()=>E(s),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"subservicio",children:e.jsxs("div",{className:"row items mx-3",children:[e.jsx("span",{className:"col-1 icon-row",children:e.jsx(z,{})}),e.jsxs("h5",{className:"col-10",children:[s.nombre+"   ",e.jsx("span",{children:e.jsx(O,{})})]})]})},s.id)})},s.id))})]})},i.id))})}),e.jsxs("div",{className:"col-12 col-md-8 ",children:[e.jsx("div",{className:"row mb-5",children:e.jsx(U,{subServicios:y,subtitle:_})}),e.jsxs("div",{className:"row",ref:u,children:[e.jsx(Q,{children:e.jsxs(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0,scale:.5},transition:{duration:.3,delay:1,delayChildren:.3,staggerChildren:.3},children:[e.jsx("h3",{children:a?a[0].nombre:"Servicios de calidad y con la más alta tecnología"}),e.jsx("p",{children:a?a[0].descripcion:"Somos una empresa con más de 10 años de experiencia en el mercado, con profesionales altamente calificados y con amplia experiencia en el sector público y privado, brindando servicios de calidad y con la más alta tecnología."})]},a&&((N=a[0])==null?void 0:N.id))}),e.jsx("div",{})]},a&&((w=a[0])==null?void 0:w.descripcion))]}),c.length===1?e.jsx("div",{className:"row",children:e.jsx(b,{})}):""]})]})]})}):e.jsx(q,{})};function ve(){const{isVisible:t,ref:l}=H("100px");return e.jsx("div",{id:"LazyServecesDetail",ref:l,children:t?e.jsx(W,{}):null})}export{ve as default};


//# sourceMappingURL=data:application/json;base64,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UyxDQUFFLEVBQ3RDLEtBQU0sQ0FBRSxPQUFRLEVBQUcsUUFBUyxFQUFHLE1BQU8sRUFBSSxFQUMxQyxXQUFZLENBQUUsU0FBVSxHQUFLLE1BQU8sRUFBRyxjQUFlLEdBQUssZ0JBQWlCLEVBQUksRUFHaEYsVUFBQXBELE1BQUMsTUFDSSxTQUNLeUIsSUFBb0IsQ0FBQyxFQUFFLE9BQ3ZCLG9EQUNWLFFBQ0MsSUFDSSxVQUFBQSxFQUNLQSxFQUFvQixDQUFDLEVBQUUsWUFDdkIsbU9BQ1YsSUFYS0EsS0FBdUIrQixFQUFBL0IsRUFBb0IsQ0FBQyxJQUFyQixZQUFBK0IsRUFBd0IsS0FhNUQsUUFDQyxNQUFJLE1BckI0Qy9CLEtBQXVCZ0MsRUFBQWhDLEVBQW9CLENBQUMsSUFBckIsWUFBQWdDLEVBQXdCLFlBNkJwRyxHQUNKLEVBQ0NsQyxFQUFpQixTQUFXLEVBQ3hCdkIsTUFBQSxPQUFJLFVBQVUsTUFDWCxTQUFBQSxNQUFDUSxFQUFjLElBQ25CLEVBRUEsSUFFUixHQUNKLEVBQ0osRUFDSixTQWpIUWtELEVBQU8sR0FtSHZCLEVBR0EsU0FBd0JDLElBQXNCLENBQzFDLEtBQU0sQ0FBRSxVQUFBQyxFQUFXLElBQUFDLENBQUksRUFBSUMsRUFBd0IsT0FBTyxFQUd0RCxPQUFBOUQsRUFBQSxJQUFDLE9BQUksR0FBRyxxQkFBcUIsSUFBQTZELEVBQ3hCLFNBQVlELEVBQUE1RCxFQUFBLElBQUNXLEVBQWUsSUFBSyxJQUN0QyxFQUVOIiwibmFtZXMiOlsiU2xpZGVyU2VydmljZXMiLCJzdWJTZXJ2aWNpb3MiLCJzdWJ0aXRsZSIsImpzeCIsIlN3aXBlciIsIkF1dG9wbGF5IiwiUGFnaW5hdGlvbiIsIk5hdmlnYXRpb24iLCJzdWJTZXJ2aWNpbyIsImluZGV4IiwiU3dpcGVyU2xpZGUiLCJMYXp5U2VydmljaW9zIiwibGF6eSIsIl9fdml0ZVByZWxvYWQiLCJTZXJ2ZWNlc0RldGFpbCIsImlkIiwidXNlUGFyYW1zIiwidGl0bGUiLCJzZXRUaXRsZSIsInVzZVN0YXRlIiwiaW1hZ2VuIiwic2V0SW1hZ2VuIiwiaW1hZ2VuU2VydmljaW9zIiwic2VydmljZXMiLCJ1c2VHZXRTZXJ2aWNlcyIsImRpc3Bvc2l0aXZvIiwic2VydmljaW9fZWxlZ2lkbyIsInNldFNlcnZpY2lvX2VsZWdpZG8iLCJzZWxlY3RlZFN1YlNlcnZpY2lvIiwic2V0U2VsZWN0ZWRTdWJTZXJ2aWNpbyIsInNsaWRlciIsInNldFNsaWRlciIsInNldFN1YnRpdGxlIiwiZmlsdGVyU2VydmljaW8iLCJzZXJ2aWNpbyIsInVzZUVmZmVjdCIsInNlcnZpY2lvRWxlZ2lkbyIsInRpdGxlU3RyaW5nIiwiaW1hZ2VuVG9wb2dyYWZpYSIsImltYWdlbkluZ2VuaWVyaWEiLCJpbWFnZW5NZWRpb0FtYmllbnRlIiwid2lkdGgiLCJoZWlnaHQiLCJ1c2VTY3JlZW5TaXplIiwiaXNNb2JpbGUiLCJzdWJTZXJ2aWNpb1BhZ2luYVJlZiIsInVzZVJlZiIsImhhbmRsZVN1YlNlcnZpY2lvQ2xpY2siLCJsaXN0U3Vic2VydmljaW9zIiwiZWxlbWVudFBvc2l0aW9uIiwib2Zmc2V0IiwiRnJhZ21lbnQiLCJQYWdlc0xheW91dCIsIkJhbm5lciIsImpzeHMiLCJtb3Rpb24iLCJBaU91dGxpbmVEb3VibGVSaWdodCIsIkFpRmlsbENhcmV0RG93biIsIkFuaW1hdGVQcmVzZW5jZSIsIl9hIiwiX2IiLCJTcGlubmVyIiwiTGF6eVNlcnZlY2VzRGV0YWlsIiwiaXNWaXNpYmxlIiwicmVmIiwidXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiXSwic291cmNlcyI6WyIuLi9zcmMvY29tcG9uZW50cy9zbGlkZXJTZXJ2aWNlcy50c3giLCIuLi9zcmMvcGFnZXMvc2VydmVjZXNEZXRhaWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTd2lwZXIsIFN3aXBlclNsaWRlIH0gZnJvbSAnc3dpcGVyL3JlYWN0JztcbmltcG9ydCB7ICBTdWJzZXJ2aWNpbyB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJztcbmltcG9ydCAnLi9zdHlsZXMvc2xpZGVyU2VydmljZS5jc3MnO1xuLy8gSW1wb3J0IFN3aXBlciBzdHlsZXNcbmltcG9ydCAnc3dpcGVyL2Nzcy9uYXZpZ2F0aW9uJztcbmltcG9ydCAnc3dpcGVyL2Nzcy9wYWdpbmF0aW9uJztcbmltcG9ydCAnc3dpcGVyL2Nzcy9zY3JvbGxiYXInO1xuaW1wb3J0ICdzd2lwZXIvY3NzJztcbmltcG9ydCB7IEF1dG9wbGF5LCBOYXZpZ2F0aW9uLCBQYWdpbmF0aW9uIH0gZnJvbSAnc3dpcGVyL21vZHVsZXMnO1xuXG5cbmludGVyZmFjZSBTbGlkZXJTZXJ2aWNlc1Byb3BzIHtcbiAgICBzdWJTZXJ2aWNpb3M/OiBTdWJzZXJ2aWNpb1tdIHwgbnVsbDtcbiAgICBzdWJ0aXRsZT86IGJvb2xlYW47XG59XG5cbmNvbnN0IFNsaWRlclNlcnZpY2VzOiBSZWFjdC5GQzxTbGlkZXJTZXJ2aWNlc1Byb3BzPiA9ICh7IHN1YlNlcnZpY2lvcyxzdWJ0aXRsZX0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8U3dpcGVyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW49ezMwfVxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldz17MX1cbiAgICAgICAgICAgIGF1dG9wbGF5PXt7XG4gICAgICAgICAgICAgICAgZGVsYXk6IDUwMDAsXG4gICAgICAgICAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhdXNlT25Nb3VzZUVudGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBuYXZpZ2F0aW9uPXt0cnVlfVxuICAgICAgICAgICAgICBtb2R1bGVzPXtbQXV0b3BsYXksIFBhZ2luYXRpb24sIE5hdmlnYXRpb25dfVxuICAgICAgICAgICAgICBcbiAgICAgICAgPlxuICAgICAgICAgICAge3N1YlNlcnZpY2lvcz8ubWFwKChzdWJTZXJ2aWNpbywgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICA8U3dpcGVyU2xpZGUga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgc2xpZGUtc2VydmljZSBgIH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyY1NldD17YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c3ViU2VydmljaW8uaW1hZ2VuX2NlbHVsYXJ9IDQ1MHcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzdWJTZXJ2aWNpby5pbWFnZW5fdGFibGV0fSAxMDI0dyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3N1YlNlcnZpY2lvLmltYWdlbn0gNTAwMHdcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplcz1cIihtYXgtd2lkdGg6IDQ1MHB4KSAyODBweCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWF4LXdpZHRoOiAxMDIzcHgpIDczNnB4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDEwMjRweCkgMTAyNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17c3ViU2VydmljaW8ubm9tYnJlfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpbWctZmx1aWQgaW1nLXN1YnNlcnZpY2lvICcgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RpdGxlLXNsaWRlci1zZXJ2aWNlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZSA/IHN1YlNlcnZpY2lvLm5vbWJyZSA6ICAnJyBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPC9Td2lwZXJTbGlkZT5cbiAgICAgICAgICAgICkpfVxuICAgICAgICA8L1N3aXBlcj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyU2VydmljZXM7XG4iLCJpbXBvcnQgeyBBbmltYXRlUHJlc2VuY2UsIG1vdGlvbiB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nO1xuaW1wb3J0IHsgbGF6eSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBaUZpbGxDYXJldERvd24sIEFpT3V0bGluZURvdWJsZVJpZ2h0IH0gZnJvbSBcInJlYWN0LWljb25zL2FpXCI7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IGltYWdlbkluZ2VuaWVyaWEgZnJvbSAnLi4vYXNzZXRzL2ltZy9iYW5uZXIvaW5nZW5pZXJpYS53ZWJwJztcbmltcG9ydCBpbWFnZW5NZWRpb0FtYmllbnRlIGZyb20gJy4uL2Fzc2V0cy9pbWcvYmFubmVyL21lZGlvLndlYnAnO1xuaW1wb3J0IGltYWdlblNlcnZpY2lvcyBmcm9tICcuLi9hc3NldHMvaW1nL2Jhbm5lci9zZXJ2aWNpb3Mud2VicCc7XG5pbXBvcnQgaW1hZ2VuVG9wb2dyYWZpYSBmcm9tICcuLi9hc3NldHMvaW1nL2Jhbm5lci9jb252ZXJ0ZWRfdG9wby53ZWJwJztcbmltcG9ydCBCYW5uZXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvYmFubmVyXCI7XG5pbXBvcnQgU2xpZGVyU2VydmljZXMgZnJvbSBcIi4uL2NvbXBvbmVudHMvc2xpZGVyU2VydmljZXNcIjtcbmltcG9ydCB1c2VTY3JlZW5TaXplIGZyb20gJy4uL2hvb2tzL1NjcmVlblNpemUnO1xuaW1wb3J0IFBhZ2VzTGF5b3V0IGZyb20gXCIuLi9sYXlvdXRzL3BhZ2VzTGF5b3V0c1wiO1xuaW1wb3J0IHsgU2VydmljaW8yLCBTdWJzZXJ2aWNpbyB9IGZyb20gXCIuLi90eXBlcy90eXBlc1wiO1xuaW1wb3J0IFwiLi9zdHlsZXMvc2VydmljZXNEZXRhaWwuY3NzXCI7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICcuLi9jb21wb25lbnRzL3NwaW5uZXInO1xuaW1wb3J0IHVzZUludGVyc2VjdGlvbk9ic2VydmVyIGZyb20gJy4uL2hvb2tzL3VzZUxhenlsb2FkJztcbmltcG9ydCB7IHVzZUdldFNlcnZpY2VzIH0gZnJvbSAnLi4vaG9va3MvZ2V0SW5mb1BhZ2UnO1xuLy8gY29uc3QgUGRmVmlld2VyID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4uL2NvbXBvbmVudHMvYnJvY2h1cmUnKSk7XG5jb25zdCBMYXp5U2VydmljaW9zID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4uL2NvbXBvbmVudHMvc2VjdGlvbnMvU2VydmljaW9zJykpO1xuXG5cblxuY29uc3QgU2VydmVjZXNEZXRhaWw6IFJlYWN0LkZDID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHVzZVBhcmFtczx7IGlkOiBzdHJpbmcgfT4oKTtcblxuICAgIGxldCBbdGl0bGUsIHNldFRpdGxlXSA9IHVzZVN0YXRlPFN0cmluZz4oXCJOdWVzdHJvcyBTZXJ2aWNpb3NcIik7XG4gICAgbGV0IFtpbWFnZW4sIHNldEltYWdlbl0gPSB1c2VTdGF0ZTxTdHJpbmc+KGltYWdlblNlcnZpY2lvcyk7XG4gICAgY29uc3QgeyBzZXJ2aWNlcyB9ID0gdXNlR2V0U2VydmljZXMoKTtcbiAgICBsZXQgZGlzcG9zaXRpdm8gPSBcImNvbnRhaW5lclwiO1xuICAgIGNvbnN0IFtzZXJ2aWNpb19lbGVnaWRvLCBzZXRTZXJ2aWNpb19lbGVnaWRvXSA9IHVzZVN0YXRlPFNlcnZpY2lvMltdPigpO1xuICAgIGNvbnN0IFtzZWxlY3RlZFN1YlNlcnZpY2lvLCBzZXRTZWxlY3RlZFN1YlNlcnZpY2lvXSA9IHVzZVN0YXRlPFN1YnNlcnZpY2lvW10gfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbc2xpZGVyLCBzZXRTbGlkZXJdID0gdXNlU3RhdGU8U3Vic2VydmljaW9bXSB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFtzdWJ0aXRsZSwgc2V0U3VidGl0bGVdID0gdXNlU3RhdGU8Ym9vbGVhbj4odHJ1ZSk7XG5cbiAgICBjb25zdCBmaWx0ZXJTZXJ2aWNpbyA9IChpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghc2VydmljZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJ2aWNpbzogU2VydmljaW8yW10gPSBzZXJ2aWNlcy5maWx0ZXIoKHNlcnZpY2lvOiBTZXJ2aWNpbzIpID0+IHNlcnZpY2lvLm5vbWJyZSA9PT0gaWQpO1xuICAgICAgICBzZXRTbGlkZXIoc2VydmljaW9bMF0uc3Vic2VydmljaW9zKTtcbiAgICAgICAgcmV0dXJuIHNlcnZpY2lvO1xuICAgIH1cblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChzZXJ2aWNlcykge1xuICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljaW9FbGVnaWRvID0gZmlsdGVyU2VydmljaW8oaWQpO1xuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNpb0VsZWdpZG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGl0bGVTdHJpbmcgPSBcInNlcnZpY2lvcyBkZSBcIiArIHNlcnZpY2lvRWxlZ2lkb1swXS5ub21icmU7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpdGxlKHRpdGxlU3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2VydmljaW9fZWxlZ2lkbyhzZXJ2aWNpb0VsZWdpZG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VydmljaW9FbGVnaWRvWzBdLm5vbWJyZSA9PT0gXCJUb3BvZ3JhZsOtYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJbWFnZW4oaW1hZ2VuVG9wb2dyYWZpYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZpY2lvRWxlZ2lkb1swXS5ub21icmUgPT09IFwiSW5nZW5pZXLDrWEgeSBDb25zdWx0b3LDrWFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW1hZ2VuKGltYWdlbkluZ2VuaWVyaWEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNpb0VsZWdpZG9bMF0ubm9tYnJlID09PSBcIk1lZGlvIEFtYmllbnRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEltYWdlbihpbWFnZW5NZWRpb0FtYmllbnRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0U2VydmljaW9fZWxlZ2lkbyhzZXJ2aWNlcyk7XG4gICAgICAgICAgICAgICAgc2V0VGl0bGUoXCJOdWVzdHJvcyBTZXJ2aWNpb3NcIik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViU2VydmljaW9zID0gc2VydmljZXMuZmxhdE1hcCgoc3ViU2VydmljaW8pID0+IHN1YlNlcnZpY2lvLnN1YnNlcnZpY2lvcyk7XG4gICAgICAgICAgICAgICAgc2V0U2xpZGVyKHN1YlNlcnZpY2lvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCBbc2VydmljZXMsIGlkXSk7XG5cbiAgICBjb25zdCB7IHdpZHRoLGhlaWdodCB9ID0gdXNlU2NyZWVuU2l6ZSgpO1xuICAgIGNvbnNvbGUubG9nKHdpZHRoLGhlaWdodCk7XG4gICAgY29uc3QgaXNNb2JpbGUgPSB3aWR0aCA8PSAxMDAwO1xuICAgIGNvbnN0IHN1YlNlcnZpY2lvUGFnaW5hUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgZGlzcG9zaXRpdm8gPSBcIm1vYmlsZVwiO1xuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZVN1YlNlcnZpY2lvQ2xpY2sgPSBhc3luYyAoc3ViU2VydmljaW86IFN1YnNlcnZpY2lvKSA9PiB7XG4gICAgICAgIGlmICghc3ViU2VydmljaW8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxpc3RTdWJzZXJ2aWNpb3M6IFN1YnNlcnZpY2lvW10gPSBbXVxuICAgICAgICBsaXN0U3Vic2VydmljaW9zLnB1c2goc3ViU2VydmljaW8pXG4gICAgICAgIHNldFNlbGVjdGVkU3ViU2VydmljaW8obGlzdFN1YnNlcnZpY2lvcyk7XG4gICAgICAgIHNldFN1YnRpdGxlKGZhbHNlKTtcbiAgICAgICAgaWYgKCFsaXN0U3Vic2VydmljaW9zKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBzZXRTbGlkZXIobGlzdFN1YnNlcnZpY2lvcyk7XG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRTdWJTZXJ2aWNpbyhudWxsKTtcbiAgICAgICAgICAgIHNldFN1YnRpdGxlKHRydWUpO1xuICAgICAgICAgICAgaWYgKCFzZXJ2aWNlcykge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlsdGVyU2VydmljaW8oaWQpO1xuICAgICAgICB9LCAyMDAwMCk7XG4gICAgfTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChzdWJTZXJ2aWNpb1BhZ2luYVJlZi5jdXJyZW50ICYmICEhc2VsZWN0ZWRTdWJTZXJ2aWNpbykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudFBvc2l0aW9uID0gc3ViU2VydmljaW9QYWdpbmFSZWYuY3VycmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSAtMzAwOyAvLyBBanVzdGEgZXN0ZSB2YWxvciBzZWfDum4gY3XDoW50byBtw6FzIGFycmliYSBxdWllcmFzIHF1ZSBzZWEgZWwgc2Nyb2xsXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsKHtcbiAgICAgICAgICAgICAgICB0b3A6IGVsZW1lbnRQb3NpdGlvbiArIG9mZnNldCxcbiAgICAgICAgICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgW3NlbGVjdGVkU3ViU2VydmljaW9dKTtcblxuICAgIGlmICghc2VydmljaW9fZWxlZ2lkbykge1xuICAgICAgICByZXR1cm4gPFNwaW5uZXIvPjtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPFBhZ2VzTGF5b3V0PlxuICAgICAgICAgICAgICAgIDxCYW5uZXIgdGl0bGU9e3NlcnZpY2lvX2VsZWdpZG8ubGVuZ3RoID09IDEgPyBzZXJ2aWNpb19lbGVnaWRvWzBdLm5vbWJyZSA6IFwiU2VydmljaW9zXCJ9IHBhcmFncmFwaD17dGl0bGUudG9TdHJpbmcoKX0gaW1hZ2U9e2ltYWdlbn0gLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17ZGlzcG9zaXRpdm99PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBzZXJ2aWNpb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3NlcnZpY2lvX2VsZWdpZG8ubGVuZ3RoID09PSAxID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPnt0aXRsZX08L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGF6eVNlcnZpY2lvcyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IGNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC00IFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgYXNpZGUgLXRlbXBsYXRlYH0gPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VydmljaW9fZWxlZ2lkby5tYXAoKHNlcnZpY2lvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzZXJ2aWNpby5pZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IHB4LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbD17eyBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjYgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic2VydmljaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3NlcnZpY2lvLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPntzZXJ2aWNpbz8ubm9tYnJlfTwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ncHgtMic+e3NlcnZpY2lvPy5kZXNjcmlwY2lvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXJ2aWNpby5zdWJzZXJ2aWNpb3MubWFwKChzdWJTZXJ2aWNpbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3N1YlNlcnZpY2lvLmlkfSBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU3ViU2VydmljaW9DbGljayhzdWJTZXJ2aWNpbyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC4zIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzdWJzZXJ2aWNpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3N1YlNlcnZpY2lvLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBpdGVtcyBteC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiY29sLTEgaWNvbi1yb3dcIj48QWlPdXRsaW5lRG91YmxlUmlnaHQgLz48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT1cImNvbC0xMFwiPntzdWJTZXJ2aWNpby5ub21icmUgKyBcIiAgIFwifTxzcGFuPjxBaUZpbGxDYXJldERvd24gLz48L3NwYW4+PC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC0xMiBjb2wtbWQtOCBcIiA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgbWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2xpZGVyU2VydmljZXMgc3ViU2VydmljaW9zPXtzbGlkZXJ9IHN1YnRpdGxlPXtzdWJ0aXRsZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvd1wiIHJlZj17c3ViU2VydmljaW9QYWdpbmFSZWZ9IGtleT17c2VsZWN0ZWRTdWJTZXJ2aWNpbyAmJiBzZWxlY3RlZFN1YlNlcnZpY2lvWzBdPy5kZXNjcmlwY2lvbn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw9e3sgaGVpZ2h0OiAwLCBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZT17eyBoZWlnaHQ6IFwiYXV0b1wiLCBvcGFjaXR5OiAxIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdD17eyBoZWlnaHQ6IDAsIG9wYWNpdHk6IDAsIHNjYWxlOiAwLjUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjMsIGRlbGF5OiAxLCBkZWxheUNoaWxkcmVuOiAwLjMsIHN0YWdnZXJDaGlsZHJlbjogMC4zIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtzZWxlY3RlZFN1YlNlcnZpY2lvICYmIHNlbGVjdGVkU3ViU2VydmljaW9bMF0/LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkU3ViU2VydmljaW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZWN0ZWRTdWJTZXJ2aWNpb1swXS5ub21icmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJTZXJ2aWNpb3MgZGUgY2FsaWRhZCB5IGNvbiBsYSBtw6FzIGFsdGEgdGVjbm9sb2fDrWFcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRTdWJTZXJ2aWNpb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxlY3RlZFN1YlNlcnZpY2lvWzBdLmRlc2NyaXBjaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiU29tb3MgdW5hIGVtcHJlc2EgY29uIG3DoXMgZGUgMTAgYcOxb3MgZGUgZXhwZXJpZW5jaWEgZW4gZWwgbWVyY2FkbywgY29uIHByb2Zlc2lvbmFsZXMgYWx0YW1lbnRlIGNhbGlmaWNhZG9zIHkgY29uIGFtcGxpYSBleHBlcmllbmNpYSBlbiBlbCBzZWN0b3IgcMO6YmxpY28geSBwcml2YWRvLCBicmluZGFuZG8gc2VydmljaW9zIGRlIGNhbGlkYWQgeSBjb24gbGEgbcOhcyBhbHRhIHRlY25vbG9nw61hLlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9BbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT0nbXktNSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+QnJvY2h1cmU8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYSBvYnRlbmVyIHVuYSB2aXNpw7NuIGNvbXBsZXRhIGRlIG51ZXN0cm9zIHNlcnZpY2lvcyB5IHZlbnRhamFzLCB0ZSBpbnZpdGFtb3MgYSBkZXNjYXJnYXIgbnVlc3RybyBicm9jaHVyZSBpbmZvcm1hdGl2by4gQXF1w60gZW5jb250cmFyw6FzIGRldGFsbGVzIGV4aGF1c3Rpdm9zIHNvYnJlIG51ZXN0cmFzIG9mZXJ0YXMsIHRlc3RpbW9uaW9zIGRlIGNsaWVudGVzIHNhdGlzZmVjaG9zIHkgbGEgaW5mb3JtYWNpw7NuIGRlIGNvbnRhY3RvIG5lY2VzYXJpYSBwYXJhIGRhciBlbCBzaWd1aWVudGUgcGFzbyBoYWNpYSB1bmEgY29sYWJvcmFjacOzbiBleGl0b3NhLiDCoURlc2N1YnJlIGPDs21vIHBvZGVtb3MgYXl1ZGFydGUgYSBhbGNhbnphciB0dXMgb2JqZXRpdm9zIGhveSBtaXNtbyFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8UGRmVmlld2VyIC8+ICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VydmljaW9fZWxlZ2lkby5sZW5ndGggPT09IDEgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhenlTZXJ2aWNpb3MgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1BhZ2VzTGF5b3V0PlxuICAgICAgICA8Lz5cbiAgICApO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMYXp5U2VydmVjZXNEZXRhaWwgKCkge1xuICAgIGNvbnN0IHsgaXNWaXNpYmxlLCByZWYgfSA9IHVzZUludGVyc2VjdGlvbk9ic2VydmVyKCcxMDBweCcpO1xuICBcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiTGF6eVNlcnZlY2VzRGV0YWlsXCIgcmVmPXtyZWZ9PlxuICAgICAgICAgICAge2lzVmlzaWJsZSA/IDxTZXJ2ZWNlc0RldGFpbCAvPiA6IG51bGx9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0iXSwiZmlsZSI6InNlcnZlY2VzRGV0YWlsLTFjNGYyYzYwLmpzIn0=