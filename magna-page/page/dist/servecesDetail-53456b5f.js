import{j as e,S as I,A as O,k as C,l as R,m as T,e as L,r as t,_ as w,n as B,o as M,p as V,i as k,q as x}from"./index.js";import{A as q,a as F}from"./index.esm-8e0e7528.js";import{i as $,a as K,b as Q,c as W}from"./medio-dc70beb8.js";import{B as Y}from"./banner-c41eb154.js";import{u as G}from"./ScreenSize-d22b7a5d.js";import{A as H}from"./index-8079b195.js";import"./iconBase-24917912.js";import"./index.esm-552fc115.js";import"./index.esm-84b527cb.js";const J=({subServicios:a,subtitle:c})=>e.jsx(I,{spaceBetween:30,slidesPerView:1,autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},navigation:!0,modules:[O,C,R],children:a==null?void 0:a.map((r,d)=>e.jsxs(T,{children:[e.jsx("div",{className:"slide-service ",children:e.jsx("img",{srcSet:`
                            ${r.imagen_celular} 450w,
                            ${r.imagen_tablet} 1024w,
                            ${r.imagen} 5000w
                        `,sizes:`(max-width: 450px) 280px,
                            (max-width: 1023px) 736px,
                            (min-width: 1024px) 1024px`,alt:r.nombre,className:"img-fluid img-subservicio "})}),e.jsx("h3",{className:"title-slider-service",children:c?r.nombre:""})]},d))});const U=t.lazy(()=>w(()=>import("./brochure-5c889bc1.js"),["brochure-5c889bc1.js","index.js","index-5a9f3c56.css"])),N=t.lazy(()=>w(()=>import("./Servicios-defab640.js"),["Servicios-defab640.js","index.js","index-5a9f3c56.css","setionHeader-b666466c.js","Servicios-7ee61343.css"])),X=()=>{var y,S;const{id:a}=B();let[c,r]=t.useState("Nuestros Servicios"),[d,m]=t.useState($);const{data:o}=M({queryKey:["services"],staleTime:1e3*60*30,refetchOnWindowFocus:!1,refetchInterval:1e3*60*30});let p="container";const[l,j]=t.useState(),[n,v]=t.useState(null),[_,u]=t.useState(null),[A,f]=t.useState(!0),g=s=>{if(!o)return;const i=o.filter(z=>z.nombre===s);return u(i[0].subservicios),i};t.useEffect(()=>{if(o)if(a){const s=g(a);if(s){const i="servicios de "+s[0].nombre;r(i),j(s),s[0].nombre==="Topografía"&&m(K),s[0].nombre==="Ingeniería y Consultoría"&&m(Q),s[0].nombre==="Medio Ambiente"&&m(W)}}else{j(o),r("Nuestros Servicios");const s=o.flatMap(i=>i.subservicios);u(s)}},[o,a]);const{width:b,height:P}=G();console.log(b,P);const E=b<=1e3,h=t.useRef(null);E&&(p="mobile");const D=async s=>{if(!s)return;const i=[];i.push(s),v(i),f(!1),i&&(u(i),a&&setTimeout(()=>{v(null),f(!0),o&&g(a)},2e4))};return t.useEffect(()=>{if(h.current&&n){const s=h.current.getBoundingClientRect().top+window.pageYOffset,i=-300;window.scroll({top:s+i,behavior:"smooth"})}},[n]),l?e.jsx(e.Fragment,{children:e.jsxs(k,{children:[e.jsx(Y,{title:l.length==1?l[0].nombre:"Servicios",paragraph:c.toString(),image:d}),e.jsxs("div",{className:p,children:[e.jsx("div",{className:"row servicio",children:l.length===1?e.jsx("div",{className:"col-12",children:e.jsx("h2",{className:"text-center",children:c})}):e.jsx("div",{className:"row",children:e.jsx(N,{})})}),e.jsxs("div",{className:"row content",children:[e.jsx("div",{className:"col-12 col-md-4 ",children:e.jsx("div",{className:"aside -template",children:l.map(s=>e.jsx("div",{children:e.jsxs("div",{className:"row px-2",children:[e.jsx("div",{className:"col-12",children:e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},className:"servicio",children:[e.jsx("h3",{children:s==null?void 0:s.nombre}),e.jsx("p",{className:"px-2",children:s==null?void 0:s.descripcion})]},s.id)}),e.jsx("div",{children:s.subservicios.map(i=>e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(x.div,{onClick:()=>D(i),initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"subservicio",children:e.jsxs("div",{className:"row items mx-3",children:[e.jsx("span",{className:"col-1 icon-row",children:e.jsx(q,{})}),e.jsxs("h5",{className:"col-10",children:[i.nombre+"   ",e.jsx("span",{children:e.jsx(F,{})})]})]})},i.id)})},i.id))})]})},s.id))})}),e.jsxs("div",{className:"col-12 col-md-8 ",children:[e.jsx("div",{className:"row mb-5",children:e.jsx(J,{subServicios:_,subtitle:A})}),e.jsxs("div",{className:"row",ref:h,children:[e.jsx(H,{children:e.jsxs(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0,scale:.5},transition:{duration:.3,delay:1,delayChildren:.3,staggerChildren:.3},children:[e.jsx("h3",{children:n?n[0].nombre:"Servicios de calidad y con la más alta tecnología"}),e.jsx("p",{children:n?n[0].descripcion:"Somos una empresa con más de 10 años de experiencia en el mercado, con profesionales altamente calificados y con amplia experiencia en el sector público y privado, brindando servicios de calidad y con la más alta tecnología."})]},n&&((y=n[0])==null?void 0:y.id))}),e.jsx("div",{}),e.jsxs("div",{className:"my-5",children:[e.jsx("h3",{children:"Brochure"}),e.jsx("p",{children:"Para obtener una visión completa de nuestros servicios y ventajas, te invitamos a descargar nuestro brochure informativo. Aquí encontrarás detalles exhaustivos sobre nuestras ofertas, testimonios de clientes satisfechos y la información de contacto necesaria para dar el siguiente paso hacia una colaboración exitosa. ¡Descubre cómo podemos ayudarte a alcanzar tus objetivos hoy mismo!"}),e.jsx(U,{})]})]},n&&((S=n[0])==null?void 0:S.descripcion))]}),l.length===1?e.jsx("div",{className:"row",children:e.jsx(N,{})}):""]})]})]})}):e.jsx(V,{})};function ce(){const{isVisible:a,ref:c}=L("100px");return e.jsx("div",{id:"LazyServecesDetail",ref:c,children:a?e.jsx(X,{}):null})}export{ce as default};


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6InVjQWlCQSxNQUFNQSxFQUFnRCxDQUFDLENBQUUsYUFBQUMsRUFBYSxTQUFBQyxLQUU5REMsRUFBQSxJQUFDQyxFQUFBLENBQ0csYUFBYyxHQUNkLGNBQWUsRUFDZixTQUFVLENBQ04sTUFBTyxJQUNQLHFCQUFzQixHQUN0QixrQkFBbUIsRUFFckIsRUFDQSxXQUFZLEdBQ1osUUFBUyxDQUFDQyxFQUFVQyxFQUFZQyxDQUFVLEVBRzNDLDBCQUFjLElBQUksQ0FBQ0MsRUFBYUMsV0FDNUJDLEVBQ0csV0FBQ1AsRUFBQSxXQUFJLFVBQVcsaUJBQ1osU0FBQUEsRUFBQSxJQUFDLE9BQUksT0FBUTtBQUFBLDhCQUNQSyxFQUFZLGNBQWM7QUFBQSw4QkFDMUJBLEVBQVksYUFBYTtBQUFBLDhCQUN6QkEsRUFBWSxNQUFNO0FBQUEsMEJBRXhCLE1BQU07QUFBQTtBQUFBLHdEQUdBLElBQUtBLEVBQVksT0FDdkIsVUFBVSwrQkFDZCxRQUNDLEtBQUcsV0FBVSx1QkFFTixTQUFXTixFQUFBTSxFQUFZLE9BQVUsR0FFekMsSUFqQmNDLENBbUJsQixFQUNILEdDcENiLE1BQU1FLEVBQVlDLEVBQUEsS0FBSyxVQUFNLE9BQU8sd0JBQXdCLEVBQUMsMkRBRXZEQyxFQUFnQkQsRUFBQSxLQUFLLElBQU1FLEVBQUEsV0FBTyx5QkFBa0MsRUFBQyxnSEFJckVDLEVBQTJCLElBQU0sU0FDN0IsTUFBRSxHQUFBQyxHQUFPQyxJQUVmLEdBQUksQ0FBQ0MsRUFBT0MsQ0FBUSxFQUFJQyxXQUFpQixvQkFBb0IsRUFDekQsQ0FBQ0MsRUFBUUMsQ0FBUyxFQUFJRixXQUFpQkcsQ0FBZSxFQUMxRCxLQUFNLENBQUUsS0FBTUMsQ0FBUyxFQUFJQyxFQUFzQixDQUM3QyxTQUFVLENBQUMsVUFBVSxFQUNyQixVQUFXLElBQU8sR0FBSyxHQUN2QixxQkFBc0IsR0FDdEIsZ0JBQWlCLElBQU8sR0FBSyxHQUNoQyxFQUNELElBQUlDLEVBQWMsWUFDbEIsS0FBTSxDQUFDQyxFQUFrQkMsQ0FBbUIsRUFBSVIsRUFBc0IsV0FDaEUsQ0FBQ1MsRUFBcUJDLENBQXNCLEVBQUlWLFdBQStCLElBQUksRUFDbkYsQ0FBQ1csRUFBUUMsQ0FBUyxFQUFJWixXQUErQixJQUFJLEVBQ3pELENBQUNsQixFQUFVK0IsQ0FBVyxFQUFJYixXQUFrQixFQUFJLEVBRWhEYyxFQUFrQmxCLEdBQWUsQ0FDbkMsR0FBSSxDQUFDUSxFQUNELE9BRUosTUFBTVcsRUFBd0JYLEVBQVMsT0FBUVcsR0FBd0JBLEVBQVMsU0FBV25CLENBQUUsRUFDbkYsT0FBQWdCLEVBQUFHLEVBQVMsQ0FBQyxFQUFFLFlBQVksRUFDM0JBLENBQUEsRUFHWEMsWUFBVSxJQUFNLENBQ1osR0FBSVosRUFDQSxHQUFJUixFQUFJLENBQ0UsTUFBQXFCLEVBQWtCSCxFQUFlbEIsQ0FBRSxFQUN6QyxHQUFJcUIsRUFBaUIsQ0FDakIsTUFBTUMsRUFBYyxnQkFBa0JELEVBQWdCLENBQUMsRUFBRSxPQUN6RGxCLEVBQVNtQixDQUFXLEVBQ3BCVixFQUFvQlMsQ0FBZSxFQUMvQkEsRUFBZ0IsQ0FBQyxFQUFFLFNBQVcsY0FDOUJmLEVBQVVpQixDQUFnQixFQUUxQkYsRUFBZ0IsQ0FBQyxFQUFFLFNBQVcsNEJBQzlCZixFQUFVa0IsQ0FBZ0IsRUFFMUJILEVBQWdCLENBQUMsRUFBRSxTQUFXLGtCQUM5QmYsRUFBVW1CLENBQW1CLENBRXJDLE1BQ0csQ0FDSGIsRUFBb0JKLENBQVEsRUFDNUJMLEVBQVMsb0JBQW9CLEVBQzdCLE1BQU1sQixFQUFldUIsRUFBUyxRQUFTaEIsR0FBZ0JBLEVBQVksWUFBWSxFQUMvRXdCLEVBQVUvQixDQUFZLENBQzFCLENBQ0osRUFDRCxDQUFDdUIsRUFBVVIsQ0FBRSxDQUFDLEVBRWpCLEtBQU0sQ0FBRSxNQUFBMEIsRUFBTSxPQUFBQyxDQUFPLEVBQUlDLEVBQWMsRUFDL0IsWUFBSUYsRUFBTUMsQ0FBTSxFQUN4QixNQUFNRSxFQUFXSCxHQUFTLElBQ3BCSSxFQUF1QkMsU0FBdUIsSUFBSSxFQUNwREYsSUFDY25CLEVBQUEsVUFHWixNQUFBc0IsRUFBeUIsTUFBT3hDLEdBQTZCLENBQy9ELEdBQUksQ0FBQ0EsRUFDRCxPQUdKLE1BQU15QyxFQUFrQyxHQUN4Q0EsRUFBaUIsS0FBS3pDLENBQVcsRUFDakNzQixFQUF1Qm1CLENBQWdCLEVBQ3ZDaEIsRUFBWSxFQUFLLEVBQ1pnQixJQUdMakIsRUFBVWlCLENBQWdCLEVBQ3JCakMsR0FHTCxXQUFXLElBQU0sQ0FDYmMsRUFBdUIsSUFBSSxFQUMzQkcsRUFBWSxFQUFJLEVBQ1hULEdBR0xVLEVBQWVsQixDQUFFLEdBQ2xCLEdBQUssSUFjWixPQVhBb0IsWUFBVSxJQUFNLENBQ1osR0FBSVUsRUFBcUIsU0FBYWpCLEVBQXFCLENBQ3ZELE1BQU1xQixFQUFrQkosRUFBcUIsUUFBUSxzQkFBc0IsRUFBRSxJQUFNLE9BQU8sWUFDcEZLLEVBQVMsS0FDZixPQUFPLE9BQU8sQ0FDVixJQUFLRCxFQUFrQkMsRUFDdkIsU0FBVSxTQUNiLENBQ0wsR0FDRCxDQUFDdEIsQ0FBbUIsQ0FBQyxFQUVuQkYsRUFLRHhCLE1BQUFpRCxXQUFBLENBQ0ksZ0JBQUNDLEVBQ0csV0FBQWxELEVBQUEsSUFBQ21ELEVBQU8sT0FBTzNCLEVBQWlCLFFBQVUsRUFBSUEsRUFBaUIsQ0FBQyxFQUFFLE9BQVMsWUFBYSxVQUFXVCxFQUFNLFdBQVksTUFBT0csRUFBUSxFQUNwSWtDLE9BQUMsTUFBSSxXQUFXN0IsRUFDWixVQUFDdkIsRUFBQSxXQUFJLFVBQVUsZUFDVixTQUFpQndCLEVBQUEsU0FBVyxFQUN4QnhCLEVBQUEsV0FBSSxVQUFVLFNBQ1gsU0FBQ0EsTUFBQSxNQUFHLFVBQVUsY0FBZSxTQUFBZSxDQUFNLEVBQ3ZDLEdBRUNmLE1BQUEsT0FBSSxVQUFVLE1BQ1gsU0FBQUEsRUFBQSxJQUFDVSxFQUFjLEdBQ25CLEdBRVIsRUFDQTBDLE9BQUMsTUFBSSxXQUFVLGNBQ1gsVUFBQ3BELEVBQUEsV0FBSSxVQUFVLG1CQUNYLFNBQUNBLE1BQUEsT0FBSSxVQUFXLGtCQUNYLFNBQUF3QixFQUFpQixJQUFLUSxHQUVkaEMsRUFBQSxXQUNHLFNBQUNvRCxPQUFBLE9BQUksVUFBVSxXQUNYLFVBQUNwRCxNQUFBLE9BQUksVUFBVSxTQUNYLFNBQUFvRCxFQUFBLEtBQUNDLEVBQU8sSUFBUCxDQUNHLFFBQVMsQ0FBRSxRQUFTLENBQUUsRUFDdEIsUUFBUyxDQUFFLFFBQVMsQ0FBRSxFQUN0QixXQUFZLENBQUUsU0FBVSxFQUFJLEVBQzVCLFVBQVUsV0FHVixVQUFDckQsTUFBQSxNQUFJLDBCQUFVLE1BQU8sR0FDckJBLEVBQUEsU0FBRSxVQUFVLE9BQVEsMEJBQVUsWUFBWSxJQUh0Q2dDLEVBQVMsSUFLdEIsUUFDQyxNQUNJLFVBQUFBLEVBQVMsYUFBYSxJQUFLM0IsU0FFbkIsTUFBeUIsV0FBVSxNQUNoQyxTQUFDTCxFQUFBLFdBQUksVUFBVSxTQUNYLFNBQUFBLEVBQUEsSUFBQ3FELEVBQU8sSUFBUCxDQUNHLFFBQVMsSUFBTVIsRUFBdUJ4QyxDQUFXLEVBQ2pELFFBQVMsQ0FBRSxRQUFTLENBQUUsRUFDdEIsUUFBUyxDQUFFLFFBQVMsQ0FBRSxFQUN0QixXQUFZLENBQUUsU0FBVSxFQUFJLEVBQzVCLFVBQVUsY0FHVixTQUFBK0MsRUFBQSxLQUFDLE1BQUksV0FBVSxpQkFDWCxVQUFBcEQsTUFBQyxPQUFLLFdBQVUsaUJBQWlCLFNBQUFBLE1BQUNzRCxHQUFxQixHQUFFLEVBQ3pERixPQUFDLEtBQUcsV0FBVSxTQUFVLFVBQUEvQyxFQUFZLE9BQVMsTUFBT0wsRUFBQSxZQUFLLFNBQUNBLEVBQUEsSUFBQXVELEVBQUEsQ0FBZ0IsR0FBRSxHQUFPLEdBQ3ZGLEdBTEtsRCxFQUFZLEVBTXJCLEVBQ0osQ0FmTSxFQUFBQSxFQUFZLEVBZ0J0QixDQUVQLEVBQ0wsQ0FDSixLQXJDTTJCLEVBQVMsRUFzQ25CLENBRVAsRUFDTCxDQUNKLEdBQ0FvQixPQUFDLE1BQUksV0FBVSxtQkFDWCxVQUFDcEQsTUFBQSxPQUFJLFVBQVUsV0FDWCxTQUFBQSxNQUFDSCxHQUFlLGFBQWMrQixFQUFRLFNBQUE3QixFQUFvQixDQUM5RCxHQUVDcUQsRUFBQSxZQUFJLFVBQVUsTUFBTSxJQUFLVCxFQUN0QixVQUFBM0MsTUFBQ3dELEVBQ0csVUFBQUosRUFBQSxLQUFDQyxFQUFPLElBQVAsQ0FDRyxRQUFTLENBQUUsT0FBUSxFQUFHLFFBQVMsQ0FBRSxFQUNqQyxRQUFTLENBQUUsT0FBUSxPQUFRLFFBQVMsQ0FBRSxFQUN0QyxLQUFNLENBQUUsT0FBUSxFQUFHLFFBQVMsRUFBRyxNQUFPLEVBQUksRUFDMUMsV0FBWSxDQUFFLFNBQVUsR0FBSyxNQUFPLEVBQUcsY0FBZSxHQUFLLGdCQUFpQixFQUFJLEVBR2hGLFVBQUFyRCxNQUFDLE1BQ0ksU0FDSzBCLElBQW9CLENBQUMsRUFBRSxPQUN2QixvREFDVixRQUNDLElBQ0ksVUFBQUEsRUFDS0EsRUFBb0IsQ0FBQyxFQUFFLFlBQ3ZCLG1PQUNWLElBWEtBLEtBQXVCK0IsRUFBQS9CLEVBQW9CLENBQUMsSUFBckIsWUFBQStCLEVBQXdCLEtBYTVELFFBQ0MsTUFBSSxJQUNMTCxPQUFDLE1BQUksV0FBVSxPQUNYLFVBQUFwRCxNQUFDLE1BQUcsU0FBUSxhQUNaQSxNQUFDLEtBQUUsU0FFSCw0WUFDQ1EsRUFBVSxLQUNmLElBNUJpRGtCLEtBQXVCZ0MsRUFBQWhDLEVBQW9CLENBQUMsSUFBckIsWUFBQWdDLEVBQXdCLFlBNkJwRyxHQUNKLEVBQ0NsQyxFQUFpQixTQUFXLEVBQ3hCeEIsTUFBQSxPQUFJLFVBQVUsTUFDWCxTQUFBQSxNQUFDVSxFQUFjLElBQ25CLEVBRUEsSUFFUixHQUNKLEVBQ0osRUFDSixTQWpIUWlELEVBQU8sR0FtSHZCLEVBR0EsU0FBd0JDLElBQXNCLENBQzFDLEtBQU0sQ0FBRSxVQUFBQyxFQUFXLElBQUFDLENBQUksRUFBSUMsRUFBd0IsT0FBTyxFQUd0RCxPQUFBL0QsRUFBQSxJQUFDLE9BQUksR0FBRyxxQkFBcUIsSUFBQThELEVBQ3hCLFNBQVlELEVBQUE3RCxFQUFBLElBQUNZLEVBQWUsSUFBSyxJQUN0QyxFQUVOIiwibmFtZXMiOlsiU2xpZGVyU2VydmljZXMiLCJzdWJTZXJ2aWNpb3MiLCJzdWJ0aXRsZSIsImpzeCIsIlN3aXBlciIsIkF1dG9wbGF5IiwiUGFnaW5hdGlvbiIsIk5hdmlnYXRpb24iLCJzdWJTZXJ2aWNpbyIsImluZGV4IiwiU3dpcGVyU2xpZGUiLCJQZGZWaWV3ZXIiLCJsYXp5IiwiTGF6eVNlcnZpY2lvcyIsIl9fdml0ZVByZWxvYWQiLCJTZXJ2ZWNlc0RldGFpbCIsImlkIiwidXNlUGFyYW1zIiwidGl0bGUiLCJzZXRUaXRsZSIsInVzZVN0YXRlIiwiaW1hZ2VuIiwic2V0SW1hZ2VuIiwiaW1hZ2VuU2VydmljaW9zIiwic2VydmVjZXMiLCJ1c2VRdWVyeSIsImRpc3Bvc2l0aXZvIiwic2VydmljaW9fZWxlZ2lkbyIsInNldFNlcnZpY2lvX2VsZWdpZG8iLCJzZWxlY3RlZFN1YlNlcnZpY2lvIiwic2V0U2VsZWN0ZWRTdWJTZXJ2aWNpbyIsInNsaWRlciIsInNldFNsaWRlciIsInNldFN1YnRpdGxlIiwiZmlsdGVyU2VydmljaW8iLCJzZXJ2aWNpbyIsInVzZUVmZmVjdCIsInNlcnZpY2lvRWxlZ2lkbyIsInRpdGxlU3RyaW5nIiwiaW1hZ2VuVG9wb2dyYWZpYSIsImltYWdlbkluZ2VuaWVyaWEiLCJpbWFnZW5NZWRpb0FtYmllbnRlIiwid2lkdGgiLCJoZWlnaHQiLCJ1c2VTY3JlZW5TaXplIiwiaXNNb2JpbGUiLCJzdWJTZXJ2aWNpb1BhZ2luYVJlZiIsInVzZVJlZiIsImhhbmRsZVN1YlNlcnZpY2lvQ2xpY2siLCJsaXN0U3Vic2VydmljaW9zIiwiZWxlbWVudFBvc2l0aW9uIiwib2Zmc2V0IiwiRnJhZ21lbnQiLCJQYWdlc0xheW91dCIsIkJhbm5lciIsImpzeHMiLCJtb3Rpb24iLCJBaU91dGxpbmVEb3VibGVSaWdodCIsIkFpRmlsbENhcmV0RG93biIsIkFuaW1hdGVQcmVzZW5jZSIsIl9hIiwiX2IiLCJTcGlubmVyIiwiTGF6eVNlcnZlY2VzRGV0YWlsIiwiaXNWaXNpYmxlIiwicmVmIiwidXNlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiXSwic291cmNlcyI6WyIuLi9zcmMvY29tcG9uZW50cy9zbGlkZXJTZXJ2aWNlcy50c3giLCIuLi9zcmMvcGFnZXMvc2VydmVjZXNEZXRhaWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTd2lwZXIsIFN3aXBlclNsaWRlIH0gZnJvbSAnc3dpcGVyL3JlYWN0JztcbmltcG9ydCB7ICBTdWJzZXJ2aWNpbyB9IGZyb20gJy4uL3R5cGVzL3R5cGVzJztcbmltcG9ydCAnLi9zdHlsZXMvc2xpZGVyU2VydmljZS5jc3MnO1xuLy8gSW1wb3J0IFN3aXBlciBzdHlsZXNcbmltcG9ydCAnc3dpcGVyL2Nzcy9uYXZpZ2F0aW9uJztcbmltcG9ydCAnc3dpcGVyL2Nzcy9wYWdpbmF0aW9uJztcbmltcG9ydCAnc3dpcGVyL2Nzcy9zY3JvbGxiYXInO1xuaW1wb3J0ICdzd2lwZXIvY3NzJztcbmltcG9ydCB7IEF1dG9wbGF5LCBOYXZpZ2F0aW9uLCBQYWdpbmF0aW9uIH0gZnJvbSAnc3dpcGVyL21vZHVsZXMnO1xuXG5cbmludGVyZmFjZSBTbGlkZXJTZXJ2aWNlc1Byb3BzIHtcbiAgICBzdWJTZXJ2aWNpb3M/OiBTdWJzZXJ2aWNpb1tdIHwgbnVsbDtcbiAgICBzdWJ0aXRsZT86IGJvb2xlYW47XG59XG5cbmNvbnN0IFNsaWRlclNlcnZpY2VzOiBSZWFjdC5GQzxTbGlkZXJTZXJ2aWNlc1Byb3BzPiA9ICh7IHN1YlNlcnZpY2lvcyxzdWJ0aXRsZX0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8U3dpcGVyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW49ezMwfVxuICAgICAgICAgICAgc2xpZGVzUGVyVmlldz17MX1cbiAgICAgICAgICAgIGF1dG9wbGF5PXt7XG4gICAgICAgICAgICAgICAgZGVsYXk6IDUwMDAsXG4gICAgICAgICAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhdXNlT25Nb3VzZUVudGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBuYXZpZ2F0aW9uPXt0cnVlfVxuICAgICAgICAgICAgICBtb2R1bGVzPXtbQXV0b3BsYXksIFBhZ2luYXRpb24sIE5hdmlnYXRpb25dfVxuICAgICAgICAgICAgICBcbiAgICAgICAgPlxuICAgICAgICAgICAge3N1YlNlcnZpY2lvcz8ubWFwKChzdWJTZXJ2aWNpbywgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICA8U3dpcGVyU2xpZGUga2V5PXtpbmRleH0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgc2xpZGUtc2VydmljZSBgIH0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyY1NldD17YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7c3ViU2VydmljaW8uaW1hZ2VuX2NlbHVsYXJ9IDQ1MHcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzdWJTZXJ2aWNpby5pbWFnZW5fdGFibGV0fSAxMDI0dyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3N1YlNlcnZpY2lvLmltYWdlbn0gNTAwMHdcbiAgICAgICAgICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplcz1cIihtYXgtd2lkdGg6IDQ1MHB4KSAyODBweCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWF4LXdpZHRoOiAxMDIzcHgpIDczNnB4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtaW4td2lkdGg6IDEwMjRweCkgMTAyNHB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17c3ViU2VydmljaW8ubm9tYnJlfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpbWctZmx1aWQgaW1nLXN1YnNlcnZpY2lvICcgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RpdGxlLXNsaWRlci1zZXJ2aWNlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZSA/IHN1YlNlcnZpY2lvLm5vbWJyZSA6ICAnJyBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPC9Td2lwZXJTbGlkZT5cbiAgICAgICAgICAgICkpfVxuICAgICAgICA8L1N3aXBlcj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyU2VydmljZXM7XG4iLCJpbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ0B0YW5zdGFjay9yZWFjdC1xdWVyeSc7XG5pbXBvcnQgeyBBbmltYXRlUHJlc2VuY2UsIG1vdGlvbiB9IGZyb20gJ2ZyYW1lci1tb3Rpb24nO1xuaW1wb3J0IHsgbGF6eSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBaUZpbGxDYXJldERvd24sIEFpT3V0bGluZURvdWJsZVJpZ2h0IH0gZnJvbSBcInJlYWN0LWljb25zL2FpXCI7XG5pbXBvcnQgeyB1c2VQYXJhbXMgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IGltYWdlbkluZ2VuaWVyaWEgZnJvbSAnLi4vYXNzZXRzL2ltZy9iYW5uZXIvaW5nZW5pZXJpYS53ZWJwJztcbmltcG9ydCBpbWFnZW5NZWRpb0FtYmllbnRlIGZyb20gJy4uL2Fzc2V0cy9pbWcvYmFubmVyL21lZGlvLndlYnAnO1xuaW1wb3J0IGltYWdlblNlcnZpY2lvcyBmcm9tICcuLi9hc3NldHMvaW1nL2Jhbm5lci9zZXJ2aWNpb3Mud2VicCc7XG5pbXBvcnQgaW1hZ2VuVG9wb2dyYWZpYSBmcm9tICcuLi9hc3NldHMvaW1nL2Jhbm5lci9jb252ZXJ0ZWRfdG9wby53ZWJwJztcbmltcG9ydCBCYW5uZXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvYmFubmVyXCI7XG5pbXBvcnQgU2xpZGVyU2VydmljZXMgZnJvbSBcIi4uL2NvbXBvbmVudHMvc2xpZGVyU2VydmljZXNcIjtcbmltcG9ydCB1c2VTY3JlZW5TaXplIGZyb20gJy4uL2hvb2tzL1NjcmVlblNpemUnO1xuaW1wb3J0IFBhZ2VzTGF5b3V0IGZyb20gXCIuLi9sYXlvdXRzL3BhZ2VzTGF5b3V0c1wiO1xuaW1wb3J0IHsgU2VydmljaW8yLCBTdWJzZXJ2aWNpbyB9IGZyb20gXCIuLi90eXBlcy90eXBlc1wiO1xuaW1wb3J0IFwiLi9zdHlsZXMvc2VydmljZXNEZXRhaWwuY3NzXCI7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICcuLi9jb21wb25lbnRzL3NwaW5uZXInO1xuaW1wb3J0IHVzZUludGVyc2VjdGlvbk9ic2VydmVyIGZyb20gJy4uL2hvb2tzL3VzZUxhenlsb2FkJztcbmNvbnN0IFBkZlZpZXdlciA9IGxhenkoKCkgPT4gaW1wb3J0KCcuLi9jb21wb25lbnRzL2Jyb2NodXJlJykpO1xuXG5jb25zdCBMYXp5U2VydmljaW9zID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4uL2NvbXBvbmVudHMvc2VjdGlvbnMvU2VydmljaW9zJykpO1xuXG5cblxuY29uc3QgU2VydmVjZXNEZXRhaWw6IFJlYWN0LkZDID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHVzZVBhcmFtczx7IGlkOiBzdHJpbmcgfT4oKTtcblxuICAgIGxldCBbdGl0bGUsIHNldFRpdGxlXSA9IHVzZVN0YXRlPFN0cmluZz4oXCJOdWVzdHJvcyBTZXJ2aWNpb3NcIik7XG4gICAgbGV0IFtpbWFnZW4sIHNldEltYWdlbl0gPSB1c2VTdGF0ZTxTdHJpbmc+KGltYWdlblNlcnZpY2lvcyk7XG4gICAgY29uc3QgeyBkYXRhOiBzZXJ2ZWNlcyB9ID0gdXNlUXVlcnk8U2VydmljaW8yW10+KHtcbiAgICAgICAgcXVlcnlLZXk6IFsnc2VydmljZXMnXSxcbiAgICAgICAgc3RhbGVUaW1lOiAxMDAwICogNjAgKiAzMCxcbiAgICAgICAgcmVmZXRjaE9uV2luZG93Rm9jdXM6IGZhbHNlLFxuICAgICAgICByZWZldGNoSW50ZXJ2YWw6IDEwMDAgKiA2MCAqIDMwLFxuICAgIH0pO1xuICAgIGxldCBkaXNwb3NpdGl2byA9IFwiY29udGFpbmVyXCI7XG4gICAgY29uc3QgW3NlcnZpY2lvX2VsZWdpZG8sIHNldFNlcnZpY2lvX2VsZWdpZG9dID0gdXNlU3RhdGU8U2VydmljaW8yW10+KCk7XG4gICAgY29uc3QgW3NlbGVjdGVkU3ViU2VydmljaW8sIHNldFNlbGVjdGVkU3ViU2VydmljaW9dID0gdXNlU3RhdGU8U3Vic2VydmljaW9bXSB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFtzbGlkZXIsIHNldFNsaWRlcl0gPSB1c2VTdGF0ZTxTdWJzZXJ2aWNpb1tdIHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW3N1YnRpdGxlLCBzZXRTdWJ0aXRsZV0gPSB1c2VTdGF0ZTxib29sZWFuPih0cnVlKTtcblxuICAgIGNvbnN0IGZpbHRlclNlcnZpY2lvID0gKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFzZXJ2ZWNlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZpY2lvOiBTZXJ2aWNpbzJbXSA9IHNlcnZlY2VzLmZpbHRlcigoc2VydmljaW86IFNlcnZpY2lvMikgPT4gc2VydmljaW8ubm9tYnJlID09PSBpZCk7XG4gICAgICAgIHNldFNsaWRlcihzZXJ2aWNpb1swXS5zdWJzZXJ2aWNpb3MpO1xuICAgICAgICByZXR1cm4gc2VydmljaW87XG4gICAgfVxuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHNlcnZlY2VzKSB7XG4gICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNpb0VsZWdpZG8gPSBmaWx0ZXJTZXJ2aWNpbyhpZCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlcnZpY2lvRWxlZ2lkbykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVN0cmluZyA9IFwic2VydmljaW9zIGRlIFwiICsgc2VydmljaW9FbGVnaWRvWzBdLm5vbWJyZTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGl0bGUodGl0bGVTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICBzZXRTZXJ2aWNpb19lbGVnaWRvKHNlcnZpY2lvRWxlZ2lkbyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNpb0VsZWdpZG9bMF0ubm9tYnJlID09PSBcIlRvcG9ncmFmw61hXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEltYWdlbihpbWFnZW5Ub3BvZ3JhZmlhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VydmljaW9FbGVnaWRvWzBdLm5vbWJyZSA9PT0gXCJJbmdlbmllcsOtYSB5IENvbnN1bHRvcsOtYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJbWFnZW4oaW1hZ2VuSW5nZW5pZXJpYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZpY2lvRWxlZ2lkb1swXS5ub21icmUgPT09IFwiTWVkaW8gQW1iaWVudGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW1hZ2VuKGltYWdlbk1lZGlvQW1iaWVudGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRTZXJ2aWNpb19lbGVnaWRvKHNlcnZlY2VzKTtcbiAgICAgICAgICAgICAgICBzZXRUaXRsZShcIk51ZXN0cm9zIFNlcnZpY2lvc1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJTZXJ2aWNpb3MgPSBzZXJ2ZWNlcy5mbGF0TWFwKChzdWJTZXJ2aWNpbykgPT4gc3ViU2VydmljaW8uc3Vic2VydmljaW9zKTtcbiAgICAgICAgICAgICAgICBzZXRTbGlkZXIoc3ViU2VydmljaW9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFtzZXJ2ZWNlcywgaWRdKTtcblxuICAgIGNvbnN0IHsgd2lkdGgsaGVpZ2h0IH0gPSB1c2VTY3JlZW5TaXplKCk7XG4gICAgY29uc29sZS5sb2cod2lkdGgsaGVpZ2h0KTtcbiAgICBjb25zdCBpc01vYmlsZSA9IHdpZHRoIDw9IDEwMDA7XG4gICAgY29uc3Qgc3ViU2VydmljaW9QYWdpbmFSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAgIGlmIChpc01vYmlsZSkge1xuICAgICAgICBkaXNwb3NpdGl2byA9IFwibW9iaWxlXCI7XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlU3ViU2VydmljaW9DbGljayA9IGFzeW5jIChzdWJTZXJ2aWNpbzogU3Vic2VydmljaW8pID0+IHtcbiAgICAgICAgaWYgKCFzdWJTZXJ2aWNpbykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGlzdFN1YnNlcnZpY2lvczogU3Vic2VydmljaW9bXSA9IFtdXG4gICAgICAgIGxpc3RTdWJzZXJ2aWNpb3MucHVzaChzdWJTZXJ2aWNpbylcbiAgICAgICAgc2V0U2VsZWN0ZWRTdWJTZXJ2aWNpbyhsaXN0U3Vic2VydmljaW9zKTtcbiAgICAgICAgc2V0U3VidGl0bGUoZmFsc2UpO1xuICAgICAgICBpZiAoIWxpc3RTdWJzZXJ2aWNpb3MpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHNldFNsaWRlcihsaXN0U3Vic2VydmljaW9zKTtcbiAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZFN1YlNlcnZpY2lvKG51bGwpO1xuICAgICAgICAgICAgc2V0U3VidGl0bGUodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoIXNlcnZlY2VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWx0ZXJTZXJ2aWNpbyhpZCk7XG4gICAgICAgIH0sIDIwMDAwKTtcbiAgICB9O1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKHN1YlNlcnZpY2lvUGFnaW5hUmVmLmN1cnJlbnQgJiYgISFzZWxlY3RlZFN1YlNlcnZpY2lvKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50UG9zaXRpb24gPSBzdWJTZXJ2aWNpb1BhZ2luYVJlZi5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IC0zMDA7IC8vIEFqdXN0YSBlc3RlIHZhbG9yIHNlZ8O6biBjdcOhbnRvIG3DoXMgYXJyaWJhIHF1aWVyYXMgcXVlIHNlYSBlbCBzY3JvbGxcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGwoe1xuICAgICAgICAgICAgICAgIHRvcDogZWxlbWVudFBvc2l0aW9uICsgb2Zmc2V0LFxuICAgICAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCBbc2VsZWN0ZWRTdWJTZXJ2aWNpb10pO1xuXG4gICAgaWYgKCFzZXJ2aWNpb19lbGVnaWRvKSB7XG4gICAgICAgIHJldHVybiA8U3Bpbm5lci8+O1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgICA8UGFnZXNMYXlvdXQ+XG4gICAgICAgICAgICAgICAgPEJhbm5lciB0aXRsZT17c2VydmljaW9fZWxlZ2lkby5sZW5ndGggPT0gMSA/IHNlcnZpY2lvX2VsZWdpZG9bMF0ubm9tYnJlIDogXCJTZXJ2aWNpb3NcIn0gcGFyYWdyYXBoPXt0aXRsZS50b1N0cmluZygpfSBpbWFnZT17aW1hZ2VufSAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtkaXNwb3NpdGl2b30+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IHNlcnZpY2lvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VydmljaW9fZWxlZ2lkby5sZW5ndGggPT09IDEgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+e3RpdGxlfTwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYXp5U2VydmljaW9zIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTIgY29sLW1kLTQgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Bhc2lkZSAtdGVtcGxhdGVgfSA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXJ2aWNpb19lbGVnaWRvLm1hcCgoc2VydmljaW8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3NlcnZpY2lvLmlkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgcHgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtMTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb249e3sgZHVyYXRpb246IDAuNiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzZXJ2aWNpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c2VydmljaW8uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDM+e3NlcnZpY2lvPy5ub21icmV9PC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSdweC0yJz57c2VydmljaW8/LmRlc2NyaXBjaW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlcnZpY2lvLnN1YnNlcnZpY2lvcy5tYXAoKHN1YlNlcnZpY2lvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17c3ViU2VydmljaW8uaWR9IGNsYXNzTmFtZT1cInJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTdWJTZXJ2aWNpb0NsaWNrKHN1YlNlcnZpY2lvKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjMgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN1YnNlcnZpY2lvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c3ViU2VydmljaW8uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93IGl0ZW1zIG14LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjb2wtMSBpY29uLXJvd1wiPjxBaU91dGxpbmVEb3VibGVSaWdodCAvPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwiY29sLTEwXCI+e3N1YlNlcnZpY2lvLm5vbWJyZSArIFwiICAgXCJ9PHNwYW4+PEFpRmlsbENhcmV0RG93biAvPjwvc3Bhbj48L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLTEyIGNvbC1tZC04IFwiID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJvdyBtYi01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTbGlkZXJTZXJ2aWNlcyBzdWJTZXJ2aWNpb3M9e3NsaWRlcn0gc3VidGl0bGU9e3N1YnRpdGxlfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm93XCIgcmVmPXtzdWJTZXJ2aWNpb1BhZ2luYVJlZn0ga2V5PXtzZWxlY3RlZFN1YlNlcnZpY2lvICYmIHNlbGVjdGVkU3ViU2VydmljaW9bMF0/LmRlc2NyaXBjaW9ufT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbD17eyBoZWlnaHQ6IDAsIG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlPXt7IGhlaWdodDogXCJhdXRvXCIsIG9wYWNpdHk6IDEgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0PXt7IGhlaWdodDogMCwgb3BhY2l0eTogMCwgc2NhbGU6IDAuNSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb249e3sgZHVyYXRpb246IDAuMywgZGVsYXk6IDEsIGRlbGF5Q2hpbGRyZW46IDAuMywgc3RhZ2dlckNoaWxkcmVuOiAwLjMgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3NlbGVjdGVkU3ViU2VydmljaW8gJiYgc2VsZWN0ZWRTdWJTZXJ2aWNpb1swXT8uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRTdWJTZXJ2aWNpb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxlY3RlZFN1YlNlcnZpY2lvWzBdLm5vbWJyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlNlcnZpY2lvcyBkZSBjYWxpZGFkIHkgY29uIGxhIG3DoXMgYWx0YSB0ZWNub2xvZ8OtYVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZFN1YlNlcnZpY2lvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGVjdGVkU3ViU2VydmljaW9bMF0uZGVzY3JpcGNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXCJTb21vcyB1bmEgZW1wcmVzYSBjb24gbcOhcyBkZSAxMCBhw7FvcyBkZSBleHBlcmllbmNpYSBlbiBlbCBtZXJjYWRvLCBjb24gcHJvZmVzaW9uYWxlcyBhbHRhbWVudGUgY2FsaWZpY2Fkb3MgeSBjb24gYW1wbGlhIGV4cGVyaWVuY2lhIGVuIGVsIHNlY3RvciBww7pibGljbyB5IHByaXZhZG8sIGJyaW5kYW5kbyBzZXJ2aWNpb3MgZGUgY2FsaWRhZCB5IGNvbiBsYSBtw6FzIGFsdGEgdGVjbm9sb2fDrWEuXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0FuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J215LTUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzPkJyb2NodXJlPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmEgb2J0ZW5lciB1bmEgdmlzacOzbiBjb21wbGV0YSBkZSBudWVzdHJvcyBzZXJ2aWNpb3MgeSB2ZW50YWphcywgdGUgaW52aXRhbW9zIGEgZGVzY2FyZ2FyIG51ZXN0cm8gYnJvY2h1cmUgaW5mb3JtYXRpdm8uIEFxdcOtIGVuY29udHJhcsOhcyBkZXRhbGxlcyBleGhhdXN0aXZvcyBzb2JyZSBudWVzdHJhcyBvZmVydGFzLCB0ZXN0aW1vbmlvcyBkZSBjbGllbnRlcyBzYXRpc2ZlY2hvcyB5IGxhIGluZm9ybWFjacOzbiBkZSBjb250YWN0byBuZWNlc2FyaWEgcGFyYSBkYXIgZWwgc2lndWllbnRlIHBhc28gaGFjaWEgdW5hIGNvbGFib3JhY2nDs24gZXhpdG9zYS4gwqFEZXNjdWJyZSBjw7NtbyBwb2RlbW9zIGF5dWRhcnRlIGEgYWxjYW56YXIgdHVzIG9iamV0aXZvcyBob3kgbWlzbW8hXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGRmVmlld2VyIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VydmljaW9fZWxlZ2lkby5sZW5ndGggPT09IDEgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExhenlTZXJ2aWNpb3MgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L1BhZ2VzTGF5b3V0PlxuICAgICAgICA8Lz5cbiAgICApO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMYXp5U2VydmVjZXNEZXRhaWwgKCkge1xuICAgIGNvbnN0IHsgaXNWaXNpYmxlLCByZWYgfSA9IHVzZUludGVyc2VjdGlvbk9ic2VydmVyKCcxMDBweCcpO1xuICBcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiTGF6eVNlcnZlY2VzRGV0YWlsXCIgcmVmPXtyZWZ9PlxuICAgICAgICAgICAge2lzVmlzaWJsZSA/IDxTZXJ2ZWNlc0RldGFpbCAvPiA6IG51bGx9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG4gIH0iXSwiZmlsZSI6InNlcnZlY2VzRGV0YWlsLTUzNDU2YjVmLmpzIn0=